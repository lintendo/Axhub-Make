# Axure 资产提取流程

用于提取 sitemap、主题、数据模型、项目文档与业务文档。

## 输出位置

- 主题：`src/themes/<theme-key>/`
- 数据模型：`assets/database/`
- 文档：`assets/docs/`

## 流程

### 1) 站点地图

- 使用 `get_axure_sitemap` 获取页面结构、页面数量和核心页面清单。

### 2) 设计主题

- 选择 3-5 个核心页面（首页/登录/主要功能页，视觉元素丰富）。
- 获取这些页面截图（首屏或关键区域），用于分析设计语言与视觉风格。
- 对每个页面调用 `get_page_theme`，合并颜色、字体、间距、圆角、阴影等 tokens。
- 基于多页面截图总结设计规范，输出 `DESIGN-SPEC.md`。
- 输出 `globals.css` 或 `designToken.json`（designToken.json 必须包含 `name` 字段，二选一，遵循 `theme-generation-guide.md`）与 `index.tsx` 主题演示页。

### 3) 数据模型

- 识别数据密集型页面（列表/表单/详情）；必要时用 `search_axure` 辅助定位。
- 使用 `get_axure_text` 提取文本并识别字段与列表结构。
- 跨页面合并字段并去重，生成 `assets/database/<table>.json`。

关键规则：
- 文件名使用英文；`tableName` 使用中文。
- 字段名优先中文，且与原型显示一致。
- 每个表 10-30 条记录，`id` 唯一且为数值类型。

### 4) 项目文档

- 站点地图文档：保持层级结构，页面名称可点击并指向原型 URL。
- 项目简介：项目名称、页面数量、功能模块、设计风格、数据模型概览。

### 5) 业务文档（用户请求时）

- Domain Model（业务领域模型）/ Business Relationship Model（业务关系模型）/ Business Flow or Process（业务流程模型）/ State Machine or Lifecycle（状态与生命周期模型）/ Permission or Access Model（权限模型）
- 数据不足时明确说明原因。

## 默认方案（用户未明确需求时）

1. 获取站点地图
2. 提取设计主题并生成设计规范文档
3. 识别数据模型
4. 生成项目文档

## 用户交互指南

### 初始对话

```
您好！我可以帮您从 Axure 原型中提取资产（主题 / 数据模型 / 项目文档）。

请提供原型链接，我将为您：
1. 提取设计主题并生成设计规范文档
2. 识别数据模型
3. 生成项目文档

请提供原型 URL，或告诉我您的具体需求。
```

### 环境检测失败

```
⚠️ 检测到本项目MCP 未安装或配置有误。
请先安装本项目MCP 扩展才能继续。
```

### 需求确认

```
✓ 已获取原型站点地图，共 [X] 个页面。

默认方案：
- 从核心页面提取设计主题并生成设计规范文档
- 识别数据模型
- 生成项目文档

回复"接受"按默认方案执行，或告诉我您的具体需求。
```

### 进度通知

```
正在处理...
✓ 已获取站点地图
✓ 已提取主题数据
⏳ 正在分析数据模型...
```

### 完成总结

```
✅ 已完成！

生成的资产：
- 设计主题：src/themes/<theme-key>/
- 设计规范文档：src/themes/<theme-key>/DESIGN-SPEC.md
- 数据模型：assets/database/
- 项目文档：assets/docs/

后续建议：
💡 我还可以为您：
- 还原页面：告诉我需要还原的页面名称或 URL
- 生成业务文档：领域模型、业务流程、状态模型等

需要吗？
```

### 关键原则

- 主动确认重要操作
- 及时反馈进度
- 清晰总结成果
- 提供选项而非强制
- 友好处理错误
- 引导后续操作
