import"./chunks/modulepreload-polyfill.js";import{I as Ae,T as Ve,r as o,s as U,j as e,M as et,ac as It,H as Me,u as fe,E as Qe,S as Le,a5 as Ot,ad as Qs,ae as gt,af as Te,ag as jt,b as V,ah as bt,ai as Ye,aj as tt,t as He,ak as en,l as Ut,v as qt,al as tn,o as _e,am as Yt,a3 as sn,an as nn,L as We,V as Zt,d as Qt,ao as on,ap as vt,aq as St,Q as rn,ar as Ct,D as $t,P as an,G as es,K as ln,N as cn,O as dn,$ as ce,as as ts,at as ss,h as Se,i as hn,k as pn,m as st,w as ns,x as os,y as un,e as kt,z as fn,A as mn,B as xt,au as rs,p as Tt,a0 as gn,av as xn,aw as yn,ax as _t,ay as wn,az as jn,aA as bn,U as as,aB as vn,aC as Sn,R as Cn,C as $n,a as Ft,aD as kn,aE as Bt,aa as Tn,ab as En,F as In,aF as Rn,g as An,aG as Dn}from"./chunks/vendor.js";import{g as Pn}from"./chunks/index.js";const Mt="axhub-admin-active-tab",Wt="axhub-admin-create-mode",Vt="axhub-admin-generate-axure",Ht="axhub-admin-create-reference",Jt="axhub-make-dark-mode",yt=[{id:"desktop",name:"ç”µè„‘",width:0,height:0,type:"desktop"},{id:"mobile",name:"æ‰‹æœº",width:10,height:21.7,type:"mobile",ratio:"21.7:10"},{id:"tablet",name:"å¹³æ¿",width:10,height:14.3,type:"tablet",ratio:"10:14.3"}],Et={async deleteItem(a){const h=await fetch("/api/delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:a})});if(!h.ok){const i=await h.json();throw new Error(i.error||"åˆ é™¤å¤±è´¥")}return h.json()},async unsetReference(a){const h=await fetch("/api/unset-reference",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:a})});if(!h.ok){const i=await h.json();throw new Error(i.error||"å–æ¶ˆå‚è€ƒå¤±è´¥")}return h.json()},async getWsClients(){const a=await fetch("/api/ws/clients");return a.ok?(await a.json()).clients||[]:[]},async sendWsMessage(a){const h=await fetch("/api/ws/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!h.ok){const i=await h.text();throw new Error(i||"å‘é€å¤±è´¥")}return h.json()},async fetchCode(a){const h=await fetch(a);if(!h.ok)throw new Error(`è·å–æ„å»ºä»£ç å¤±è´¥ï¼Œè¯·è®© AI ä¿®å¤: ${h.statusText}`);return h.text()},async fetchHackCss(a,h){const i=`${window.location.origin}/${a}/${h}/hack.css`;try{const x=await fetch(i);if(x.ok)return await x.text()}catch(x){console.warn("fetch hack.css failed",x)}return""},async fetchSpecMd(a,h){const i=`${window.location.origin}/${a}/${h}/spec.md`;try{const x=await fetch(i);if(x.ok)return await x.text()}catch(x){console.warn("Error fetching spec.md",x)}return""},async reviewCode(a){const h=await fetch("/api/code-review",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:a})});if(!h.ok){const i=await h.json();throw new Error(i.error||"ä»£ç æ£€æŸ¥å¤±è´¥")}return h.json()}},{TextArea:Nn}=Ae,{Text:Ue}=Ve,zn=({open:a,onClose:h,imageConfig:i,setImageConfig:x,onDimensionChange:m,onSwapDimensions:L,onDimensionBlur:F,isExporting:N,onExport:g,onCopyConfig:X,activeTab:c,itemName:z})=>{const q=c==="elements"?"å…ƒç´ ":"é¡µé¢",[B,b]=o.useState(null),[R,I]=o.useState(!1),[J,M]=o.useState(!1),[E,G]=U.useMessage(),[K,te]=o.useState("export"),[r,Y]=o.useState(""),[T,Z]=o.useState(""),[se,W]=o.useState(!1);o.useEffect(()=>{(async()=>{if(T&&K==="copyConfig"){W(!0);try{if(!await H()){Z(""),Y(""),W(!1);return}const O=await X(T);Y(O)}catch{E.error("åŠ è½½é…ç½®å¤±è´¥"),Y("")}finally{W(!1)}}})()},[T,K,X,E]),o.useEffect(()=>{a||(te("export"),Z(""),Y(""))},[a]);const H=async()=>{if(!z)return!0;M(!0);try{const k=`${c}/${z}`,ae=await Et.reviewCode(k);return ae.passed?!0:(b(ae),I(!0),!1)}catch(k){return console.error("ä»£ç æ£€æŸ¥å¤±è´¥:",k),!0}finally{M(!1)}},w=async()=>{await H()&&g()},l=async()=>{if(!r){E.warning("è¯·å…ˆé€‰æ‹©å¯¼å‡ºå†…å®¹");return}try{await navigator.clipboard.writeText(r),E.success("é…ç½®å·²å¤åˆ¶åˆ°å‰ªè´´æ¿")}catch{E.error("å¤åˆ¶å¤±è´¥ï¼Œè¯·æ£€æŸ¥æµè§ˆå™¨å‰ªè´´æ¿æƒé™")}},d=k=>{k.target.select()},A=async()=>{if(!B)return;const k=B.issues.filter(S=>S.type==="error"),ae=B.issues.filter(S=>S.type==="warning");let O=`ä»£ç æ£€æŸ¥æœªé€šè¿‡ï¼Œè¯·å¸®æˆ‘ä¿®å¤ä»¥ä¸‹é—®é¢˜ï¼š

`;O+=`æ–‡ä»¶ï¼š${B.file}

`,k.length>0&&(O+=`âŒ é”™è¯¯ (${k.length} ä¸ª):
`,k.forEach((S,D)=>{O+=`
${D+1}. [${S.rule}] ${S.message}
`,S.suggestion&&(O+=`   å»ºè®®: ${S.suggestion}
`)})),ae.length>0&&(O+=`
âš ï¸ è­¦å‘Š (${ae.length} ä¸ª):
`,ae.forEach((S,D)=>{O+=`
${D+1}. [${S.rule}] ${S.message}
`,S.suggestion&&(O+=`   å»ºè®®: ${S.suggestion}
`)}));try{await navigator.clipboard.writeText(O),E.success("å¤åˆ¶æˆåŠŸ"),I(!1)}catch{E.error("å¤åˆ¶å¤±è´¥ï¼Œè¯·æ£€æŸ¥æµè§ˆå™¨å‰ªè´´æ¿æƒé™")}};return e.jsxs(e.Fragment,{children:[G,e.jsx(et,{title:"å¯¼å‡ºåˆ° Axure",open:a,onCancel:h,footer:K==="export"?[e.jsx(V,{type:"primary",loading:N||J,onClick:w,children:"å¯¼å‡º"},"export")]:[e.jsx(V,{type:"primary",disabled:!r,onClick:l,children:"å¤åˆ¶é…ç½®"},"copy")],width:800,children:e.jsx(It,{activeKey:K,onChange:te,items:[{key:"export",label:"å¯¼å‡ºå›¾ç‰‡",children:e.jsxs("div",{style:{display:"flex",gap:"20px",height:"400px"},children:[e.jsx("div",{style:{flex:1,border:"1px solid #f0f0f0",borderRadius:"8px",overflow:"hidden",background:"#f5f5f5",display:"flex",alignItems:"center",justifyContent:"center"},children:i.previewUrl?e.jsx("img",{src:i.previewUrl,alt:"Preview",style:{maxWidth:"100%",maxHeight:"100%",objectFit:"contain",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"}}):e.jsx(Me,{tip:"æ­£åœ¨ç”Ÿæˆé¢„è§ˆ..."})}),e.jsxs("div",{style:{width:"240px",display:"flex",flexDirection:"column",gap:"16px"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:"8px",fontWeight:500,display:"flex",alignItems:"center",gap:"4px"},children:["å¯¼å‡ºå°ºå¯¸",e.jsx(fe,{title:"è¿”å› Axure åŒå‡»å…ƒç´ å°±å¯ä»¥æ›¿æ¢å›¾ç‰‡ï¼ŒåŒå‡»å›¾ç‰‡å·¦ä¸Šè§’æˆ–è€…åœ¨æ ·å¼é¢æ¿é‡Œç‚¹å‡»è‡ªé€‚åº”å›¾ç‰‡å³å¯æ›´æ–°å›¾ç‰‡å°ºå¯¸",children:e.jsx(Qe,{style:{color:"#999",cursor:"help"}})})]}),e.jsxs(Le,{children:[e.jsx(Ot,{value:i.width,onChange:k=>m("width",k),onBlur:F,placeholder:"å®½",style:{width:100},min:1}),e.jsx(Qs,{onClick:L,style:{color:"#999",cursor:"pointer",fontSize:14}}),e.jsx(Ot,{value:i.height,onChange:k=>m("height",k),onBlur:F,placeholder:"é«˜",style:{width:100},min:1})]})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:"8px",fontWeight:500,display:"flex",alignItems:"center",gap:"4px"},children:["å›¾ç‰‡å†…å®¹",e.jsx(fe,{title:"æ ‡é¢˜å°é¢ä¾¿äºåœ¨ Axure å†…æ›´æ”¹å°ºå¯¸",children:e.jsx(Qe,{style:{color:"#999",cursor:"help"}})})]}),e.jsx(gt.Group,{value:i.contentType,onChange:k=>x(ae=>({...ae,contentType:k.target.value})),children:e.jsxs(Le,{direction:"vertical",children:[e.jsxs(gt,{value:"title",children:[q,"æ ‡é¢˜"]}),e.jsxs(gt,{value:"screenshot",children:[q,"æˆªå›¾"]})]})})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:"8px",fontWeight:500,display:"flex",alignItems:"center",gap:"4px"},children:["åŒ…å«é…ç½®",e.jsx(fe,{title:"è‹¥åŒ…å«é…ç½®ï¼Œä»…éœ€å¯¼å…¥å›¾ç‰‡åˆ° Axureï¼Œä¸€èˆ¬ä¸éœ€è¦å†å¤åˆ¶é…ç½®æˆ–è€…ä»£ç ",children:e.jsx(Qe,{style:{color:"#999",cursor:"help"}})})]}),e.jsx(Te,{value:i.includeConfig,onChange:k=>x(ae=>({...ae,includeConfig:k})),style:{width:"100%"},options:[{label:"æ— ",value:"none"},{label:"åŸå‹",value:"code"},{label:"åŸå‹ + æ–‡æ¡£",value:"codeAndDocs"},{label:"åŸå‹ + æ–‡æ¡£ + ä»£ç ",value:"codeAndDocsAndSource"}]})]})]})]})},{key:"copyConfig",label:"å¤åˆ¶é…ç½®",children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px",height:"400px"},children:[e.jsx(jt,{message:"å¯¼å‡ºæœ¬åœ° html æˆ–è€…å‘å¸ƒåˆ° Axure Cloud æ—¶è‹¥å›¾ç‰‡å¤±æ•ˆå¯ä»¥ä½¿ç”¨æ­¤åŠŸèƒ½",type:"info",showIcon:!0}),e.jsxs("div",{children:[e.jsx("div",{style:{marginBottom:"8px",fontWeight:500},children:"å¯¼å‡ºå†…å®¹"}),e.jsx(Te,{value:T||void 0,onChange:Z,placeholder:"è¯·é€‰æ‹©å¯¼å‡ºå†…å®¹",style:{width:"100%"},options:[{label:"è¯·é€‰æ‹©å¯¼å‡ºå†…å®¹",value:"",disabled:!0},{label:"åŸå‹",value:"code"},{label:"åŸå‹ + æ–‡æ¡£",value:"codeAndDocs"},{label:"åŸå‹ + æ–‡æ¡£ + ä»£ç ",value:"codeAndDocsAndSource"}]})]}),T&&e.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column"},children:[e.jsx("div",{style:{marginBottom:"8px",fontWeight:500},children:"é…ç½®å†…å®¹"}),se?e.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",border:"1px solid #d9d9d9",borderRadius:"6px"},children:e.jsx(Me,{tip:"æ­£åœ¨åŠ è½½é…ç½®..."})}):e.jsx(Nn,{value:r,readOnly:!0,onFocus:d,style:{flex:1,fontFamily:"monospace",fontSize:"12px"},placeholder:"é…ç½®å†…å®¹å°†æ˜¾ç¤ºåœ¨è¿™é‡Œ"})]})]})}]})}),e.jsx(et,{title:"ä»£ç æ£€æŸ¥æœªé€šè¿‡",open:R,onCancel:()=>I(!1),width:600,footer:[e.jsx(V,{onClick:()=>I(!1),children:"å–æ¶ˆ"},"cancel"),e.jsx(V,{type:"primary",icon:e.jsx(tt,{}),onClick:A,children:"å¤åˆ¶ç»™ AI ä¿®å¤"},"copy")],children:B&&e.jsxs("div",{style:{maxHeight:"500px",overflowY:"auto"},children:[e.jsx(jt,{description:"ä»£ç ä¸ç¬¦åˆå¼€å‘è§„èŒƒï¼Œéœ€è¦ä¿®å¤åæ‰èƒ½å¯¼å‡º",type:"error",showIcon:!0,style:{marginBottom:"24px"}}),B.issues.filter(k=>k.type==="error").length>0&&e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx(bt,{orientation:"left",style:{margin:"0 0 16px 0",fontSize:"14px"},children:e.jsx(Ue,{type:"danger",children:"é”™è¯¯ (å¿…é¡»ä¿®å¤)"})}),e.jsx(Ye,{size:"small",dataSource:B.issues.filter(k=>k.type==="error"),renderItem:k=>e.jsx(Ye.Item,{style:{padding:"12px 0",borderBottom:"1px solid #f0f0f0"},children:e.jsxs("div",{style:{width:"100%"},children:[e.jsxs("div",{style:{marginBottom:"4px"},children:[e.jsxs(Ue,{strong:!0,children:["[",k.rule,"]"]})," ",e.jsx(Ue,{children:k.message})]}),k.suggestion&&e.jsxs("div",{style:{fontSize:"13px",color:"#8c8c8c",background:"#fafafa",padding:"8px",borderRadius:"4px"},children:["å»ºè®®: ",k.suggestion]})]})})})]}),B.issues.filter(k=>k.type==="warning").length>0&&e.jsxs("div",{children:[e.jsx(bt,{orientation:"left",style:{margin:"0 0 16px 0",fontSize:"14px"},children:e.jsx(Ue,{type:"warning",children:"è­¦å‘Š (å»ºè®®ä¿®å¤)"})}),e.jsx(Ye,{size:"small",dataSource:B.issues.filter(k=>k.type==="warning"),renderItem:k=>e.jsx(Ye.Item,{style:{padding:"12px 0",borderBottom:"1px solid #f0f0f0"},children:e.jsxs("div",{style:{width:"100%"},children:[e.jsxs("div",{style:{marginBottom:"4px"},children:[e.jsxs(Ue,{strong:!0,children:["[",k.rule,"]"]})," ",e.jsx(Ue,{children:k.message})]}),k.suggestion&&e.jsxs("div",{style:{fontSize:"13px",color:"#8c8c8c",background:"#fafafa",padding:"8px",borderRadius:"4px"},children:["å»ºè®®: ",k.suggestion]})]})})})]})]})})]})},{Text:wt}=Ve,{useToken:Ln}=He;function On({visible:a,onCancel:h,item:i,activeTab:x}){const{token:m}=Ln(),[L,F]=o.useState([]),[N,g]=o.useState(!1),[X,c]=o.useState(""),[z,q]=o.useState(""),[B,b]=o.useState(!1),[R,I]=o.useState(!1),[J,M]=o.useState(null),[E,G]=o.useState(null),K=w=>{const l=w;let d="";if(l.filePath){const A=l.filePath.indexOf("src/");d=A>=0?l.filePath.substring(A):l.filePath}else d=`${x==="pages"?"src/pages":"src/elements"}/${w.name}`;return d=d.replace(/\/index\.(t|j)sx?$/i,""),d=d.replace(/^\/+/,""),d.startsWith("src/")&&(d=d.substring(4)),d},te=w=>{const l=new Date(w),d=A=>String(A).padStart(2,"0");return`${l.getFullYear()}/${d(l.getMonth()+1)}/${d(l.getDate())} ${d(l.getHours())}:${d(l.getMinutes())}:${d(l.getSeconds())}`},r=w=>{const l=Math.floor((Date.now()-w)/1e3);let d=l/31536e3;return d>1?Math.floor(d)+" å¹´å‰":(d=l/2592e3,d>1?Math.floor(d)+" ä¸ªæœˆå‰":(d=l/86400,d>1?Math.floor(d)+" å¤©å‰":(d=l/3600,d>1?Math.floor(d)+" å°æ—¶å‰":(d=l/60,d>1?Math.floor(d)+" åˆ†é’Ÿå‰":"åˆšåˆš"))))},Y=async()=>{if(i){I(!0);try{const w=K(i);if(!w){U.error("æ— æ³•è·å–æ–‡ä»¶è·¯å¾„"),I(!1);return}const l=await fetch(`/api/git/history?path=${encodeURIComponent(w)}`),d=await l.json();l.ok?(F(d.commits),g(d.hasUncommitted),c(d.uncommittedFiles)):U.error(d.error||"åŠ è½½ç‰ˆæœ¬å†å²å¤±è´¥")}catch{U.error("åŠ è½½ç‰ˆæœ¬å†å²å¤±è´¥")}finally{I(!1)}}};o.useEffect(()=>{a&&i&&Y()},[a,i]);const T=async w=>{if(i)try{const l=K(i),d=await fetch("/api/git/restore",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:l,commitHash:w})}),A=await d.json();d.ok?(U.success("ç‰ˆæœ¬æ¢å¤æˆåŠŸ"),Y()):U.error(A.error||"ç‰ˆæœ¬æ¢å¤å¤±è´¥")}catch{U.error("ç‰ˆæœ¬æ¢å¤å¤±è´¥")}},Z=async()=>{if(!i||!z.trim()){U.warning("è¯·è¾“å…¥æäº¤ä¿¡æ¯");return}b(!0);try{const w=K(i),l=await fetch("/api/git/commit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:w,message:z})}),d=await l.json();l.ok?(U.success("æäº¤æˆåŠŸ"),q(""),Y()):U.error(d.error||"æäº¤å¤±è´¥")}catch{U.error("æäº¤å¤±è´¥")}finally{b(!1)}},se=async()=>{if(i)try{const w=K(i),l=`æˆ‘éœ€è¦æäº¤ä»¥ä¸‹ç›®å½•çš„æ›´æ”¹ï¼Œè¯·å¸®æˆ‘å¤„ç†ï¼š

ç›®æ ‡è·¯å¾„: src/${w}

è¯·æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š
1. ä½¿ç”¨ git status å’Œ git diff æŸ¥çœ‹è¯¥è·¯å¾„ä¸‹çš„å˜æ›´å†…å®¹ã€‚
2. åˆ†æå˜æ›´ï¼Œç”Ÿæˆä¸€ä¸ªç®€æ´æ˜äº†çš„ä¸­æ–‡æäº¤ä¿¡æ¯ï¼ˆCommit Messageï¼‰ã€‚
3. å‘æˆ‘å±•ç¤ºå˜æ›´æ‘˜è¦å’Œå»ºè®®çš„æäº¤ä¿¡æ¯ï¼Œå¹¶è¯¢é—®æ˜¯å¦ç»§ç»­ã€‚
4. è·å¾—ç¡®è®¤åï¼Œæ‰§è¡Œï¼š
   git add src/${w}
   git commit -m "ä½ çš„æäº¤ä¿¡æ¯"

è¯·ç›´æ¥å¼€å§‹æ‰§è¡Œç¬¬ 1 æ­¥ã€‚`;await navigator.clipboard.writeText(l),U.success("AI æŒ‡ä»¤å·²å¤åˆ¶ï¼Œè¯·ç²˜è´´ç»™åŠ©æ‰‹")}catch{U.error("å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶")}},W=async w=>{if(i){M(w);try{const l=K(i),d=await fetch("/api/git/build-version",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:l,commitHash:w})}),A=await d.json();d.ok&&A.hasSpec&&A.specUrl?window.open(A.specUrl,"_blank"):A.hasSpec?U.error(A.error||"æ— æ³•è®¿é—®è§„æ ¼æ–‡æ¡£"):U.warning("è¯¥ç‰ˆæœ¬æ²¡æœ‰è§„æ ¼æ–‡æ¡£")}catch{U.error("åŠ è½½è§„æ ¼æ–‡æ¡£å¤±è´¥")}finally{M(null)}}},H=async w=>{if(i){G(w);try{const l=K(i),d=await fetch("/api/git/build-version",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:l,commitHash:w})}),A=await d.json();d.ok&&A.hasPrototype&&A.prototypeUrl?window.open(A.prototypeUrl,"_blank"):A.hasPrototype?U.error(A.error||"æ— æ³•è®¿é—®åŸå‹"):U.warning("è¯¥ç‰ˆæœ¬æ²¡æœ‰åŸå‹æ–‡ä»¶")}catch{U.error("åŠ è½½åŸå‹å¤±è´¥")}finally{G(null)}}};return e.jsx(et,{title:`ç‰ˆæœ¬ç®¡ç† - ${i==null?void 0:i.displayName}`,open:a,onCancel:h,footer:null,width:700,centered:!0,className:"version-dialog",styles:{body:{maxHeight:"calc(100vh - 200px)",overflowY:"auto",paddingTop:12,paddingBottom:12}},destroyOnClose:!0,children:e.jsx(Me,{spinning:R,children:L.length===0&&!N?e.jsx("div",{style:{textAlign:"center",padding:"20px",color:"#999"},children:"æš‚æ— ç‰ˆæœ¬å†å²"}):e.jsx(en,{mode:"left",items:[...N?[{children:e.jsx("div",{className:"commit-item uncommitted",style:{paddingBottom:20},children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:12},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx(wt,{strong:!0,style:{fontSize:14,marginRight:8},children:"æœªæäº¤çš„æ›´æ”¹"}),e.jsx(Ut,{color:"warning",children:"æœªä¿å­˜"})]})}),e.jsxs("div",{style:{background:m.colorFillAlter,padding:12,borderRadius:8,border:`1px solid ${m.colorBorderSecondary}`},children:[e.jsx(Ae,{placeholder:"æ‰‹åŠ¨è¾“å…¥æäº¤ä¿¡æ¯...",value:z,onChange:w=>q(w.target.value),onPressEnter:Z,style:{marginBottom:12}}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("div",{style:{fontSize:12,color:m.colorTextSecondary},children:X?`${X.split(`
`).filter(Boolean).length} ä¸ªæ–‡ä»¶å˜æ›´`:"æœ‰æ–‡ä»¶å˜æ›´"}),e.jsxs(Le,{children:[e.jsx(V,{size:"small",icon:e.jsx(qt,{}),onClick:se,style:{color:m.colorPrimary,borderColor:m.colorPrimary},children:"AI æäº¤"}),e.jsx(V,{type:"primary",size:"small",onClick:Z,loading:B,disabled:!z.trim(),children:"æäº¤"})]})]})]})]})}),color:"orange",dot:e.jsx("div",{style:{width:10,height:10,background:m.colorWarning,borderRadius:"50%",border:`2px solid ${m.colorBgContainer}`}})}]:[],...L.map((w,l)=>{const d=l===0&&!N;return{children:e.jsx("div",{className:"commit-item",style:{paddingBottom:20},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{marginBottom:4,display:"flex",alignItems:"center"},children:[e.jsx(wt,{strong:!0,style:{fontSize:14,marginRight:8},children:w.message}),d&&e.jsx(Ut,{color:"success",children:"å½“å‰ç‰ˆæœ¬"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,fontSize:12,color:m.colorTextSecondary},children:[e.jsxs(Le,{size:4,children:[e.jsx(tn,{size:20,style:{backgroundColor:m.colorPrimary,fontSize:12},children:w.author?w.author[0].toUpperCase():"U"}),e.jsx("span",{children:w.author})]}),e.jsx("span",{style:{color:m.colorBorder},children:"|"}),e.jsx(fe,{title:te(w.timestamp),children:e.jsx("span",{style:{cursor:"help"},children:r(w.timestamp)})}),e.jsx("span",{style:{color:m.colorBorder},children:"|"}),e.jsx(wt,{code:!0,style:{fontSize:12,margin:0},children:w.hash.substring(0,7)})]})]}),!d&&e.jsxs(Le,{size:0,children:[e.jsx(fe,{title:"æŸ¥çœ‹è§„æ ¼æ–‡æ¡£",children:e.jsx(V,{type:"text",size:"small",icon:e.jsx(_e,{}),style:{color:m.colorTextSecondary},onClick:()=>W(w.hash),loading:J===w.hash})}),e.jsx(fe,{title:"æŸ¥çœ‹åŸå‹",children:e.jsx(V,{type:"text",size:"small",icon:e.jsx(Yt,{}),style:{color:m.colorTextSecondary},onClick:()=>H(w.hash),loading:E===w.hash})}),e.jsx(sn,{title:"ç¡®è®¤æ¢å¤",description:"ç¡®å®šè¦æ¢å¤åˆ°æ­¤ç‰ˆæœ¬å—ï¼Ÿå½“å‰æœªæäº¤çš„æ›´æ”¹å°†ä¼šä¸¢å¤±ã€‚",onConfirm:()=>T(w.hash),okText:"ç¡®è®¤",cancelText:"å–æ¶ˆ",children:e.jsx(fe,{title:"æ¢å¤æ­¤ç‰ˆæœ¬",children:e.jsx(V,{type:"text",size:"small",icon:e.jsx(nn,{}),style:{color:m.colorTextSecondary}})})})]}),d&&e.jsx(Le,{size:0})]})}),color:d?"green":"gray",dot:d?e.jsx("div",{style:{width:10,height:10,background:m.colorSuccess,borderRadius:"50%",border:`2px solid ${m.colorBgContainer}`}}):void 0}})]})})})}const{Sider:Un}=We,{useToken:_n}=He;function Fn({collapsed:a,loading:h,activeTab:i,handleTabChange:x,data:m,searchText:L,setSearchText:F,filteredItems:N,selectedItem:g,handleMenuClick:X,handleDownloadItemSource:c,handleRenameItem:z,handleSetReference:q,handleUnsetReference:B,handleDuplicateItem:b,handleDeleteItem:R,handleCopyItemPath:I,setCreateDialogVisible:J}){const{token:M}=_n(),[E,G]=o.useState(!1),[K,te]=o.useState(null),r=T=>{te(T),G(!0)},Y=o.useMemo(()=>N.map(T=>{const Z=g&&g.name===T.name,se=[{key:"rename",label:"é‡å‘½å",icon:e.jsx(Zt,{})},{key:"duplicate",label:"åˆ›å»ºå‰¯æœ¬",icon:e.jsx(tt,{})},{key:"copy-path",label:"å¤åˆ¶è·¯å¾„",icon:e.jsx(Qt,{})},{type:"divider"},{key:"version-management",label:"ç‰ˆæœ¬ç®¡ç†",icon:e.jsx(on,{})},{key:"download-source",label:"å¯¼å‡º ZIP",icon:e.jsx(vt,{})},{type:"divider"},...T.isReference?[{key:"unset-reference",label:"å–æ¶ˆå‚è€ƒ",icon:e.jsx(St,{})}]:[{key:"set-reference",label:"è®¾ç½®ä¸ºå‚è€ƒ",icon:e.jsx(St,{})}],{key:"delete",label:`åˆ é™¤${i==="elements"?"å…ƒç´ ":"é¡µé¢"}`,icon:e.jsx(rn,{}),danger:!0,disabled:T.isReference}];return{key:T.name,label:e.jsxs("div",{className:`menu-item-wrapper ${Z?"is-selected":""}`,style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",gap:6,overflow:"hidden",flex:1},children:e.jsx("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:T.displayName})}),e.jsx($t,{trigger:["click"],menu:{items:se,onClick:({key:W})=>{W==="download-source"?c(T):W==="rename"?z(T):W==="duplicate"?b(T):W==="copy-path"?I(T):W==="version-management"?r(T):W==="set-reference"?q(T):W==="unset-reference"?B(T):W==="delete"&&R(T)}},children:e.jsx(V,{type:"text",size:"small",className:"more-btn",icon:e.jsx(an,{}),onClick:W=>{W.stopPropagation()}})})]}),icon:i==="elements"?e.jsx(Ct,{}):e.jsx(_e,{})}}),[N,i,g,c,z,q,B,R,I,b]);return e.jsxs(Un,{trigger:null,collapsible:!0,collapsed:a,width:240,collapsedWidth:0,style:{background:M.colorBgContainer,borderRight:`1px solid ${M.colorBorder}`,overflow:"hidden",height:"calc(100vh - 48px)",position:"sticky",top:48},children:[e.jsxs("div",{style:{height:"100%",position:"relative"},children:[e.jsxs("div",{style:{height:"100%",overflowY:"auto"},children:[e.jsx("div",{style:{padding:"8px"},children:!a&&e.jsxs(e.Fragment,{children:[e.jsx(It,{activeKey:i,size:"small",centered:!0,onChange:T=>x(T),items:[{key:"pages",label:`é¡µé¢ (${m.pages.length})`,icon:e.jsx(_e,{})},{key:"elements",label:`å…ƒç´  (${m.elements.length})`,icon:e.jsx(Ct,{})}]}),e.jsx("div",{style:{display:"flex",gap:8,marginTop:8},children:e.jsx(Ae,{placeholder:"æœç´¢...",prefix:e.jsx(es,{}),value:L,onChange:T=>F(T.target.value),allowClear:!0,style:{flex:1}})})]})}),h?e.jsx("div",{style:{textAlign:"center",padding:"40px 0"},children:e.jsx(Me,{tip:"åŠ è½½ä¸­..."})}):e.jsxs(e.Fragment,{children:[e.jsx(ln,{mode:"inline",selectedKeys:g?[g.name]:[],items:Y,onClick:X,style:{borderRight:0}}),e.jsx("div",{style:{height:80}})]})]}),!a&&e.jsx(cn,{icon:e.jsx(dn,{}),type:"primary",style:{position:"absolute",left:24,bottom:24},onClick:()=>J(!0),tooltip:i==="elements"?"æ–°å»ºå…ƒç´ ":"æ–°å»ºé¡µé¢"})]}),e.jsx(On,{visible:E,onCancel:()=>G(!1),item:K,activeTab:i})]})}const{Title:Kt}=Ve;function Bn({open:a,onClose:h}){const[i]=ce.useForm(),[x,m]=o.useState(!1),[L,F]=o.useState([]),[N,g]=o.useState([]),[X,c]=o.useState(!1);o.useEffect(()=>{a&&(z(),q())},[a]);const z=async()=>{var b,R,I,J;try{const M=await fetch("/api/config");if(!M.ok)throw new Error("Failed to load config");const E=await M.json();i.setFieldsValue({host:E.server.host||"localhost",allowLAN:E.server.allowLAN!==!1,enableCommandAPI:E.server.enableCommandAPI||!1,projectName:((b=E.projectInfo)==null?void 0:b.name)||void 0,projectDescription:((R=E.projectInfo)==null?void 0:R.description)||void 0,defaultDoc:((I=E.projectDefaults)==null?void 0:I.defaultDoc)||void 0,defaultTheme:((J=E.projectDefaults)==null?void 0:J.defaultTheme)||void 0})}catch(M){console.error("Error loading config:",M),U.error("åŠ è½½é…ç½®å¤±è´¥")}},q=async()=>{c(!0);try{const[b,R]=await Promise.all([fetch("/api/docs"),fetch("/api/themes")]);if(b.ok){const I=await b.json();F(Array.isArray(I)?I:[])}if(R.ok){const I=await R.json();g(Array.isArray(I)?I:[])}}catch(b){console.error("Error loading assets:",b)}finally{c(!1)}},B=async()=>{try{const b=await i.validateFields();m(!0);const R=await fetch("/api/config"),I=R.ok?await R.json():{server:{host:"localhost",port:51720,allowLAN:!0}},J={server:{host:b.host,port:I.server.port||51720,allowLAN:b.allowLAN,enableCommandAPI:b.enableCommandAPI||!1},projectInfo:{name:b.projectName??null,description:b.projectDescription??null},projectDefaults:{defaultDoc:b.defaultDoc??null,defaultTheme:b.defaultTheme??null}},M=await fetch("/api/config",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(J)});if(!M.ok){const G=await M.json();throw new Error(G.error||"Failed to save config")}const E=await M.json();U.success(E.message||"é…ç½®å·²ä¿å­˜"),h()}catch(b){console.error("Error saving config:",b),U.error(b.message||"ä¿å­˜é…ç½®å¤±è´¥")}finally{m(!1)}};return e.jsx(ts,{title:"é¡¹ç›®è®¾ç½®",open:a,onClose:h,width:600,extra:e.jsxs(Le,{children:[e.jsx(V,{onClick:h,children:"å–æ¶ˆ"}),e.jsx(V,{type:"primary",onClick:B,loading:x,children:"ä¿å­˜"})]}),children:e.jsxs(ce,{form:i,layout:"vertical",initialValues:{host:"localhost",allowLAN:!0,enableCommandAPI:!1,projectName:void 0,projectDescription:void 0,defaultDoc:void 0,defaultTheme:void 0},children:[e.jsxs("div",{style:{marginBottom:24},children:[e.jsx(Kt,{level:5,style:{marginBottom:16},children:"é¡¹ç›®ç”Ÿæˆé…ç½®"}),e.jsx(jt,{type:"info",showIcon:!0,message:"é¡¹ç›®ä¿¡æ¯å°†ä½œä¸º AI ç”Ÿæˆä¸å¯¹é½çš„å…³é”®å‚è€ƒï¼Œéœ€è¦é‡å¯ç¼–è¾‘å™¨æ‰ç”Ÿæ•ˆã€‚",style:{marginBottom:16}}),e.jsx(ce.Item,{label:"é¡¹ç›®åç§°",name:"projectName",tooltip:"ç”¨äº AI ç†è§£é¡¹ç›®å®šä½ä¸äº§å‡ºé£æ ¼",children:e.jsx(Ae,{placeholder:"è¯·è¾“å…¥é¡¹ç›®åç§°",maxLength:20})}),e.jsx(ce.Item,{label:"é¡¹ç›®ç®€ä»‹",name:"projectDescription",tooltip:"ç®€è¦æè¿°é¡¹ç›®èƒŒæ™¯ã€ç›®æ ‡ç”¨æˆ·ä¸æ ¸å¿ƒåœºæ™¯",children:e.jsx(Ae.TextArea,{placeholder:"ä¾‹å¦‚ï¼šé¢å‘è¿è¥äººå‘˜çš„æ´»åŠ¨é…ç½®åå°ï¼Œå¼ºè°ƒé«˜æ•ˆé…ç½®ä¸ç¨³å®šäº¤ä»˜",rows:2,maxLength:60,showCount:!0})}),e.jsx(ce.Item,{label:"é¡¹ç›®æ€»æ–‡æ¡£",name:"defaultDoc",tooltip:"ä»â€œèµ„äº§ç®¡ç†-æ–‡æ¡£â€ä¸­é€‰æ‹©ä¸€ä¸ªä½œä¸ºé¡¹ç›®é»˜è®¤å‚è€ƒæ–‡æ¡£",children:e.jsx(Te,{allowClear:!0,loading:X,placeholder:"è¯·é€‰æ‹©é¡¹ç›®æ€»æ–‡æ¡£",options:L.map(b=>({value:b.name,label:b.displayName||b.name})),showSearch:!0,filterOption:(b,R)=>String((R==null?void 0:R.label)||"").toLowerCase().includes(b.toLowerCase())})}),e.jsx(ce.Item,{label:"é»˜è®¤ä¸»é¢˜",name:"defaultTheme",tooltip:"ä»â€œèµ„äº§ç®¡ç†-ä¸»é¢˜â€ä¸­é€‰æ‹©ä¸€ä¸ªä½œä¸ºé¡¹ç›®é»˜è®¤ä¸»é¢˜",children:e.jsx(Te,{allowClear:!0,loading:X,placeholder:"è¯·é€‰æ‹©é»˜è®¤ä¸»é¢˜",options:N.map(b=>({value:b.name,label:b.displayName||b.name})),showSearch:!0,filterOption:(b,R)=>String((R==null?void 0:R.label)||"").toLowerCase().includes(b.toLowerCase())})})]}),e.jsx(bt,{}),e.jsxs("div",{style:{marginBottom:24},children:[e.jsx(Kt,{level:5,style:{marginBottom:16},children:"æœåŠ¡å™¨é…ç½®"}),e.jsx(ce.Item,{label:"ä¸»æœºåœ°å€",name:"host",rules:[{required:!0,message:"è¯·è¾“å…¥ä¸»æœºåœ°å€"}],tooltip:"æœåŠ¡å™¨å¯åŠ¨çš„åŸŸåæˆ– IP åœ°å€",children:e.jsx(Ae,{placeholder:"localhost"})}),e.jsx(ce.Item,{label:"å…è®¸å±€åŸŸç½‘è®¿é—®",name:"allowLAN",valuePropName:"checked",tooltip:"å¼€å¯åï¼Œå±€åŸŸç½‘å†…çš„å…¶ä»–è®¾å¤‡å¯ä»¥è®¿é—®æ­¤æœåŠ¡å™¨ã€‚æ³¨æ„ï¼šå¯èƒ½å­˜åœ¨å®‰å…¨é£é™©ï¼Œè¯·ç¡®ä¿åœ¨å¯ä¿¡ç½‘ç»œç¯å¢ƒä¸­ä½¿ç”¨",children:e.jsx(ss,{})})]})]})})}const{Header:Mn}=We,{useToken:Wn}=He,Vn=a=>e.jsx("span",{role:"img","aria-label":"figma",className:"anticon anticon-figma",...a,children:e.jsxs("svg",{fill:"currentColor",fillRule:"evenodd",height:"1em",width:"1em",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",style:{verticalAlign:"middle"},children:[e.jsx("title",{children:"Figma"}),e.jsx("path",{clipRule:"evenodd",d:"M6.082 8.241C4.83 7.441 4 6.057 4 4.483 4 2.007 6.05 0 8.578 0h7.844C18.95 0 21 2.007 21 4.483c0 1.574-.829 2.959-2.082 3.758C20.17 9.041 21 10.426 21 12c0 2.476-2.05 4.483-4.578 4.483h-.084A4.615 4.615 0 0113.24 15.3v4.176C13.24 21.98 11.145 24 8.599 24 6.076 24 4 21.998 4 19.517c0-1.574.829-2.959 2.082-3.758C4.829 14.959 4 13.574 4 12c0-1.574.829-2.959 2.082-3.759zM13.24 12c0 1.676 1.387 3.034 3.098 3.034h.084c1.711 0 3.099-1.358 3.099-3.034 0-1.676-1.388-3.034-3.1-3.034h-.083c-1.71 0-3.098 1.358-3.098 3.034zm-1.48-3.034H8.578C6.867 8.966 5.48 10.324 5.48 12c0 1.672 1.382 3.029 3.089 3.034H11.76V8.966zm-3.182 7.517h-.01c-1.707.005-3.089 1.362-3.089 3.034 0 1.67 1.403 3.034 3.12 3.034 1.74 0 3.161-1.381 3.161-3.075v-2.993H8.578zm3.182-8.966H8.578c-1.711 0-3.099-1.358-3.099-3.034 0-1.676 1.388-3.034 3.1-3.034h3.181v6.068zm4.662 0H13.24V1.45h3.182c1.711 0 3.099 1.358 3.099 3.034 0 1.676-1.388 3.034-3.1 3.034z"})]})});function Hn({collapsed:a,setCollapsed:h,selectedItem:i,viewMode:x,setViewMode:m,activeTab:L,selectedDeviceId:F,setSelectedDeviceId:N,deviceSegmentOptions:g,handleOpenInspect:X,handleOpenWebEditor:c,handleExitWebEditor:z,handleSaveWebEditor:q,handleEnableTextEdit:B,handleSaveTextEdit:b,handleExitTextEdit:R,handleRefreshElement:I,handleCopyLocalLink:J,handleCopyLANLink:M,handleDownloadZip:E,getLANUrl:G,qrCodeVisible:K,setQrCodeVisible:te,wsClients:r,checkConnection:Y,handlePushToFigma:T,handleDownloadFigmaJson:Z,setIsExportModalOpen:se,handleOpenIdeFile:W,isDarkMode:H,setIsDarkMode:w,currentSpecDocKey:l="spec",textEditState:d,textEditAvailable:A,editorMode:k="none",handleRefreshEditorStatus:ae}){const[O,S]=Se.useState(null),[D,de]=Se.useState(!1),[ne,me]=Se.useState(!0),{token:oe}=Wn(),xe=k==="webEditorV2";return Se.useEffect(()=>{let P=!1;return fetch("/api/version").then(ie=>ie.ok?ie.json():Promise.reject(new Error("Request failed"))).then(ie=>{if(P)return;const De=typeof(ie==null?void 0:ie.version)=="string"?ie.version:null;S(De)}).catch(()=>{P||S(null)}),()=>{P=!0}},[]),Se.useEffect(()=>{let P=!1;return fetch("/api/config").then(ie=>ie.ok?ie.json():Promise.reject(new Error("Request failed"))).then(ie=>{var De;P||me(((De=ie==null?void 0:ie.server)==null?void 0:De.allowLAN)!==!1)}).catch(()=>{P||me(!0)}),()=>{P=!0}},[]),e.jsxs(Mn,{hasSider:!0,style:{height:"48px",display:"flex",alignItems:"center",justifyContent:"space-between",background:oe.colorBgContainer,padding:"0 16px",position:"sticky",top:0,zIndex:1e3,boxShadow:`0 2px 8px ${oe.colorBorderSecondary}`},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",width:224},children:[e.jsx(V,{type:"text",icon:a?e.jsx(hn,{}):e.jsx(pn,{}),onClick:()=>h(!a),style:{fontSize:"16px",height:40}}),e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:e.jsxs("span",{style:{fontSize:"18px",fontWeight:600,color:oe.colorText},children:["Axhub ",e.jsx("span",{style:{color:"#008F5D"},children:"Make"})]})})]}),e.jsx("div",{style:{flex:1,display:"flex",alignItems:"center"},children:e.jsx(st,{value:x,size:"small",style:{fontSize:"12px"},onChange:P=>m(P),options:[{label:"åŸå‹",value:"demo",icon:e.jsx(Yt,{})},{label:"æ–‡æ¡£",value:"spec",icon:e.jsx(St,{})}]})}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(fe,{title:H?"åˆ‡æ¢åˆ°æµ…è‰²æ¨¡å¼":"åˆ‡æ¢åˆ°æ·±è‰²æ¨¡å¼",children:e.jsx(V,{type:"text",icon:H?e.jsx(ns,{}):e.jsx(os,{}),onClick:()=>w(!H)})}),e.jsx($t,{menu:{items:[{key:"assets",label:"èµ„äº§ç®¡ç†",icon:e.jsx(_e,{}),onClick:()=>window.open(new URL("/assets.html",window.location.origin).toString(),"_blank")},{key:"settings",label:"é¡¹ç›®è®¾ç½®",icon:e.jsx(kt,{}),onClick:()=>de(!0)},{type:"divider"},{key:"help",label:"å¸®åŠ©ä¸­å¿ƒ",icon:e.jsx(fn,{}),onClick:()=>window.open("https://axhub-work.feishu.cn/wiki/space/7585489740036606927","_blank")},{key:"training",label:"åŸ¹è®­æœåŠ¡",icon:e.jsx(mn,{}),onClick:()=>window.open("https://axhub-work.feishu.cn/wiki/W8KDwcZ8eiB68Nkw4sFcGL4Wn6e","_blank")},{key:"plugin",label:"ç¼–è¾‘å™¨æ‰©å±•",icon:e.jsx(rs,{}),extra:e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx(xt,{status:r.some(P=>P.type==="vscode"||P.type==="cursor")?"success":"default"}),e.jsx("span",{style:{marginLeft:4,fontSize:12,color:r.some(P=>P.type==="vscode"||P.type==="cursor")?"#52c41a":oe.colorTextSecondary},children:r.some(P=>P.type==="vscode"||P.type==="cursor")?"å·²è¿æ¥":"æœªè¿æ¥"})]}),onClick:()=>window.open("https://static.axhub.im/chrome/axhub.vsix","_blank")},{key:"site",label:"Axhub å®˜ç½‘",icon:e.jsx(kt,{}),onClick:()=>window.open("https://axhub.im/","_blank")},{type:"divider"},{key:"version",label:"å½“å‰ç‰ˆæœ¬",icon:e.jsx(Qe,{}),extra:e.jsx("span",{style:{fontSize:12,color:oe.colorTextSecondary},children:O?`v${O}`:"-"})}]},placement:"bottomRight",children:e.jsx(V,{type:"text",icon:e.jsx(un,{})})})]}),(i||x==="spec")&&e.jsx("div",{style:{position:"absolute",left:"50%",transform:"translateX(-50%)",display:"flex",alignItems:"center"},children:e.jsx(Le,{size:"small",children:x==="spec"?e.jsx(e.Fragment,{children:e.jsx(fe,{title:`åœ¨ç¼–è¾‘å™¨ä¸­æ‰“å¼€ ${l==="prd"?"PRD":"SPEC"} æ–‡æ¡£`,children:e.jsx(V,{type:"text",size:"small",icon:e.jsx(Tt,{}),onClick:W})})}):i&&e.jsxs(e.Fragment,{children:[L==="pages"&&!xe&&e.jsx(st,{value:F,size:"small",shape:"round",onChange:P=>N(P),options:g}),e.jsx(fe,{title:"åœ¨ç¼–è¾‘å™¨ä¸­æ‰“å¼€",children:e.jsx(V,{type:"text",size:"small",icon:e.jsx(Tt,{}),onClick:W})}),e.jsx(fe,{title:xe?"é€€å‡ºå¿«é€Ÿç¼–è¾‘":"å¿«é€Ÿç¼–è¾‘",children:e.jsx(xt,{dot:!0,status:xe?"processing":"default",styles:{root:{lineHeight:1},indicator:{display:xe?"inline-flex":"none"}},children:e.jsx(V,{type:"text",size:"small",disabled:!i,onClick:()=>xe?z():c(),icon:e.jsx(Zt,{})})})}),e.jsx(fe,{title:"åˆ·æ–°",children:e.jsx(V,{type:"text",size:"small",icon:e.jsx(gn,{}),onClick:I})}),e.jsx(xn,{content:e.jsxs("div",{style:{width:160},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:4},children:[e.jsx(V,{type:"text",icon:e.jsx(tt,{}),onClick:J,style:{justifyContent:"flex-start",padding:"4px 8px",height:32},block:!0,children:"å¤åˆ¶æœ¬åœ°é“¾æ¥"}),ne&&e.jsx(V,{type:"text",icon:e.jsx(tt,{}),onClick:M,style:{justifyContent:"flex-start",padding:"4px 8px",height:32},block:!0,children:"å¤åˆ¶å±€åŸŸç½‘é“¾æ¥"}),e.jsx(V,{type:"text",icon:e.jsx(_t,{}),disabled:!0,style:{justifyContent:"flex-start",padding:"4px 8px",height:32},block:!0,children:"å‘å¸ƒåŸå‹"})]}),ne&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{height:1,background:oe.colorBorder,margin:"8px 0"}}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"8px 0px 4px"},children:[e.jsx(wn,{value:G(),size:128,bordered:!1,style:{marginBottom:8}}),e.jsx(Ve.Text,{type:"secondary",style:{fontSize:12,textAlign:"center"},children:"åŒ WiFi çš„æ‰‹æœºæ‰«ç é¢„è§ˆ"})]})]})]}),trigger:"click",placement:"bottomRight",open:K,onOpenChange:te,arrow:!1,children:e.jsx(fe,{title:"åˆ†äº«",children:e.jsx(V,{type:"text",size:"small",icon:e.jsx(yn,{})})})}),e.jsx($t,{trigger:["click"],placement:"bottomCenter",onOpenChange:P=>{P&&Y()},menu:{items:[{key:"push",label:"ä¸€é”®æ¨é€",extra:e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx(xt,{status:r.some(P=>P.type==="figma")?"success":"default"}),e.jsx("span",{style:{marginLeft:4},children:r.some(P=>P.type==="figma")?"å·²è¿æ¥":"æœªè¿æ¥"})]}),icon:e.jsx(_t,{}),disabled:!r.some(P=>P.type==="figma")},{type:"divider"},{key:"download-json",label:"ä¸‹è½½ JSON",icon:e.jsx(vt,{})},{key:"download-axure",label:"ä¸‹è½½ JSON",extra:"é€‚é… Axure",icon:e.jsx(_e,{})}],onClick:({key:P})=>{P==="push"?T():P==="download-json"?Z(!0):P==="download-axure"&&Z(!1)}},children:e.jsx(fe,{trigger:["click","hover"],title:"å¯¼å‡ºåˆ° Figma",children:e.jsx(V,{type:"text",size:"small",icon:e.jsx(Vn,{})})})}),e.jsx(V,{type:"primary",size:"small",style:{fontSize:"12px"},icon:e.jsx(vt,{}),onClick:()=>{se(!0)},children:"å¯¼å‡ºåˆ° Axure"})]})})}),e.jsx(Bn,{open:D,onClose:()=>de(!1)})]})}const Jn=({width:a,height:h,children:i,scale:x=1})=>e.jsx("div",{style:{position:"relative",padding:"12px",background:"#1f1f1f",borderRadius:"40px",boxShadow:"0 20px 40px rgba(0,0,0,0.2)",border:"4px solid #333",display:"flex",flexDirection:"column",transform:`scale(${x})`,transformOrigin:"center center"},children:e.jsx("div",{style:{width:a,height:h,background:"#fff",borderRadius:"32px",overflow:"hidden",position:"relative"},children:i})}),{Content:Kn}=We,{useToken:Gn}=He;function Xn({containerRef:a,selectedItem:h,activeTab:i,currentDevice:x,displaySize:m,scale:L,elementIframeKey:F,iframeUrl:N,elementIframeSize:g,setElementIframeSize:X,viewMode:c}){const{token:z}=Gn();return e.jsx(Kn,{ref:a,style:{background:z.colorBgLayout,position:"relative",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},children:h?c==="spec"?e.jsx("iframe",{src:N,style:{width:"100%",height:"100%",border:"none",display:"block"},title:h.displayName},F):i==="pages"&&x.id!=="desktop"?e.jsx("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Jn,{width:m.width,height:m.height,scale:L,children:e.jsx("iframe",{src:N,style:{width:"100%",height:"100%",border:"none"},title:h.displayName},F)})}):i==="elements"?e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:e.jsx("div",{style:{position:"relative",display:"inline-block"},children:e.jsx(jn,{size:g,onResize:(q,B,b)=>{if(b){const R=b.getBoundingClientRect();X({width:R.width,height:R.height})}},minWidth:50,minHeight:50,bounds:"window",enable:{top:!1,right:!0,bottom:!0,left:!1,topRight:!1,bottomRight:!0,bottomLeft:!1,topLeft:!1},handleStyles:{right:{width:"8px",right:"-4px",background:"transparent",borderRadius:"4px",transition:"all 0.2s"},bottom:{height:"8px",bottom:"-4px",background:"transparent",borderRadius:"4px",transition:"all 0.2s"},bottomRight:{width:"12px",height:"12px",right:"-6px",bottom:"-6px",background:"transparent",borderRadius:"0 0 6px 0",transition:"all 0.2s"}},handleClasses:{right:"resize-handle-right",bottom:"resize-handle-bottom",bottomRight:"resize-handle-bottomRight"},style:{border:`1px solid ${z.colorBorder}`,borderRadius:6,overflow:"hidden",background:z.colorBgContainer,boxShadow:z.boxShadow,transition:"box-shadow 0.2s"},className:"ant-card-hoverable",children:e.jsx("iframe",{src:N,style:{width:"100%",height:"100%",border:"none"},title:h.displayName},F)})})}):e.jsx("iframe",{src:N,style:{width:"100%",height:"100%",border:"none",display:"block"},title:h.displayName},F):e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:z.colorTextSecondary},children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx(bn,{style:{fontSize:"64px",marginBottom:"16px"}}),e.jsxs("div",{style:{fontSize:"16px"},children:["è¯·ä»å·¦ä¾§é€‰æ‹©ä¸€ä¸ª",i==="elements"?"å…ƒç´ ":"é¡µé¢"]})]})})})}const{Dragger:qn}=as,{Text:Gt,Title:Yn}=Ve;function Zn({visible:a,onClose:h,onOk:i,onSendPrompt:x,activeTab:m,createName:L,setCreateName:F,createReference:N,setCreateReference:g,createMode:X,setCreateMode:c,generateAxure:z,setGenerateAxure:q,referenceItems:B,selectedThemes:b,setSelectedThemes:R,availableThemes:I,selectedLibraries:J,setSelectedLibraries:M,availableLibraries:E,selectedDocs:G,setSelectedDocs:K,availableDocs:te,selectedDataAssets:r,setSelectedDataAssets:Y,availableDataAssets:T}){const{token:Z}=He.useToken(),[se,W]=o.useState(!0),[H,w]=o.useState("create"),[l,d]=o.useState("make"),[A,k]=o.useState("zip"),[ae,O]=o.useState([]),[S,D]=o.useState(!1),[de,ne]=o.useState(null),me=o.useRef(null);o.useEffect(()=>{a&&(W(!0),w("create"),d("make"),k("zip"),O([]),D(!1),ne(null))},[a]);const oe=f=>{d(f),k("zip"),O([]),ne(null)},xe=f=>["make","axhub","google_stitch"].includes(f),P=f=>["axure_prototype","web_page"].includes(f),ie=async f=>{const{file:pe,onSuccess:re,onError:he}=f,ye=pe instanceof File?pe:pe.originFileObj,Q=new FormData;Q.append("file",ye,ye.name),Q.append("uploadType",l),Q.append("targetType",m),Q.append("uploadMode","zip"),console.log("[å‰ç«¯] customRequest ä¸Šä¼ å‚æ•°:",{uploadType:l,targetType:m,fileName:ye.name,fileSize:ye.size}),D(!0);try{const le=await fetch("/api/upload",{method:"POST",body:Q}),Ee=await le.json();console.log("[å‰ç«¯] æœåŠ¡å™¨å“åº”:",Ee),le.ok&&Ee.success?(ne(Ee),re(null,pe),xe(l)?(U.success(Ee.message||"ä¸Šä¼ å¹¶è§£å‹æˆåŠŸï¼"),setTimeout(()=>{h(),window.location.reload()},1500)):U.success("æ–‡ä»¶å·²è§£å‹ï¼Œè¯·ç‚¹å‡»æŒ‰é’®å¤åˆ¶ Prompt")):(console.error("[å‰ç«¯] ä¸Šä¼ å¤±è´¥:",Ee),U.error(Ee.error||"ä¸Šä¼ å¤±è´¥"),he(new Error(Ee.error||"ä¸Šä¼ å¤±è´¥")))}catch(le){console.error("[å‰ç«¯] ä¸Šä¼ é”™è¯¯:",le),U.error("ä¸Šä¼ å¤±è´¥: "+le.message),he(le)}finally{D(!1)}},De=f=>{me.current&&window.clearTimeout(me.current),me.current=window.setTimeout(()=>{ot(f)},250)},ot=async f=>{if(S)return;const pe=f.map(Q=>Q.originFileObj).filter(Q=>!!Q);if(pe.length===0){U.error("ä¸Šä¼ æ–‡ä»¶å¤¹ä¸ºç©º");return}const re=new FormData;re.append("uploadType",l),re.append("targetType",m),re.append("uploadMode","folder");const he=pe[0].webkitRelativePath,ye=he?he.split("/")[0]:"";ye&&re.append("folderName",ye),pe.forEach(Q=>{const le=Q.webkitRelativePath||Q.name;re.append("files",Q,le),re.append("relativePaths",le)}),D(!0);try{const Q=await fetch("/api/upload",{method:"POST",body:re}),le=await Q.json();Q.ok&&le.success?(ne(le),xe(l)?(U.success(le.message||"ä¸Šä¼ æˆåŠŸï¼"),setTimeout(()=>{h(),window.location.reload()},1500)):U.success(le.message||"æ–‡ä»¶å·²ä¸Šä¼ ï¼Œè¯·ç‚¹å‡»æŒ‰é’®å¤åˆ¶ Prompt")):U.error(le.error||"ä¸Šä¼ å¤±è´¥")}catch(Q){U.error("ä¸Šä¼ å¤±è´¥: "+Q.message)}finally{D(!1)}},rt=()=>{const f=Je.find(he=>he.key===l),pe=(f==null?void 0:f.docs)||[];let re="";if(P(l)){const he=m==="elements"?"å…ƒç´ ":"é¡µé¢",ye=l==="axure_prototype"?"Axure åŸå‹é“¾æ¥":"ç½‘é¡µé“¾æ¥";re=`**ç³»ç»ŸæŒ‡ä»¤**ï¼šä½ å°†ä½œä¸ºUI/UX è®¾è®¡æ¶æ„å¸ˆ Ã— å‰ç«¯å·¥ç¨‹å¸ˆï¼ˆå¤åˆå‹ï¼‰ï¼ŒååŠ©ç”¨æˆ·ã€ŒåŸºäº${ye}å¯¼å…¥å¹¶åˆ›å»ºä¸€ä¸ª${he}ã€ã€‚

**ğŸ“‹ å‚è€ƒæŠ€èƒ½æ–‡æ¡£ï¼ˆå¿…é¡»é˜…è¯»ï¼‰**ï¼š
${pe.map(Q=>`- \`${Q}\``).join(`
`)}

**é¦–æ¬¡å›å¤æ¨¡æ¿**ï¼š
\`\`\`
æ”¶åˆ°ï¼Œæˆ‘å°†åŸºäº ${ye} å¯¼å…¥å¹¶åˆ›å»ºä¸€ä¸ª${he}ã€‚

è¯·æŠŠé“¾æ¥å‘æˆ‘ï¼ˆURLï¼‰ï¼š
\`\`\``}else{if(!de||!de.prompt){U.error("æ²¡æœ‰å¯å¤åˆ¶çš„ Prompt");return}re=de.prompt,pe.length>0&&(re+=`

ğŸ“‹ å‚è€ƒæŠ€èƒ½æ–‡æ¡£ï¼š
${pe.map(he=>`- \`${he}\``).join(`
`)}`)}navigator.clipboard.writeText(re).then(()=>{U.success("Prompt å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼Œè¯·ç²˜è´´ç»™ AI å®Œæˆå¯¼å…¥")}).catch(he=>{console.error("å¤åˆ¶å¤±è´¥:",he),U.error("å¤åˆ¶å¤±è´¥")})},at=()=>{if(H==="create")return e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:8},children:[e.jsx(V,{onClick:x,disabled:!1,children:"å‘é€åˆ° Cursor"}),e.jsx(V,{type:"primary",onClick:i,disabled:!1,children:"å¤åˆ¶ Prompt"})]});if(xe(l))return e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",gap:8},children:e.jsx(V,{onClick:h,children:"å–æ¶ˆ"})});const f=P(l)||de;return e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:8},children:[e.jsx(V,{onClick:h,children:"å…³é—­"}),e.jsx(V,{type:"primary",onClick:rt,disabled:!f,children:"å¤åˆ¶ Prompt ç»™ AI å®Œæˆå¯¼å…¥"})]})},it={name:A==="folder"?"files":"file",multiple:A==="folder",directory:A==="folder",fileList:ae,customRequest:A==="zip"?ie:void 0,beforeUpload:f=>{var re;return A==="folder"?!1:f.type==="application/zip"||f.type==="application/x-zip-compressed"||((re=f.name)==null?void 0:re.endsWith(".zip"))?!0:(U.error("è¯·ä¸Šä¼  ZIP æ ¼å¼çš„æ–‡ä»¶"),as.LIST_IGNORE)},onChange:f=>{A==="folder"?(O(f.fileList),De(f.fileList)):O(f.fileList.slice(-1))},onRemove:()=>{O([]),ne(null)},accept:A==="zip"?".zip":void 0,disabled:S},be="/skills",Je=[{key:"make",title:"Axbub Make",description:"æ”¯æŒè‡ªå·±æˆ–ä»–äººçš„ ZIP åŒ…",icon:e.jsx(Tt,{style:{fontSize:24,color:"#1890ff"}}),isDirect:!0,docs:[`${be}/local-axure-workflow/SKILL.md`]},{key:"axhub",title:"Axhub æ‰©å±•",description:"å¯å¯¼å‡ºä»»æ„ç½‘é¡µï¼ˆé™æ€ï¼‰",icon:e.jsx(rs,{style:{fontSize:24,color:"#722ed1"}}),isDirect:!0,docs:[`${be}/screenshot-page-workflow/SKILL.md`]},{key:"google_stitch",title:"Google Stitch",description:"AI é©±åŠ¨çš„ UI è®¾è®¡å·¥å…·ï¼ˆé™æ€ï¼‰",icon:e.jsx(Bt,{style:{fontSize:24,color:"#f5222d"}}),isDirect:!0,docs:[`${be}/screenshot-page-workflow/SKILL.md`]},{key:"v0",title:"V0 App",description:"åœ¨çº¿åº”ç”¨ç”Ÿæˆå¹³å°",icon:e.jsx(qt,{style:{fontSize:24,color:"#52c41a"}}),isDirect:!1,docs:[`${be}/v0-project-converter/SKILL.md`]},{key:"google_aistudio",title:"Google AIStudio",description:"åœ¨çº¿åº”ç”¨ç”Ÿæˆå¹³å°",icon:e.jsx(Bt,{style:{fontSize:24,color:"#faad14"}}),isDirect:!1,docs:[`${be}/ai-studio-project-converter/SKILL.md`]},{key:"axure_prototype",title:"Axure åŸå‹é“¾æ¥",description:"æ”¯æŒåœ¨çº¿æˆ–æœ¬åœ°é¢„è§ˆçš„é“¾æ¥",icon:e.jsx(Qt,{style:{fontSize:24,color:"#1890ff"}}),isDirect:!1,docs:[`${be}/axure-prototype-workflow/SKILL.md`,`${be}/axure-prototype-workflow/page-restoration.md`]},{key:"web_page",title:"ç½‘é¡µé“¾æ¥",description:"æ”¯æŒä»»æ„ç½‘é¡µé“¾æ¥",icon:e.jsx(kt,{style:{fontSize:24,color:"#13c2c2"}}),isDirect:!1,docs:[`${be}/web-page-workflow/SKILL.md`,`${be}/web-page-workflow/page-restoration.md`]}],lt=()=>e.jsxs(ce,{requiredMark:!1,labelCol:{style:{width:"120px"}},wrapperCol:{style:{minWidth:0}},children:[e.jsx(ce.Item,{label:m==="elements"?"å…ƒç´ åç§°":"é¡µé¢åç§°",children:e.jsx(Ae,{placeholder:"ç•™ç©ºåˆ™ç”± AI ç”Ÿæˆï¼Œæ‰¹é‡ç”Ÿæˆå»ºè®®ç•™ç©º",value:L,onChange:f=>F(f.target.value),maxLength:20,showCount:!0})}),B.length>0&&e.jsx(ce.Item,{label:"å‚è€ƒæ¡ˆä¾‹",tooltip:`å¯åœ¨${m==="elements"?"å…ƒç´ ":"é¡µé¢"}åˆ—è¡¨ä¸­å°†å…¶è®¾ä¸ºæˆ–å–æ¶ˆä¸ºå‚è€ƒæ¡ˆä¾‹`,children:e.jsx(Te,{style:{width:"100%"},placeholder:"ä¸é€‰æ‹©å‚è€ƒæ¡ˆä¾‹",value:N||void 0,onChange:f=>g(f||""),allowClear:!0,options:B.map(f=>({value:f.name,label:f.displayName}))})}),e.jsx("div",{children:e.jsx(V,{type:"link",onClick:()=>W(!se),icon:se?e.jsx(vn,{}):e.jsx(Sn,{}),style:{padding:0},children:se?"æ›´å¤šé…ç½®":"æ”¶èµ·é…ç½®"})}),!se&&e.jsxs(e.Fragment,{children:[I.length>0&&e.jsx(ce.Item,{label:"ä¸»é¢˜",tooltip:"AI ä¼šæ ¹æ®æ‰€é€‰ä¸»é¢˜ç”ŸæˆåŸå‹ï¼Œä¸»é¢˜å¯åœ¨èµ„äº§ç®¡ç†é¡µé¢ä¸­è¿›è¡Œç®¡ç†",children:e.jsx(Te,{mode:"multiple",style:{width:"100%"},placeholder:"è¯·é€‰æ‹©ä¸»é¢˜ï¼ˆå¯å¤šé€‰ï¼‰",value:b,onChange:f=>R(f),allowClear:!0,options:I.map(f=>({value:f.name,label:f.displayName}))})}),T.length>0&&e.jsx(ce.Item,{label:"å¼•ç”¨æ•°æ®",tooltip:"AI ä¼šæ ¹æ®æ‰€é€‰æ•°æ®ç”ŸæˆåŸå‹ï¼Œæ•°æ®å¯åœ¨æ•°æ®ç®¡ç†é¡µé¢ä¸­è¿›è¡Œç®¡ç†",children:e.jsx(Te,{mode:"multiple",style:{width:"100%"},placeholder:"è¯·é€‰æ‹©å‚è€ƒæ•°æ®ï¼ˆå¯å¤šé€‰ï¼‰",value:r,onChange:f=>Y(f),allowClear:!0,options:T.map(f=>({value:f.name,label:f.displayName}))})}),E.length>0&&e.jsx(ce.Item,{label:"å‰ç«¯åº“",tooltip:"AI ä¼šæ ¹æ®æ‰€é€‰å‰ç«¯åº“ç”ŸæˆåŸå‹ï¼Œå‰ç«¯åº“å¯åœ¨èµ„äº§ç®¡ç†é¡µé¢ä¸­è¿›è¡Œç®¡ç†",children:e.jsx(Te,{mode:"multiple",style:{width:"100%"},placeholder:"è¯·é€‰æ‹©å‰ç«¯åº“ï¼ˆå¯å¤šé€‰ï¼‰",value:J,onChange:f=>M(f),allowClear:!0,options:E.map(f=>({value:f.name,label:f.displayName}))})}),te.length>0&&e.jsx(ce.Item,{label:"å‚è€ƒæ–‡æ¡£",tooltip:"AI ä¼šæ ¹æ®æ‰€é€‰æ–‡æ¡£ç”ŸæˆåŸå‹ï¼Œæ–‡æ¡£å¯åœ¨èµ„äº§ç®¡ç†é¡µé¢ä¸­è¿›è¡Œç®¡ç†",children:e.jsx(Te,{mode:"multiple",style:{width:"100%"},placeholder:"è¯·é€‰æ‹©å‚è€ƒæ–‡æ¡£ï¼ˆå¯å¤šé€‰ï¼‰",value:G,onChange:f=>K(f),options:te.map(f=>({value:f.name,label:f.displayName}))})}),e.jsx(ce.Item,{label:"ç”Ÿæˆæµç¨‹",children:e.jsx(Te,{style:{width:"100%"},value:X,onChange:f=>c(f),options:[{value:"simultaneous",label:"åŒæ—¶ç”Ÿæˆè§„æ ¼æ–‡æ¡£å’ŒåŸå‹"},{value:"specFirst",label:"æŒ‰ è§„æ ¼æ–‡æ¡£ > åŸå‹ é¡ºåº"}]})}),e.jsx(ce.Item,{label:"Axure æ¨¡å¼",tooltip:"ä¸å½±å“å¯¼å‡º Axure ï¼Œå…³é—­åˆ™ä¸ç”Ÿæˆä¸ Axure åŸç”Ÿå…ƒç´ äº¤äº’çš„åŠŸèƒ½ï¼Œä½†å¯ä»¥æå‡ç”Ÿæˆé€Ÿåº¦",children:e.jsx(ss,{checked:z,onChange:f=>q(f)})})]})]}),ct=()=>e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:24},children:[e.jsxs("div",{children:[e.jsx(Yn,{level:5,style:{marginBottom:16},children:"é€‰æ‹©å¯¼å…¥æ¥æº"}),e.jsx(Cn,{gutter:[16,16],children:Je.map(f=>e.jsx($n,{span:12,children:e.jsx(Ft,{hoverable:!0,bodyStyle:{padding:16,height:"100%",display:"flex",alignItems:"center"},style:{height:"100%",borderColor:l===f.key?Z.colorInfo:void 0,backgroundColor:l===f.key?Z.colorFillAlter:void 0},onClick:()=>oe(f.key),children:e.jsx(Ft.Meta,{avatar:f.icon,title:e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:e.jsx(Gt,{ellipsis:!0,style:{fontSize:13,fontWeight:500},children:f.title})}),description:e.jsx("div",{style:{fontSize:12,color:"#888",marginTop:4},children:f.description}),style:{width:"100%"}})})},f.key))})]}),!P(l)&&e.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8},children:[e.jsx(Gt,{type:"secondary",style:{fontSize:12},children:"ä¸Šä¼ æ–¹å¼"}),e.jsx(st,{size:"small",value:A,onChange:f=>{k(f),O([]),ne(null)},options:[{label:"ZIP",value:"zip"},{label:"æ–‡ä»¶å¤¹",value:"folder"}]})]}),e.jsx("div",{style:{flex:1,minHeight:120},children:e.jsx(qn,{...it,style:{background:"#fafafa",border:"1px dashed #d9d9d9",height:"100%"},children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",height:"100%",padding:"16px 0"},children:[e.jsx("p",{className:"ant-upload-drag-icon",style:{marginBottom:8},children:e.jsx(kn,{style:{color:Z.colorInfo,fontSize:36}})}),e.jsx("p",{className:"ant-upload-text",style:{fontSize:14,marginBottom:4},children:A==="zip"?"ç‚¹å‡»æˆ–æ‹–æ‹½ ZIP æ–‡ä»¶ä¸Šä¼ ":"ç‚¹å‡»æˆ–æ‹–æ‹½æ–‡ä»¶å¤¹ä¸Šä¼ "}),e.jsx("p",{className:"ant-upload-hint",style:{color:"#888",fontSize:12,padding:"0 16px"},children:xe(l)?"å¯¼å…¥åå¯é€šè¿‡ AI è¿›è¡Œç¼–è¾‘å’Œä¼˜åŒ–":"ä¸Šä¼ åéœ€è¦ AI è¾…åŠ©å¯¼å…¥"})]})})})]})]});return e.jsx(ts,{placement:"left",destroyOnClose:!0,title:e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx(st,{value:H,onChange:f=>w(f),options:[{label:m==="elements"?"æ–°å»ºå…ƒç´ ":"æ–°å»ºé¡µé¢",value:"create"},{label:m==="elements"?"å¯¼å…¥å…ƒç´ ":"å¯¼å…¥é¡µé¢",value:"upload"}],style:{fontWeight:500}})}),open:a,onClose:h,width:600,footer:at(),styles:{body:{padding:24,overflow:"auto"},header:{borderBottom:"1px solid #f0f0f0",padding:"16px 24px"}},children:H==="create"?lt():ct()})}const nt={simultaneous:{mode:"simultaneous",displayName:"ç›´æ¥ç”Ÿæˆ",description:"é˜…è¯»è§„èŒƒ â†’ è®¾è®¡ â†’ ç”Ÿæˆ spec.md + index.tsx",steps:["é˜…è¯»è§„èŒƒ â†’ è®¾è®¡ â†’ ç”Ÿæˆ spec.md + index.tsx"],templates:["spec-template.md"],requiresConfirmation:[!1]},specFirst:{mode:"specFirst",displayName:"è§„æ ¼ä¼˜å…ˆ",description:"é˜…è¯»è§„èŒƒ â†’ è®¾è®¡ â†’ ç”Ÿæˆ spec.mdï¼ˆéœ€ç”¨æˆ·ç¡®è®¤ï¼‰â†’ ç”Ÿæˆ index.tsx",steps:["é˜…è¯»è§„èŒƒ â†’ è®¾è®¡ â†’ spec.mdï¼ˆç¡®è®¤ï¼‰â†’ index.tsx"],templates:["spec-template.md"],requiresConfirmation:[!0,!1]}};function Qn(a,h){const i=h==="elements"?"å…ƒç´ ":"é¡µé¢",x=h==="elements"?"elements":"pages",m=`src/${x}/${a.name}`,L=`src/${x}/ref-${a.name}`;return`å°† \`${m}\` è®¾ä¸ºå‚è€ƒæ¡ˆä¾‹ï¼š

1. ç§»åŠ¨åˆ° \`${L}\`
2. å‚è€ƒ \`/rules/development-standards.md\`
3. åœ¨ index.tsx é¡¶éƒ¨æ·»åŠ ï¼š
\`\`\`typescript
/**
 * @name ${a.displayName}
 * æœ¬æ–‡ä»¶æ˜¯æ¼”ç¤ºæ–‡ä»¶ï¼Œå±•ç¤ºæœ¬é¡¹ç›®${i}å¼€å‘è§„èŒƒ
 * å®é™…å¼€å‘æ—¶åªéœ€ä¿ç•™ @name æ³¨é‡Šï¼Œä¸éœ€è¦è¯¦ç»†çš„è§„èŒƒè¯´æ˜
 */
\`\`\`
4. åœ¨å…³é”®ä»£ç æ®µæ·»åŠ  \`// ã€è§„èŒƒè¯´æ˜ã€‘\` æ³¨é‡Šï¼šå¯¼å…¥é¡ºåºã€Propså¤„ç†ã€Stateç®¡ç†ã€äº‹ä»¶å¤„ç†ã€useImperativeHandleã€JSXæ¸²æŸ“
5. æ³¨é‡Šè§£é‡Š"ä¸ºä»€ä¹ˆ"è€Œé"åšä»€ä¹ˆ"ï¼Œé‡ç‚¹è¯´æ˜æ˜“é”™ç‚¹å’Œæœ€ä½³å®è·µ`}function eo(a){return Object.prototype.hasOwnProperty.call(nt,a)}function to(a){const{hasName:h,displayName:i,itemType:x,hasReference:m,referenceDisplayName:L}=a,F=m&&L?`
å‚è€ƒæ¡ˆä¾‹ï¼š${L}`:"";return h?`**ç³»ç»Ÿäº¤äº’è¦æ±‚**ï¼š
- æ”¶åˆ°æœ¬æ¡ç³»ç»ŸæŒ‡ä»¤åï¼Œå¿…é¡»å…ˆå‘ç”¨æˆ·å›å¤ä¸€æ¬¡ï¼Œå¹¶ç­‰å¾…ç”¨æˆ·è¡¥å……ä¿¡æ¯/ç¡®è®¤ï¼›æœªå®Œæˆå¯¹é½å‰ä¸è¦ç”Ÿæˆä»»ä½•æ–‡ä»¶ã€ä»£ç æˆ–æ–‡æ¡£
- é¦–æ¬¡å›å¤å¿…é¡»ä¸¥æ ¼ä½¿ç”¨ä»¥ä¸‹æ¨¡æ¿ï¼Œä¸è¦è¾“å‡ºå®ç°å†…å®¹

**é¦–æ¬¡å›å¤æ¨¡æ¿**ï¼š
\`\`\`
æ”¶åˆ°ï¼Œå‡†å¤‡åˆ›å»º **${i}** ${x}ã€‚${F}

è¯·è¯¦ç»†æè¿°æ‚¨çš„éœ€æ±‚ï¼š
\`\`\``:`**ç³»ç»Ÿäº¤äº’è¦æ±‚**ï¼š
- æ”¶åˆ°æœ¬æ¡ç³»ç»ŸæŒ‡ä»¤åï¼Œå¿…é¡»å…ˆå‘ç”¨æˆ·å›å¤ä¸€æ¬¡ï¼Œå¹¶ç­‰å¾…ç”¨æˆ·è¡¥å……ä¿¡æ¯/ç¡®è®¤ï¼›æœªå®Œæˆå¯¹é½å‰ä¸è¦ç”Ÿæˆä»»ä½•æ–‡ä»¶ã€ä»£ç æˆ–æ–‡æ¡£
- é¦–æ¬¡å›å¤å¿…é¡»ä¸¥æ ¼ä½¿ç”¨ä»¥ä¸‹æ¨¡æ¿ï¼Œä¸è¦è¾“å‡ºå®ç°å†…å®¹

**é¦–æ¬¡å›å¤æ¨¡æ¿**ï¼š
\`\`\`
æ”¶åˆ°ï¼Œå‡†å¤‡åˆ›å»º${x}ã€‚${F}

è¯·è¯¦ç»†æè¿°æ‚¨çš„éœ€æ±‚ï¼ˆå¦‚éœ€åˆ›å»ºå¤šä¸ª${x}ï¼Œè¯·ä¸€å¹¶è¯´æ˜ï¼‰ï¼š
\`\`\``}function so(a){return a?`

**Axure API**ï¼šâœ… å·²å¯ç”¨
- éœ€è¦ä½¿ç”¨ Axure API å®ç°ç»„ä»¶äº¤äº’åŠŸèƒ½
- **âš ï¸ å¿…é¡»å®Œæ•´é˜…è¯» \`/rules/axure-api-guide.md\`ï¼Œä¸è¦è·³è¿‡ï¼**
- è¯¥æ–‡æ¡£åŒ…å«å®Œæ•´çš„ Axure API æ¥å£è§„èŒƒã€ä½¿ç”¨ç¤ºä¾‹å’Œæœ€ä½³å®è·µ`:`

**Axure API**ï¼šâŒ æœªå¯ç”¨
- æœ¬æ¬¡ä½¿ç”¨æ ‡å‡† React ç»„ä»¶å³å¯ï¼Œä¸éœ€è¦ Axure API`}function Xt(){return`   - æ–‡ä»¶ç»“æ„ã€ä¾èµ–å¼•ç”¨ã€æ ·å¼è§„èŒƒã€å¯¼å‡ºè§„èŒƒ
   - âš ï¸ **éªŒæ”¶æ ‡å‡†**ï¼šå®Œæˆåå¿…é¡»å¯¹ç…§æ­¤æ–‡æ¡£æ£€æŸ¥å®ç°`}function is(a){const{createMode:h,modeConfig:i,generateAxure:x}=a;return h==="simultaneous"?`

**æ ¸å¿ƒæµç¨‹**ï¼šæ”¶åˆ°ç”¨æˆ·éœ€æ±‚ â†’ ${i.description}

**ğŸ“‹ å¿…è¯»è§„èŒƒæ–‡æ¡£**ï¼š
1. **\`/rules/design-guide.md\`** â­ï¸ è®¾è®¡æµç¨‹ï¼ˆå¿…é¡»å…ˆå®Œæˆï¼‰
   - èµ„æ–™æ”¶é›†ã€ä¸šåŠ¡åœºæ™¯è¯†åˆ«ã€æ•°æ®æºæŸ¥æ‰¾ã€å†…å®¹è§„åˆ’ã€è§†è§‰è®¾è®¡

2. **\`/rules/development-standards.md\`**
${Xt()}

3. **\`/assets/templates/spec-template.md\`**
   - spec.md æ–‡æ¡£æ¨¡æ¿ï¼Œä½¿ç”¨æ­¤æ¨¡æ¿ç”Ÿæˆè§„æ ¼æ–‡æ¡£${x?`

4. **\`/rules/axure-api-guide.md\`** âš ï¸ Axure API å¿…è¯»ï¼
   - æ¥å£è§„èŒƒã€Props å¤„ç†ã€äº‹ä»¶å¤„ç†ã€Container ä½¿ç”¨`:""}`:h==="specFirst"?`

**æ ¸å¿ƒæµç¨‹**ï¼šæ”¶åˆ°ç”¨æˆ·éœ€æ±‚ â†’ ${i.description}

**ğŸ“‹ å¿…è¯»è§„èŒƒæ–‡æ¡£**ï¼š
1. **\`/rules/requirements-alignment.md\`** â­ï¸ éœ€æ±‚å¯¹é½ï¼ˆç¬¬ä¸€æ­¥ï¼‰
   - éœ€æ±‚ç¡®è®¤æ¸…å•ã€æ²Ÿé€šç­–ç•¥ã€å¯è§†åŒ–æµç¨‹

2. **\`/rules/design-guide.md\`** â­ï¸ è®¾è®¡æµç¨‹ï¼ˆç¬¬äºŒæ­¥ï¼Œå¿…é¡»å®Œæˆï¼‰
   - èµ„æ–™æ”¶é›†ã€ä¸šåŠ¡åœºæ™¯è¯†åˆ«ã€æ•°æ®æºæŸ¥æ‰¾ã€å†…å®¹è§„åˆ’ã€è§†è§‰è®¾è®¡

3. **\`/rules/development-standards.md\`**
${Xt()}

4. **\`/assets/templates/spec-template.md\`**
   - spec.md æ–‡æ¡£æ¨¡æ¿ï¼Œä½¿ç”¨æ­¤æ¨¡æ¿ç”Ÿæˆè§„æ ¼æ–‡æ¡£${x?`

5. **\`/rules/axure-api-guide.md\`** âš ï¸ Axure API å¿…è¯»ï¼
   - æ¥å£è§„èŒƒã€Props å¤„ç†ã€äº‹ä»¶å¤„ç†ã€Container ä½¿ç”¨`:""}

**ç¡®è®¤æµç¨‹**ï¼š
- å®Œæˆ spec.md åï¼Œå‘ŠçŸ¥ç”¨æˆ·ï¼š"spec.md å·²å®Œæˆï¼Œè¯·ç¡®è®¤æ˜¯å¦æ»¡è¶³éœ€æ±‚ã€‚ç¡®è®¤åå°†ç”Ÿæˆä»£ç å®ç°ã€‚"
- ç­‰å¾…ç”¨æˆ·ç¡®è®¤åå†ç”Ÿæˆ index.tsx`:is({createMode:"simultaneous",modeConfig:nt.simultaneous,generateAxure:x})}function no(a){const{referencePath:h,referenceDisplayName:i}=a;return h?`

**ğŸ“ å‚è€ƒæ¡ˆä¾‹**ï¼ˆâ­ï¸ ä¼˜å…ˆå‚è€ƒï¼‰ï¼š
- è·¯å¾„ï¼š\`${h}\`
- åç§°ï¼š${i}
- **è¯·ä¼˜å…ˆå‚è€ƒæ­¤æ¡ˆä¾‹çš„ä»£ç ç»“æ„å’Œå®ç°æ–¹å¼**
- å­¦ä¹ å…¶æ–‡ä»¶ç»„ç»‡ã€å‘½åè§„èŒƒã€ä»£ç é£æ ¼`:""}function Ze(a){const{title:h,selected:i,available:x,toLine:m}=a;return i.length===0?"":`

${h}${i.map(L=>{const F=x.find(N=>N.name===L);return`
${m(L,F)}`}).join("")}`}function oo(a,h,i,x,m,L=[],F=[],N=[],g=[],X=[],c=[],z=[],q=[],B=!0){const b=h==="elements",R=b?"å…ƒç´ ":"é¡µé¢",I=b?"elements":"pages",J=a.trim().length>0,M=a.trim(),E=x?m.find(l=>l.name===x):null,G=E?`src/${I}/${E.name}`:null,K=eo(i)?nt[i]:nt.simultaneous,te=J?`**ç³»ç»ŸæŒ‡ä»¤**ï¼šä½ å°†ä½œä¸ºUI/UX è®¾è®¡æ¶æ„å¸ˆ Ã— å‰ç«¯å·¥ç¨‹å¸ˆï¼ˆå¤åˆå‹ï¼‰ï¼Œåˆ›å»º ${R}ã€Œ**${M}**ã€åŸå‹`:`**ç³»ç»ŸæŒ‡ä»¤**ï¼šä½ å°†ä½œä¸ºUI/UX è®¾è®¡æ¶æ„å¸ˆ Ã— å‰ç«¯å·¥ç¨‹å¸ˆï¼ˆå¤åˆå‹ï¼‰ï¼Œåˆ›å»ºä¸€ä¸ª${R}åŸå‹`,r=to({hasName:J,displayName:M,itemType:R,hasReference:!!E,referenceDisplayName:E==null?void 0:E.displayName}),Y=so(B),T=is({createMode:i,modeConfig:K,generateAxure:B}),Z=no({referencePath:G,referenceDisplayName:E==null?void 0:E.displayName}),se=Ze({title:"**ğŸ“š å‚è€ƒæ–‡æ¡£**ï¼ˆç›¸å¯¹è·¯å¾„ /assets/docs/ï¼‰ï¼š",selected:L,available:F,toLine:(l,d)=>`- **\`/assets/docs/${l}\`** - ${(d==null?void 0:d.displayName)||l}`}),W=Ze({title:"**ğŸ¨ ä¸»é¢˜é…ç½®**ï¼ˆç›¸å¯¹è·¯å¾„ /src/themes/ï¼Œåªæä¾›è·¯å¾„ï¼Œä¸å±•å¼€æ–‡ä»¶å†…å®¹ï¼‰ï¼š",selected:N,available:g,toLine:(l,d)=>`- ${(d==null?void 0:d.displayName)||l}
  - \`/src/themes/${l}/DESIGN-SPEC.md\`ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
  - \`/src/themes/${l}/designToken.json\`
  - \`/src/themes/${l}/globals.css\` æˆ– \`/src/themes/${l}/style.css\`ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
  - \`/src/themes/${l}/index.tsx\``}),H=Ze({title:"**ğŸ“¦ å‰ç«¯åº“æ–‡æ¡£**ï¼ˆç›¸å¯¹è·¯å¾„ /assets/libraries/ï¼‰ï¼š",selected:X,available:c,toLine:(l,d)=>`- **\`/assets/libraries/${l}\`** - ${(d==null?void 0:d.displayName)||l}`}),w=Ze({title:"**ğŸ“Š å‚è€ƒæ•°æ®**ï¼ˆç›¸å¯¹è·¯å¾„ /assets/database/ï¼‰ï¼š",selected:z,available:q,toLine:(l,d)=>`- **\`/assets/database/${l}\`** - ${(d==null?void 0:d.displayName)||l}`});return`${te}

âš ï¸ **é‡è¦æç¤º**ï¼šè¯·åŠ¡å¿…å®Œæ•´é˜…è¯»ä»¥ä¸‹æ‰€æœ‰è§„èŒƒæ–‡æ¡£å’Œå‚è€ƒèµ„æ–™ï¼Œä¸è¦å·æ‡’ï¼è¿™äº›æ–‡æ¡£åŒ…å«äº†å…³é”®çš„å¼€å‘è§„èŒƒå’Œæœ€ä½³å®è·µã€‚
${T}${Z}${W}${w}${H}${se}${Y}

${r}`}function ro(a,h,i,x){if(!a)return"";const m=window.location.origin+(h==="demo"?a.demoUrl:a.specUrl),L=new URL(m,window.location.origin);return h==="demo"&&i==="webEditorV2"?L.searchParams.set("editor","webEditorV2"):L.searchParams.delete("editor"),x!=null&&x.width&&Number.isFinite(x.width)?L.searchParams.set("width",String(Math.round(x.width))):L.searchParams.delete("width"),L.toString()}function ao(a,h,i){const[x,m]=o.useState(!1),[L,F]=o.useState(""),[N,g]=o.useState(()=>localStorage.getItem(Ht)||""),[X,c]=o.useState(()=>localStorage.getItem(Wt)||"simultaneous"),[z,q]=o.useState(()=>localStorage.getItem(Vt)==="true"),[B,b]=o.useState([]),[R,I]=o.useState([]),[J,M]=o.useState([]),[E,G]=o.useState([]),[K,te]=o.useState([]),[r,Y]=o.useState([]),[T,Z]=o.useState([]),[se,W]=o.useState([]),[H,w]=o.useState(!1);o.useEffect(()=>{localStorage.setItem(Wt,X)},[X]),o.useEffect(()=>{localStorage.setItem(Vt,String(z))},[z]),o.useEffect(()=>{localStorage.setItem(Ht,N)},[N]);const l=o.useMemo(()=>(a==="elements"?h.elements:h.pages).filter(S=>S.isReference),[h,a]);o.useEffect(()=>{if(!H)return;(async()=>{try{const S=await fetch("/api/docs");if(S.ok){const D=await S.json();Y(D)}}catch(S){console.error("Failed to load docs:",S)}})()},[H]),o.useEffect(()=>{if(!H)return;(async()=>{try{const S=await fetch("/api/themes");if(S.ok){const D=await S.json();I(D)}}catch(S){console.error("Failed to load themes:",S)}})()},[H]),o.useEffect(()=>{if(!H)return;(async()=>{try{const S=await fetch("/api/libraries");if(S.ok){const D=await S.json();G(D);const de=D.find(ne=>ne.name==="tailwind-css.md"||ne.name.startsWith("tailwind-css"));de&&J.length===0&&M([de.name])}}catch(S){console.error("Failed to load libraries:",S)}})()},[H]),o.useEffect(()=>{if(!H)return;(async()=>{try{const S=await fetch("/api/data/tables");if(S.ok){const de=(await S.json()).map(ne=>({name:`${ne.fileName}.json`,displayName:ne.tableName}));W(de)}}catch(S){console.error("Failed to load data assets:",S)}})()},[H]),o.useEffect(()=>{x&&(N&&(l.some(S=>S.name===N)||g("")),w(!0))},[x,l,N]);const d=async()=>{console.log("=== ç‚¹å‡»äº†ç”Ÿæˆ AI Prompt æŒ‰é’® ==="),console.log("createName:",L),console.log("createReference:",N),console.log("createMode:",X),console.log("activeTab:",a);const O=await A();O&&(console.log("å¼€å§‹å¤åˆ¶ Prompt åˆ°å‰ªè´´æ¿..."),console.log("Prompt é•¿åº¦:",O.length),navigator.clipboard.writeText(O).then(()=>{console.log("âœ… å¤åˆ¶æˆåŠŸ"),m(!1),F(""),te([]),b([]),M([]),Z([]),i.success("å¤åˆ¶æˆåŠŸï¼Œè¯·è¿”å› IDE å‘é€ç»™ AI"),w(!1),Y([]),I([]),G([]),W([])}))},A=async()=>oo(L,a,X,N,l,K,r,B,R,J,E,T,se,z);return{createDialogVisible:x,createName:L,createReference:N,createMode:X,generateAxure:z,referenceItems:l,selectedThemes:B,availableThemes:R,selectedLibraries:J,availableLibraries:E,selectedDocs:K,availableDocs:r,selectedDataAssets:T,availableDataAssets:se,setCreateDialogVisible:m,setCreateName:F,setCreateReference:g,setCreateMode:c,setGenerateAxure:q,setSelectedThemes:b,setSelectedLibraries:M,setSelectedDocs:te,setSelectedDataAssets:Z,handleCreateSubmit:d,handleSendPrompt:async()=>{const O=await A();if(!O)return;const S=i.loading("æ­£åœ¨å‘é€ Prompt...",0);try{const D=async(de,ne)=>{const me=await fetch("/api/ws/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:de,payload:ne})});if(!me.ok){const oe=await me.json().catch(()=>null);throw new Error((oe==null?void 0:oe.error)||"å‘é€å¤±è´¥")}};await D("handshake","test-client"),await D("insert",O),i.success("å·²é€šè¿‡ WebSocket å‘é€"),w(!1),Y([]),I([]),G([]),W([])}catch(D){i.error((D==null?void 0:D.message)||"å‘é€å¤±è´¥")}finally{S()}},handleCreateCancel:()=>{m(!1),F(""),te([]),b([]),M([]),Z([]),w(!1),Y([]),I([]),G([]),W([])}}}function io({isDarkMode:a,setIsDarkMode:h}){const[i,x]=o.useState(!0),[m,L]=o.useState({elements:[],pages:[]}),[F,N]=o.useState(!1),[g,X]=o.useState(()=>{const t=localStorage.getItem(Mt);return t==="elements"||t==="pages"?t:"pages"}),[c,z]=o.useState(null),[q,B]=o.useState("desktop"),[b,R]=o.useState(1),I=Se.useRef(null),J=Se.useRef(null),[M,E]=o.useState(!1),G=Se.useRef(null),[K,te]=o.useState(""),[r,Y]=U.useMessage(),[T,Z]=et.useModal(),[se,W]=o.useState({enabled:!1,editedCount:0}),[H,w]=o.useState({mode:"none",webEditor:{active:!1,undoCount:0,redoCount:0},textEdit:{enabled:!1,editedCount:0},inspecta:{enabled:!1}}),l=Se.useRef(!1),[d,A]=o.useState({width:600,height:400}),[k,ae]=o.useState(0),[O,S]=o.useState(!1),[D,de]=o.useState("demo"),[ne,me]=o.useState("spec"),oe=Se.useRef(null),{createDialogVisible:xe,createName:P,createReference:ie,createMode:De,generateAxure:ot,referenceItems:rt,selectedThemes:at,availableThemes:it,selectedLibraries:be,availableLibraries:Je,selectedDocs:lt,availableDocs:ct,selectedDataAssets:f,availableDataAssets:pe,setCreateDialogVisible:re,setCreateName:he,setCreateReference:ye,setCreateMode:Q,setGenerateAxure:le,setSelectedThemes:Ee,setSelectedLibraries:ls,setSelectedDocs:cs,setSelectedDataAssets:ds,handleCreateSubmit:hs,handleSendPrompt:ps,handleCreateCancel:us}=ao(g,m,r),fs=()=>{const t=`${window.location.protocol}//${window.location.hostname}:${window.location.port}${(c==null?void 0:c.demoUrl)||""}`;navigator.clipboard.writeText(t).then(()=>{r.success("æœ¬åœ°é“¾æ¥å·²å¤åˆ¶")}).catch(s=>{r.error("å¤åˆ¶å¤±è´¥"),console.error("å¤åˆ¶å¤±è´¥:",s)}),S(!1)},ms=()=>{const t=Nt();navigator.clipboard.writeText(t).then(()=>{r.success("å±€åŸŸç½‘é“¾æ¥å·²å¤åˆ¶")}).catch(s=>{r.error("å¤åˆ¶å¤±è´¥"),console.error("å¤åˆ¶å¤±è´¥:",s)}),S(!1)},gs=()=>{window.open("/api/download-dist","_blank"),S(!1)},xs=async()=>{let t="",s="";const n=["vscode","cursor"];if(c){const u=c;if(D==="spec"){const j=ne==="prd"?"prd.md":"spec.md";t=`src/${g}/${c.name}/${j}`,s=`[${c.displayName} - ${j==="prd.md"?"PRD":"SPEC"}](${Ge(c)}/${j})`}else{if(u.filePath){const j=u.filePath.indexOf("src/");j>=0?t=u.filePath.substring(j):t=u.filePath}else t=`src/${g}/${c.name}/index.tsx`;s=`[${c.displayName}](${Ge(c)})`}}else{r.warning("è¯·å…ˆé€‰æ‹©æ¡ç›®");return}const p=r.loading("æ­£åœ¨å‘é€åˆ° IDE...",0);try{s&&await navigator.clipboard.writeText(s);const u=await Et.sendWsMessage({type:"handshake",payload:"prototype-admin",targetClientTypes:n});if(!(u!=null&&u.sent)){r.warning("ç¼–è¾‘å™¨æœªè¿æ¥ï¼Œå·²å¤åˆ¶äº†æ–‡ä»¶æ ‡é¢˜ï¼Œå¯å‰å¾€ä½¿ç”¨");return}const j=await Et.sendWsMessage({type:"open-file",payload:t,targetClientTypes:n});if(!(j!=null&&j.sent)){r.warning("ç¼–è¾‘å™¨æœªè¿æ¥ï¼Œå·²å¤åˆ¶äº†æ–‡ä»¶æ ‡é¢˜ï¼Œå¯å‰å¾€ä½¿ç”¨");return}r.success("å·²åœ¨ç¼–è¾‘å™¨ä¸­æ‰“å¼€ï¼Œå¹¶å¤åˆ¶äº†æ–‡ä»¶æ ‡é¢˜ï¼Œå¯å‰å¾€ç¼–è¾‘")}catch(u){r.error((u==null?void 0:u.message)||"å‘é€å¤±è´¥")}finally{p()}},ys=async t=>{let s="";if(D==="spec"){const n=ne==="prd"?"prd.md":"spec.md";s=`[${t.displayName} - ${n==="prd.md"?"PRD":"SPEC"}](${Ge(t)}/${n})`}else s=`[${t.displayName}](${Ge(t)})`;if(!s){r.warning("æ— æ³•è·å–è·¯å¾„");return}try{await navigator.clipboard.writeText(s),r.success("è·¯å¾„å·²å¤åˆ¶")}catch(n){console.error("Failed to copy: ",n),r.error("å¤åˆ¶å¤±è´¥")}},ws=o.useMemo(()=>[{value:"desktop",icon:e.jsx(Rn,{})},{value:"mobile",icon:e.jsx(An,{})},{value:"tablet",icon:e.jsx(Dn,{})}],[]),[Oe,dt]=o.useState(!1),[js,ht]=o.useState(!1),[C,Ie]=o.useState({width:1920,height:1080,includeConfig:"code",contentType:"title",rawScreenshotUrl:"",screenshotWidth:0,screenshotHeight:0,previewUrl:""});o.useEffect(()=>{Fe()},[]),o.useEffect(()=>{const t=s=>{if(s.data&&s.data.type==="SCREENSHOT_CAPTURED")Ie(n=>({...n,rawScreenshotUrl:s.data.dataUrl,screenshotWidth:s.data.width,screenshotHeight:s.data.height}));else if(s.data&&s.data.type==="spec-doc-changed")console.log("Spec document changed:",s.data.activeDocKey),me(s.data.activeDocKey);else if(s.data&&s.data.type==="TEXT_EDIT_STATUS")W({enabled:!!s.data.enabled,editedCount:Number(s.data.editedCount||0)});else if(s.data&&s.data.type==="TEXT_EDIT_NOTICE"){const n=s.data.level||"info",p=s.data.message||"";p&&(r[n]||r.info)(p)}else if(s.data&&s.data.type==="TEXT_EDIT_SAVE_CONFIRM_REQUEST"){const n=Number(s.data.totalCount||0),p=Number(s.data.changedCount||0),u=!!s.data.exitAfterSave;T.confirm({title:"ç¡®è®¤ä¿å­˜æ–‡æœ¬æ›´æ”¹",content:e.jsxs("div",{children:[e.jsxs("div",{children:["æ£€æµ‹åˆ° ",p," å¤„æ–‡æœ¬æ›´æ”¹ã€‚"]}),e.jsxs("div",{children:["é¢„è®¡å°†æ›¿æ¢é¡¹ç›®ä¸­çš„ ",n," å¤„åŒ¹é…æ–‡æœ¬ã€‚"]}),e.jsx("div",{style:{marginTop:8,color:"#999",fontSize:12},children:"ä¿å­˜åå°†æ‰¹é‡ä¿®æ”¹ç›¸å…³æ–‡ä»¶å†…å®¹ã€‚"})]}),okText:"ç¡®è®¤ä¿å­˜",cancelText:"å–æ¶ˆ",onOk:()=>{Re({type:"TEXT_EDIT_SAVE_CONFIRM",confirmed:!0,exitAfterSave:u})},onCancel:()=>{Re({type:"TEXT_EDIT_SAVE_CONFIRM",confirmed:!1,exitAfterSave:u})}})}else if(s.data&&s.data.type==="TEXT_EDIT_SAVE_RESULT"){const n=!!s.data.success;if(l.current&&(l.current=!1,n)){const p=Pe();p!=null&&p.disable&&(p.disable(),Ne())}}else if(s.data&&s.data.type==="TEXT_EDIT_CONFLICT"){const n=Array.isArray(s.data.conflicts)?s.data.conflicts:[];T.warning({title:"å­˜åœ¨å†²çªçš„æ–‡æœ¬ä¿®æ”¹",content:e.jsxs("div",{children:[e.jsx("div",{style:{marginBottom:8},children:"æ£€æµ‹åˆ°ç›¸åŒåŸæ–‡è¢«ä¿®æ”¹æˆä¸åŒå†…å®¹ï¼Œæ— æ³•æ‰¹é‡ä¿å­˜ã€‚"}),e.jsx("div",{style:{maxHeight:200,overflow:"auto",fontSize:12,color:"#555"},children:n.map((p,u)=>e.jsxs("div",{style:{marginBottom:8},children:[e.jsxs("div",{style:{fontWeight:600},children:["åŸæ–‡ï¼š",p.original]}),e.jsxs("div",{children:["ä¿®æ”¹ä¸ºï¼š",(p.currents||[]).join(" / ")]})]},`${p.original}-${u}`))}),e.jsx("div",{style:{marginTop:8,color:"#999",fontSize:12},children:"è¯·ç¡®ä¿ç›¸åŒåŸæ–‡åªä¿®æ”¹ä¸ºä¸€ç§ç»“æœï¼Œæˆ–åˆ†æ‰¹ä¿å­˜ã€‚"})]}),okText:"çŸ¥é“äº†"})}};return window.addEventListener("message",t),()=>window.removeEventListener("message",t)},[]),o.useEffect(()=>{W({enabled:!1,editedCount:0})},[c,D,k]),o.useEffect(()=>{if(!c)return;if(C.contentType==="screenshot"&&!C.rawScreenshotUrl){Ie(s=>({...s,previewUrl:""}));return}(async()=>{const s=g==="elements"?"å…ƒç´ ":"é¡µé¢",n=pt(C.rawScreenshotUrl,C,c.displayName,s),p=new Blob([n],{type:"image/svg+xml;charset=utf-8"}),u=URL.createObjectURL(p);Ie(j=>({...j,previewUrl:u}))})()},[C.rawScreenshotUrl,C.width,C.height,C.contentType,c,g]);const pt=(t,s,n,p)=>{if(s.contentType==="title"){const u=s.width,j=s.height,v=u/2,y=j/2;return`<svg width="${u}" height="${j}" viewBox="0 0 ${u} ${j}" xmlns="http://www.w3.org/2000/svg" role="img">
              <rect width="100%" height="100%" fill="transparent" />
              <g id="textGroup" transform="translate(${v},${y})">
                <!-- Main Title -->
                <text id="mainTitle"
                      x="0" y="-12"
                      text-anchor="middle"
                      font-family="Arial, Helvetica, sans-serif"
                      font-size="28"
                      font-weight="700"
                      fill="#333">
                  ${n}
                </text>

                <!-- Description -->
                <text id="description"
                      x="0" y="18"
                      text-anchor="middle"
                      font-family="Arial, Helvetica, sans-serif"
                      font-size="14"
                      font-weight="400"
                      fill="#999">
                  Axhub Runtime ${p}
                </text>
              </g>
            </svg>`}else return`<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="${s.width}" height="${s.height}" viewBox="0 0 ${s.width} ${s.height}">
                <rect width="100%" height="100%" fill="transparent" />
                <image x="0" y="0" width="${s.width}" height="${s.height}" preserveAspectRatio="xMidYMin meet" xlink:href="${t}"/>
            </svg>`},Ke=Se.useRef(!1);o.useEffect(()=>{if(Ke.current=!1,C.contentType==="screenshot"){const t=g==="pages"?1920:500,s=g==="pages"?1080:300;Ie(n=>({...n,width:t,height:s,screenshotWidth:0,screenshotHeight:0,rawScreenshotUrl:""}))}else C.contentType==="title"&&Ie(t=>({...t,width:500,height:300}))},[g,C.contentType]),o.useEffect(()=>{Ke.current||C.contentType==="screenshot"&&(!C.screenshotWidth||!C.screenshotHeight||Ie(t=>({...t,width:C.screenshotWidth,height:C.screenshotHeight})))},[C.screenshotWidth,C.screenshotHeight]);const bs=(t,s)=>{Ke.current=!0,Ie(n=>({...n,[t]:s||0}))},vs=()=>{C.contentType==="screenshot"&&Oe&&ut()},Ss=()=>{Ke.current=!0;const t=C.width,s=C.height;Ie(n=>({...n,width:s,height:t})),setTimeout(()=>{C.contentType==="screenshot"&&Oe&&ut(s,t)},0)};o.useEffect(()=>{localStorage.setItem(Mt,g)},[g]),o.useEffect(()=>{if(!i&&m){const t=g==="elements"?m.elements:m.pages;t.length>0?(z(t[0]),g==="elements"&&A({width:600,height:400})):z(null)}},[i,m,g]);async function Fe(){var t,s;try{const n=await fetch("/api/entries.json");if(!n.ok)throw new Error("Failed to fetch data");const p=await n.json();console.log("Loaded data:",p),console.log("Reference elements:",(t=p.elements)==null?void 0:t.filter(u=>u.isReference)),console.log("Reference pages:",(s=p.pages)==null?void 0:s.filter(u=>u.isReference)),L(p)}catch(n){r.error("åŠ è½½æ•°æ®å¤±è´¥: "+n.message)}finally{x(!1)}}const Ge=t=>{const s=t;if(s.filePath){const p=s.filePath.indexOf("src/");if(p>=0){let u=s.filePath.substring(p);return u=u.replace(/\/index\.(t|j)sx?$/i,""),u}return s.filePath}return`${g==="pages"?"src/pages":"src/elements"}/${t.name}`},Cs=t=>{const s=`${g}/${t.name}`,n=`/api/zip?path=${encodeURIComponent(s)}`;window.open(n,"_blank")},$s=t=>{const s=Qn(t,g);navigator.clipboard.writeText(s),r.success("è®¾ç½®ä¸ºå‚è€ƒçš„ Prompt å·²å¤åˆ¶ï¼Œè¯·è¿”å› IDE å‘é€ç»™ AI")},ks=t=>{const s=g==="elements"?`elements/${t.name}`:`pages/${t.name}`;T.confirm({title:`ç¡®å®šè¦å–æ¶ˆ "${t.displayName}" çš„å‚è€ƒçŠ¶æ€å—ï¼Ÿ`,content:"å–æ¶ˆåè¯¥é¡¹ç›®å°†ä¸å†æ˜¯å‚è€ƒé¡¹ç›®ã€‚",okText:"ç¡®è®¤",cancelText:"å–æ¶ˆ",async onOk(){const n=r.loading("æ­£åœ¨å–æ¶ˆå‚è€ƒ...",0);try{const p=await fetch("/api/unset-reference",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:s})});if(!p.ok){const u=await p.json();throw new Error(u.error||"å–æ¶ˆå‚è€ƒå¤±è´¥")}r.success("å·²å–æ¶ˆå‚è€ƒ"),z(null),Fe()}catch(p){r.error(p.message||"å–æ¶ˆå‚è€ƒå¤±è´¥")}finally{n()}}})},Ts=t=>{const s=g==="elements"?"å…ƒç´ ":"é¡µé¢",n=g==="elements"?`elements/${t.name}`:`pages/${t.name}`;let p=t.displayName;T.confirm({title:`é‡å‘½å${s}`,content:e.jsx("div",{children:e.jsx(Ae,{autoFocus:!0,defaultValue:t.displayName,placeholder:"è¯·è¾“å…¥æ–°çš„æ˜¾ç¤ºåç§°ï¼ˆæ”¯æŒä¸­æ–‡ï¼‰",onChange:u=>{p=u.target.value}})}),okText:"ç¡®è®¤",cancelText:"å–æ¶ˆ",async onOk(){const u=p.trim();if(!u)return r.error("è¯·è¾“å…¥æ–°çš„åç§°"),Promise.reject();if(u===t.displayName)return;const j=r.loading("æ­£åœ¨é‡å‘½å...",0);try{const v=await fetch("/api/rename",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:n,newName:u})});if(!v.ok){const y=await v.json().catch(()=>({}));throw new Error(y.error||"é‡å‘½åå¤±è´¥")}r.success("é‡å‘½åæˆåŠŸ"),z(null),Fe()}catch(v){return r.error(v.message||"é‡å‘½åå¤±è´¥"),Promise.reject()}finally{j()}}})},Es=async(t,s)=>{const n=await fetch("/api/items/check-references",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({itemType:t,itemName:s})});if(!n.ok){const p=await n.json().catch(()=>({}));throw new Error(p.error||"æ£€æŸ¥å¼•ç”¨å¤±è´¥")}return n.json()},Is=t=>{if(t.isReference){r.error("å‚è€ƒé¡¹ç›®æ— æ³•åˆ é™¤ï¼Œè¯·å…ˆå–æ¶ˆå‚è€ƒçŠ¶æ€");return}const s=g,n=g==="elements"?"å…ƒç´ ":"é¡µé¢",p=`${s}/${t.name}`,u=async()=>{const v=r.loading("æ­£åœ¨åˆ é™¤...",0);try{const y=await fetch("/api/delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:p})});if(!y.ok){const $=await y.json();throw new Error($.error||"åˆ é™¤å¤±è´¥")}r.success("åˆ é™¤æˆåŠŸ"),z(null),Fe()}catch(y){r.error(y.message||"åˆ é™¤å¤±è´¥")}finally{v()}};(async()=>{const v=r.loading("æ­£åœ¨æ£€æŸ¥å¼•ç”¨...",0);try{const y=await Es(s,t.name),$=Array.isArray(y==null?void 0:y.references)?y.references:[];if($.length>0){const _=$.map(ee=>`- ${ee}`).join(`
`),ge=`æˆ‘å¸Œæœ›åˆ é™¤${n} "${t.displayName}" (${t.name})ã€‚
è¯¥${n}ä½äºé¡¹ç›®ä¸­çš„ç›¸å¯¹è·¯å¾„ä¸ºï¼š\`src/${s}/${t.name}\`

å·²æ£€æµ‹åˆ°ä»¥ä¸‹æ–‡ä»¶å¼•ç”¨äº†è¯¥${n}ï¼š
${_}

è¯·å¸®æˆ‘æ‰§è¡Œä»¥ä¸‹æ£€æŸ¥å’Œæ“ä½œï¼š
1. æ ¸å¯¹ä¸Šè¿°å¼•ç”¨æ˜¯å¦å‡†ç¡®ï¼Œå¹¶è¡¥å……é—æ¼çš„å¼•ç”¨æ–‡ä»¶ï¼ˆä¼˜å…ˆæ£€æŸ¥ \`src/elements/\` ä¸ \`src/pages/\`ï¼‰ã€‚
2. å¦‚æœç¡®è®¤ç»§ç»­åˆ é™¤ï¼Œè¯·ååŠ©æˆ‘å°†è¯¥${n}åœ¨å¼•ç”¨å¤„æ›¿æ¢ä¸ºåˆé€‚çš„å®ç°ï¼Œå¹¶æ›´æ–°å¼•ç”¨è·¯å¾„ï¼Œä½¿è¿™äº›åŸå‹ä¸å†ä¾èµ–è¯¥ç›®å½•ã€‚
3. å®Œæˆä¸Šè¿°è§£è€¦æ“ä½œåï¼Œå†å½»åº•åˆ é™¤ç›®å½• \`src/${s}/${t.name}\`ã€‚`;T.confirm({title:`æ£€æµ‹åˆ°${n}å¼•ç”¨`,width:720,okText:"å¤åˆ¶æç¤º",cancelText:"å–æ¶ˆ",content:e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:8},children:["å·²æ£€æµ‹åˆ°ä»¥ä¸‹æ–‡ä»¶å¼•ç”¨äº†è¯¥",n,"ï¼š"]}),e.jsx("pre",{style:{maxHeight:260,overflow:"auto",background:"#f6f7f9",padding:12,borderRadius:6},children:_})]}),async onOk(){try{await navigator.clipboard.writeText(ge),r.success("å·²å¤åˆ¶å¤„ç†æç¤ºï¼Œè¯·è¿”å›ç¼–è¾‘å™¨è®© AI å¤„ç†ã€‚")}catch(ee){console.error("Failed to copy: ",ee),r.error("å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤„ç†")}}})}else T.confirm({title:`ç¡®å®šè¦åˆ é™¤${n} "${t.displayName}" å—ï¼Ÿ`,content:"æœªæ£€æµ‹åˆ°å¼•ç”¨æ–‡ä»¶ã€‚åˆ é™¤åæ— æ³•æ¢å¤ï¼Œè¯·è°¨æ…æ“ä½œã€‚",okText:"ç¡®è®¤åˆ é™¤",okType:"danger",cancelText:"å–æ¶ˆ",onOk:u})}catch(y){r.error(y.message||"æ£€æŸ¥å¼•ç”¨å¤±è´¥")}finally{v()}})()},Rs=async t=>{const s=g==="elements"?"elements":"pages",n=`src/${s}/${t.name}`,p=(j,v)=>{let y=`${j}-copy`,$=1;for(;v.includes(y);)$++,y=`${j}-copy${$}`;return y},u=r.loading("æ­£åœ¨åˆ›å»ºå‰¯æœ¬...",0);try{const j=(g==="elements"?m.elements:m.pages).map(_=>_.name),v=p(t.name,j),y=`src/${s}/${v}`,$=await fetch("/api/copy",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sourcePath:n,targetPath:y})});if(!$.ok){const _=await $.json();throw new Error(_.error||"åˆ›å»ºå‰¯æœ¬å¤±è´¥")}r.success(`å‰¯æœ¬ "${v}" åˆ›å»ºæˆåŠŸ`),Fe()}catch(j){r.error(j.message||"åˆ›å»ºå‰¯æœ¬å¤±è´¥")}finally{u()}},Xe=o.useMemo(()=>{const t=g==="elements"?m.elements:m.pages;if(!K)return t;const s=K.toLowerCase();return t.filter(n=>n.displayName.toLowerCase().includes(s)||n.name.toLowerCase().includes(s))},[m,g,K]),As=async({key:t})=>{H.mode==="webEditorV2"&&await At({restoreDevice:!1});const s=Xe.find(n=>n.name===t);s&&(z(s),me("spec"),g==="elements"&&A({width:600,height:400}))},Rt=t=>{X(t),te(""),z(null),me("spec")},Ds=()=>{ae(t=>t+1)},Pe=t=>{var n,p;const s=t??qe();return(p=(n=s==null?void 0:s.contentWindow)==null?void 0:n.DevTemplateBootstrap)==null?void 0:p.editors},Ne=()=>{var n;const t=Pe(),s=(n=t==null?void 0:t.getStatus)==null?void 0:n.call(t);s&&w(s)},Ps=()=>{if(!c)return"";const t=window.location.origin+c.demoUrl,s=new URL(t,window.location.origin);if(s.searchParams.set("editor","inspecta"),we.id!=="desktop"){const n=Be.width?Math.round(Be.width):we.width;n&&s.searchParams.set("width",String(n))}return s.toString()},Ns=()=>we.id==="desktop"?null:(Be.width?Math.round(Be.width):we.width)||null,zs=()=>{if(!c){r.warning("è¯·å…ˆé€‰æ‹©ä¸€ä¸ªæ¡ç›®");return}if(D==="spec"){r.warning("æ–‡æ¡£æ¨¡å¼ä¸‹æ— æ³•è¿›è¡Œç¼–è¾‘");return}const t=Ps();if(!t)return;const s=Pe();if(s!=null&&s.disable)try{s.disable(),Ne()}catch(n){console.error("[Axhub] é€€å‡ºå½“å‰ç¼–è¾‘æ¨¡å¼å¤±è´¥:",n)}window.open(t,"_blank")},Ls=!!c&&D!=="spec",qe=()=>{const t=document.querySelectorAll("iframe");return t[t.length-1]||null},Os=t=>{const s=Date.now(),n=(t==null?void 0:t.timeoutMs)??5e3,p=t==null?void 0:t.expectedEditor;return new Promise(u=>{const j=y=>{const $=y.getAttribute("src")||y.src;if(!$)return!1;try{return new URL($,window.location.origin).searchParams.get("editor")===p}catch{return!1}},v=()=>{var _;const y=qe();if(!y||!y.isConnected){if(Date.now()-s>=n){u(null);return}setTimeout(v,50);return}if(!j(y)){if(Date.now()-s>=n){u(null);return}setTimeout(v,50);return}const $=y.contentWindow;if((_=$==null?void 0:$.DevTemplateBootstrap)!=null&&_.editors){u(y);return}if(Date.now()-s>=n){u(null);return}setTimeout(v,50)};v()})},Re=(t,s)=>{const n=s??qe();return!n||!n.contentWindow?(r.warning("æœªæ‰¾åˆ°å¯æ“ä½œçš„é¢„è§ˆçª—å£"),!1):(n.contentWindow.postMessage(t,"*"),!0)},Us=async()=>{if(!c){r.warning("è¯·å…ˆé€‰æ‹©ä¸€ä¸ªæ¡ç›®");return}if(D==="spec"){r.warning("æ–‡æ¡£æ¨¡å¼ä¸‹æ— æ³•è¿›è¡Œç¼–è¾‘");return}try{const t=qe(),s=Ns();J.current=s??null,E(!0),we.id!=="desktop"&&(I.current=q,B("desktop"));const n=await Os({previousIframe:we.id!=="desktop"?t:null,expectedEditor:"webEditorV2"});if(!n){E(!1),r.warning("é¢„è§ˆçª—å£å°šæœªå°±ç»ª");return}const p=Pe(n);if(!(p!=null&&p.enable)){E(!1),r.warning("å½“å‰é¢„è§ˆé¡µæœªå¯ç”¨ç¼–è¾‘å™¨");return}s&&Re({type:"WEB_EDITOR_SET_ROOT_SIZE",width:s},n),await Promise.resolve(p.enable("webEditorV2")),Ne(),oe.current===null&&(oe.current=F),N(!0)}catch(t){console.error("[Axhub] å¯åŠ¨ç¼–è¾‘å™¨å¤±è´¥:",t),r.error("å¯åŠ¨ç¼–è¾‘å™¨å¤±è´¥")}},At=async t=>{const s=Pe();if(!(s!=null&&s.disable)){r.warning("å½“å‰é¢„è§ˆé¡µæœªå¯ç”¨ç¼–è¾‘å™¨"),E(!1),oe.current!==null&&(N(oe.current),oe.current=null),J.current&&(Re({type:"WEB_EDITOR_RESET_ROOT_SIZE"}),J.current=null),(t==null?void 0:t.restoreDevice)!==!1&&I.current&&B(I.current),I.current=null;return}try{await Promise.resolve(s.disable()),Ne(),E(!1),oe.current!==null&&(N(oe.current),oe.current=null),J.current&&(Re({type:"WEB_EDITOR_RESET_ROOT_SIZE"}),J.current=null);const n=(t==null?void 0:t.restoreDevice)!==!1;n&&I.current&&B(I.current),I.current=null,n||(I.current=null)}catch(n){console.error("[Axhub] é€€å‡ºç¼–è¾‘å™¨å¤±è´¥:",n),r.error("é€€å‡ºç¼–è¾‘å™¨å¤±è´¥")}},_s=()=>{},Fs=()=>{if(!c){r.warning("è¯·å…ˆé€‰æ‹©ä¸€ä¸ªæ¡ç›®");return}if(D==="spec"){r.warning("æ–‡æ¡£æ¨¡å¼ä¸‹æ— æ³•è¿›è¡Œæ–‡æœ¬ç¼–è¾‘");return}const t=Pe();if(t!=null&&t.enable){try{t.enable("textEdit"),Ne()}catch(s){console.error("[Axhub] å¯åŠ¨æ–‡æœ¬ç¼–è¾‘å¤±è´¥:",s),r.error("å¯åŠ¨æ–‡æœ¬ç¼–è¾‘å¤±è´¥")}return}Re({type:"TEXT_EDIT_ENABLE"})},Dt=(t=!1)=>{if(!c){r.warning("è¯·å…ˆé€‰æ‹©ä¸€ä¸ªæ¡ç›®");return}if(D==="spec"){r.warning("æ–‡æ¡£æ¨¡å¼ä¸‹æ— æ³•è¿›è¡Œæ–‡æœ¬ç¼–è¾‘");return}l.current=t,Re({type:"TEXT_EDIT_SAVE",exitAfterSave:t})},Bs=()=>{if(!c){r.warning("è¯·å…ˆé€‰æ‹©ä¸€ä¸ªæ¡ç›®");return}if(D==="spec"){r.warning("æ–‡æ¡£æ¨¡å¼ä¸‹æ— æ³•è¿›è¡Œæ–‡æœ¬ç¼–è¾‘");return}if(se.editedCount>0){T.confirm({title:"é€€å‡ºæ–‡æœ¬ç¼–è¾‘",content:`æ£€æµ‹åˆ° ${se.editedCount} å¤„æœªä¿å­˜çš„æ›´æ”¹ï¼Œæ˜¯å¦ä¿å­˜åé€€å‡ºï¼Ÿ`,okText:"ä¿å­˜å¹¶é€€å‡º",cancelText:"ä¸ä¿å­˜é€€å‡º",onOk:()=>Dt(!0),onCancel:()=>{Re({type:"TEXT_EDIT_EXIT",discardChanges:!0});const s=Pe();s!=null&&s.disable&&(s.disable(),Ne())}});return}const t=Pe();if(t!=null&&t.disable){t.disable(),Ne();return}Re({type:"TEXT_EDIT_EXIT",discardChanges:!1})},Pt=(t=!0)=>new Promise((s,n)=>{const p=document.querySelectorAll("iframe"),u=p[p.length-1];if(!u||!u.contentWindow){n(new Error("æœªæ‰¾åˆ°å¯å¯¼å‡ºçš„é¢„è§ˆçª—å£"));return}const j=window.setTimeout(()=>{window.removeEventListener("message",v),n(new Error("å¯¼å‡ºè¶…æ—¶ï¼Œè¯·é‡è¯•"))},15e3),v=y=>{if(y.source===u.contentWindow&&!(!y.data||y.data.type!=="FIGMA_JSON_READY"))if(window.removeEventListener("message",v),window.clearTimeout(j),y.data.success){const $=y.data.json??y.data.data??y.data.payload;if($===void 0){n(new Error("å¯¼å‡ºæˆåŠŸä½†æœªè¿”å›æ•°æ®ï¼ˆç¼ºå°‘ json/data/payload å­—æ®µï¼‰"));return}const _=Array.isArray($)?$:$.layers||[];s({layers:_,widgetId:y.data.widgetId,pageId:y.data.pageId})}else n(new Error(y.data.error||"å¯¼å‡ºå¤±è´¥"))};window.addEventListener("message",v),u.contentWindow.postMessage({type:"EXPORT_FIGMA_JSON",rootName:(c==null?void 0:c.displayName)||(c==null?void 0:c.name),enableAutoLayout:t},"*")}),Ms=async(t=!0)=>{if(!c){r.warning("è¯·å…ˆé€‰æ‹©ä¸€ä¸ªæ¡ç›®");return}const s=r.loading("æ­£åœ¨ç”Ÿæˆ Figma JSON...",0);try{const{layers:n,widgetId:p,pageId:u}=await Pt(t),j={layers:n,...p?{widgetId:p}:{},...u?{pageId:u}:{}},v=new Blob([JSON.stringify(j,null,2)],{type:"application/json"}),y=URL.createObjectURL(v),$=document.createElement("a");$.href=y,$.download=`${c.name}-${g}.json`,document.body.appendChild($),$.click(),document.body.removeChild($),URL.revokeObjectURL(y),r.success("JSON å·²ä¸‹è½½")}catch(n){r.error((n==null?void 0:n.message)||"å¯¼å‡ºå¤±è´¥")}finally{s()}},Nt=()=>{if(!c)return"";const t=c.demoUrl,s=window.__LOCAL_IP__||"localhost",n=window.location.port||(window.location.protocol==="https:"?"443":"80");return`${window.location.protocol}//${s}:${n}${t}`},we=o.useMemo(()=>yt.find(t=>t.id===q)||yt[0],[q]);o.useEffect(()=>{yt.some(s=>s.id===q)||B("desktop")},[q]);const[Be,zt]=o.useState({width:0,height:0});o.useEffect(()=>{if(we.id==="desktop"||we.width===0||!G.current){zt({width:0,height:0}),R(1);return}const t=()=>{if(!G.current)return;const s=G.current.clientWidth*.9,n=G.current.clientHeight*.9,p=we.width,u=we.height,y=24+8,$=(s-y)/p,_=(n-y)/u,ge=Math.min($,_),ee=p*ge,Ce=u*ge;zt({width:ee,height:Ce}),R(1)};return t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[we,F]);const ut=(t,s)=>{const n=t??C.width,p=s??C.height,u=document.querySelectorAll("iframe"),j=u[u.length-1];j&&j.contentWindow&&j.contentWindow.postMessage({type:"CAPTURE_SCREENSHOT",targetWidth:n,targetHeight:p},"*")};o.useEffect(()=>{if(Oe&&C.contentType==="screenshot"){const t=g==="pages"?1920:500,s=g==="pages"?1080:300;C.width===t&&C.height===s&&ut()}if(!Oe){const t=document.querySelectorAll("iframe"),s=t[t.length-1];s&&s.contentWindow&&s.contentWindow.postMessage({type:"RESET_SCREENSHOT_STYLES"},"*")}},[Oe,C.contentType,C.width,C.height]);const[Ws,ft]=o.useState([]),Vs=window.location.port||(window.location.protocol==="https:"?"443":"80"),mt=async()=>{try{const t=await fetch("/api/ws/clients");if(t.ok){const n=(await t.json()).clients||[];return ft(n),n}else return ft([]),[]}catch(t){return console.error("Failed to check WS clients",t),ft([]),[]}};o.useEffect(()=>{mt()},[]);const Hs=async()=>{if(!c){r.warning("è¯·å…ˆé€‰æ‹©ä¸€ä¸ªæ¡ç›®");return}const t=r.loading("æ­£åœ¨æ£€æŸ¥è¿æ¥...",0),s=await mt();t(),s.length===0?T.confirm({title:"æœªæ£€æµ‹åˆ° Figma è¿æ¥",content:e.jsxs("div",{children:[e.jsx("p",{children:"è¯·ç¡®ä¿ Figma æ’ä»¶å·²æ‰“å¼€å¹¶è¿æ¥åˆ°å½“å‰æœåŠ¡ã€‚"}),e.jsxs("p",{style:{color:"#999",fontSize:12},children:["å½“å‰æœåŠ¡ç«¯å£: ",Vs]})]}),okText:"ä»è¦æ¨é€",cancelText:"å–æ¶ˆ",onOk:()=>Lt()}):Lt()},Lt=async()=>{const t=r.loading("æ­£åœ¨è·å–æ•°æ®...",0);try{const{layers:s,widgetId:n,pageId:p}=await Pt();if(t(),!s||!Array.isArray(s)||s.length===0){r.error("å›¾å±‚æ•°æ®ä¸ºç©ºï¼Œæ— æ³•æ¨é€");return}let u;g==="elements"?(n||r.warning("å…ƒç´ ç¼ºå°‘ widgetIdï¼Œå¯èƒ½å¯¼è‡´åŒæ­¥å¤±è´¥"),u={type:"sync-widget-content",widgetId:n||`element-${(c==null?void 0:c.name)||"unknown"}-${Date.now()}`,data:{layers:s},blurImages:!1,metadata:{source:"extension",timestamp:Date.now()}}):u={type:"sync-page-content",...p?{pageId:p}:{},data:{layers:s},blurImages:!1,metadata:{source:"extension",timestamp:Date.now()}};const j=r.loading("æ­£åœ¨æ¨é€åˆ° Figma...",0);try{const v=await fetch("/api/ws/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)});if(v.ok)await v.json(),r.success("æ¨é€æˆåŠŸ");else{const y=await v.text();throw new Error(y||"å‘é€å¤±è´¥")}}catch(v){r.error("æ¨é€å¤±è´¥: "+v.message)}finally{j()}}catch(s){t(),r.error((s==null?void 0:s.message)||"è·å–æ•°æ®å¤±è´¥")}},Js=(t,s,n,p=2)=>new Promise((u,j)=>{const v=new Image,y=new Blob([t],{type:"image/svg+xml;charset=utf-8"}),$=URL.createObjectURL(y);v.onload=()=>{const _=document.createElement("canvas");_.width=s*p,_.height=n*p;const ge=_.getContext("2d");if(!ge){j(new Error("Could not get canvas context"));return}ge.drawImage(v,0,0,_.width,_.height),URL.revokeObjectURL($),u(_.toDataURL("image/png"))},v.onerror=_=>{URL.revokeObjectURL($),j(_)},v.src=$}),Ks=async()=>{if(c){ht(!0);try{const t=window.location.origin+c.jsUrl,s=await fetch(t);if(!s.ok)throw new Error(`Failed to fetch code: ${s.statusText}`);const n=await s.text();let p="";if(c){const j=`${window.location.origin}/${g}/${c.name}/hack.css`;try{const v=await fetch(j);v.ok&&(p=await v.text())}catch(v){console.warn("fetch hack.css failed",v)}}const u=async(j=!1)=>{const v=`${window.location.origin}/${g}/${c.name}`,y=["spec","prd"],$={};for(const ee of y){const Ce=`${v}/${ee}.md`;try{const je=await fetch(Ce);if(je.ok){const ve=await je.text(),$e={spec:"è§„æ ¼æ–‡æ¡£",prd:"éœ€æ±‚æ–‡æ¡£"};$[ee]={name:$e[ee],content:ve}}}catch(je){console.warn(`Failed to fetch ${ee}.md`,je)}}if(j){const ee=`${g}/${c.name}`,Ce=`${window.location.origin}/api/source?path=${encodeURIComponent(ee)}`;try{const je=await fetch(Ce);if(je.ok){const $e=`\`\`\`tsx
${await je.text()}
\`\`\`
`;$.code={name:"å‚è€ƒä»£ç ",content:$e}}}catch(je){console.warn("Failed to fetch source code",je)}}const _=Object.keys($);return _.length>1?$:_.length===1?$[_[0]].content:null};if(C.contentType==="screenshot"&&!C.rawScreenshotUrl){r.warning("æ­£åœ¨ç”Ÿæˆæˆªå›¾ï¼Œè¯·ç¨å€™..."),ht(!1);return}try{let j="",v="";if(C.includeConfig!=="none"&&(j=n,C.includeConfig==="codeAndDocs"||C.includeConfig==="codeAndDocsAndSource")){const ke=C.includeConfig==="codeAndDocsAndSource",ze=await u(ke);ze&&(v=ze)}const y=g==="elements"?"å…ƒç´ ":"é¡µé¢";let $="";if(C.contentType==="title"){const ke=pt("",C,c.displayName,y),ze=await Js(ke,C.width,C.height,2);$=`<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="${C.width}" height="${C.height}" viewBox="0 0 ${C.width} ${C.height}">
                            <rect width="100%" height="100%" fill="transparent" />
                            <image x="0" y="0" width="${C.width}" height="${C.height}" preserveAspectRatio="xMidYMin meet" xlink:href="${ze}"/>
                        </svg>`}else $=pt(C.rawScreenshotUrl,C,c.displayName,y);const ge=new DOMParser().parseFromString($,"image/svg+xml"),ee=ge.querySelector("svg");if(!ee)throw new Error("SVG generation failed");if(j||v){const ke={code:j,spec:v};ee.setAttribute("AxExtraData",encodeURIComponent(JSON.stringify(ke)))}if(C.includeConfig!=="none"){const ke={time:Math.floor(Date.now()/1e3),config:{codeLink:t,...g==="pages"?{isFullScreen:!0}:{},...p?{hackCss:p}:{}}};ee.setAttribute("AxData",encodeURIComponent(JSON.stringify(ke)))}const je=new XMLSerializer().serializeToString(ge),ve=new Blob([je],{type:"image/svg+xml;charset=utf-8"}),$e=URL.createObjectURL(ve),ue=document.createElement("a");ue.href=$e,ue.download=`${c.name}.svg`,document.body.appendChild(ue),ue.click(),document.body.removeChild(ue),URL.revokeObjectURL($e),r.success("SVG å¯¼å‡ºæˆåŠŸ"),dt(!1)}catch(j){console.error("Image export failed:",j),r.error("å›¾ç‰‡å¯¼å‡ºå¤±è´¥")}}catch(t){r.error(`å¯¼å‡ºå¤±è´¥: ${t.message}`),console.error("å¯¼å‡ºå¤±è´¥:",t)}finally{ht(!1)}}},Gs=async t=>{if(!c)throw new Error("æœªé€‰æ‹©é¡¹ç›®");const s=window.location.origin+c.jsUrl,n=await fetch(s);if(!n.ok)throw new Error(`Failed to fetch code: ${n.statusText}`);const p=await n.text();let u="";const j=`${window.location.origin}/${g}/${c.name}/hack.css`;try{const $=await fetch(j);$.ok&&(u=await $.text())}catch{}const v=async($=!1)=>{const _=`${window.location.origin}/${g}/${c.name}`,ge=["spec","prd"],ee={};for(const ve of ge){const $e=`${_}/${ve}.md`;try{const ue=await fetch($e);if(ue.ok){const ke=await ue.text(),ze={spec:"è§„æ ¼æ–‡æ¡£",prd:"éœ€æ±‚æ–‡æ¡£"};ee[ve]={name:ze[ve],content:ke}}}catch(ue){console.warn(`Failed to fetch ${ve}.md`,ue)}}if($){const ve=`${g}/${c.name}`,$e=`${window.location.origin}/api/source?path=${encodeURIComponent(ve)}`;try{const ue=await fetch($e);if(ue.ok){const ze=`\`\`\`tsx
${await ue.text()}
\`\`\`
`;ee.code={name:"å‚è€ƒä»£ç ",content:ze}}}catch(ue){console.warn("Failed to fetch source code",ue)}}const Ce=Object.keys(ee);return Ce.length>1?ee:Ce.length===1?ee[Ce[0]].content:null},y={time:Math.floor(Date.now()/1e3),config:{code:p,...g==="pages"?{isFullScreen:!0}:{},...u?{hackCss:u}:{}}};if(t==="codeAndDocs"||t==="codeAndDocsAndSource"){const _=await v(t==="codeAndDocsAndSource");_&&(y.config.spec=_)}return JSON.stringify(y,null,2)},Xs=M||H.mode==="webEditorV2"?"webEditorV2":H.mode,qs=M||H.mode==="webEditorV2"?J.current??void 0:void 0,Ys=c?ro(c,D,Xs,{width:qs}):"",Zs=t=>{const s=window.location.origin+t.demoUrl;window.open(s,"_blank")};return e.jsxs(We,{style:{minHeight:"100vh"},children:[Y,e.jsx("style",{children:`
                .resize-handle-right {
                    cursor: ew-resize !important;
                    z-index: 100 !important;
                }
                .resize-handle-right::before {
                    content: '';
                    position: absolute;
                    right: 50%;
                    top: 50%;
                    transform: translate(50%, -50%);
                    width: 2px;
                    height: 40px;
                    background: var(--ant-color-border);
                    border-radius: 1px;
                    transition: all 0.2s;
                    z-index: 100;
                }
                .resize-handle-right:hover::before,
                .resize-handle-right:active::before {
                    background: var(--ant-color-text-secondary);
                    width: 3px;
                    height: 50px;
                }
                .resize-handle-bottom {
                    cursor: ns-resize !important;
                    z-index: 100 !important;
                }
                .resize-handle-bottom::before {
                    content: '';
                    position: absolute;
                    left: 50%;
                    bottom: 50%;
                    transform: translate(-50%, 50%);
                    width: 40px;
                    height: 2px;
                    background: var(--ant-color-border);
                    border-radius: 1px;
                    transition: all 0.2s;
                    z-index: 100;
                }
                .resize-handle-bottom:hover::before,
                .resize-handle-bottom:active::before {
                    background: var(--ant-color-text-secondary);
                    width: 50px;
                    height: 3px;
                }
                .resize-handle-bottomRight {
                    cursor: nwse-resize !important;
                    z-index: 100 !important;
                }
                .resize-handle-bottomRight::before {
                    content: '';
                    position: absolute;
                    right: 0;
                    bottom: 0;
                    width: 12px;
                    height: 12px;
                    background: var(--ant-color-border);
                    border-radius: 0 0 6px 0;
                    transition: all 0.2s;
                    z-index: 100;
                }
                .resize-handle-bottomRight:hover::before,
                .resize-handle-bottomRight:active::before {
                    background: var(--ant-color-border-secondary);
                    width: 16px;
                    height: 16px;
                }
                /* å®¹å™¨æ‚¬åœæ—¶æ˜¾ç¤ºæ‰‹æŸ„ */
                .ant-card-hoverable:hover .resize-handle-right::before,
                .ant-card-hoverable:hover .resize-handle-bottom::before,
                .ant-card-hoverable:hover .resize-handle-bottomRight::before {
                    background: var(--ant-color-border-secondary);
                }

                /* èœå•é¡¹ hover æ—¶æ˜¾ç¤ºæ›´å¤šæŒ‰é’® */
                .menu-item-wrapper .more-btn {
                    opacity: 0;
                    transition: opacity 0.2s;
                }
                .menu-item-wrapper:hover .more-btn,
                .menu-item-wrapper.is-selected .more-btn,
                .menu-item-wrapper .more-btn.ant-dropdown-open {
                    opacity: 1;
                }

                /* ç§»åŠ¨ç«¯å“åº”å¼æ ·å¼ */
                @media (max-width: 768px) {
                    /* éšè— PC ç«¯çš„å®Œæ•´å¸ƒå±€ */
                    .pc-layout {
                        display: none !important;
                    }
                    
                    /* æ˜¾ç¤ºç§»åŠ¨ç«¯ç®€åŒ–å¸ƒå±€ */
                    .mobile-layout {
                        display: block !important;
                    }
                }

                @media (min-width: 769px) {
                    /* PC ç«¯æ˜¾ç¤ºå®Œæ•´å¸ƒå±€ */
                    .pc-layout {
                        display: block !important;
                    }
                    
                    /* éšè—ç§»åŠ¨ç«¯å¸ƒå±€ */
                    .mobile-layout {
                        display: none !important;
                    }
                }

                /* ç§»åŠ¨ç«¯åˆ—è¡¨æ ·å¼ */
                .mobile-item-card {
                    background: ${a?"#1f1f1f":"#fff"};
                    border: 1px solid ${a?"#303030":"#f0f0f0"};
                    border-radius: 8px;
                    padding: 16px;
                    margin-bottom: 12px;
                    cursor: pointer;
                    transition: all 0.2s;
                }

                .mobile-item-card:hover {
                    border-color: ${a?"#177ddc":"#1890ff"};
                    box-shadow: 0 2px 8px ${a?"rgba(0,0,0,0.3)":"rgba(0,0,0,0.1)"};
                }

                .mobile-item-card:active {
                    transform: scale(0.98);
                }

                .mobile-item-title {
                    font-size: 16px;
                    font-weight: 500;
                    color: ${a?"#fff":"#000"};
                    margin-bottom: 4px;
                }

                .mobile-item-name {
                    font-size: 12px;
                    color: ${a?"#8c8c8c":"#999"};
                }
            `}),e.jsxs("div",{className:"pc-layout",children:[e.jsx(Hn,{collapsed:F,setCollapsed:N,selectedItem:c,viewMode:D,setViewMode:de,activeTab:g,selectedDeviceId:q,setSelectedDeviceId:B,deviceSegmentOptions:ws,handleOpenInspect:zs,handleOpenWebEditor:Us,handleExitWebEditor:At,handleSaveWebEditor:_s,handleEnableTextEdit:Fs,handleSaveTextEdit:()=>Dt(!1),handleExitTextEdit:Bs,handleRefreshElement:Ds,handleCopyLocalLink:fs,handleCopyLANLink:ms,handleDownloadZip:gs,getLANUrl:Nt,qrCodeVisible:O,setQrCodeVisible:S,wsClients:Ws,checkConnection:mt,handlePushToFigma:Hs,handleDownloadFigmaJson:Ms,setIsExportModalOpen:dt,handleOpenIdeFile:xs,isDarkMode:a,setIsDarkMode:h,currentSpecDocKey:ne,textEditState:se,textEditAvailable:Ls,editorMode:H.mode,handleRefreshEditorStatus:Ne}),e.jsxs(We,{children:[e.jsx(Fn,{collapsed:F,loading:i,activeTab:g,handleTabChange:Rt,data:m,searchText:K,setSearchText:te,filteredItems:Xe,selectedItem:c,handleMenuClick:As,handleDownloadItemSource:Cs,handleRenameItem:Ts,handleSetReference:$s,handleUnsetReference:ks,handleDuplicateItem:Rs,handleDeleteItem:Is,handleCopyItemPath:ys,setCreateDialogVisible:re}),e.jsx(Xn,{containerRef:G,selectedItem:c,activeTab:g,currentDevice:we,displaySize:Be,scale:b,elementIframeKey:k,iframeUrl:Ys,elementIframeSize:d,setElementIframeSize:A,viewMode:D})]}),e.jsx(Zn,{visible:xe,onClose:us,onOk:hs,onSendPrompt:ps,activeTab:g,createName:P,setCreateName:he,createReference:ie,setCreateReference:ye,createMode:De,setCreateMode:Q,generateAxure:ot,setGenerateAxure:le,referenceItems:rt,selectedDocs:lt,setSelectedDocs:cs,availableDocs:ct,selectedThemes:at,setSelectedThemes:Ee,availableThemes:it,selectedDataAssets:f,setSelectedDataAssets:ds,availableDataAssets:pe,selectedLibraries:be,setSelectedLibraries:ls,availableLibraries:Je}),e.jsx(zn,{open:Oe,onClose:()=>dt(!1),imageConfig:C,setImageConfig:Ie,onDimensionChange:bs,onSwapDimensions:Ss,onDimensionBlur:vs,isExporting:js,onExport:Ks,onCopyConfig:Gs,activeTab:g,itemName:c==null?void 0:c.name})]}),e.jsx("div",{className:"mobile-layout",style:{display:"none"},children:e.jsxs("div",{style:{padding:"16px",minHeight:"100vh",background:a?"#141414":"#f5f5f5"},children:[e.jsxs("div",{style:{marginBottom:"16px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx("div",{children:e.jsxs("h1",{style:{margin:0,fontSize:"24px",fontWeight:600,color:a?"#fff":"#000"},children:["Axhub ",e.jsx("span",{style:{color:"#008F5D"},children:"Make"})]})}),e.jsx(V,{type:"text",icon:a?e.jsx(ns,{}):e.jsx(os,{}),onClick:()=>h(!a)})]}),e.jsx(It,{activeKey:g,onChange:t=>Rt(t),style:{marginBottom:"16px"},items:[{key:"pages",label:`é¡µé¢ (${m.pages.length})`,icon:e.jsx(_e,{})},{key:"elements",label:`å…ƒç´  (${m.elements.length})`,icon:e.jsx(Ct,{})}]}),e.jsx(Ae,{placeholder:"æœç´¢...",prefix:e.jsx(es,{}),value:K,onChange:t=>te(t.target.value),allowClear:!0,style:{marginBottom:"16px"}}),i?e.jsx("div",{style:{textAlign:"center",padding:"40px 0"},children:e.jsx(Me,{tip:"åŠ è½½ä¸­..."})}):e.jsx("div",{children:Xe.length===0?e.jsxs("div",{style:{textAlign:"center",padding:"40px 0",color:a?"#8c8c8c":"#999"},children:["æš‚æ— ",g==="elements"?"å…ƒç´ ":"é¡µé¢"]}):Xe.map(t=>e.jsxs("div",{className:"mobile-item-card",onClick:()=>Zs(t),children:[e.jsx("div",{className:"mobile-item-title",children:t.displayName}),e.jsx("div",{className:"mobile-item-name",children:t.name})]},t.name))})]})}),Y,Z]})}function lo(){const[a,h]=o.useState(()=>{try{return localStorage.getItem(Jt)==="true"}catch{return!1}}),i=x=>{h(x);try{localStorage.setItem(Jt,String(x))}catch(m){console.error("Failed to save dark mode preference:",m)}};return e.jsx(En,{theme:Pn(a),children:e.jsx(In,{children:e.jsx(io,{isDarkMode:a,setIsDarkMode:i})})})}const co=Tn.createRoot(document.getElementById("root"));co.render(e.jsx(lo,{}));
