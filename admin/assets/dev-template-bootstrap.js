const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/chunks/vendor.js","assets/vendor.css","assets/chunks/index2.js"])))=>i.map(i=>d[i]);
var el=Object.defineProperty;var tl=(e,t,n)=>t in e?el(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var jn=(e,t,n)=>tl(e,typeof t!="symbol"?t+"":t,n);import{s as Vt,aH as Pr,h as Ht,F as qr,M as Js,T as nl,r as Ko,j as qe,aI as ol,S as Zo,b as Jo,aj as rl,aJ as il,aK as sl,aL as al,aM as li}from"./chunks/vendor.js";const ll={Settings:"è®¾ç½®",Cancel:"å–æ¶ˆ","Show changes":"æ˜¾ç¤ºæ›´æ”¹",Overview:"æ¦‚è§ˆ",Properties:"å±æ€§","Open Projects":"æ‰“å¼€é¡¹ç›®","User Account & Settings":"ç”¨æˆ·è´¦æˆ·å’Œè®¾ç½®","Click any element to edit it's properties":"ç‚¹å‡»ä»»æ„å…ƒç´ ä»¥ç¼–è¾‘å…¶å±æ€§",Colors:"é¢œè‰²","Validate implemented colors":"éªŒè¯å·²å®ç°çš„é¢œè‰²","Open the Figma to inspecta plugin and click 'Copy page colors'":"æ‰“å¼€ Figma åˆ° inspecta æ’ä»¶å¹¶ç‚¹å‡»ã€Œå¤åˆ¶é¡µé¢é¢œè‰²ã€","Once styles are copied, click 'Paste & compare Figma colors'":"æ ·å¼å¤åˆ¶åï¼Œç‚¹å‡»ã€Œç²˜è´´å¹¶æ¯”è¾ƒ Figma é¢œè‰²ã€","Paste & compare Figma colors":"ç²˜è´´å¹¶æ¯”è¾ƒ Figma é¢œè‰²","Page colors":"é¡µé¢é¢œè‰²","Grid view":"ç½‘æ ¼è§†å›¾","List view":"åˆ—è¡¨è§†å›¾","Background colors":"èƒŒæ™¯é¢œè‰²","Text colors":"æ–‡æœ¬é¢œè‰²","Border colors":"è¾¹æ¡†é¢œè‰²",Fonts:"å­—ä½“","Validate implemented fonts":"éªŒè¯å·²å®ç°çš„å­—ä½“","Open the Figma to inspecta plugin and click 'Copy page fonts'":"æ‰“å¼€ Figma åˆ° inspecta æ’ä»¶å¹¶ç‚¹å‡»ã€Œå¤åˆ¶é¡µé¢å­—ä½“ã€","Once styles are copied, click 'Paste & compare Figma fonts'":"æ ·å¼å¤åˆ¶åï¼Œç‚¹å‡»ã€Œç²˜è´´å¹¶æ¯”è¾ƒ Figma å­—ä½“ã€","Paste & compare Figma fonts":"ç²˜è´´å¹¶æ¯”è¾ƒ Figma å­—ä½“","Text content":"æ–‡æœ¬å†…å®¹","Copy to AI":"å¤åˆ¶åˆ° AI","Send to Cursor":"å‘é€åˆ° Cursor","Reset text content":"é‡ç½®æ–‡æœ¬å†…å®¹",IMG:"å›¾ç‰‡","Placeholder image":"å ä½å›¾ç‰‡",Upload:"ä¸Šä¼ ",Download:"ä¸‹è½½","Auto (Webpage Default)":"è‡ªåŠ¨ï¼ˆç½‘é¡µé»˜è®¤ï¼‰",Fill:"å¡«å……",Cover:"è¦†ç›–",Contain:"åŒ…å«",None:"æ— ","Scale Down":"ç¼©å°",SVG:"SVG","SVG code will appear here...":"SVG ä»£ç å°†æ˜¾ç¤ºåœ¨è¿™é‡Œ...","Upload SVG file":"ä¸Šä¼  SVG æ–‡ä»¶","Paste inline SVG code":"ç²˜è´´å†…è” SVG ä»£ç ","Download SVG as HTML":"ä¸‹è½½ SVG ä¸º HTML","Copy SVG code":"å¤åˆ¶ SVG ä»£ç ","Reset SVG to original":"é‡ç½® SVG ä¸ºåŸå§‹çŠ¶æ€",Layout:"å¸ƒå±€",Display:"æ˜¾ç¤º","Flex-setings":"Flex è®¾ç½®",Direction:"æ–¹å‘",Align:"å¯¹é½",Justify:"å¯¹é½æ–¹å¼",Wrap:"æ¢è¡Œ",Gap:"é—´è·",Size:"å°ºå¯¸",Min:"æœ€å°",Max:"æœ€å¤§",W:"å®½",H:"é«˜","Min-W":"æœ€å°å®½","Min-H":"æœ€å°é«˜","Max-W":"æœ€å¤§å®½","Max-H":"æœ€å¤§é«˜",Background:"èƒŒæ™¯","Background Color":"èƒŒæ™¯é¢œè‰²",Typography:"æ’ç‰ˆ","Font Family":"å­—ä½“æ—","Font Weight":"å­—é‡","Thin : 100":"ç»†ä½“ : 100","Extra Light : 200":"è¶…ç»† : 200","Light : 300":"è½» : 300","Regular : 400":"å¸¸è§„ : 400","Medium : 500":"ä¸­ç­‰ : 500","Semi Bold : 600":"åŠç²— : 600","Bold : 700":"ç²—ä½“ : 700","Extra Bold : 800":"è¶…ç²— : 800","Black : 900":"é»‘ä½“ : 900","Font Size":"å­—ä½“å¤§å°","Font Color":"å­—ä½“é¢œè‰²","Line Height":"è¡Œé«˜","Letter Spacing":"å­—é—´è·","Text Align":"æ–‡æœ¬å¯¹é½","Text Decoration":"æ–‡æœ¬è£…é¥°",Spacing:"é—´è·",MARGIN:"å¤–è¾¹è·",PADDING:"å†…è¾¹è·",Margin:"å¤–è¾¹è·",Padding:"å†…è¾¹è·",Border:"è¾¹æ¡†","Border Type":"è¾¹æ¡†ç±»å‹","Border Color":"è¾¹æ¡†é¢œè‰²","Border Width":"è¾¹æ¡†å®½åº¦",Mixed:"æ··åˆ","Border-radius (Corners)":"è¾¹æ¡†åœ†è§’ï¼ˆè§’ï¼‰",Position:"ä½ç½®","Position type":"ä½ç½®ç±»å‹",Static:"é™æ€",Absolute:"ç»å¯¹",Fixed:"å›ºå®š",Relative:"ç›¸å¯¹",Sticky:"ç²˜æ€§","Z-Index":"å±‚çº§","Relative to:":"ç›¸å¯¹äºï¼š",Parent:"çˆ¶å…ƒç´ ",Body:"ä¸»ä½“","Box shadow":"ç›’å­é˜´å½±",Opacity:"é€æ˜åº¦","No changes":"æ— æ›´æ”¹","1 change":"1 ä¸ªæ›´æ”¹",changes:"ä¸ªæ›´æ”¹","Export to File":"å¯¼å‡ºåˆ°æ–‡ä»¶","Copy All Changes":"å¤åˆ¶æ‰€æœ‰æ›´æ”¹","Copy All Changes to AI":"å¤åˆ¶æ‰€æœ‰æ›´æ”¹åˆ° AI","Delete All Changes":"åˆ é™¤æ‰€æœ‰æ›´æ”¹",Share:"åˆ†äº«","Share Changes":"åˆ†äº«æ›´æ”¹","AI agent bridge":"AI ä»£ç†æ¡¥æ¥",Disconnected:"å·²æ–­å¼€è¿æ¥",Connected:"å·²è¿æ¥","Connecting...":"è¿æ¥ä¸­...","AI agent:":"AI ä»£ç†ï¼š","Cursor IDE":"Cursor IDE","GitHub Copilot":"GitHub Copilot","Setup guide":"è®¾ç½®æŒ‡å—","No CSS changes":"æ—  CSS æ›´æ”¹","Send CSS changes to Cursor (Localhost)":"å‘é€ CSS æ›´æ”¹åˆ° Cursorï¼ˆæœ¬åœ°ä¸»æœºï¼‰","Download the Cursor extension":"ä¸‹è½½ Cursor æ‰©å±•","Install the extension on Cursor IDE:":"åœ¨ Cursor IDE ä¸Šå®‰è£…æ‰©å±•ï¼š","Press Cmd + Shift + P (on Mac) or Ctrl + Shift + P (on Windows/Linux).":"æŒ‰ Cmd + Shift + Pï¼ˆMacï¼‰æˆ– Ctrl + Shift + Pï¼ˆWindows/Linuxï¼‰ã€‚",'Type "Install from VSIX..." and select the':"è¾“å…¥ã€Œä» VSIX å®‰è£…...ã€å¹¶é€‰æ‹©","Once installed, click to open inspecta server on your IDE bottom toolbar":"å®‰è£…åï¼Œç‚¹å‡» IDE åº•éƒ¨å·¥å…·æ ä¸Šçš„ inspecta æœåŠ¡å™¨ä»¥æ‰“å¼€","Inspecta: Closed (click to Open)":"Inspecta: å·²å…³é—­ï¼ˆç‚¹å‡»æ‰“å¼€ï¼‰",'On inspecta, make CSS changes and click "Send to Cursor" from the element toolbar or from css changes panel.':"åœ¨ inspecta ä¸­ï¼Œè¿›è¡Œ CSS æ›´æ”¹ï¼Œç„¶åä»å…ƒç´ å·¥å…·æ æˆ– CSS æ›´æ”¹é¢æ¿ç‚¹å‡»ã€Œå‘é€åˆ° Cursorã€ã€‚",properties:"å±æ€§",Overlay:"å åŠ å±‚",Changes:"æ›´æ”¹","Image overlay":"å›¾ç‰‡å åŠ å±‚","No image":"æ— å›¾ç‰‡","Paste Image from clipboard":"ä»å‰ªè´´æ¿ç²˜è´´å›¾ç‰‡","Upload Image":"ä¸Šä¼ å›¾ç‰‡","Upload image or paste from clipboard":"ä¸Šä¼ å›¾ç‰‡æˆ–ä»å‰ªè´´æ¿ç²˜è´´",Navigator:"å¯¼èˆªå™¨","Collapse All":"å…¨éƒ¨æŠ˜å ","Close Inspecta":"å…³é—­ Inspecta","Clear inspecta changes":"æ¸…é™¤ inspecta æ›´æ”¹","Show spacing overlays":"æ˜¾ç¤ºé—´è·å åŠ å±‚","Download inspecta Figma plugin":"ä¸‹è½½ inspecta Figma æ’ä»¶",Theme:"ä¸»é¢˜","Give us a feedback":"ç»™æˆ‘ä»¬åé¦ˆ","Toggle Distances":"åˆ‡æ¢è·ç¦»","Toggle Info Popover":"åˆ‡æ¢ä¿¡æ¯å¼¹å‡ºæ¡†","Toggle Rulers":"åˆ‡æ¢æ ‡å°º","Toggle Outlines":"åˆ‡æ¢è½®å»“","Sample Color":"é‡‡æ ·é¢œè‰²","Toggle Image Overlay":"åˆ‡æ¢å›¾ç‰‡å åŠ å±‚","Toggle Navigator":"åˆ‡æ¢å¯¼èˆªå™¨","Toggle Changes Panel":"åˆ‡æ¢æ›´æ”¹é¢æ¿","Toggle Properties Panel":"åˆ‡æ¢å±æ€§é¢æ¿","Switch to Light Theme":"åˆ‡æ¢åˆ°æµ…è‰²ä¸»é¢˜","Switch to Dark Theme":"åˆ‡æ¢åˆ°æ·±è‰²ä¸»é¢˜","Reset Panel Position":"é‡ç½®é¢æ¿ä½ç½®","Toggle Inspect Mode Off":"å…³é—­æ£€æŸ¥æ¨¡å¼","Toggle Inspect Mode On":"æ‰“å¼€æ£€æŸ¥æ¨¡å¼","Collapse Panel":"æŠ˜å é¢æ¿","Expand Panel":"å±•å¼€é¢æ¿","Collapse All ":"å…¨éƒ¨æŠ˜å  ","Expand All":"å…¨éƒ¨å±•å¼€","Isolate element":"éš”ç¦»å…ƒç´ ","Paste Figma Style":"ç²˜è´´ Figma æ ·å¼","Paste from clipboard":"ä»å‰ªè´´æ¿ç²˜è´´",Copied:"å·²å¤åˆ¶","Apply styles to":"åº”ç”¨æ ·å¼åˆ°","Selected element":"é€‰ä¸­çš„å…ƒç´ ",Class:"ç±»","Pasted Styles":"ç²˜è´´çš„æ ·å¼",Preview:"é¢„è§ˆ","New or updated":"æ–°å»ºæˆ–å·²æ›´æ–°","Reset (to be removed in production)":"é‡ç½®ï¼ˆå°†åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ç§»é™¤ï¼‰","Similar (unchanged)":"ç›¸ä¼¼ï¼ˆæœªæ›´æ”¹ï¼‰",Apply:"åº”ç”¨",Delete:"åˆ é™¤","Global color change":"å…¨å±€é¢œè‰²æ›´æ”¹","Global font change":"å…¨å±€å­—ä½“æ›´æ”¹","Original:":"åŸå§‹ï¼š","New:":"æ–°å»ºï¼š","No fonts found":"æœªæ‰¾åˆ°å­—ä½“","Center element":"å±…ä¸­å…ƒç´ ","Reset Position":"é‡ç½®ä½ç½®","Auto fix colors":"è‡ªåŠ¨ä¿®å¤é¢œè‰²","Auto fix fonts":"è‡ªåŠ¨ä¿®å¤å­—ä½“","Send to IDE only works on localhost":"å‘é€åˆ° IDE ä»…åœ¨æœ¬åœ°ä¸»æœºä¸Šå·¥ä½œ","Send to Cursor IDE":"å‘é€åˆ° Cursor IDE","Send to GitHub Copilot":"å‘é€åˆ° GitHub Copilot","Copy for AI":"å¤åˆ¶åˆ° AI","Icon & SVG colors":"å›¾æ ‡å’Œ SVG é¢œè‰²",Unknown:"æœªçŸ¥",Normal:"æ­£å¸¸",Color:"é¢œè‰²","Solid Color":"çº¯è‰²",Solid:"çº¯è‰²",Gradient:"æ¸å˜","Background Image":"èƒŒæ™¯å›¾ç‰‡",Custom:"è‡ªå®šä¹‰",Figma:"Figma",Variables:"å˜é‡","No Figma colors available. Paste Figma colors from the overview panel first.":"æ²¡æœ‰å¯ç”¨çš„ Figma é¢œè‰²ã€‚è¯·å…ˆä»æ¦‚è§ˆé¢æ¿ç²˜è´´ Figma é¢œè‰²ã€‚","No CSS variables available.":"æ²¡æœ‰å¯ç”¨çš„ CSS å˜é‡ã€‚",Hover:"æ‚¬åœ",Outline:"è½®å»“","Select font...":"é€‰æ‹©å­—ä½“...","inspecta-ide-integration-1.0.0.vsix":"inspecta-ide-integration-1.0.0.vsix",Feedback:"åé¦ˆ","Changes sent to Cursor":"æ›´æ”¹å·²å‘é€è‡³ Cursor","Implementing changes on your codebase":"æ­£åœ¨æ‚¨çš„ä»£ç åº“ä¸Šå®æ–½æ›´æ”¹","Successfully Implemented":"å®æ–½æˆåŠŸ","Changes cleared from panel":"é¢æ¿ä¸­çš„æ›´æ”¹å·²æ¸…é™¤",State:"çŠ¶æ€",Default:"é»˜è®¤","Apply to":"åº”ç”¨åˆ°","Open the Figma to inspecta plugin and click 'Copy page colors' or 'Copy page fonts'":"æ‰“å¼€ Figma to Inspecta æ’ä»¶ï¼Œå¹¶ç‚¹å‡»ã€Œå¤åˆ¶é¡µé¢é¢œè‰²ã€æˆ–ã€Œå¤åˆ¶é¡µé¢å­—ä½“ã€","Once styles are copied, click 'Paste & Compare'":"æ ·å¼å¤åˆ¶åï¼Œç‚¹å‡»ã€Œç²˜è´´å¹¶æ¯”è¾ƒã€","Fetching page styles...":"æ­£åœ¨è·å–é¡µé¢æ ·å¼...","Authentication cancelled":"èº«ä»½éªŒè¯å·²å–æ¶ˆ","Failed to open settings":"æ‰“å¼€è®¾ç½®å¤±è´¥","Settings menu not found":"æœªæ‰¾åˆ°è®¾ç½®èœå•","Signed in successfully":"ç™»å½•æˆåŠŸ","Authentication not available":"èº«ä»½éªŒè¯ä¸å¯ç”¨","Sign-in failed":"ç™»å½•å¤±è´¥","Signed out successfully":"ç™»å‡ºæˆåŠŸ","Sign-out failed":"ç™»å‡ºå¤±è´¥","âœ… Text reset to original!":"âœ… æ–‡æœ¬å·²é‡ç½®ä¸ºåŸå§‹çŠ¶æ€ï¼","â„¹ï¸ No text changes found to clear":"â„¹ï¸ æœªå‘ç°å¯æ¸…é™¤çš„æ–‡æœ¬æ›´æ”¹","âŒ Failed to clear text changes":"âŒ æ¸…é™¤æ–‡æœ¬æ›´æ”¹å¤±è´¥","No text element selected":"æœªé€‰ä¸­ä»»ä½•æ–‡æœ¬å…ƒç´ ","No text changes to generate prompt for":"æ²¡æœ‰å¯ç”Ÿæˆæç¤ºè¯çš„æ–‡æœ¬æ›´æ”¹","ğŸ“‹ Text prompt copied to clipboard":"ğŸ“‹ æ–‡æœ¬æç¤ºè¯å·²å¤åˆ¶åˆ°å‰ªè´´æ¿","âŒ Failed to copy prompt":"âŒ å¤åˆ¶æç¤ºè¯å¤±è´¥","Unable to determine hostname":"æ— æ³•ç¡®å®šä¸»æœºå","âŒ Send to IDE only works on localhost":"âŒ å‘é€åˆ° IDE ä»…åœ¨ localhost ä¸Šå¯ç”¨","âŒ Send to IDE not available":"âŒ å‘é€åˆ° IDE ä¸å¯ç”¨","âŒ Error sending to IDE":"âŒ å‘é€åˆ° IDE æ—¶å‡ºé”™","Share link copied to clipboard!":"åˆ†äº«é“¾æ¥å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼","Access denied. This share may be private or you may not have permission to view it.":"è®¿é—®è¢«æ‹’ç»ã€‚è¯¥åˆ†äº«å¯èƒ½ä¸ºç§æœ‰ï¼Œæˆ–è€…æ‚¨æ²¡æœ‰æŸ¥çœ‹æƒé™ã€‚","Please sign in to share changes":"è¯·ç™»å½•ä»¥åˆ†äº«æ›´æ”¹","Preparing share...":"æ­£åœ¨å‡†å¤‡åˆ†äº«...","No changes to share":"æ²¡æœ‰å¯åˆ†äº«çš„æ›´æ”¹","Share link copied":"åˆ†äº«é“¾æ¥å·²å¤åˆ¶","Access denied. Please check your permissions.":"è®¿é—®è¢«æ‹’ç»ã€‚è¯·æ£€æŸ¥æ‚¨çš„æƒé™ã€‚","Network error. Please check your connection.":"ç½‘ç»œé”™è¯¯ã€‚è¯·æ£€æŸ¥æ‚¨çš„è¿æ¥ã€‚","Failed to share changes":"åˆ†äº«æ›´æ”¹å¤±è´¥","Authentication expired. Please sign in again.":"èº«ä»½éªŒè¯å·²è¿‡æœŸã€‚è¯·é‡æ–°ç™»å½•ã€‚","Login required to share changes":"éœ€è¦ç™»å½•æ‰èƒ½åˆ†äº«æ›´æ”¹","Authentication failed. Please try again.":"èº«ä»½éªŒè¯å¤±è´¥ã€‚è¯·é‡è¯•ã€‚","Shared changes applied successfully!":"å·²æˆåŠŸåº”ç”¨åˆ†äº«çš„æ›´æ”¹ï¼","Failed to apply shared changes":"åº”ç”¨åˆ†äº«çš„æ›´æ”¹å¤±è´¥","All Inspecta changes cleared successfully":"æ‰€æœ‰ Inspecta æ›´æ”¹å·²æˆåŠŸæ¸…é™¤","Failed to clear changes":"æ¸…é™¤æ›´æ”¹å¤±è´¥","Spacing overlays visible":"é—´è·å åŠ å±‚å·²æ˜¾ç¤º","Spacing overlays hidden":"é—´è·å åŠ å±‚å·²éšè—","Breadcrumb visible":"é¢åŒ…å±‘å·²æ˜¾ç¤º","Breadcrumb hidden":"é¢åŒ…å±‘å·²éšè—","Opening Figma plugin page...":"æ­£åœ¨æ‰“å¼€ Figma æ’ä»¶é¡µé¢...","Onboarding not available":"æ–°æ‰‹å¼•å¯¼ä¸å¯ç”¨","Invalid SVG file!":"æ— æ•ˆçš„ SVG æ–‡ä»¶ï¼","SVG applied!":"SVG å·²åº”ç”¨ï¼","No inline SVG element selected in DOM to replace.":"DOM ä¸­æœªé€‰ä¸­å¯æ›¿æ¢çš„å†…è” SVG å…ƒç´ ã€‚","Please upload a valid SVG file!":"è¯·ä¸Šä¼ æœ‰æ•ˆçš„ SVG æ–‡ä»¶ï¼","No valid SVG code to download.":"æ²¡æœ‰å¯ä¸‹è½½çš„æœ‰æ•ˆ SVG ä»£ç ã€‚","SVG downloaded!":"SVG å·²ä¸‹è½½ï¼","SVG code copied to clipboard!":"SVG ä»£ç å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼","No SVG element selected to reset.":"æœªé€‰ä¸­å¯é‡ç½®çš„ SVG å…ƒç´ ã€‚","No original SVG found to restore.":"æœªæ‰¾åˆ°å¯æ¢å¤çš„åŸå§‹ SVGã€‚","Failed to parse original SVG.":"è§£æåŸå§‹ SVG å¤±è´¥ã€‚","Invalid original SVG.":"æ— æ•ˆçš„åŸå§‹ SVGã€‚","SVG reset to original!":"SVG å·²é‡ç½®ä¸ºåŸå§‹çŠ¶æ€ï¼","Failed to reset SVG.":"é‡ç½® SVG å¤±è´¥ã€‚","No element selected":"æœªé€‰ä¸­ä»»ä½•å…ƒç´ ","No changes found":"æœªå‘ç°ä»»ä½•æ›´æ”¹","No changes found for selected element":"æœªå‘ç°æ‰€é€‰å…ƒç´ çš„æ›´æ”¹","Changes were already deleted":"æ›´æ”¹å·²è¢«åˆ é™¤","Deletion function not available":"åˆ é™¤åŠŸèƒ½ä¸å¯ç”¨","âœ“ Deleted all changes for selected element":"âœ“ å·²åˆ é™¤æ‰€é€‰å…ƒç´ çš„æ‰€æœ‰æ›´æ”¹","Error deleting changes":"åˆ é™¤æ›´æ”¹æ—¶å‡ºé”™","No element selected.":"æœªé€‰ä¸­ä»»ä½•å…ƒç´ ã€‚","Paste CSS feature not loaded. Please refresh the page.":"ç²˜è´´ CSS åŠŸèƒ½æœªåŠ è½½ã€‚è¯·åˆ·æ–°é¡µé¢ã€‚","CSS from Figma applied!":"æ¥è‡ª Figma çš„ CSS å·²åº”ç”¨ï¼",'Nothing to paste. Copy element style from the <a href="https://www.figma.com/community/plugin/1397609843224212500/figma-to-inspecta-compare-design-to-web" target="_blank" class="toast-link">inspecta Figma plugin</a> first.':'æ²¡æœ‰å¯ç²˜è´´çš„å†…å®¹ã€‚è¯·å…ˆä» <a href="https://www.figma.com/community/plugin/1397609843224212500/figma-to-inspecta-compare-design-to-web" target="_blank" class="toast-link">inspecta Figma æ’ä»¶</a> å¤åˆ¶å…ƒç´ æ ·å¼ã€‚',"Failed to apply CSS from clipboard: ":"ä»å‰ªè´´æ¿åº”ç”¨ CSS å¤±è´¥: ","Clipboard CSS applied!":"å‰ªè´´æ¿ CSS å·²åº”ç”¨ï¼","No changes applied.":"æœªåº”ç”¨ä»»ä½•æ›´æ”¹ã€‚","Failed to apply clipboard CSS.":"åº”ç”¨å‰ªè´´æ¿ CSS å¤±è´¥ã€‚","SVG uploaded and displayed!":"SVG å·²ä¸Šä¼ å¹¶æ˜¾ç¤ºï¼","No SVG element found to replace!":"æœªæ‰¾åˆ°å¯æ›¿æ¢çš„ SVG å…ƒç´ ï¼","No Figma colors available. Please paste Figma colors first.":"æ²¡æœ‰å¯ç”¨çš„ Figma é¢œè‰²ã€‚è¯·å…ˆç²˜è´´ Figma é¢œè‰²ã€‚","No colors with close suggestions found. All mismatched colors don't have close matches in Figma colors.":"æœªæ‰¾åˆ°ç›¸è¿‘çš„é¢œè‰²å»ºè®®ã€‚æ‰€æœ‰ä¸åŒ¹é…çš„é¢œè‰²åœ¨ Figma ä¸­éƒ½æ²¡æœ‰ç›¸è¿‘åŒ¹é…ã€‚","No Figma fonts available. Please paste Figma fonts first.":"æ²¡æœ‰å¯ç”¨çš„ Figma å­—ä½“ã€‚è¯·å…ˆç²˜è´´ Figma å­—ä½“ã€‚","No fonts with close suggestions found. All mismatched fonts don't have close matches in Figma fonts.":"æœªæ‰¾åˆ°ç›¸è¿‘çš„å­—ä½“å»ºè®®ã€‚æ‰€æœ‰ä¸åŒ¹é…çš„å­—ä½“åœ¨ Figma ä¸­éƒ½æ²¡æœ‰ç›¸è¿‘åŒ¹é…ã€‚","Preview mode":"é¢„è§ˆæ¨¡å¼","No image or SVG found in clipboard!":"å‰ªè´´æ¿ä¸­æœªæ‰¾åˆ°å›¾ç‰‡æˆ– SVGï¼","Failed to read image or SVG from clipboard.":"ä»å‰ªè´´æ¿è¯»å–å›¾ç‰‡æˆ– SVG å¤±è´¥ã€‚","Failed to read clipboard. Please check extension permissions.":"è¯»å–å‰ªè´´æ¿å¤±è´¥ã€‚è¯·æ£€æŸ¥æ‰©å±•æƒé™ã€‚","Failed to read clipboard: ":"è¯»å–å‰ªè´´æ¿å¤±è´¥: ","Clipboard is empty. Copy styles from Inspecta Figma plugin first.":"å‰ªè´´æ¿ä¸ºç©ºã€‚è¯·å…ˆä» Inspecta Figma æ’ä»¶å¤åˆ¶æ ·å¼ã€‚",'Nothing to paste. Copy styles from the <a href="https://www.figma.com/community/plugin/1397609843224212500/figma-to-inspecta-compare-design-to-web" target="_blank" class="toast-link">inspecta Figma plugin</a> first.':'æ²¡æœ‰å¯ç²˜è´´çš„å†…å®¹ã€‚è¯·å…ˆä» <a href="https://www.figma.com/community/plugin/1397609843224212500/figma-to-inspecta-compare-design-to-web" target="_blank" class="toast-link">inspecta Figma æ’ä»¶</a> å¤åˆ¶æ ·å¼ã€‚','Clipboard does not contain colors or fonts. Copy styles from the <a href="https://www.figma.com/community/plugin/1397609843224212500/figma-to-inspecta-compare-design-to-web" target="_blank" class="toast-link">inspecta Figma plugin</a> first.':'å‰ªè´´æ¿ä¸åŒ…å«é¢œè‰²æˆ–å­—ä½“ã€‚è¯·å…ˆä» <a href="https://www.figma.com/community/plugin/1397609843224212500/figma-to-inspecta-compare-design-to-web" target="_blank" class="toast-link">inspecta Figma æ’ä»¶</a> å¤åˆ¶æ ·å¼ã€‚','Nothing to paste. Copy colors style from the <a href="https://www.figma.com/community/plugin/1397609843224212500/figma-to-inspecta-compare-design-to-web" target="_blank" class="toast-link">inspecta Figma plugin</a> first.':'æ²¡æœ‰å¯ç²˜è´´çš„å†…å®¹ã€‚è¯·å…ˆä» <a href="https://www.figma.com/community/plugin/1397609843224212500/figma-to-inspecta-compare-design-to-web" target="_blank" class="toast-link">inspecta Figma æ’ä»¶</a> å¤åˆ¶é¢œè‰²æ ·å¼ã€‚',"Comparing colors...":"æ­£åœ¨æ¯”è¾ƒé¢œè‰²...","All colors are matching!":"æ‰€æœ‰é¢œè‰²éƒ½åŒ¹é…ï¼","Auto Fix":"è‡ªåŠ¨ä¿®å¤","Unlock Image":"è§£é”å›¾ç‰‡","Lock Image":"é”å®šå›¾ç‰‡","Figma suggested colors":"Figma å»ºè®®é¢œè‰²","Figma suggested fonts":"Figma å»ºè®®å­—ä½“","Search...":"æœç´¢...","Reset style":"é‡ç½®æ ·å¼","Apply (":"åº”ç”¨ (",elements:"ä¸ªå…ƒç´ "},ci=e=>{if(typeof window>"u")return Promise.resolve(!0);const t=e.getContainer??document.body,n=document.createElement("div");t.appendChild(n);const o=Pr(n);return new Promise(r=>{const i=l=>{r(l),setTimeout(()=>{o.unmount(),n.remove()},0)},s=()=>Ht.createElement(qr,null,Ht.createElement(Js,{open:!0,title:e.title??"æ“ä½œç¡®è®¤",okText:e.okText??"ç¡®å®š",cancelText:e.cancelText??"å–æ¶ˆ",maskClosable:!1,centered:!0,onOk:()=>i(!0),onCancel:()=>i(!1),destroyOnClose:!0,zIndex:2147483648},Ht.createElement("div",{style:{whiteSpace:"pre-line"}},e.content)));o.render(Ht.createElement(s))})};let On=null;const ui=e=>{if(!e)return e;let t=e.replace(/body\s*>\s*#root\s*>\s*div\.css-[\w-]+\s*\.ant-app\s*>?/gi,"");return t=t.replace(/div\.css-[\w-]+\s*\.ant-app\s*>?/gi,""),t=t.replace(/>\s*/g,">").replace(/\s{2,}/g," ").trim(),t.startsWith(">")&&(t=t.slice(1).trim()),t},cl=()=>{if(On||typeof document>"u")return;const e=document.createElement("div");e.id="inspecta-start-overlay",e.style.cssText=`
    position: fixed;
    inset: 0;
    z-index: 2147483646;
    background: rgba(0,0,0,0.85);
    color: #fff;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 40px 24px;
    gap: 14px;
    box-sizing: border-box;
    font-family: -apple-system,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Arial,sans-serif;
    text-align: center;
  `;const t=document.createElement("div");t.style.cssText=`
    max-width: 640px;
    width: 100%;
    padding: 0;
    margin: 0 auto;
    text-align: left;
  `;const n=document.createElement("div");n.textContent="Inspecta æ¨¡å¼å¯åŠ¨æŒ‡å¼•",n.style.cssText=`
    font-size: 22px;
    font-weight: 600;
    letter-spacing: 0.2px;
    margin-bottom: 24px;
  `;const o=document.createElement("ul");o.style.cssText=`
    list-style: none;
    margin: 0;
    display: grid;
    gap: 10px;
    font-size: 15px;
    line-height: 1.6;
    text-align: left;
    max-width: 560px;
  `,[()=>{const i=document.createElement("li");i.style.cssText="display: flex; gap: 6px; flex-wrap: wrap;",i.append("1. å®‰è£… Inspecta æ‰©å±• ");const s=document.createElement("a");return s.href="https://inspecta.design/",s.target="_blank",s.rel="noreferrer",s.textContent="https://inspecta.design/",s.style.cssText="color: #8ec7ff; text-decoration: underline; font-weight: 600;",i.appendChild(s),i},()=>{const i=document.createElement("li");return i.textContent="2. ç‚¹å‡» Inspecta æ‰©å±•æŒ‰é’®å¼€å¯é¡µé¢ç¼–è¾‘",i},()=>{const i=document.createElement("li");return i.textContent="3. ä¿®æ”¹æ ·å¼åå¯ä»¥è®© AI ä¿®æ”¹æˆ–è€…ä¿å­˜åˆ°å¼ºåˆ¶æ ·å¼",i},()=>{const i=document.createElement("li");return i.textContent="4. ä¿®æ”¹æ–‡æœ¬åå¯ä»¥è®© AI ä¿®æ”¹æˆ–è€…ç›´æ¥æ‰¹é‡æ›´æ–°åˆ°æ–‡ä»¶",i}].forEach(i=>{o.appendChild(i())}),t.appendChild(n),t.appendChild(o),e.appendChild(t),document.body.appendChild(e),On=e},Wn=()=>{On&&(On.remove(),On=null)},ul=e=>{if(typeof window>"u")return;console.log("[Dev Template] Inspecta æ¨¡å¼å·²å¯ç”¨"),console.log("[Inspecta-Translator] å¯åŠ¨ç¿»è¯‘è„šæœ¬..."),cl();let t=!0,n=null,o=null,r=null,i=null,s=null;const l=new WeakSet,a=v=>{const x=v.trim();return ll[x]||null},c=v=>{if(l.has(v))return!1;let x=!1;if(v.nodeType===Node.TEXT_NODE&&v.textContent){const k=a(v.textContent);k&&k!==v.textContent&&(v.textContent=k,x=!0)}if(v.nodeType===Node.ELEMENT_NODE){const k=v;Array.from(k.attributes).forEach(X=>{const T=a(X.value);T&&T!==X.value&&(k.setAttribute(X.name,T),x=!0)})}return x&&l.add(v),x},u=v=>{const x=document.createTreeWalker(v,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT);let k;for(;k=x.nextNode();)c(k)},p=v=>{if(!t)return;o&&(o.disconnect(),o=null),console.log("[Inspecta-Translator] å¼€å§‹åˆå§‹ç¿»è¯‘"),u(v),console.log("[Inspecta-Translator] åˆå§‹ç¿»è¯‘å®Œæˆ");const x=new Set,k=new MutationObserver(X=>{t&&(X.forEach(T=>{T.type==="childList"?T.addedNodes.forEach(E=>{(E.nodeType===Node.ELEMENT_NODE||E.nodeType===Node.TEXT_NODE)&&x.add(E)}):T.type==="characterData"&&x.add(T.target)}),r!==null&&clearTimeout(r),r=window.setTimeout(()=>{t&&(x.size>0&&(x.forEach(T=>{T.nodeType===Node.ELEMENT_NODE?u(T):c(T)}),x.clear()),r=null)},50))});k.observe(v,{childList:!0,subtree:!0,characterData:!0,attributes:!1}),o=k,i=v,console.log("[Inspecta-Translator] ç¿»è¯‘è§‚å¯Ÿå™¨å·²å¯åŠ¨")},f=v=>{console.log("[Axhub] å¼€å§‹è·å– CSS å†…å®¹");const x=v.querySelector("#btn_toggle_changes");return x?(x.click(),console.log("[Axhub] å·²ç‚¹å‡»æ‰“å¼€ CSS å˜åŒ–é¢æ¿"),setTimeout(()=>{const k=v.querySelector("#full_css_content");if(!k){console.error("[Axhub] æœªæ‰¾åˆ° #full_css_content å…ƒç´ ");return}console.log("[Axhub] æ‰¾åˆ° CSS å†…å®¹å®¹å™¨:",k);const X=k.querySelectorAll(".change_item");console.log(`[Axhub] æ‰¾åˆ° ${X.length} ä¸ª change_item`);const T=[];X.forEach((g,C)=>{const M=g.querySelector(".inspecta_tag_input");if(!M){console.warn(`[Axhub] change_item ${C} æœªæ‰¾åˆ° .inspecta_tag_input`);return}const N=M.getAttribute("rule"),D=ui(N||"");if(!D){console.warn(`[Axhub] change_item ${C} çš„ rule å±æ€§ä¸ºç©º`);return}console.log(`[Axhub] change_item ${C} - rule: ${D}`);const H=g.querySelectorAll(".css_change_property");console.log(`[Axhub] change_item ${C} - æ‰¾åˆ° ${H.length} ä¸ªå±æ€§`);const y=[];if(H.forEach((_,F)=>{const G=_.querySelector("input[type='checkbox']");if(!G){console.warn(`[Axhub] change_item ${C} - å±æ€§ ${F} æœªæ‰¾åˆ° checkbox`);return}const $=G.getAttribute("key"),W=G.getAttribute("cssvalue");$&&W?(y.push(`  ${$}: ${W};`),console.log(`[Axhub] change_item ${C} - å±æ€§ ${F}: ${$}: ${W}`)):console.warn(`[Axhub] change_item ${C} - å±æ€§ ${F} ç¼ºå°‘ key æˆ– cssvalue`)}),y.length>0){const _=`${D} {
${y.join(`
`)}
}`;T.push(_),console.log(`[Axhub] change_item ${C} - ç”Ÿæˆ CSS è§„åˆ™:
${_}`)}});const E=T.join(`

`);return console.log(`[Axhub] æœ€ç»ˆç”Ÿæˆçš„ CSS (${T.length} æ¡è§„åˆ™):
${E}`),E},300),""):(console.error("[Axhub] æœªæ‰¾åˆ° #btn_toggle_changes æŒ‰é’®"),"")},h=async v=>{console.log("[Axhub] å¼€å§‹ä¿å­˜ hack.css"),f(v),setTimeout(async()=>{const x=v.querySelector("#full_css_content");if(!x){console.warn("[Axhub] æœªæ‰¾åˆ° CSS å†…å®¹");return}const k=x.querySelectorAll(".change_item"),X=[];k.forEach(D=>{const H=D.querySelector(".inspecta_tag_input"),y=ui((H==null?void 0:H.getAttribute("rule"))||"");if(!y)return;const _=D.querySelectorAll(".css_change_property"),F=[];_.forEach(G=>{const $=G.querySelector("input[type='checkbox']"),W=$==null?void 0:$.getAttribute("key"),J=$==null?void 0:$.getAttribute("cssvalue");W&&J&&F.push(`  ${W}: ${J};`)}),F.length>0&&X.push(`${y} {
${F.join(`
`)}
}`)});const T=X.join(`

`);if(!T){console.warn("[Axhub] æ²¡æœ‰å¯ä¿å­˜çš„ CSS å†…å®¹"),Vt.warning("å½“å‰æ²¡æœ‰å¯ä¿å­˜çš„ CSS æ›´æ”¹");return}console.log(`[Axhub] å‡†å¤‡ä¿å­˜çš„ CSS å†…å®¹:
`,T);const E=window.location.pathname.match(/\/(elements|pages)\/([^\/]+)/);if(!E){console.error("[Axhub] æ— æ³•è¯†åˆ«å½“å‰é¡µé¢è·¯å¾„");return}const[,g,C]=E,M=`${g}/${C}`;if(console.log("[Axhub] ç›®æ ‡è·¯å¾„:",M),!await ci({title:"æ›´æ–°å¼ºåˆ¶æ ·å¼",content:`ç¡®å®šè¦æ›´æ–°å¼ºåˆ¶æ ·å¼å—ï¼Ÿ

æ­¤æ“ä½œä¼šå°†å½“å‰çš„ CSS ä¿®æ”¹ä¿å­˜åˆ° hack.css æ–‡ä»¶ï¼Œ
é¡µé¢å°†è‡ªåŠ¨çƒ­æ›´æ–°åˆ·æ–°ä»¥åº”ç”¨æ›´æ”¹ã€‚`,okText:"æ›´æ–°",cancelText:"å–æ¶ˆ"})){console.log("[Axhub] ç”¨æˆ·å–æ¶ˆäº†ä¿å­˜æ“ä½œ");return}try{const D=await fetch("/api/hack-css/save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:M,content:T})}),H=await D.json();D.ok?console.log("[Axhub] âœ… ä¿å­˜æˆåŠŸ:",H):console.error("[Axhub] âŒ ä¿å­˜å¤±è´¥:",H)}catch(D){console.error("[Axhub] âŒ è¯·æ±‚å¤±è´¥:",D)}},500)},d=async v=>{console.log("[Axhub] ========== å¼€å§‹æ¸…ç©º hack.css =========="),console.log("[Axhub] å½“å‰ URL:",window.location.href),console.log("[Axhub] å½“å‰ pathname:",window.location.pathname);const x=window.location.pathname.match(/\/(elements|pages)\/([^\/]+)/);if(console.log("[Axhub] è·¯å¾„åŒ¹é…ç»“æœ:",x),!x){console.error("[Axhub] âŒ æ— æ³•è¯†åˆ«å½“å‰é¡µé¢è·¯å¾„:",window.location.pathname);return}const[,k,X]=x,T=`${k}/${X}`;if(console.log("[Axhub] è§£æç»“æœ - type:",k,"name:",X),console.log("[Axhub] ç›®æ ‡è·¯å¾„:",T),!await ci({title:"æ¸…ç©ºå¼ºåˆ¶æ ·å¼",content:`ç¡®å®šè¦æ¸…ç©ºå¼ºåˆ¶æ ·å¼å—ï¼Ÿ

æ­¤æ“ä½œä¼šåˆ é™¤ hack.css æ–‡ä»¶å¹¶æ¸…ç©ºæ‰€æœ‰ Inspecta ä¿®æ”¹ï¼Œ
é¡µé¢å°†è‡ªåŠ¨çƒ­æ›´æ–°åˆ·æ–°ä»¥åº”ç”¨æ›´æ”¹ã€‚`,okText:"æ¸…ç©º",cancelText:"å–æ¶ˆ"})){console.log("[Axhub] ç”¨æˆ·å–æ¶ˆäº†æ¸…ç©ºæ“ä½œ");return}const g={path:T};console.log("[Axhub] è¯·æ±‚ä½“:",JSON.stringify(g)),console.log("[Axhub] å‡†å¤‡å‘é€ POST è¯·æ±‚åˆ°: /api/hack-css/clear");try{const C=await fetch("/api/hack-css/clear",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)});console.log("[Axhub] âœ… æ”¶åˆ°å“åº”"),console.log("[Axhub] å“åº”çŠ¶æ€:",C.status,C.statusText),console.log("[Axhub] å“åº”å¤´:",Object.fromEntries(C.headers.entries()));const M=await C.json();if(console.log("[Axhub] å“åº”å†…å®¹:",M),C.ok){console.log("[Axhub] âœ… æ¸…ç©ºæˆåŠŸ:",M);const N=v.querySelector("#btn_clear_inspecta_changes");N?(console.log("[Axhub] æ‰¾åˆ°æ¸…ç©º inspecta æŒ‰é’®ï¼Œå‡†å¤‡ç‚¹å‡»"),N.click(),console.log("[Axhub] å·²ç‚¹å‡»æ¸…ç©º inspecta æŒ‰é’®")):console.warn("[Axhub] æœªæ‰¾åˆ° #btn_clear_inspecta_changes æŒ‰é’®"),console.log("[Axhub] ç­‰å¾…é¡µé¢è‡ªåŠ¨çƒ­æ›´æ–°...")}else console.error("[Axhub] âŒ æ¸…ç©ºå¤±è´¥:",M)}catch(C){console.error("[Axhub] âŒ è¯·æ±‚å¼‚å¸¸:",C),console.error("[Axhub] é”™è¯¯å †æ ˆ:",C instanceof Error?C.stack:"æ— å †æ ˆä¿¡æ¯")}console.log("[Axhub] ========== æ¸…ç©ºæµç¨‹ç»“æŸ ==========")},b=async v=>{console.log("[Axhub] å¼€å§‹ä¿å­˜æ–‡æœ¬æ–‡ä»¶");const x=document.querySelectorAll('.text-node-selected[contenteditable="true"][data-original-text]'),k=[];if(x.forEach($=>{var A;const W=$.getAttribute("data-original-text"),J=((A=$.textContent)==null?void 0:A.trim())||"";W&&J&&W!==J&&k.push({original:W,current:J,element:$})}),k.length===0){Vt.info("æ²¡æœ‰å‘ç°æ–‡æœ¬æ›´æ”¹");return}const X=window.location.pathname.match(/\/(elements|pages)\/([^\/]+)/);if(!X){console.error("[Axhub] æ— æ³•è¯†åˆ«å½“å‰é¡µé¢è·¯å¾„"),Vt.error("æ— æ³•è¯†åˆ«å½“å‰é¡µé¢è·¯å¾„");return}const[,T,E]=X,g=`${T}/${E}`,C=k.map(async({original:$})=>{try{const J=await(await fetch("/api/text-replace/count",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:g,searchText:$})})).json();return{original:$,count:J.count||0}}catch(W){return console.error(`[Axhub] ç»Ÿè®¡æ–‡æœ¬ "${$}" å¤±è´¥:`,W),{original:$,count:0}}}),N=(await Promise.all(C)).reduce(($,{count:W})=>$+W,0),D=document.createElement("div");D.id="text_replace_overlay",D.style.cssText=`
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.5);
      z-index: 2147483646;
      display: flex;
      align-items: center;
      justify-content: center;
    `;const H=document.createElement("div");H.className="popup",H.style.cssText=`
      width: 280px;
      z-index: 2147483647;
    `,H.innerHTML=`
      <div class="popup-header">
        <div class="popup-title">Axhub åŠŸèƒ½</div>
        <div class="popup-elements-count"></div>
        <div class="action_icon" id="text_replace_close">
          <svg class="icon-16 icon-fill"><use href="#ic_close"></use></svg>
        </div>
      </div>
      <div class="settings-menu-container">
        <div class="settings-menu-item" id="text_replace_confirm">
          <div class="settings-menu-text">æ›¿æ¢æ–‡æœ¬ï¼ˆå…± ${N} å¤„ï¼‰</div>
        </div>
        <div class="settings-menu-item" id="text_replace_cancel">
          <div class="settings-menu-text">æš‚ä¸æ›¿æ¢</div>
        </div>
      </div>
    `,D.appendChild(H),v.appendChild(D);const y=()=>{D.remove()},_=H.querySelector("#text_replace_close");_==null||_.addEventListener("click",$=>{$.stopPropagation(),y(),console.log("[Axhub] ç”¨æˆ·å–æ¶ˆäº†æ–‡æœ¬æ›¿æ¢æ“ä½œ")});const F=H.querySelector("#text_replace_cancel");F==null||F.addEventListener("click",$=>{$.stopPropagation(),y(),console.log("[Axhub] ç”¨æˆ·å–æ¶ˆäº†æ–‡æœ¬æ›¿æ¢æ“ä½œ")});const G=H.querySelector("#text_replace_confirm");G==null||G.addEventListener("click",async $=>{$.stopPropagation(),y();try{const W=k.map(async({original:Y,current:B})=>await(await fetch("/api/text-replace/replace",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:g,searchText:Y,replaceText:B})})).json()),J=await Promise.all(W),A=J.filter(Y=>Y.success).length,L=J.reduce((Y,B)=>Y+(B.changedFiles||0),0);A===J.length?(k.forEach(({current:Y,element:B})=>{B.setAttribute("data-original-text",Y),B.textContent!==Y&&(B.textContent=Y),console.log(`[Axhub] å·²æ›´æ–°é¡µé¢èŠ‚ç‚¹: "${B.getAttribute("data-original-text")}" -> "${Y}"`)}),Vt.success(`æ›¿æ¢æˆåŠŸï¼å…±ä¿®æ”¹äº† ${L} ä¸ªæ–‡ä»¶`),console.log("[Axhub] âœ… æ–‡æœ¬æ›¿æ¢æˆåŠŸï¼Œé¡µé¢èŠ‚ç‚¹å·²æ›´æ–°")):(Vt.warning(`éƒ¨åˆ†æ›¿æ¢å¤±è´¥ï¼ŒæˆåŠŸ ${A}/${J.length}`),console.warn("[Axhub] âš ï¸ éƒ¨åˆ†æ–‡æœ¬æ›¿æ¢å¤±è´¥"))}catch(W){console.error("[Axhub] âŒ æ–‡æœ¬æ›¿æ¢å¤±è´¥:",W),Vt.error("æ–‡æœ¬æ›¿æ¢å¤±è´¥")}}),D.addEventListener("click",$=>{$.target===D&&(y(),console.log("[Axhub] ç”¨æˆ·å–æ¶ˆäº†æ–‡æœ¬æ›¿æ¢æ“ä½œ"))})},m=v=>{console.log("[Axhub] å¼€å§‹æ³¨å…¥ä¿å­˜æ–‡æœ¬æŒ‰é’®");const x=()=>{var T;if(!t)return;const k=v.querySelector("#text_edit_copy_prompt");if(!k){console.log("[Axhub] text_edit_copy_prompt æŒ‰é’®æœªæ‰¾åˆ°ï¼Œç»§ç»­ç­‰å¾…..."),setTimeout(x,100);return}if(console.log("[Axhub] æ‰¾åˆ° text_edit_copy_prompt æŒ‰é’®:",k),v.querySelector("#save_text_files_btn")){console.log("[Axhub] ä¿å­˜æ–‡æœ¬æŒ‰é’®å·²å­˜åœ¨ï¼Œè·³è¿‡æ³¨å…¥");return}const X=document.createElement("div");X.id="save_text_files_btn",X.className="action_icon",X.innerHTML=`
        <svg class="icon-16 icon-fill" viewBox="0 0 16 16" style="pointer-events: none;">
          <text x="8" y="15" text-anchor="middle" font-size="16" fill="currentColor">A</text>
        </svg>
      `,(T=k.parentNode)==null||T.insertBefore(X,k),X.addEventListener("click",async E=>{E.stopPropagation(),console.log("[Axhub] ä¿å­˜æ–‡æœ¬æ–‡ä»¶æŒ‰é’®è¢«ç‚¹å‡»");const g=document.querySelector("#inspecta_app_container");g!=null&&g.shadowRoot?await b(g.shadowRoot):(console.error("[Axhub] æ— æ³•æ‰¾åˆ° shadowRoot"),Vt.error("æ— æ³•æ˜¾ç¤ºå¯¹è¯æ¡†"))}),console.log("[Axhub] ä¿å­˜æ–‡æœ¬æŒ‰é’®æ³¨å…¥æˆåŠŸ")};x()},w=v=>{console.log("[Inspecta-Custom] å¼€å§‹æ³¨å…¥è‡ªå®šä¹‰æŒ‰é’®");const x=()=>{var H;if(!t)return;const k=v.querySelector("#changes_action_export_to_file");if(!k){console.log("[Inspecta-Custom] changes_action_export_to_file æŒ‰é’®æœªæ‰¾åˆ°ï¼Œç»§ç»­ç­‰å¾…..."),setTimeout(x,100);return}if(console.log("[Inspecta-Custom] æ‰¾åˆ° changes_action_export_to_file æŒ‰é’®:",k),v.querySelector("#btn_axhub_action")){console.log("[Inspecta-Custom] è‡ªå®šä¹‰æŒ‰é’®å·²å­˜åœ¨ï¼Œè·³è¿‡æ³¨å…¥");return}const X=document.createElement("div");X.className="action_icon",X.id="btn_axhub_action",X.style.cssText="position: relative;",X.innerHTML=`
        <svg class="icon-16 icon-fill" viewBox="0 0 16 16" style="pointer-events: none;">
          <text x="8" y="15" text-anchor="middle" font-size="16" fill="currentColor">A</text>
        </svg>
        <div class="tooltip tooltip-bottom" style="opacity: 0;">Axhub åŠŸèƒ½</div>
      `;const T=document.createElement("div");T.id="axhub_menu",T.className="popup",T.innerHTML=`
        <div class="popup-header">
          <div class="popup-title">Axhub åŠŸèƒ½</div>
          <div class="popup-elements-count"></div>
          <div class="action_icon" id="btn_axhub_close">
            <svg class="icon-16 icon-fill"><use href="#ic_close"></use></svg>
          </div>
        </div>
        <div class="settings-menu-container">
          <div class="settings-menu-item" id="btn_axhub_save">
            <div class="settings-menu-text">ä¿å­˜åˆ°å¼ºåˆ¶æ ·å¼</div>
          </div>
          <div class="settings-menu-item" id="btn_axhub_clear">
            <div class="settings-menu-text">æ¸…ç©ºå¼ºåˆ¶æ ·å¼</div>
          </div>
        </div>
      `;const E=document.createElement("style");E.id="axhub_menu_style",E.textContent=`
        #axhub_menu_overlay {
          position: fixed;
          inset: 0;
          background: rgba(0, 0, 0, 0.5);
          z-index: 2147483646;
          display: none;
        }
        #axhub_menu_overlay.show {
          display: block;
        }
        #axhub_menu {
          position: fixed;
          z-index: 2147483647;
          top: 50%;
          left: 50%;
          transform: translate(-50%, -50%);
          opacity: 0;
          transition: opacity 0.2s ease-in-out;
          pointer-events: none;
          width: 280px;
          display: none;
        }
        #axhub_menu.show {
          opacity: 1;
          pointer-events: auto;
          display: block;
        }
      `,v.appendChild(E),(H=k.parentNode)==null||H.insertBefore(X,k);const g=document.createElement("div");g.id="axhub_menu_overlay",v.appendChild(g),v.appendChild(T),console.log("[Inspecta-Custom] Axhub èœå•å·²æ·»åŠ åˆ° shadowRoot"),X.addEventListener("click",y=>{y.stopPropagation(),T.classList.contains("show")?(T.classList.remove("show"),g.classList.remove("show"),console.log("[Inspecta-Custom] Axhub èœå•å…³é—­")):(T.classList.add("show"),g.classList.add("show"),console.log("[Inspecta-Custom] Axhub èœå•æ‰“å¼€"))});const C=T.querySelector("#btn_axhub_close");C==null||C.addEventListener("click",y=>{y.stopPropagation(),T.classList.remove("show"),g.classList.remove("show"),console.log("[Inspecta-Custom] Axhub èœå•å…³é—­ï¼ˆé€šè¿‡å…³é—­æŒ‰é’®ï¼‰")});const M=T.querySelector("#btn_axhub_save");M==null||M.addEventListener("click",async y=>{y.stopPropagation(),console.log("[Axhub] ä¿å­˜æŒ‰é’®è¢«ç‚¹å‡»"),T.classList.remove("show"),g.classList.remove("show"),await h(v)});const N=T.querySelector("#btn_axhub_clear");N==null||N.addEventListener("click",async y=>{y.stopPropagation(),console.log("[Axhub] æ¸…ç©ºæŒ‰é’®è¢«ç‚¹å‡»"),T.classList.remove("show"),g.classList.remove("show"),await d(v)}),g.addEventListener("click",y=>{y.target===g&&(T.classList.remove("show"),g.classList.remove("show"))});const D=y=>{const _=y.target;!X.contains(_)&&!T.contains(_)&&!g.contains(_)&&(T.classList.remove("show"),g.classList.remove("show"))};v.addEventListener("click",D),s=D,console.log("[Inspecta-Custom] è‡ªå®šä¹‰æŒ‰é’®æ³¨å…¥æˆåŠŸ")};x()},I=()=>{if(!t)return;const v=document.querySelector("#inspecta_app_container");if(!v){console.log("[Inspecta-Translator] å®¹å™¨ä¸å­˜åœ¨ï¼Œç­‰å¾…æ³¨å…¥...");return}if(console.log("[Inspecta-Translator] æ‰¾åˆ°å®¹å™¨:",v),!v.shadowRoot){console.log("[Inspecta-Translator] shadowRoot ä¸å­˜åœ¨ï¼Œç­‰å¾…åˆ›å»º...");return}console.log("[Inspecta-Translator] æ‰¾åˆ° shadowRootï¼Œå¼€å§‹ç¿»è¯‘"),p(v.shadowRoot),w(v.shadowRoot),m(v.shadowRoot),Wn()};return(()=>{t&&(console.log("[Inspecta-Translator] å¼€å§‹ç›‘å¬ Inspecta å®¹å™¨æ³¨å…¥"),I(),n=new MutationObserver(v=>{if(t)for(const x of v)x.type==="childList"&&x.addedNodes.forEach(k=>{if(k instanceof Element){if(k.id==="inspecta_app_container"){console.log("[Inspecta-Translator] æ£€æµ‹åˆ° Inspecta å®¹å™¨æ³¨å…¥");const T=()=>{if(!t)return;const E=k;E.shadowRoot?(console.log("[Inspecta-Translator] shadowRoot å·²åˆ›å»º"),n==null||n.disconnect(),p(E.shadowRoot),w(E.shadowRoot),m(E.shadowRoot),Wn()):(console.log("[Inspecta-Translator] shadowRoot å°šæœªåˆ›å»ºï¼Œç»§ç»­ç­‰å¾…..."),setTimeout(T,100))};T()}const X=k.querySelector("#inspecta_app_container");if(X){console.log("[Inspecta-Translator] åœ¨å­èŠ‚ç‚¹ä¸­æ£€æµ‹åˆ° Inspecta å®¹å™¨");const T=()=>{if(!t)return;const E=X;E.shadowRoot?(console.log("[Inspecta-Translator] shadowRoot å·²åˆ›å»º"),n==null||n.disconnect(),p(E.shadowRoot),w(E.shadowRoot),m(E.shadowRoot),Wn()):(console.log("[Inspecta-Translator] shadowRoot å°šæœªåˆ›å»ºï¼Œç»§ç»­ç­‰å¾…..."),setTimeout(T,100))};T()}}})}),n.observe(document.body,{childList:!0,subtree:!0}),console.log("[Inspecta-Translator] ç›‘å¬å™¨å·²å¯åŠ¨"))})(),()=>{t=!1,n&&(n.disconnect(),n=null),o&&(o.disconnect(),o=null),r!==null&&(clearTimeout(r),r=null),i&&(s&&(i.removeEventListener("click",s),s=null),i.querySelectorAll("#axhub_menu_overlay, #axhub_menu, #btn_axhub_action, #save_text_files_btn, #axhub_menu_style, #text_replace_overlay").forEach(v=>v.remove())),Wn()}},dl=()=>{let e=!1,t;return{enable:()=>{e||(e=!0,t=ul())},disable:()=>{e&&(t==null||t(),t=void 0,e=!1)},isEnabled:()=>e,getStatus:()=>({enabled:e})}};let di=!1,Wt=!1;const En=new Set,Vn=new Set,Fr="axhub-text-edit-style";let xn=null,tn=null;const ln=e=>{typeof window>"u"||window.parent&&window.parent!==window&&window.parent.postMessage(e,"*")},Qs=()=>document.getElementById("root"),Vo=e=>{var t;return((t=e.textContent)==null?void 0:t.trim())??""},fl=()=>{if(document.getElementById(Fr))return;const e=document.createElement("style");e.id=Fr,e.textContent=`
    .text-node-edited {
      background-color: rgba(250, 173, 20, 0.12);
    }
  `,document.head.appendChild(e)},pl=()=>{var e;(e=document.getElementById(Fr))==null||e.remove()},bt=()=>{ln({type:"TEXT_EDIT_STATUS",enabled:Wt,editedCount:En.size})},ml=()=>({enabled:Wt,editedCount:En.size}),lt=(e,t)=>{ln({type:"TEXT_EDIT_NOTICE",level:e,message:t})},ea=e=>{const t=e.target;if(!t||!t.hasAttribute("data-axhub-text-edit"))return;const n=t.getAttribute("data-original-text")??"",o=Vo(t);n!==o?(En.add(t),t.classList.add("text-node-edited")):(En.delete(t),t.classList.remove("text-node-edited")),bt()},ta=e=>{const t=e.tagName.toLowerCase();return!(["script","style","input","textarea","select","option"].includes(t)||e.getAttribute("contenteditable")==="false"||!Vo(e)||e.childElementCount>0&&!Array.from(e.childNodes).some(r=>{var i;return r.nodeType===Node.TEXT_NODE&&((i=r.textContent)==null?void 0:i.trim())}))},hl=()=>{const e=Qs();if(!e)return[];const t=["p","span","div","h1","h2","h3","h4","h5","h6","li","td","th","label","a","button","strong","b","em","i"].join(",");return Array.from(e.querySelectorAll(t)).filter(ta)},na=e=>{e.length!==0&&(e.forEach(t=>{t.hasAttribute("data-original-text")||t.setAttribute("data-original-text",Vo(t));const n=t.getAttribute("contenteditable");n!==null&&t.setAttribute("data-axhub-original-contenteditable",n),t.setAttribute("data-axhub-text-edit","true"),t.setAttribute("contenteditable","true"),t.addEventListener("input",ea)}),e.forEach(t=>Vn.add(t)))},gl=()=>{if(xn)return;const e=Qs();e&&(xn=new MutationObserver(t=>{if(!Wt)return;const n=[];if(t.forEach(i=>{i.addedNodes.forEach(s=>{var c;if(s.nodeType!==Node.ELEMENT_NODE)return;const l=s;l.matches&&l.matches("p,span,div,h1,h2,h3,h4,h5,h6,li,td,th,label,a,button,strong,b,em,i")&&n.push(l);const a=Array.from(((c=l.querySelectorAll)==null?void 0:c.call(l,"p,span,div,h1,h2,h3,h4,h5,h6,li,td,th,label,a,button,strong,b,em,i"))||[]);n.push(...a)})}),n.length===0)return;const r=n.filter(i=>!Vn.has(i)).filter(ta);na(r),bt()}),xn.observe(e,{childList:!0,subtree:!0}))},bl=()=>{xn&&(xn.disconnect(),xn=null)},oa=()=>{if(Wt){bt();return}const e=hl();if(e.length===0){lt("info","æ²¡æœ‰å‘ç°å¯ç¼–è¾‘æ–‡æœ¬"),bt();return}fl(),na(e),gl(),Wt=!0,bt(),lt("success","æ–‡æœ¬ç¼–è¾‘æ¨¡å¼å·²å¼€å¯ï¼Œç‚¹å‡»é¡µé¢æ–‡æœ¬å³å¯ç¼–è¾‘")},$r=e=>{if(!Wt){bt();return}Vn.forEach(t=>{if(t.removeEventListener("input",ea),t.classList.remove("text-node-edited"),e){const o=t.getAttribute("data-original-text");o!==null&&(t.textContent=o)}const n=t.getAttribute("data-axhub-original-contenteditable");n!==null?(t.setAttribute("contenteditable",n),t.removeAttribute("data-axhub-original-contenteditable")):t.getAttribute("data-axhub-text-edit")==="true"&&t.removeAttribute("contenteditable"),t.getAttribute("data-axhub-text-edit")==="true"&&t.removeAttribute("data-axhub-text-edit")}),En.clear(),Vn.clear(),pl(),bl(),Wt=!1,bt(),lt("info","å·²é€€å‡ºæ–‡æœ¬ç¼–è¾‘æ¨¡å¼")},wl=()=>{const e=[];return Vn.forEach(t=>{const n=t.getAttribute("data-original-text"),o=Vo(t);n&&o&&n!==o&&e.push({original:n,current:o,element:t})}),e},xl=e=>{const t=new Map;e.forEach(r=>{const i=t.get(r.original)||{currents:new Set,elements:[]};i.currents.add(r.current),i.elements.push(r.element),t.set(r.original,i)});const n=[],o=[];return t.forEach((r,i)=>{if(r.currents.size>1){n.push({original:i,currents:Array.from(r.currents)});return}const[s]=Array.from(r.currents);o.push({original:i,current:s,elements:r.elements})}),{conflicts:n,groups:o}},yl=async e=>{if(tn){lt("warning","å·²æœ‰ä¿å­˜ç¡®è®¤åœ¨å¤„ç†ä¸­");return}const t=wl();if(t.length===0){lt("info","æ²¡æœ‰å‘ç°æ–‡æœ¬æ›´æ”¹"),bt();return}const{conflicts:n,groups:o}=xl(t);if(n.length>0){ln({type:"TEXT_EDIT_CONFLICT",conflicts:n}),lt("warning","å­˜åœ¨ç›¸åŒåŸæ–‡ä½†ä¸åŒä¿®æ”¹çš„å†…å®¹ï¼Œæ— æ³•æ‰¹é‡ä¿å­˜");return}const r=window.location.pathname.match(/\/(elements|pages)\/([^\/]+)/);if(!r){lt("error","æ— æ³•è¯†åˆ«å½“å‰é¡µé¢è·¯å¾„");return}const[,i,s]=r,l=`${i}/${s}`;let a=0;try{const c=await fetch("/api/text-replace/count",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:l,replacements:o.map(({original:p})=>({searchText:p}))})}),u=await c.json();a=Number((u==null?void 0:u.totalCount)||0),c.ok||(console.error("[Axhub] ç»Ÿè®¡æ–‡æœ¬å¤±è´¥:",(u==null?void 0:u.error)||u),a=0)}catch(c){console.error("[Axhub] ç»Ÿè®¡æ–‡æœ¬å¤±è´¥:",c),a=0}tn={groups:o,totalCount:a,changedCount:t.length,exitAfterSave:e},ln({type:"TEXT_EDIT_SAVE_CONFIRM_REQUEST",totalCount:a,changedCount:t.length,exitAfterSave:e})},vl=async e=>{const t=e.data;if(!(!t||typeof t.type!="string"))switch(t.type){case"TEXT_EDIT_ENABLE":oa();break;case"TEXT_EDIT_SAVE":await yl(!!t.exitAfterSave);break;case"TEXT_EDIT_SAVE_CONFIRM":if(!tn){lt("info","æ²¡æœ‰å¾…ç¡®è®¤çš„ä¿å­˜æ“ä½œ");break}if(!t.confirmed){tn=null,lt("info","å·²å–æ¶ˆä¿å­˜");break}{const{exitAfterSave:n,totalCount:o}=tn,r=tn.groups;tn=null;const i=window.location.pathname.match(/\/(elements|pages)\/([^\/]+)/);if(!i){lt("error","æ— æ³•è¯†åˆ«å½“å‰é¡µé¢è·¯å¾„");break}const[,s,l]=i,a=`${s}/${l}`;try{const c=await fetch("/api/text-replace/replace",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:a,replacements:r.map(({original:h,current:d})=>({searchText:h,replaceText:d}))})}),u=await c.json(),p=!!(u!=null&&u.success),f=Number((u==null?void 0:u.changedFiles)||0);if(c.ok&&p){if(r.forEach(({current:h,elements:d})=>{d.forEach(b=>{b.setAttribute("data-original-text",h),b.textContent!==h&&(b.textContent=h),b.classList.remove("text-node-edited"),En.delete(b)})}),lt("success",`æ›¿æ¢æˆåŠŸï¼å…±æ›¿æ¢ ${o} å¤„ï¼Œä¿®æ”¹äº† ${f} ä¸ªæ–‡ä»¶`),ln({type:"TEXT_EDIT_SAVE_RESULT",success:!0,totalFiles:f,totalCount:o}),n){$r(!1);break}}else lt("warning","æ–‡æœ¬æ›¿æ¢å¤±è´¥"),ln({type:"TEXT_EDIT_SAVE_RESULT",success:!1,totalFiles:f,totalCount:o})}catch(c){console.error("[Axhub] æ–‡æœ¬æ›¿æ¢å¤±è´¥:",c),lt("error","æ–‡æœ¬æ›¿æ¢å¤±è´¥"),ln({type:"TEXT_EDIT_SAVE_RESULT",success:!1,totalFiles:0,totalCount:o})}bt()}break;case"TEXT_EDIT_EXIT":$r(!!t.discardChanges);break;case"TEXT_EDIT_STATUS_REQUEST":bt();break}},El=()=>{typeof window>"u"||di||(di=!0,window.addEventListener("message",vl),bt())},Sl=()=>(El(),{enable:()=>oa(),disable:(e=!1)=>$r(e),isEnabled:()=>Wt,getStatus:()=>ml()}),kl=2,ze="[WebEditorV2]",fi="__mcp_web_editor_v2_host__",ra="__mcp_web_editor_v2_overlay__",ia="__mcp_web_editor_v2_ui__",Cl=2147483647,at={hover:"#008F5D",selected:"#008F5D",selectionBorder:"#008F5D",dragGhost:"rgba(0, 143, 93, 0.3)",insertionLine:"#f59e0b",guideLine:"#ec4899",distanceLabelBg:"rgba(15, 23, 42, 0.92)",distanceLabelBorder:"rgba(51, 65, 85, 0.5)",distanceLabelText:"rgba(255, 255, 255, 0.98)"},Al=5,pi=6,Tl=8,Nl=3,Rl=6,Il=2,_l=30,mi=300,Ml=1,Ll=1,Dl=1,Pl=4,Fl='600 11px system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif',$l=6,Ol=3,Vl=4,Bl=8;class Oe{constructor(){jn(this,"disposed",!1);jn(this,"disposers",[])}get isDisposed(){return this.disposed}add(t){if(this.disposed){try{t()}catch{}return}this.disposers.push(t)}listen(t,n,o,r){t.addEventListener(n,o,r),this.add(()=>t.removeEventListener(n,o,r))}observeResize(t,n,o){const r=new ResizeObserver(n);return r.observe(t,o),this.add(()=>r.disconnect()),r}observeMutation(t,n,o){const r=new MutationObserver(n);return r.observe(t,o),this.add(()=>r.disconnect()),r}requestAnimationFrame(t){const n=requestAnimationFrame(t);let o=!1;const r=()=>{o||(o=!0,cancelAnimationFrame(n))};return this.add(r),r}dispose(){if(!this.disposed){this.disposed=!0;for(let t=this.disposers.length-1;t>=0;t--)try{this.disposers[t]()}catch{}this.disposers.length=0}}}const Hl=`
  :host {
    all: initial;

    /* Design tokens aligned with attr-ui.html design spec */
    /* Surface colors */
    --we-surface-bg: #ffffff;
    --we-surface-secondary: #fafafa;

    /* Control colors - input containers use gray bg */
    --we-control-bg: #f3f3f3;
    --we-control-bg-hover: #e8e8e8;
    --we-control-border-hover: #e0e0e0;
    --we-control-bg-focus: #ffffff;
    --we-control-border-focus: #008F5D;

    /* Border colors */
    --we-border-subtle: #e5e5e5;
    --we-border-strong: #d4d4d4;
    --we-border-section: #f3f3f3;

    /* Text colors */
    --we-text-primary: #333333;
    --we-text-secondary: #737373;
    --we-text-muted: #a3a3a3;

    /* Accent surfaces (used by CSS/Props panels) */
    --we-accent-info-bg: rgba(0, 143, 93, 0.08);
    --we-accent-brand-bg: rgba(0, 143, 93, 0.12);
    --we-accent-brand-border: rgba(0, 143, 93, 0.25);
    --we-accent-warning-bg: rgba(251, 191, 36, 0.14);
    --we-accent-warning-border: rgba(251, 191, 36, 0.25);
    --we-accent-danger-bg: rgba(248, 113, 113, 0.12);
    --we-accent-danger-border: rgba(248, 113, 113, 0.25);

    /* Shadows - Tailwind-like shadow-xl */
    --we-shadow-subtle: 0 1px 2px rgba(0, 0, 0, 0.05);
    --we-shadow-panel: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1);
    --we-shadow-tab: 0 1px 2px rgba(0, 0, 0, 0.05);

    /* Radii */
    --we-radius-panel: 8px;
    --we-radius-control: 8px;
    --we-radius-tab: 4px;

    /* Sizes */
    --we-icon-btn-size: 24px;

    /* Focus ring - blue inset border style */
    --we-focus-ring: #008F5D;

    /* Motion - bounce easing for toolbar animations */
    --we-ease-bounce: cubic-bezier(0.68, -0.55, 0.265, 1.55);
  }

  *,
  *::before,
  *::after {
    box-sizing: border-box;
  }

  /* Overlay container - for Canvas and visual feedback */
  #${ra} {
    position: fixed;
    inset: 0;
    pointer-events: none;
    contain: layout style;
  }

  /* ==========================================================================
   * Resize Handles (Phase 4.9)
   * ========================================================================== */

  /* Handles layer - covers viewport, pass-through by default */
  .we-handles-layer {
    position: absolute;
    inset: 0;
    pointer-events: none;
    contain: layout style paint;
  }

  /* Selection frame - positioned by selection rect */
  .we-selection-frame {
    position: absolute;
    top: 0;
    left: 0;
    width: 0;
    height: 0;
    transform: translate3d(0, 0, 0);
    pointer-events: none;
    will-change: transform, width, height;
  }

  /* Individual resize handle */
  .we-resize-handle {
    position: absolute;
    width: 8px;
    height: 8px;
    border-radius: 2px;
    background: rgba(255, 255, 255, 0.98);
    border: 1px solid ${at.selectionBorder};
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
    pointer-events: auto;
    touch-action: none;
    user-select: none;
    transition: background-color 0.1s ease, border-color 0.1s ease, transform 0.1s ease;
  }

  .we-resize-handle:hover {
    background: ${at.selectionBorder};
    border-color: ${at.selectionBorder};
    transform: translate(-50%, -50%) scale(1.15);
  }

  .we-resize-handle:active {
    transform: translate(-50%, -50%) scale(1.0);
  }

  /* Handle positions - all use translate(-50%, -50%) as base */
  .we-resize-handle[data-dir="n"]  { left: 50%; top: 0; transform: translate(-50%, -50%); cursor: ns-resize; }
  .we-resize-handle[data-dir="s"]  { left: 50%; top: 100%; transform: translate(-50%, -50%); cursor: ns-resize; }
  .we-resize-handle[data-dir="e"]  { left: 100%; top: 50%; transform: translate(-50%, -50%); cursor: ew-resize; }
  .we-resize-handle[data-dir="w"]  { left: 0; top: 50%; transform: translate(-50%, -50%); cursor: ew-resize; }
  .we-resize-handle[data-dir="nw"] { left: 0; top: 0; transform: translate(-50%, -50%); cursor: nwse-resize; }
  .we-resize-handle[data-dir="ne"] { left: 100%; top: 0; transform: translate(-50%, -50%); cursor: nesw-resize; }
  .we-resize-handle[data-dir="sw"] { left: 0; top: 100%; transform: translate(-50%, -50%); cursor: nesw-resize; }
  .we-resize-handle[data-dir="se"] { left: 100%; top: 100%; transform: translate(-50%, -50%); cursor: nwse-resize; }

  /* Size HUD - shows WÃ—H while resizing */
  .we-size-hud {
    position: absolute;
    left: 50%;
    top: 0;
    transform: translate(-50%, calc(-100% - 8px));
    padding: 3px 8px;
    font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    font-size: 11px;
    font-weight: 600;
    line-height: 1.2;
    color: rgba(255, 255, 255, 0.98);
    background: rgba(15, 23, 42, 0.92);
    border: 1px solid rgba(51, 65, 85, 0.5);
    border-radius: 4px;
    pointer-events: none;
    user-select: none;
    white-space: nowrap;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
    backdrop-filter: blur(4px);
    -webkit-backdrop-filter: blur(4px);
  }

  /* ==========================================================================
   * Performance HUD (Phase 5.3)
   * ========================================================================== */

  .we-perf-hud {
    position: fixed;
    left: 12px;
    bottom: 12px;
    padding: 8px 10px;
    border-radius: 10px;
    background: rgba(15, 23, 42, 0.78);
    border: 1px solid rgba(51, 65, 85, 0.45);
    color: rgba(255, 255, 255, 0.96);
    font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    font-size: 12px;
    line-height: 1.25;
    pointer-events: none;
    user-select: none;
    white-space: nowrap;
    z-index: 10;
    box-shadow: 0 4px 14px rgba(0, 0, 0, 0.18);
    backdrop-filter: blur(6px);
    -webkit-backdrop-filter: blur(6px);
    font-variant-numeric: tabular-nums;
  }

  .we-perf-hud-line + .we-perf-hud-line {
    margin-top: 4px;
  }

  /* UI container - for panels and controls */
  /* Position below toolbar: 16px (toolbar top) + 40px (toolbar height) + 8px (gap) = 64px */
  #${ia} {
    position: fixed;
    top: 32px;
    right: 16px;
    pointer-events: auto;
    /* Inter font with system fallbacks (aligned with design spec) */
    font-family: "Inter", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    font-size: 11px;
    line-height: 1.4;
    color: var(--we-text-primary);
    -webkit-font-smoothing: antialiased;
  }

  /* Panel styles */
  /* max-height: 100vh - 64px (top offset) - 16px (bottom margin) = 100vh - 80px */
  .we-panel {
    width: 280px;
    max-width: calc(100vw - 32px);
    max-height: calc(100vh - 48px);
    background: var(--we-surface-bg);
    border: 1px solid var(--we-border-subtle);
    border-radius: var(--we-radius-panel);
    box-shadow: var(--we-shadow-panel);
    overflow: hidden;
    contain: layout style paint;
  }

  .we-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 8px;
    padding: 8px 12px;
    background: var(--we-surface-bg);
    border-bottom: 1px solid var(--we-border-subtle);
    user-select: none;
  }

  .we-title {
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 11px;
    font-weight: 600;
    color: var(--we-text-primary);
  }

  .we-badge {
    font-size: 10px;
    font-weight: 500;
    padding: 2px 6px;
    background: linear-gradient(135deg, #008F5D, #007A4F);
    color: white;
    border-radius: 4px;
  }

  .we-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    padding: 6px 12px;
    font-size: 12px;
    font-weight: 500;
    color: #475569;
    background: white;
    border: 1px solid rgba(148, 163, 184, 0.5);
    border-radius: 6px;
    cursor: pointer;
    transition: all 0.15s ease;
  }

  .we-btn:hover {
    background: #f8fafc;
    border-color: rgba(148, 163, 184, 0.7);
  }

  .we-btn:active {
    background: #f1f5f9;
  }

  .we-btn:focus-visible {
    outline: none;
    box-shadow: 0 0 0 2px var(--we-focus-ring);
  }

  .we-btn:disabled {
    opacity: 0.55;
    cursor: not-allowed;
  }

  .we-btn--primary {
    background: linear-gradient(135deg, #0f172a, #1e293b);
    color: #ffffff;
    border-color: rgba(15, 23, 42, 0.5);
  }

  .we-btn--primary:hover:not(:disabled) {
    background: linear-gradient(135deg, #1e293b, #334155);
    border-color: rgba(15, 23, 42, 0.65);
  }

  .we-btn--danger {
    color: #b91c1c;
    border-color: rgba(248, 113, 113, 0.45);
  }

  .we-btn--danger:hover:not(:disabled) {
    background: rgba(248, 113, 113, 0.08);
    border-color: rgba(248, 113, 113, 0.6);
  }

  /* Icon button (28x28) - used for window controls (close/minimize, etc.) */
  .we-icon-btn {
    width: var(--we-icon-btn-size);
    height: var(--we-icon-btn-size);
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 0;
    background: var(--we-control-bg);
    border: 0;
    border-radius: var(--we-radius-control);
    color: var(--we-text-secondary);
    cursor: pointer;
    transition: background 0.15s ease, box-shadow 0.15s ease;
  }

  .we-icon-btn:hover {
    background: var(--we-control-bg-hover);
    color: var(--we-text-primary);
  }

  .we-icon-btn:active {
    background: var(--we-control-bg-hover);
  }

  .we-icon-btn:focus-visible {
    outline: none;
    box-shadow: 0 0 0 2px var(--we-focus-ring);
  }

  .we-icon-btn svg {
    width: 16px;
    height: 16px;
    display: block;
  }

  /* Drag handle (grip) - used for repositioning floating UI */
  .we-drag-handle {
    width: var(--we-icon-btn-size);
    height: var(--we-icon-btn-size);
    display: inline-flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    padding: 0;
    background: transparent;
    border: 0;
    border-radius: var(--we-radius-control);
    color: var(--we-text-muted);
    cursor: grab;
    touch-action: none;
    user-select: none;
    transition: background 0.15s ease, color 0.15s ease, box-shadow 0.15s ease;
  }

  .we-drag-handle:hover {
    background: var(--we-control-bg);
    color: var(--we-text-secondary);
  }

  .we-drag-handle:focus-visible {
    outline: none;
    box-shadow: 0 0 0 2px var(--we-focus-ring);
  }

  .we-drag-handle:active,
  .we-drag-handle[data-dragging="true"] {
    cursor: grabbing;
    background: var(--we-control-bg-hover);
    color: var(--we-text-primary);
  }

  .we-drag-handle svg {
    width: 14px;
    height: 14px;
    display: block;
  }

  /* ==========================================================================
   * Toolbar (Redesigned per toolbar-ui.html design spec)
   * - Bounce easing animations
   * - Collapsible pill (580x40 <-> 40x40)
   * - Grip icon rotation on collapse
   * ========================================================================== */

  .we-toolbar {
    position: fixed;
    left: 50%;
    top: 16px;
    transform: translateX(-50%);
    width: 580px;
    height: 40px;
    max-width: calc(100vw - 32px);
    display: flex;
    align-items: center;
    background: #ffffff;
    border-radius: 999px;
    box-shadow: 0 -4px 10px -6px rgba(15, 23, 42, 0.18),
      0 10px 15px -3px rgba(203, 213, 225, 0.5),
      0 4px 6px -4px rgba(203, 213, 225, 0.5);
    pointer-events: auto;
    user-select: none;
    font-family: 'Inter', system-ui, -apple-system, sans-serif;
    font-size: 11px;
    color: #475569;
    transition: width 500ms var(--we-ease-bounce), height 500ms var(--we-ease-bounce);
    overflow: visible;
    will-change: width, height;
  }

  .we-toolbar[data-position="bottom"] {
    top: auto;
    bottom: 16px;
  }

  /* Dragged toolbar: use left/top (inline styles) instead of docked centering */
  .we-toolbar[data-dragged="true"] {
    left: auto;
    right: auto;
    top: auto;
    bottom: auto;
    transform: none;
  }

  /* Collapsed toolbar - 40x40 circle */
  .we-toolbar[data-minimized="true"] {
    width: 40px;
    height: 40px;
  }

  /* Toolbar content row (collapses with toolbar) */
  .we-toolbar-content {
    display: flex;
    align-items: center;
    flex: 1;
    min-width: 0;
    gap: 10px;
    white-space: nowrap;
    padding-right: 8px;
    transition: opacity 350ms ease, transform 400ms var(--we-ease-bounce);
    will-change: opacity, transform;
  }

  .we-toolbar[data-minimized="true"] .we-toolbar-content {
    opacity: 0;
    transform: translateX(-16px) scale(0.95);
    pointer-events: none;
  }

  .we-toolbar[data-minimized="false"] .we-toolbar-content {
    opacity: 1;
    transform: translateX(0) scale(1);
    pointer-events: auto;
  }

  /* Grip toggle button (40x40, hover slate-50, active scale-90) */
  .we-toolbar .we-drag-handle {
    width: 40px;
    height: 40px;
    flex-shrink: 0;
    border-radius: 999px;
    cursor: pointer;
    transition: background-color 150ms ease, transform 150ms ease;
  }

  .we-toolbar .we-drag-handle:hover {
    background: #f8fafc;
  }

  .we-toolbar .we-drag-handle:active {
    transform: scale(0.9);
  }

  /* Grip icon rotation (collapsed 90deg -> expanded 0deg) */
  .we-toolbar .we-drag-handle svg {
    width: 16px;
    height: 16px;
    color: #94a3b8;
    transition: transform 500ms var(--we-ease-bounce);
    transform: rotate(0deg);
  }

  .we-toolbar[data-minimized="true"] .we-drag-handle svg {
    transform: rotate(90deg);
  }

  /* Status indicator: green dot + "Editor" label */
  /* Undo/Redo counts */
  .we-toolbar-history {
    display: flex;
    gap: 10px;
    font-size: 10px;
    font-weight: 500;
    color: #94a3b8;
    font-variant-numeric: tabular-nums;
  }

  .we-toolbar-history-value {
    color: #475569;
    font-weight: 700;
  }

  /* Divider */
  .we-toolbar-divider {
    width: 1px;
    height: 16px;
    background: #e2e8f0;
  }

  /* Structure group (Structure button + divider + Undo/Redo icons) */
  .we-toolbar-structure-group {
    display: inline-flex;
    align-items: center;
    background: #f1f5f9;
    border-radius: 999px;
    padding: 2px;
  }

  .we-toolbar-structure-btn {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    padding: 4px 10px;
    font-size: 11px;
    font-weight: 500;
    color: #64748b;
    background: transparent;
    border: 0;
    border-radius: 999px;
    cursor: pointer;
    transition: color 150ms ease, background-color 150ms ease;
  }

  .we-toolbar-structure-btn:hover:not(:disabled) {
    color: #1e293b;
    background: #ffffff;
  }

  .we-toolbar-structure-btn:disabled {
    opacity: 0.55;
    cursor: not-allowed;
  }

  .we-toolbar-structure-btn svg {
    width: 10px;
    height: 10px;
    opacity: 0.5;
    display: block;
  }

  .we-toolbar-structure-separator {
    width: 1px;
    height: 12px;
    background: #e2e8f0;
  }

  .we-toolbar-group-icon-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 4px;
    padding: 4px 8px;
    background: transparent;
    border: 0;
    border-radius: 999px;
    color: #94a3b8;
    cursor: pointer;
    transition: color 150ms ease, background-color 150ms ease;
  }

  .we-toolbar-group-icon-btn:hover:not(:disabled) {
    color: #334155;
    background: #ffffff;
  }

  .we-toolbar-group-icon-btn:disabled {
    opacity: 0.45;
    cursor: not-allowed;
  }

  .we-toolbar-group-icon-btn svg {
    width: 14px;
    height: 14px;
    display: block;
  }

  .we-toolbar-count {
    min-width: 12px;
    font-size: 10px;
    font-weight: 600;
    color: #64748b;
    font-variant-numeric: tabular-nums;
  }

  .we-toolbar-icon-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 28px;
    height: 28px;
    border: 0;
    border-radius: 999px;
    background: #f1f5f9;
    color: #475569;
    cursor: pointer;
    transition: background-color 150ms ease, color 150ms ease;
  }

  .we-toolbar-icon-btn:hover:not(:disabled) {
    background: #e2e8f0;
    color: #334155;
  }

  .we-toolbar-icon-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  .we-toolbar-icon-text {
    font-size: 11px;
    font-weight: 700;
    line-height: 1;
  }

  /* End actions container: pushes apply + close to far right */
  .we-toolbar-end-actions {
    margin-left: auto;
    display: inline-flex;
    align-items: center;
    gap: 10px;
  }

  /* Apply button (green) */
  .we-toolbar-apply-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 6px 16px;
    font-size: 11px;
    font-weight: 700;
    color: #ffffff;
    background: #008F5D;
    border: 0;
    border-radius: 999px;
    cursor: pointer;
    transition: background-color 150ms ease, transform 150ms ease, box-shadow 150ms ease;
    box-shadow: 0 4px 6px -1px rgba(0, 143, 93, 0.25),
      0 2px 4px -2px rgba(0, 143, 93, 0.25);
  }

  .we-toolbar-apply-btn:hover:not(:disabled) {
    background: #007A4F;
  }

  .we-toolbar-apply-btn:active:not(:disabled) {
    transform: scale(0.95);
  }

  .we-toolbar-apply-btn:disabled {
    opacity: 0.55;
    cursor: not-allowed;
    box-shadow: none;
  }

  /* Close button (red hover) */
  .we-toolbar-close-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 6px;
    background: transparent;
    border: 0;
    border-radius: 999px;
    color: #94a3b8;
    cursor: pointer;
    transition: color 150ms ease, background-color 150ms ease;
  }

  .we-toolbar-close-btn:hover:not(:disabled) {
    color: #ef4444;
    background: #fef2f2;
  }

  .we-toolbar-close-btn:disabled {
    opacity: 0.45;
    cursor: not-allowed;
  }

  .we-toolbar-close-btn svg {
    width: 14px;
    height: 14px;
    display: block;
  }

  /* Simple confirm dialog */
  .we-dialog-overlay {
    position: fixed;
    inset: 0;
    background: rgba(15, 23, 42, 0.45);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10002;
  }

  .we-dialog {
    width: 300px;
    background: var(--we-surface-bg);
    border: 1px solid var(--we-border-subtle);
    border-radius: 12px;
    box-shadow: 0 12px 30px rgba(15, 23, 42, 0.2);
    overflow: hidden;
  }

  .we-dialog-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 8px;
    padding: 10px 12px;
    border-bottom: 1px solid var(--we-border-subtle);
    font-size: 12px;
    font-weight: 600;
    color: var(--we-text-primary);
  }

  .we-dialog-close {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 24px;
    height: 24px;
    border: 0;
    background: transparent;
    color: #94a3b8;
    border-radius: 999px;
    cursor: pointer;
  }

  .we-dialog-close:hover {
    color: #ef4444;
    background: #fef2f2;
  }

  .we-dialog-content {
    padding: 12px;
    font-size: 11px;
    line-height: 1.45;
    color: #475569;
    white-space: pre-line;
  }

  .we-dialog-actions {
    display: grid;
    gap: 8px;
    padding: 12px;
  }

  .we-dialog-action {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    padding: 8px 12px;
    border-radius: 8px;
    border: 1px solid #e2e8f0;
    background: #ffffff;
    color: #334155;
    font-size: 12px;
    font-weight: 600;
    cursor: pointer;
    transition: background-color 150ms ease, border-color 150ms ease;
  }

  .we-dialog-action:hover {
    background: #f8fafc;
    border-color: #cbd5f5;
  }

  .we-dialog-action--primary {
    background: #008F5D;
    border-color: #008F5D;
    color: #ffffff;
  }

  .we-dialog-action--primary:hover {
    background: #007A4F;
    border-color: #007A4F;
  }

  /* Screen-reader-only utility */
  .we-sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
  }

  /* Respect reduced motion preference */
  @media (prefers-reduced-motion: reduce) {
    .we-toolbar,
    .we-toolbar-content,
    .we-toolbar .we-drag-handle,
    .we-toolbar .we-drag-handle svg,
    .we-toolbar-structure-btn,
    .we-toolbar-group-icon-btn,
    .we-toolbar-apply-btn,
    .we-toolbar-close-btn {
      transition: none;
    }
  }

  /* ==========================================================================
     Breadcrumbs (Phase 2.2) - Anchored to selection element
     ========================================================================== */
  .we-breadcrumbs {
    position: fixed;
    /* left/top set dynamically via JS based on selection rect */
    left: 16px;
    top: 72px;
    width: auto;
    max-width: min(600px, calc(100vw - 400px));
    display: flex;
    align-items: center;
    gap: 2px;
    padding: 4px 6px;
    background: var(--we-surface-bg);
    border: 1px solid var(--we-border-subtle);
    border-radius: var(--we-radius-panel);
    box-shadow: var(--we-shadow-panel);
    pointer-events: auto;
    user-select: none;
    overflow-x: auto;
    white-space: nowrap;
    scrollbar-width: none;
    z-index: 5;
    color: var(--we-text-primary);
  }

  .we-breadcrumbs[data-hidden="true"] {
    display: none;
  }

  .we-breadcrumbs[data-position="bottom"] {
    top: auto;
    bottom: 72px;
  }

  .we-breadcrumbs::-webkit-scrollbar {
    display: none;
  }

  .we-crumb {
    display: inline-flex;
    align-items: center;
    max-width: 220px;
    padding: 4px 8px;
    border-radius: var(--we-radius-control);
    border: none;
    background: transparent;
    color: var(--we-text-secondary);
    font-size: 12px;
    font-weight: 500;
    line-height: 1.2;
    cursor: pointer;
    overflow: hidden;
    text-overflow: ellipsis;
    transition: all 0.15s ease;
  }

  .we-crumb:hover {
    background: rgba(0, 143, 93, 0.08);
    color: var(--we-text-primary);
  }

  .we-crumb:active {
    background: rgba(0, 143, 93, 0.12);
  }

  .we-crumb:focus-visible {
    outline: none;
    box-shadow: 0 0 0 2px var(--we-focus-ring);
  }

  .we-crumb--current {
    background: rgba(0, 143, 93, 0.1);
    color: #008F5D;
    font-weight: 600;
  }

  .we-crumb-sep {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 14px;
    flex: 0 0 auto;
    color: var(--we-text-muted);
    font-size: 12px;
  }

  .we-crumb-sep--shadow {
    color: var(--we-text-secondary);
  }

  .we-body {
    padding: 14px;
    color: #475569;
    font-size: 12px;
  }

  .we-status {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px 12px;
    background: rgba(34, 197, 94, 0.1);
    border-radius: 6px;
    color: #15803d;
    font-size: 12px;
  }

  .we-status-dot {
    width: 8px;
    height: 8px;
    background: #22c55e;
    border-radius: 50%;
    animation: pulse 2s ease-in-out infinite;
  }

  @keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.5; }
  }

  /* ==========================================================================
     Property Panel (Phase 3)
     ========================================================================== */

  .we-prop-panel {
    display: flex;
    flex-direction: column;
    max-height: calc(100vh - 48px);
  }

  /* Dragged property panel: becomes a floating fixed panel positioned via left/top (inline styles) */
  .we-prop-panel[data-dragged="true"][data-minimized="false"] {
    position: fixed;
    left: auto;
    right: auto;
    top: auto;
    bottom: auto;
  }

  /* Minimized property panel - becomes a small icon button fixed at top-right */
  .we-prop-panel[data-minimized="true"] {
    position: fixed;
    top: 16px;
    right: 16px;
    width: auto;
    max-height: none;
    background: transparent;
    border: 0;
    box-shadow: none;
    overflow: visible;
    z-index: 10;
  }

  .we-prop-panel[data-minimized="true"] .we-header {
    padding: 0;
    background: transparent;
    border-bottom: 0;
  }

  /* Symmetric header layout: drag (left) | tabs (center) | minimize (right) */
  .we-prop-panel .we-header {
    padding: 8px 10px;
    gap: 8px;
  }

  .we-prop-header-left,
  .we-prop-header-right {
    display: inline-flex;
    align-items: center;
    gap: 6px;
  }

  .we-prop-header-right {
    margin-left: auto;
  }

  .we-prop-undo-redo {
    display: inline-flex;
    align-items: center;
    gap: 2px;
    padding: 2px;
    background: var(--we-control-bg);
    border-radius: var(--we-radius-control);
  }

  .we-prop-action-btn {
    height: calc(var(--we-icon-btn-size) - 4px);
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 4px;
    padding: 0 8px;
    border: 0;
    border-radius: var(--we-radius-control);
    background: transparent;
    color: var(--we-text-secondary);
    cursor: pointer;
    transition: background 0.15s ease, color 0.15s ease;
  }

  .we-prop-action-btn:hover:not(:disabled) {
    background: var(--we-control-bg-hover);
    color: var(--we-text-primary);
  }

  .we-prop-action-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  .we-prop-action-btn svg {
    width: 14px;
    height: 14px;
    display: block;
  }

  .we-prop-count {
    min-width: 10px;
    font-size: 10px;
    font-weight: 700;
    line-height: 1;
    color: var(--we-text-secondary);
    font-variant-numeric: tabular-nums;
  }

  .we-prop-menu-wrap {
    position: relative;
  }

  .we-prop-menu-btn svg {
    width: 16px;
    height: 16px;
    display: block;
  }

  .we-prop-menu {
    position: absolute;
    top: calc(100% + 6px);
    right: 0;
    min-width: 160px;
    padding: 6px;
    background: rgba(255, 255, 255, 0.98);
    border: 1px solid rgba(148, 163, 184, 0.45);
    border-radius: 10px;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.08), 0 10px 20px -5px rgba(0, 0, 0, 0.12);
    backdrop-filter: blur(8px);
    display: none;
    flex-direction: column;
    gap: 4px;
    z-index: 10001;
  }

  .we-prop-menu-wrap[data-open="true"] .we-prop-menu {
    display: flex;
  }

  /* Allow dropdown to overflow outside the panel */
  .we-prop-panel[data-menu-open="true"] {
    overflow: visible;
    contain: layout style;
  }

  .we-prop-menu-item {
    display: inline-flex;
    align-items: center;
    justify-content: flex-start;
    gap: 6px;
    padding: 6px 10px;
    font-size: 12px;
    font-weight: 500;
    color: #334155;
    background: transparent;
    border: 0;
    border-radius: 8px;
    cursor: pointer;
    transition: background-color 150ms ease, color 150ms ease;
  }

  .we-prop-menu-item:hover:not(:disabled) {
    background: #f8fafc;
  }

  .we-prop-menu-item:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  /* Minimize button chevron rotation */
  .we-minimize-btn svg {
    transition: transform 200ms ease;
  }

  .we-prop-panel[data-minimized="true"] .we-minimize-btn svg {
    transform: rotate(180deg);
  }

  /* Header tooltips: show below to avoid being clipped by panel overflow */
  .we-prop-panel .we-header [data-tooltip]::after {
    bottom: auto;
    top: calc(100% + 6px);
  }

  .we-prop-panel .we-header [data-tooltip]::before {
    bottom: auto;
    top: calc(100% + 2px);
    border-top-color: transparent;
    border-bottom-color: var(--we-text-primary);
  }

  /* Tab container with pill/segmented style (aligned with design spec) */
  .we-prop-tabs {
    display: inline-flex;
    align-items: center;
    gap: 2px;
    padding: 2px;
    background: var(--we-control-bg);
    border-radius: var(--we-radius-tab);
  }

  .we-tab {
    border: 0;
    background: transparent;
    color: var(--we-text-secondary);
    padding: 4px 10px;
    border-radius: var(--we-radius-tab);
    cursor: pointer;
    font-size: 12px;
    font-weight: 500;
    transition: all 0.1s ease;
  }

  .we-tab:hover {
    color: var(--we-text-primary);
  }

  .we-tab:focus-visible {
    outline: none;
    box-shadow: inset 0 0 0 2px var(--we-focus-ring);
  }

  /* Active tab: white background with subtle shadow */
  .we-tab[aria-selected="true"] {
    background: var(--we-surface-bg);
    color: var(--we-text-primary);
    box-shadow: var(--we-shadow-tab);
  }

  .we-prop-body {
    flex: 1;
    overflow-y: auto;
    overflow-x: hidden;
    padding: 12px;
    padding-bottom: 80px; /* Extra space for scrolling (design spec: pb-20) */
    display: flex;
    flex-direction: column;
    gap: 12px;
    scrollbar-width: none; /* Firefox */
    -ms-overflow-style: none; /* IE 10+ */
  }

  /* Hide scrollbar for webkit browsers */
  .we-prop-body::-webkit-scrollbar {
    width: 0;
    height: 0;
  }

  /* Force hidden state for property panel sections during minimization */
  .we-prop-body[hidden],
  .we-prop-tabs[hidden] {
    display: none;
  }

  .we-prop-tab-content {
    display: flex;
    flex-direction: column;
    gap: 10px;
  }

  .we-prop-tab-content[hidden] {
    display: none;
  }

  .we-prop-empty {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 24px 12px;
    color: #64748b;
    font-size: 12px;
    text-align: center;
  }

  .we-prop-empty[hidden] {
    display: none;
  }

  .we-prop-panel[data-empty="true"] .we-prop-tab-content {
    display: none;
  }

  /* ==========================================================================
     Components Tree (Phase 3.2)
     ========================================================================== */

  .we-tree {
    font-size: 12px;
    line-height: 1.4;
  }

  .we-tree-empty {
    padding: 24px 12px;
    color: #64748b;
    text-align: center;
  }

  .we-tree-empty[hidden] {
    display: none;
  }

  .we-tree-list {
    display: flex;
    flex-direction: column;
  }

  .we-tree-list[hidden] {
    display: none;
  }

  .we-tree-item {
    display: flex;
    align-items: center;
    gap: 4px;
    padding: 6px 8px;
    cursor: pointer;
    border-radius: 4px;
    transition: background 0.12s;
    color: #475569;
  }

  .we-tree-item:hover {
    background: rgba(0, 143, 93, 0.08);
  }

  .we-tree-item--selected {
    background: rgba(0, 143, 93, 0.12);
    color: #007A4F;
    font-weight: 500;
  }

  .we-tree-item--selected:hover {
    background: rgba(0, 143, 93, 0.16);
  }

  .we-tree-item--ancestor {
    color: #64748b;
  }

  .we-tree-item--child {
    color: #64748b;
    font-size: 11px;
  }

  .we-tree-indent {
    color: #94a3b8;
    font-family: monospace;
    user-select: none;
  }

  .we-tree-icon {
    flex-shrink: 0;
    color: #94a3b8;
    font-size: 10px;
  }

  .we-tree-item--selected .we-tree-icon {
    color: #008F5D;
  }

  .we-tree-label {
    flex: 1;
    min-width: 0;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    font-family: ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, monospace;
  }

  /* ==========================================================================
     Control Groups (Section style - aligned with design spec)
     Uses separator lines instead of card borders
     ========================================================================== */

  .we-group {
    /* No card-style border, use separator lines between sections */
    border: 0;
    border-radius: 0;
    overflow: visible;
    background: transparent;
  }

  /* Section separator - top border for non-first groups */
  .we-group + .we-group {
    border-top: 1px solid var(--we-border-section);
    padding-top: 12px;
    margin-top: 4px;
  }

  .we-group-header {
    width: 100%;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 6px;
    padding: 0 0 8px 0;
    background: transparent;
  }

  .we-group-toggle {
    flex: 1;
    min-width: 0;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 6px;
    padding: 0;
    background: transparent;
    border: 0;
    cursor: pointer;
    color: #333333;
    font-size: 11px;
    font-weight: 600;
    text-align: left;
    transition: color 0.1s ease;
  }

  .we-group-toggle:hover {
    color: var(--we-text-primary);
  }

  .we-group-toggle:focus-visible {
    outline: none;
    box-shadow: inset 0 0 0 2px var(--we-focus-ring);
    border-radius: 2px;
  }

  .we-group-toggle--static {
    cursor: default;
    pointer-events: none;
  }

  .we-group-header-actions {
    display: flex;
    align-items: center;
    gap: 2px;
    flex: 0 0 auto;
  }

  .we-group-body {
    padding: 0;
    background: transparent;
    border-top: 0;
  }

  .we-group[data-collapsed="true"] .we-group-body {
    display: none;
  }

  /* Reduce gap when collapsed: remove header bottom padding and negate next group's top margin */
  .we-group[data-collapsed="true"] .we-group-header {
    padding-bottom: 0;
  }

  .we-group[data-collapsed="true"] {
    margin-bottom: -4px;
  }

  .we-chevron {
    width: 14px;
    height: 14px;
    flex: 0 0 auto;
    color: var(--we-text-secondary);
    transition: transform 0.1s ease;
  }

  .we-group[data-collapsed="true"] .we-chevron {
    transform: rotate(-90deg);
  }

  /* ==========================================================================
     Form Controls (for Design controls)
     ========================================================================== */

  /* Field row: vertical stack (label on top, control below) */
  .we-field {
    display: flex;
    flex-direction: column;
    align-items: stretch;
    gap: 4px;
  }

  /* Horizontal field variant (label left, control right) */
  .we-field--horizontal {
    flex-direction: row;
    align-items: center;
    gap: 8px;
  }

  .we-field-label {
    flex: 0 0 auto;
    width: auto;
    font-size: 10px;
    font-weight: 500;
    color: var(--we-text-secondary);
  }

  /* Fixed width label for horizontal layout */
  .we-field--horizontal .we-field-label {
    width: 48px;
  }

  .we-field-label--short {
    width: 20px;
  }

  /* Hint text (small label above icon groups for H/V distinction) */
  .we-field-hint {
    font-size: 9px;
    color: var(--we-text-muted);
    text-align: center;
    line-height: 1;
  }

  /* Content container for complex controls (icon groups, grids, etc.) */
  .we-field-content {
    width: 100%;
    min-width: 0;
  }

  /* Input styling aligned with design spec:
   * - Gray background by default
   * - Inset border on hover
   * - White background + blue inset border on focus
   */
  .we-input {
    flex: 1 1 auto;
    flex-shrink: 0; /* Prevent height shrinking in column flex containers */
    min-width: 0;
    height: 28px; /* Design spec: h-[28px] */
    padding: 0 8px;
    font-size: 11px;
    line-height: 26px; /* Ensure vertical centering: 28px - 2px border */
    font-family: inherit;
    color: var(--we-text-primary);
    background: var(--we-control-bg);
    border: 1px solid transparent;
    border-radius: var(--we-radius-control);
    outline: none;
    transition: background 0.1s ease, border-color 0.1s ease, box-shadow 0.1s ease;
  }

  .we-input::placeholder {
    color: var(--we-text-muted);
  }

  .we-input:hover:not(:focus) {
    border-color: var(--we-control-border-hover);
  }

  .we-input:focus {
    background: var(--we-control-bg-focus);
    border-color: var(--we-control-border-focus);
  }

  /* ==========================================================================
   * Input Container (Phase 2.1)
   *
   * A wrapper for inputs with prefix/suffix support.
   * Container handles hover/focus-within styling instead of input itself.
   * ========================================================================== */
  .we-input-container {
    min-width: 0;
    display: flex;
    align-items: center;
    height: 28px; /* Design spec: h-[28px] - must be explicit, not flex-controlled */
    flex-shrink: 0; /* Prevent height shrinking in column flex containers */
    padding: 0 8px;
    gap: 4px;
    background: var(--we-control-bg);
    border: 1px solid transparent;
    border-radius: var(--we-radius-control);
    transition: background 0.1s ease, border-color 0.1s ease, box-shadow 0.1s ease;
  }

  /* In row flex containers, allow input-container to grow horizontally */
  .we-field-row > .we-input-container,
  .we-radius-control .we-field-row > .we-input-container {
    flex: 1 1 0;
  }

  .we-input-container:hover:not(:focus-within) {
    border-color: var(--we-control-border-hover);
  }

  .we-input-container:focus-within {
    background: var(--we-control-bg-focus);
    border-color: var(--we-control-border-focus);
  }

  .we-input-container__input {
    flex: 1;
    min-width: 0;
    height: 100%;
    padding: 0;
    font-size: 11px;
    line-height: 26px; /* Ensure vertical centering within 28px container */
    font-family: inherit;
    color: var(--we-text-primary);
    background: transparent;
    border: none;
    outline: none;
  }

  .we-input-container__input::placeholder {
    color: var(--we-text-muted);
  }

  /* Number inputs: right-aligned text in containers */
  .we-input-container__input[inputmode="decimal"],
  .we-input-container__input[inputmode="numeric"] {
    text-align: right;
  }

  /* Prefix and suffix elements */
  .we-input-container__prefix,
  .we-input-container__suffix {
    flex: 0 0 auto;
    font-size: 10px;
    color: var(--we-text-muted);
    user-select: none;
    pointer-events: none;
  }

  .we-input-container__prefix {
    margin-right: 2px;
  }

  .we-input-container__suffix {
    margin-left: 2px;
  }

  /* Icon in prefix/suffix */
  .we-input-container__prefix svg,
  .we-input-container__suffix svg {
    width: 12px;
    height: 12px;
    display: block;
  }

  /* ==========================================================================
   * Slider Input (Opacity and other numeric ranges)
   * ========================================================================== */
  .we-slider-input {
    display: flex;
    align-items: center;
    gap: 8px;
    width: 100%;
    min-width: 0;
  }

  .we-slider-input__slider {
    flex: 1 1 auto;
    min-width: 0;
    height: 28px;
    margin: 0;
    padding: 0;
    background: transparent;
    -webkit-appearance: none;
    appearance: none;
    cursor: pointer;
  }

  .we-slider-input__slider:disabled {
    opacity: 0.55;
    cursor: not-allowed;
  }

  .we-slider-input__slider::-webkit-slider-runnable-track {
    height: 4px;
    background: linear-gradient(
      to right,
      var(--we-control-border-focus) 0%,
      var(--we-control-border-focus) var(--progress, 0%),
      var(--we-control-bg) var(--progress, 0%),
      var(--we-control-bg) 100%
    );
    border: 1px solid var(--we-control-border-hover);
    border-radius: 999px;
  }

  .we-slider-input__slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 12px;
    height: 12px;
    margin-top: -5px; /* (12px thumb - 4px track) / 2 + border */
    border-radius: 999px;
    background: var(--we-control-bg-focus);
    border: 1px solid var(--we-border-strong);
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.15);
  }

  .we-slider-input__slider:focus-visible {
    outline: none;
  }

  .we-slider-input__slider:focus-visible::-webkit-slider-thumb {
    border-color: var(--we-control-border-focus);
    box-shadow: 0 0 0 2px rgba(0, 143, 93, 0.25);
  }

  .we-slider-input__slider::-moz-range-track {
    height: 4px;
    background: linear-gradient(
      to right,
      var(--we-control-border-focus) 0%,
      var(--we-control-border-focus) var(--progress, 0%),
      var(--we-control-bg) var(--progress, 0%),
      var(--we-control-bg) 100%
    );
    border: 1px solid var(--we-control-border-hover);
    border-radius: 999px;
  }

  .we-slider-input__slider::-moz-range-thumb {
    width: 12px;
    height: 12px;
    border-radius: 999px;
    background: var(--we-control-bg-focus);
    border: 1px solid var(--we-border-strong);
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.15);
  }

  .we-slider-input__slider:focus-visible::-moz-range-thumb {
    border-color: var(--we-control-border-focus);
    box-shadow: 0 0 0 2px rgba(0, 143, 93, 0.25);
  }

  .we-slider-input__number {
    flex: 0 0 auto;
  }

  /* ==========================================================================
   * Icon Button Group (Phase 4.1)
   *
   * A single-select grid of icon buttons (e.g. flex-direction control).
   * ========================================================================== */
  .we-icon-button-group {
    display: grid;
    gap: 4px;
  }

  .we-icon-button-group__btn {
    display: flex;
    align-items: center;
    justify-content: center;
    height: 28px; /* Design spec: h-[28px] */
    padding: 4px;
    background: var(--we-control-bg);
    border: 1px solid transparent;
    border-radius: var(--we-radius-control);
    cursor: pointer;
    transition: background-color 0.1s ease, border-color 0.1s ease;
  }

  .we-icon-button-group__btn:hover:not(:disabled) {
    background: var(--we-control-bg-hover);
  }

  .we-icon-button-group__btn:focus-visible {
    outline: none;
    border-color: var(--we-control-border-focus);
    box-shadow: inset 0 0 0 2px var(--we-control-border-focus); /* Design spec: 2px inset */
  }

  .we-icon-button-group__btn[data-selected="true"] {
    background: var(--we-control-bg-focus);
    border-color: var(--we-control-border-focus);
  }

  .we-icon-button-group__btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  .we-icon-button-group__btn svg {
    width: 14px;
    height: 14px;
    color: var(--we-text-secondary);
  }

  .we-icon-button-group__btn[data-selected="true"] svg {
    color: var(--we-control-border-focus);
  }

  /* ==========================================================================
   * Toggle Button
   *
   * A pressable toggle button (e.g. flip X/Y controls).
   * ========================================================================== */
  .we-toggle-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 28px;
    height: 28px;
    padding: 4px;
    background: var(--we-control-bg);
    border: 1px solid transparent;
    border-radius: var(--we-radius-control);
    cursor: pointer;
    transition: background-color 0.1s ease, border-color 0.1s ease;
  }

  .we-toggle-btn:hover:not(:disabled) {
    background: var(--we-control-bg-hover);
  }

  .we-toggle-btn[aria-pressed="true"] {
    background: var(--we-control-bg-focus);
    border-color: var(--we-control-border-focus);
  }

  .we-toggle-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  .we-toggle-btn svg {
    width: 14px;
    height: 14px;
    color: var(--we-text-secondary);
  }

  .we-toggle-btn[aria-pressed="true"] svg {
    color: var(--we-control-border-focus);
  }

  /* ==========================================================================
   * Alignment Grid (Phase 4.2)
   *
   * 3Ã—3 single-select grid for justify-content + align-items.
   * ========================================================================== */
  .we-alignment-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 12px;
    padding: 8px;
    min-height: 90px;
    background: #f9f9f9;
    border: 1px solid #f0f0f0;
    border-radius: var(--we-radius-control);
    place-items: center;
  }

  .we-alignment-grid__cell {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 20px;
    height: 20px;
    padding: 0;
    background: transparent;
    border: none;
    border-radius: 2px;
    cursor: pointer;
    transition: background-color 0.1s ease;
  }

  .we-alignment-grid__cell:hover:not(:disabled) {
    background: rgba(0, 0, 0, 0.05);
  }

  .we-alignment-grid__cell:focus-visible {
    outline: 2px solid var(--we-control-border-focus);
    outline-offset: 1px;
  }

  .we-alignment-grid__cell:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  /* Inactive dot */
  .we-alignment-grid__dot {
    width: 2px;
    height: 2px;
    background: var(--we-text-muted);
    border-radius: 50%;
  }

  /* Active marker (3 bars showing alignment) */
  .we-alignment-grid__marker {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: space-between;
    width: 12px;
    height: 12px;
  }

  .we-alignment-grid__bar {
    height: 2px;
    background: var(--we-control-border-focus);
    border-radius: 1px;
  }

  .we-alignment-grid__bar--1 { width: 8px; }
  .we-alignment-grid__bar--2 { width: 12px; }
  .we-alignment-grid__bar--3 { width: 4px; }

  /* ==========================================================================
   * Grid + Gap Two Column Layout (Layout Control)
   * ========================================================================== */

  .we-grid-gap-row {
    display: flex;
    gap: 8px;
  }

  .we-grid-gap-col {
    flex: 1;
    min-width: 0;
  }

  /* Keep Grid label space for alignment; hide text only when both columns are visible (grid mode) */
  .we-grid-gap-col--grid:not([hidden]):has(+ .we-grid-gap-col--gap:not([hidden])) .we-field-label {
    visibility: hidden;
  }

  .we-grid-gap-col .we-field-content {
    width: 100%;
    overflow: visible;
  }

  /* Gap inputs vertical layout */
  .we-grid-gap-inputs {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }

  /* ==========================================================================
   * Grid Dimensions Picker (Layout Control)
   * ========================================================================== */

  .we-grid-dimensions-preview {
    width: 100%;
    height: 64px; /* Match two rows of gap inputs: 28px + 8px gap + 28px */
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 4px;
    font-size: 12px;
    font-family: inherit;
    color: var(--we-text-primary);
    background: var(--we-control-bg);
    border: 1px solid transparent;
    border-radius: var(--we-radius-control);
    cursor: pointer;
    transition: background-color 0.1s ease, border-color 0.1s ease;
  }

  .we-grid-dimensions-preview:hover:not(:disabled) {
    background: var(--we-control-bg-hover);
  }

  .we-grid-dimensions-preview:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  .we-grid-dimensions-popover {
    position: absolute;
    top: calc(100% + 4px);
    left: 0;
    min-width: 220px;
    padding: 10px;
    background: var(--we-surface-bg);
    border: 1px solid var(--we-border-subtle);
    border-radius: 8px;
    box-shadow: 0 8px 24px rgba(15, 23, 42, 0.12);
    z-index: 60;
  }

  .we-grid-dimensions-popover[hidden] {
    display: none;
  }

  .we-grid-dimensions-inputs {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    margin-bottom: 10px;
  }

  .we-grid-dimensions-times {
    font-size: 12px;
    color: var(--we-text-muted);
    user-select: none;
  }

  .we-grid-dimensions-matrix {
    display: grid;
    grid-template-columns: repeat(12, 1fr);
    gap: 3px;
    padding: 6px;
    background: var(--we-surface-secondary);
    border: 1px solid var(--we-border-subtle);
    border-radius: var(--we-radius-control);
  }

  .we-grid-dimensions-cell {
    width: 100%;
    aspect-ratio: 1 / 1;
    background: transparent;
    border: 1px solid rgba(0, 0, 0, 0.10);
    border-radius: 2px;
    padding: 0;
    cursor: pointer;
    transition: background-color 0.08s ease, border-color 0.08s ease;
  }

  .we-grid-dimensions-cell[data-active="true"] {
    border-color: rgba(0, 143, 93, 0.65);
    background: rgba(0, 143, 93, 0.10);
  }

  .we-grid-dimensions-cell[data-selected="true"] {
    border-color: rgba(0, 143, 93, 0.9);
    background: rgba(0, 143, 93, 0.16);
  }

  .we-grid-dimensions-tooltip {
    margin-top: 8px;
    text-align: center;
    font-size: 11px;
    color: var(--we-text-secondary);
  }

  .we-grid-dimensions-tooltip[hidden] {
    display: none;
  }

  .we-input--short {
    width: 56px;
    flex: 0 0 auto;
  }

  /* Number inputs: right-aligned text */
  .we-input[type="text"][inputmode="decimal"],
  .we-input[type="number"] {
    text-align: right;
  }

  .we-select {
    flex: 1 1 auto;
    flex-shrink: 0; /* Prevent height shrinking in column flex containers */
    min-width: 0;
    height: 28px; /* Design spec: h-[28px] */
    padding: 0 24px 0 8px;
    font-size: 11px;
    line-height: 26px; /* Ensure vertical centering: 28px - 2px border */
    font-family: inherit;
    color: var(--we-text-primary);
    background: var(--we-control-bg) url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='10' height='10' viewBox='0 0 10 10'%3E%3Cpath fill='%23737373' d='M2.5 3.5l2.5 3 2.5-3'/%3E%3C/svg%3E") no-repeat right 8px center;
    border: 1px solid transparent;
    border-radius: var(--we-radius-control);
    outline: none;
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    cursor: pointer;
    transition: background-color 0.1s ease, border-color 0.1s ease, box-shadow 0.1s ease;
  }

  .we-select:hover:not(:focus) {
    border-color: var(--we-control-border-hover);
  }

  .we-select:focus {
    background-color: var(--we-control-bg-focus);
    border-color: var(--we-control-border-focus);
  }

  /* Field row for multiple inputs side by side */
  .we-field-row {
    display: flex;
    align-items: stretch;
    gap: 8px;
  }

  /* Size field with mode select + input stacked vertically */
  .we-size-field {
    display: flex;
    flex-direction: column;
    gap: 4px;
    flex: 1;
    min-width: 0;
  }

  .we-size-mode-select {
    width: 100%;
  }

  .we-field-group {
    display: flex;
    flex-direction: column;
    gap: 6px;
  }

  /* ==========================================================================
     Effects (Box Shadow List)
     ========================================================================== */

  .we-effects-toolbar {
    display: flex;
    justify-content: flex-end;
    margin-bottom: 6px;
  }

  .we-effects-list {
    display: flex;
    flex-direction: column;
    gap: 6px;
  }

  .we-effects-item-wrap {
    position: relative;
  }

  .we-effects-item {
    height: 28px;
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 0 6px;
    background: var(--we-control-bg);
    border: 1px solid transparent;
    border-radius: var(--we-radius-control);
    transition: background-color 0.1s ease, border-color 0.1s ease, opacity 0.1s ease;
  }

  .we-effects-item:hover {
    background: var(--we-control-bg-hover);
  }

  .we-effects-item[data-open="true"] {
    background: var(--we-control-bg-focus);
    border-color: var(--we-control-border-focus);
  }

  .we-effects-item[data-enabled="false"] {
    opacity: 0.55;
  }

  .we-effects-name {
    flex: 1;
    min-width: 0;
    padding: 0;
    border: 0;
    background: transparent;
    text-align: left;
    font-size: 11px;
    color: var(--we-text-primary);
    cursor: pointer;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }

  .we-effects-name:focus-visible {
    outline: none;
    box-shadow: inset 0 0 0 2px var(--we-focus-ring);
    border-radius: 4px;
  }

  .we-effects-icon-btn {
    width: 24px;
    height: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: transparent;
    border: 0;
    border-radius: var(--we-radius-control);
    color: var(--we-text-secondary);
    cursor: pointer;
    padding: 0;
    transition: background-color 0.1s ease, color 0.1s ease;
  }

  .we-effects-icon-btn:hover:not(:disabled) {
    background: rgba(0, 0, 0, 0.06);
    color: var(--we-text-primary);
  }

  .we-effects-icon-btn:focus-visible {
    outline: none;
    box-shadow: 0 0 0 2px var(--we-focus-ring);
  }

  .we-effects-icon-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  .we-effects-icon-btn svg {
    width: 14px;
    height: 14px;
  }

  .we-effects-popover {
    position: absolute;
    top: calc(100% + 6px);
    left: 0;
    width: 220px;
    max-width: 220px;
    padding: 10px;
    background: var(--we-surface-bg);
    border: 1px solid var(--we-border-subtle);
    border-radius: 8px;
    box-shadow: 0 8px 24px rgba(15, 23, 42, 0.12);
    z-index: 60;
  }

  .we-effects-popover[hidden] {
    display: none;
  }

  .we-effects-popover-content {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }

  /* ==========================================================================
     Gradient Preview Bar (Phase 4B)
     ========================================================================== */

  .we-gradient-bar-row {
    width: 100%;
    padding: 4px 0 8px;
  }

  .we-gradient-bar {
    position: relative;
    width: 100%;
    height: 60px;
    border-radius: 14px;
    border: 1px solid var(--we-border-subtle);
    background-color: var(--we-control-bg);
    background-image: none; /* set inline by GradientControl */
    box-shadow:
      inset 0 1px 2px rgba(0, 0, 0, 0.08),
      inset 0 0 0 1px rgba(255, 255, 255, 0.5);
    overflow: hidden;
  }

  /* Gradient thumbs container */
  .we-gradient-bar-thumbs {
    position: absolute;
    inset: 0;
    pointer-events: none; /* thumbs enable pointer events individually */
  }

  /* Gradient thumb (color stop marker) */
  .we-gradient-thumb {
    pointer-events: auto;
    position: absolute;
    top: 50%;
    left: 0;
    transform: translate(-50%, -50%);
    z-index: 1;
    width: 32px;
    height: 32px;
    border-radius: 6px;
    border: 2px solid rgba(255, 255, 255, 0.98);
    background-color: transparent; /* set inline */
    cursor: pointer;
    padding: 0;
    box-sizing: border-box;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
    touch-action: none;
    user-select: none;
    transition: box-shadow 0.15s ease, z-index 0s;
  }

  .we-gradient-thumb:hover {
    box-shadow:
      0 0 0 2px rgba(0, 143, 93, 0.25),
      0 1px 3px rgba(0, 0, 0, 0.2);
  }

  .we-gradient-thumb:focus-visible {
    outline: none;
    box-shadow:
      0 0 0 3px rgba(0, 143, 93, 0.4),
      0 1px 3px rgba(0, 0, 0, 0.2);
  }

  /* Selected thumb state - raise above unselected thumbs */
  .we-gradient-thumb--active {
    z-index: 2;
    box-shadow:
      0 0 0 3px rgba(0, 143, 93, 0.4),
      0 1px 3px rgba(0, 0, 0, 0.2);
  }

  /* Dragging thumb - always on top when overlapping at same position */
  .we-gradient-thumb--dragging {
    z-index: 3;
  }

  /* Dragging state - cursor feedback on entire bar */
  .we-gradient-bar--dragging {
    cursor: grabbing;
  }

  .we-gradient-bar--dragging .we-gradient-thumb {
    cursor: grabbing;
  }

  /* ==========================================================================
     Gradient Stops List (Phase 4D)
     ========================================================================== */

  .we-gradient-stops-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 6px 0 4px;
  }

  .we-gradient-stops-title {
    font-size: 10px;
    font-weight: 600;
    color: var(--we-text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  .we-gradient-stops-add,
  .we-gradient-stop-remove {
    font-size: 14px;
    font-weight: 500;
    line-height: 1;
  }

  .we-gradient-stops-add:disabled,
  .we-gradient-stop-remove:disabled {
    opacity: 0.4;
    cursor: not-allowed;
  }

  .we-gradient-stops-list {
    border: 1px solid var(--we-border-subtle);
    border-radius: 12px;
    background: rgba(255, 255, 255, 0.6);
    padding: 6px;
    display: flex;
    flex-direction: column;
    gap: 4px;
    max-height: 180px;
    overflow-y: auto;
    overscroll-behavior: contain;
  }

  .we-gradient-stop-row {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 5px 6px;
    border-radius: 8px;
    border: 1px solid transparent;
    background: rgba(255, 255, 255, 0.85);
    cursor: pointer;
    user-select: none;
    transition: border-color 0.15s ease, background 0.15s ease;
  }

  .we-gradient-stop-row:hover {
    background: rgba(0, 143, 93, 0.06);
  }

  .we-gradient-stop-row:focus-visible {
    outline: none;
    box-shadow: 0 0 0 2px rgba(0, 143, 93, 0.35);
  }

  .we-gradient-stop-row--active {
    border-color: rgba(0, 143, 93, 0.6);
    box-shadow: 0 0 0 1px rgba(0, 143, 93, 0.2);
  }

  .we-gradient-stop-pos {
    flex: 0 0 auto;
    min-width: 44px;
    display: flex;
    align-items: center;
    justify-content: flex-end;
    text-align: right;
    font-variant-numeric: tabular-nums;
    font-family: ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, monospace;
    font-size: 11px;
    color: var(--we-text-secondary);
    padding: 3px 6px;
    border-radius: 6px;
    background: var(--we-control-bg);
    cursor: pointer;
    transition: box-shadow 0.15s ease;
  }

  .we-gradient-stop-pos:hover {
    background: var(--we-control-bg-hover, var(--we-control-bg));
  }

  .we-gradient-stop-pos:focus-within {
    box-shadow: 0 0 0 2px rgba(0, 143, 93, 0.25);
  }

  /* Static position display (visible when row is not selected) */
  .we-gradient-stop-pos-static {
    display: block;
    width: 100%;
    text-align: right;
  }

  /* Position editor slot (visible when row is selected) */
  .we-gradient-stop-pos-editor {
    display: none;
    width: 100%;
  }

  /* Show editor and hide static in active row */
  .we-gradient-stop-row--active .we-gradient-stop-pos-static {
    display: none;
  }

  .we-gradient-stop-row--active .we-gradient-stop-pos-editor {
    display: block;
  }

  /* Position input styling */
  .we-gradient-stop-pos-input {
    width: 100%;
    border: 0;
    padding: 0;
    margin: 0;
    background: transparent;
    color: inherit;
    font: inherit;
    text-align: right;
    outline: none;
    cursor: text;
  }

  .we-gradient-stop-pos-input::placeholder {
    color: var(--we-text-muted);
  }

  .we-gradient-stop-color {
    flex: 1;
    min-width: 0;
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 3px 8px;
    border-radius: 6px;
    background: var(--we-control-bg);
  }

  /* Static color display (visible when row is not selected) */
  .we-gradient-stop-color-static {
    flex: 1;
    min-width: 0;
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 0;
    border: 0;
    background: transparent;
    color: inherit;
    cursor: pointer;
    text-align: left;
    font-family: inherit;
  }

  .we-gradient-stop-color-static:focus-visible {
    outline: none;
    box-shadow: 0 0 0 2px rgba(0, 143, 93, 0.25);
    border-radius: 4px;
  }

  /* Color editor slot (visible when row is selected) */
  .we-gradient-stop-color-editor {
    flex: 1;
    min-width: 0;
    display: none;
  }

  /* When row is active: hide static, show editor */
  .we-gradient-stop-row--active .we-gradient-stop-color {
    padding: 0;
    background: transparent;
  }

  .we-gradient-stop-row--active .we-gradient-stop-color-static {
    display: none;
  }

  .we-gradient-stop-row--active .we-gradient-stop-color-editor {
    display: block;
  }

  .we-gradient-stop-swatch {
    flex: 0 0 auto;
    width: 14px;
    height: 14px;
    border-radius: 3px;
    border: 1px solid rgba(0, 0, 0, 0.12);
    box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.2);
    background: transparent;
  }

  .we-gradient-stop-color-text {
    flex: 1;
    min-width: 0;
    font-family: ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, monospace;
    font-size: 11px;
    color: var(--we-text-primary);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  /* Spacing section (Padding / Margin) */
  .we-spacing-section {
    display: flex;
    flex-direction: column;
    gap: 6px;
  }

  .we-spacing-section + .we-spacing-section {
    margin-top: 10px;
  }

  .we-spacing-header {
    font-size: 10px;
    font-weight: 600;
    color: #6b7280;
  }

  /* Spacing 2x2 grid layout */
  .we-spacing-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 8px;
  }

  /* ==========================================================================
   * Border Radius Control
   * ========================================================================== */

  .we-radius-control {
    flex: 1;
    min-width: 0;
    display: flex;
    flex-direction: column;
    gap: 8px;
  }

  .we-radius-corners-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 8px;
  }

  /* ==========================================================================
     CSS Panel (Phase 4.6)
     ========================================================================== */

  .we-css-panel {
    font-size: 11px;
    line-height: 1.5;
  }

  /* Code-semantic elements use monospace font */
  .we-css-rule-selector,
  .we-css-decl-name,
  .we-css-decl-value,
  .we-css-decl-colon,
  .we-css-decl-semi,
  .we-css-decl-important,
  .we-css-rule-source,
  .we-css-rule-spec {
    font-family: ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, monospace;
  }

  /* ==========================================================================
     Class Editor (Phase 4.7)
     ========================================================================== */

  .we-css-class-editor-mount {
    margin-bottom: 12px;
  }

  .we-class-editor {
    position: relative;
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    gap: 6px;
    padding: 8px 10px;
    border: 1px solid var(--we-border-subtle);
    border-radius: var(--we-radius-panel);
    background: var(--we-surface-bg);
    font-family: system-ui, -apple-system, sans-serif;
  }

  .we-class-chips {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
    flex: 0 1 auto;
  }

  .we-class-chip {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    padding: 3px 8px;
    border-radius: 999px;
    background: var(--we-accent-brand-bg);
    border: 1px solid var(--we-accent-brand-border);
    color: #007A4F;
    font-size: 11px;
    line-height: 1.2;
  }

  .we-class-chip-text {
    word-break: break-all;
  }

  .we-class-chip-remove {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 16px;
    height: 16px;
    padding: 0;
    border: none;
    border-radius: 999px;
    background: transparent;
    color: rgba(0, 122, 79, 0.8);
    cursor: pointer;
    font-size: 14px;
    line-height: 1;
    transition: background-color 0.15s ease;
  }

  .we-class-chip-remove:hover {
    background: rgba(0, 143, 93, 0.15);
    color: #007A4F;
  }

  .we-class-input {
    flex: 1 1 100px;
    min-width: 80px;
    padding: 5px 8px;
    font-size: 12px;
    border: 1px solid var(--we-border-subtle);
    border-radius: var(--we-radius-control);
    background: var(--we-control-bg-focus);
    outline: none;
    transition: border-color 0.15s ease, box-shadow 0.15s ease;
  }

  .we-class-input:focus {
    border-color: var(--we-control-border-focus);
    box-shadow: 0 0 0 2px var(--we-focus-ring);
  }

  .we-class-input:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  .we-class-input::placeholder {
    color: #94a3b8;
  }

  .we-class-suggestions {
    position: absolute;
    top: calc(100% + 4px);
    left: 0;
    right: 0;
    background: var(--we-surface-bg);
    border: 1px solid var(--we-border-subtle);
    border-radius: var(--we-radius-panel);
    box-shadow: 0 8px 24px rgba(15, 23, 42, 0.12);
    overflow: hidden;
    z-index: 20;
  }

  .we-class-suggestions[hidden] {
    display: none;
  }

  .we-class-suggestion {
    display: block;
    width: 100%;
    text-align: left;
    padding: 8px 10px;
    border: none;
    background: transparent;
    cursor: pointer;
    font-family: ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, monospace;
    font-size: 11px;
    color: #0f172a;
    transition: background-color 0.1s ease;
  }

  .we-class-suggestion:hover {
    background: rgba(0, 143, 93, 0.08);
  }

  .we-class-suggestion:focus {
    outline: none;
    background: rgba(0, 143, 93, 0.12);
  }

  .we-css-info {
    padding: 8px 10px;
    background: var(--we-accent-info-bg);
    border-radius: var(--we-radius-control);
    color: var(--we-text-secondary);
    font-size: 10px;
    margin-bottom: 8px;
  }

  .we-css-info[hidden] {
    display: none;
  }

  .we-css-warnings {
    margin-bottom: 8px;
  }

  .we-css-warnings[hidden] {
    display: none;
  }

  .we-css-warning {
    padding: 6px 10px;
    background: var(--we-accent-warning-bg);
    border: 1px solid var(--we-accent-warning-border);
    border-radius: var(--we-radius-control);
    color: #92400e;
    font-size: 10px;
    margin-bottom: 4px;
  }

  .we-css-warning-more {
    padding: 4px 10px;
    color: #92400e;
    font-size: 10px;
    font-style: italic;
  }

  .we-css-empty {
    padding: 24px 12px;
    color: #64748b;
    text-align: center;
    font-family: system-ui, sans-serif;
    font-size: 12px;
  }

  .we-css-empty[hidden] {
    display: none;
  }

  .we-css-sections {
    display: flex;
    flex-direction: column;
    gap: 0;
  }

  .we-css-section {
    border: 0;
    border-radius: 0;
    overflow: visible;
    background: transparent;
  }

  .we-css-section + .we-css-section {
    border-top: 1px solid var(--we-border-section);
    padding-top: 12px;
    margin-top: 4px;
  }

  .we-css-section[data-kind="inherited"] {
    background: transparent;
  }

  .we-css-section-header {
    padding: 0 0 8px 0;
    background: transparent;
    border-bottom: 0;
    font-weight: 600;
    color: var(--we-text-primary);
    font-size: 11px;
    text-transform: none;
    letter-spacing: normal;
  }

  .we-css-section-rules {
    padding: 0;
  }

  /* Flat list style (computed-like view) */
  .we-css-rule {
    margin: 0;
    padding: 0;
    background: transparent;
    border: 0;
    border-radius: 0;
  }

  .we-css-rule + .we-css-rule {
    border-top: 1px solid var(--we-border-section);
    padding-top: 10px;
    margin-top: 10px;
  }

  .we-css-rule[data-origin="inline"] {
    background: transparent;
  }

  .we-css-rule-header {
    display: flex;
    align-items: baseline;
    gap: 8px;
    flex-wrap: nowrap;
    margin-bottom: 8px;
    padding-bottom: 0;
    border-bottom: 0;
  }

  .we-css-rule-selector {
    flex: 1 1 auto;
    min-width: 0;
    font-weight: 500;
    color: var(--we-text-secondary);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  .we-css-rule[data-origin="inline"] .we-css-rule-selector {
    color: #92400e;
    font-style: italic;
  }

  .we-css-rule-source {
    flex-shrink: 0;
    color: var(--we-text-muted);
    font-size: 10px;
    margin-left: auto;
    max-width: 45%;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  .we-css-rule-spec {
    flex-shrink: 0;
    color: var(--we-text-muted);
    font-size: 9px;
    padding: 1px 4px;
    background: var(--we-control-bg);
    border-radius: 3px;
  }

  .we-css-decls {
    padding-left: 0;
  }

  /* Two-column grid layout for declarations */
  .we-css-decl {
    display: grid;
    grid-template-columns: minmax(0, 1fr) minmax(0, 1.4fr);
    column-gap: 12px;
    align-items: baseline;
    padding: 5px 0;
    color: var(--we-text-primary);
  }


  .we-css-decl[data-status="overridden"] {
    text-decoration: line-through;
    color: var(--we-text-muted);
  }

  .we-css-decl-name {
    color: var(--we-text-secondary);
    overflow-wrap: anywhere;
  }

  /* Hide punctuation for computed-like view */
  .we-css-decl-colon,
  .we-css-decl-semi {
    display: none;
  }

  /* Value container for flex layout with !important */
  .we-css-decl-value-container {
    display: flex;
    align-items: baseline;
    gap: 4px;
    min-width: 0;
  }

  .we-css-decl-value {
    color: var(--we-text-primary);
    margin-left: 0;
    min-width: 0;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  .we-css-decl[data-status="overridden"] .we-css-decl-name,
  .we-css-decl[data-status="overridden"] .we-css-decl-value {
    color: var(--we-text-muted);
  }

  .we-css-decl-important {
    flex-shrink: 0;
    color: #dc2626;
    font-weight: 600;
    font-size: 10px;
  }

  .we-css-decl[data-status="overridden"] .we-css-decl-important {
    color: #b8c4d0;
  }

  /* ==========================================================================
   * Token Picker (Phase 5.4)
   * ========================================================================== */

  .we-token-picker {
    position: absolute;
    top: calc(100% + 4px);
    left: 0;
    right: 0;
    background: white;
    border: 1px solid rgba(226, 232, 240, 0.95);
    border-radius: 8px;
    box-shadow: 0 8px 24px rgba(15, 23, 42, 0.12);
    overflow: hidden;
    z-index: 30;
  }

  .we-token-picker[hidden] {
    display: none;
  }

  .we-token-filter {
    width: 100%;
    padding: 8px 10px;
    border: none;
    border-bottom: 1px solid rgba(226, 232, 240, 0.8);
    background: transparent;
    font-family: inherit;
    font-size: 11px;
    color: #0f172a;
    outline: none;
  }

  .we-token-filter::placeholder {
    color: #94a3b8;
  }

  .we-token-toggle-row {
    padding: 6px 10px;
    border-bottom: 1px solid rgba(226, 232, 240, 0.6);
    background: rgba(248, 250, 252, 0.5);
  }

  .we-token-toggle-label {
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 10px;
    color: #64748b;
    cursor: pointer;
  }

  .we-token-toggle-checkbox {
    width: 12px;
    height: 12px;
    margin: 0;
    cursor: pointer;
  }

  .we-token-list {
    overflow-y: auto;
    overscroll-behavior: contain;
  }

  .we-token-list[hidden] {
    display: none;
  }

  .we-token-item {
    display: flex;
    align-items: center;
    gap: 8px;
    width: 100%;
    text-align: left;
    padding: 8px 10px;
    border: none;
    background: transparent;
    cursor: pointer;
    transition: background-color 0.1s ease;
  }

  .we-token-item:hover {
    background: rgba(0, 143, 93, 0.06);
  }

  .we-token-item--selected,
  .we-token-item:focus {
    outline: none;
    background: rgba(0, 143, 93, 0.1);
  }

  .we-token-swatch {
    flex-shrink: 0;
    width: 14px;
    height: 14px;
    border-radius: 3px;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.2);
  }

  .we-token-name {
    flex: 1;
    font-family: ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, monospace;
    font-size: 11px;
    color: #0f172a;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  .we-token-value {
    flex-shrink: 0;
    max-width: 80px;
    font-family: ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, monospace;
    font-size: 10px;
    color: #64748b;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  .we-token-empty {
    padding: 16px 10px;
    text-align: center;
    color: #94a3b8;
    font-size: 11px;
  }

  .we-token-empty[hidden] {
    display: none;
  }

  /* Token button for input fields */
  .we-token-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 20px;
    height: 20px;
    padding: 0;
    border: none;
    border-radius: 4px;
    background: rgba(0, 143, 93, 0.08);
    color: #008F5D;
    cursor: pointer;
    transition: background-color 0.15s ease;
  }

  .we-token-btn:hover {
    background: rgba(0, 143, 93, 0.15);
  }

  .we-token-btn:focus {
    outline: none;
    box-shadow: 0 0 0 2px rgba(0, 143, 93, 0.3);
  }

  .we-token-btn-icon {
    width: 12px;
    height: 12px;
  }

  /* ==========================================================================
   * Token Pill (Phase 5.3)
   *
   * Compact pill UI for displaying a CSS var() reference in input fields.
   * Used when ColorField value is a standalone var(--token) expression.
   * ========================================================================== */

  .we-token-pill {
    flex: 1;
    min-width: 0;
    height: 28px;
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 0 6px 0 4px;
    background: var(--we-control-bg);
    border: 1px solid transparent;
    border-radius: var(--we-radius-control);
    transition: background 0.1s ease, border-color 0.1s ease;
  }

  .we-token-pill:hover:not([data-disabled="true"]) {
    border-color: var(--we-control-border-hover);
  }

  .we-token-pill:focus-within {
    background: var(--we-control-bg-focus);
    border-color: var(--we-control-border-focus);
  }

  .we-token-pill[data-disabled="true"] {
    opacity: 0.5;
    pointer-events: none;
  }

  .we-token-pill[hidden] {
    display: none;
  }

  /* Leading slot: holds external element (ColorField swatch) or internal swatch */
  .we-token-pill__leading {
    display: flex;
    align-items: center;
    flex: 0 0 auto;
  }

  /* Internal swatch (used when no external leading element provided) */
  .we-token-pill__swatch {
    width: 16px;
    height: 16px;
    border-radius: 4px;
    border: 1px solid rgba(0, 0, 0, 0.1);
    background: transparent;
  }

  /* Main clickable area */
  .we-token-pill__main {
    flex: 1;
    min-width: 0;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 8px;
    padding: 0;
    border: none;
    background: transparent;
    color: var(--we-text-primary);
    cursor: pointer;
    font-size: 11px;
    text-align: left;
  }

  .we-token-pill__main:focus {
    outline: none;
  }

  .we-token-pill__main:disabled {
    cursor: default;
  }

  /* Token name with ellipsis */
  .we-token-pill__name {
    min-width: 0;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    font-family: ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, monospace;
    font-size: 11px;
  }

  /* Link icon (rotated 45Â° to indicate variable binding) */
  .we-token-pill__icon {
    width: 14px;
    height: 14px;
    flex: 0 0 auto;
    color: var(--we-text-muted);
    transform: rotate(45deg);
  }

  /* Clear button (hover to reveal) */
  .we-token-pill__clear {
    width: 18px;
    height: 18px;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0;
    border: none;
    border-radius: 4px;
    background: transparent;
    color: var(--we-text-muted);
    font-size: 14px;
    line-height: 1;
    cursor: pointer;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.12s ease, background 0.12s ease, color 0.12s ease;
  }

  .we-token-pill:hover .we-token-pill__clear {
    opacity: 1;
    pointer-events: auto;
  }

  .we-token-pill__clear:hover {
    background: rgba(15, 23, 42, 0.06);
    color: var(--we-text-primary);
  }

  .we-token-pill__clear:focus {
    outline: none;
    opacity: 1;
    pointer-events: auto;
  }

  .we-token-pill__clear:disabled {
    cursor: default;
  }

  /* ==========================================================================
     Props Panel (Phase 7.3)
     ========================================================================== */

  .we-props-panel {
    display: flex;
    flex-direction: column;
    gap: 10px;
  }

  .we-props-meta {
    padding: 0 0 8px 0;
    display: flex;
    flex-direction: column;
    gap: 6px;
  }

  .we-props-meta-title {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 10px;
    color: var(--we-text-primary);
    font-size: 11px;
    font-weight: 600;
  }

  .we-props-component {
    min-width: 0;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }

  .we-props-badge {
    flex: 0 0 auto;
    font-size: 10px;
    font-weight: 600;
    padding: 2px 6px;
    border-radius: 999px;
    background: var(--we-accent-brand-bg);
    color: #1d4ed8;
  }

  .we-props-status {
    font-size: 11px;
    color: #64748b;
    font-family: ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, monospace;
  }

  .we-props-warning {
    font-size: 11px;
    color: #92400e;
    background: var(--we-accent-warning-bg);
    border: 1px solid var(--we-accent-warning-border);
    border-radius: var(--we-radius-control);
    padding: 6px 8px;
  }

  .we-props-error {
    font-size: 11px;
    color: #b91c1c;
    background: var(--we-accent-danger-bg);
    border: 1px solid var(--we-accent-danger-border);
    border-radius: var(--we-radius-control);
    padding: 6px 8px;
  }

  .we-props-source {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 11px;
    padding: 4px 0;
  }

  .we-props-source[hidden] {
    display: none;
  }

  .we-props-source-label {
    flex: 0 0 auto;
    color: #64748b;
    font-weight: 500;
  }

  .we-props-source-path {
    flex: 1 1 auto;
    min-width: 0;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    color: var(--we-text-primary);
    font-family: ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, monospace;
  }

  .we-btn-small {
    padding: 2px 8px;
    font-size: 11px;
  }

  /* Source open button - minimal link style */
  .we-props-source-btn {
    flex: 0 0 auto;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 2px;
    margin-left: 2px;
    border: none;
    background: none;
    color: #64748b;
    cursor: pointer;
    transition: color 0.12s ease;
  }

  .we-props-source-btn:hover:not(:disabled) {
    color: #008F5D;
  }

  .we-props-source-btn:disabled {
    opacity: 0.35;
    cursor: not-allowed;
  }

  .we-props-source-btn svg {
    display: block;
  }

  /* Tooltip - fixed position, mounted at shadow root level */
  .we-tooltip {
    position: fixed;
    transform: translateX(-50%);
    padding: 4px 8px;
    font-size: 11px;
    font-weight: 500;
    line-height: 1.2;
    color: #fff;
    background: rgba(15, 23, 42, 0.92);
    border-radius: 4px;
    white-space: nowrap;
    pointer-events: none;
    z-index: 10000;
  }

  .we-tooltip[hidden] {
    display: none;
  }

  .we-props-title-left {
    display: flex;
    align-items: center;
    gap: 6px;
    min-width: 0;
  }

  .we-props-title-actions {
    display: flex;
    align-items: center;
    gap: 2px;
    margin-left: auto;
  }

  /* Action button - minimal icon style for title bar */
  .we-props-action-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 4px;
    border: none;
    background: none;
    color: var(--we-text-secondary);
    cursor: pointer;
    transition: color 0.12s ease;
  }

  .we-props-action-btn:hover:not(:disabled) {
    color: var(--we-text-primary);
  }

  .we-props-action-btn:disabled {
    opacity: 0.35;
    cursor: not-allowed;
  }

  .we-props-action-btn svg {
    display: block;
  }

  .we-props-list {
    overflow: hidden;
  }

  .we-props-empty {
    padding: 16px 12px;
    color: #64748b;
    font-size: 12px;
    text-align: center;
  }

  .we-props-empty[hidden] {
    display: none;
  }

  /* Loading animations */
  @keyframes we-shimmer {
    to {
      background-position: 200% center;
    }
  }

  @keyframes we-spin {
    to {
      transform: rotate(360deg);
    }
  }

  .we-props-empty.we-loading {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
  }

  .we-props-empty.we-loading svg {
    flex-shrink: 0;
    color: #94a3b8;
  }

  .we-props-empty.we-loading span {
    background: linear-gradient(
      90deg,
      #64748b 0%,
      #94a3b8 50%,
      #64748b 100%
    );
    background-size: 200% auto;
    color: transparent;
    -webkit-background-clip: text;
    background-clip: text;
    animation: we-shimmer 2s linear infinite;
  }

  .we-props-group {
    padding: 0 0 8px 0;
    margin-top: 4px;
    color: var(--we-text-primary);
    font-size: 11px;
    font-weight: 600;
    border-top: 1px solid var(--we-border-section);
    padding-top: 12px;
  }

  .we-props-group:first-child {
    border-top: 0;
    margin-top: 0;
    padding-top: 0;
  }

  .we-props-group + .we-props-row {
    border-top: 0;
  }

  .we-props-rows {
    display: flex;
    flex-direction: column;
  }

  .we-props-row {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 8px 0;
    border-top: 1px solid var(--we-border-section);
  }

  .we-props-row:first-child {
    border-top: 0;
  }

  .we-props-key {
    flex: 0 0 110px;
    min-width: 0;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    font-family: ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, monospace;
    font-size: 11px;
    color: #334155;
  }

  .we-props-value {
    flex: 1;
    min-width: 0;
    display: flex;
    align-items: center;
    justify-content: flex-end;
    gap: 8px;
  }

  .we-props-value--readonly {
    justify-content: flex-start;
    color: #475569;
    font-family: ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, monospace;
    font-size: 11px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  .we-props-input {
    width: 140px;
    max-width: 100%;
  }

  .we-props-input--invalid {
    border-color: rgba(248, 113, 113, 0.85);
  }

  .we-props-bool {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    font-size: 11px;
    color: #475569;
    cursor: pointer;
  }

  .we-props-checkbox {
    width: 14px;
    height: 14px;
    accent-color: #008F5D;
    cursor: pointer;
  }

  .we-props-checkbox:disabled {
    cursor: not-allowed;
    opacity: 0.5;
  }

  /* ==========================================================================
   * Color Field (Phase 4.4)
   * ========================================================================== */

  .we-color-field {
    flex: 1;
    display: flex;
    align-items: center;
    gap: 6px;
    min-width: 0;
  }

  .we-color-swatch {
    flex: 0 0 auto;
    width: 24px;
    height: 24px;
    padding: 0;
    position: relative;
    border: 1px solid var(--we-border-subtle);
    border-radius: var(--we-radius-control);
    background: var(--we-control-bg);
    cursor: pointer;
    transition: border-color 0.15s ease, box-shadow 0.15s ease;
    overflow: hidden;
  }

  .we-color-swatch:hover {
    border-color: var(--we-border-strong);
  }

  .we-color-swatch:focus-visible,
  .we-color-swatch:focus-within {
    outline: none;
    box-shadow: 0 0 0 2px var(--we-focus-ring);
  }

  .we-color-swatch:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  /* Native color input overlays the swatch for direct click interaction */
  .we-color-native-input {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    opacity: 0;
    cursor: pointer;
    border: none;
    padding: 0;
    margin: 0;
  }

  .we-color-text {
    flex: 1;
    min-width: 0;
  }

  /* ==========================================================================
   * Tooltip (data-tooltip)
   *
   * CSS-only tooltips using the data-tooltip attribute.
   * Shows on hover/focus with minimal delay.
   * ========================================================================== */

  [data-tooltip] {
    position: relative;
  }

  [data-tooltip]::after {
    content: attr(data-tooltip);
    position: absolute;
    bottom: calc(100% + 6px);
    left: 50%;
    transform: translateX(-50%);
    padding: 4px 8px;
    font-size: 11px;
    font-family: inherit;
    font-weight: 400;
    line-height: 1.3;
    white-space: nowrap;
    color: var(--we-surface-bg);
    background-color: var(--we-text-primary);
    border-radius: var(--we-radius-control);
    opacity: 0;
    visibility: hidden;
    transition:
      opacity 100ms ease,
      visibility 100ms ease;
    pointer-events: none;
    z-index: 99999;
  }

  [data-tooltip]::before {
    content: '';
    position: absolute;
    bottom: calc(100% + 2px);
    left: 50%;
    transform: translateX(-50%);
    border: 4px solid transparent;
    border-top-color: var(--we-text-primary);
    opacity: 0;
    visibility: hidden;
    transition:
      opacity 100ms ease,
      visibility 100ms ease;
    pointer-events: none;
    z-index: 99999;
  }

  [data-tooltip]:hover::after,
  [data-tooltip]:focus-visible::after,
  [data-tooltip]:focus-within::after {
    opacity: 1;
    visibility: visible;
  }

  [data-tooltip]:hover::before,
  [data-tooltip]:focus-visible::before,
  [data-tooltip]:focus-within::before {
    opacity: 1;
    visibility: visible;
  }

  /* ==========================================================================
   * Global Hidden Rule
   * Ensures [hidden] attribute always hides elements, even when they have
   * explicit display values (flex, inline-flex, etc.)
   * ========================================================================== */
  [hidden] {
    display: none !important;
  }
`;function dn(e,t,n){e.style.setProperty(t,n,"important")}function zl(e={}){const t=new Oe;let n=null;const o=document.getElementById(fi);if(o)try{o.remove()}catch{}const r=document.createElement("div");r.id=fi,r.setAttribute("data-mcp-web-editor","v2"),dn(r,"position","fixed"),dn(r,"inset","0"),dn(r,"z-index",String(Cl)),dn(r,"pointer-events","none"),dn(r,"contain","layout style paint"),dn(r,"isolation","isolate");const i=r.attachShadow({mode:"open"}),s=document.createElement("style");s.textContent=Hl,i.append(s);const l=document.createElement("div");l.id=ra;const a=document.createElement("div");a.id=ia,i.append(l,a),(document.documentElement??document.body).append(r),t.add(()=>r.remove()),n={host:r,shadowRoot:i,overlayRoot:l,uiRoot:a};const u=["pointerdown","pointerup","pointermove","pointerenter","pointerleave","mousedown","mouseup","mousemove","mouseenter","mouseleave","click","dblclick","contextmenu","keydown","keyup","keypress","wheel","touchstart","touchmove","touchend","touchcancel","focus","blur","input","change"],p=d=>{d.stopPropagation()};for(const d of u)t.listen(a,d,p),t.listen(l,d,p);const f=d=>{if(!(d instanceof Node))return!1;if(d===r)return!0;const b=typeof d.getRootNode=="function"?d.getRootNode():null;return b instanceof ShadowRoot&&b.host===r};return{getElements:()=>n,isOverlayElement:f,isEventFromUi:d=>{try{if(typeof d.composedPath=="function")return d.composedPath().some(b=>f(b))}catch{}return f(d.target)},dispose:()=>{n=null,t.dispose()}}}const xt={capture:!0,passive:!1};function kn(e){e.cancelable&&e.preventDefault(),e.stopImmediatePropagation(),e.stopPropagation()}function hi(e,t,n){if(!Number.isFinite(e))return t;const o=Math.min(t,n),r=Math.max(t,n);return Math.min(r,Math.max(o,e))}function Gl(e,t,n,o){const r=Number.isFinite(n)?Math.max(0,n):0,i=Math.max(r,o.width-r-t.width),s=Math.max(r,o.height-r-t.height);return{left:hi(e.left,r,i),top:hi(e.top,r,s)}}function gi(e){return{left:Math.round(e.left),top:Math.round(e.top)}}function sa(e){const{handleEl:t,targetEl:n,onPositionChange:o,clampMargin:r}=e,i=Math.max(0,e.clickThresholdMs??0),s=Math.max(0,e.moveThresholdPx??0),l=i>0,a=s*s;let c=null,u=!1,p=null;function f(){window.removeEventListener("pointermove",S,xt),window.removeEventListener("pointerup",v,xt),window.removeEventListener("pointercancel",x,xt),window.removeEventListener("keydown",k,xt),window.removeEventListener("blur",X,xt),document.removeEventListener("visibilitychange",T)}function h(){p!==null&&(window.clearTimeout(p),p=null)}function d(g){const C=c;if(C&&C.pointerId===g){h();try{t.releasePointerCapture(g)}catch{}f(),c=null,t.dataset.dragging="false"}}function b(g){const C=c,M={width:window.innerWidth,height:window.innerHeight},N=C?{width:C.targetWidth,height:C.targetHeight}:(()=>{const H=n.getBoundingClientRect();return{width:H.width,height:H.height}})(),D=Gl(g,N,r,M);o(gi(D))}function m(){const g=c;g&&(b(g.startPosition),d(g.pointerId))}function w(){const g=C=>{kn(C)};t.addEventListener("click",g,{capture:!0,once:!0}),window.setTimeout(()=>{t.removeEventListener("click",g,{capture:!0})},300)}function I(g){const C=c;if(!(!C||C.pointerId!==g||C.activated)){C.activated=!0,t.dataset.dragging="true",h();try{t.setPointerCapture(g)}catch{}}}function S(g){const C=c;if(C&&g.pointerId===C.pointerId){if(!C.activated){if(!l||a<=0)return;const M=g.clientX-C.startClientX,N=g.clientY-C.startClientY;if(M*M+N*N<a)return;I(g.pointerId)}kn(g),b({left:g.clientX-C.offsetX,top:g.clientY-C.offsetY})}}function v(g){const C=c;C&&g.pointerId===C.pointerId&&(C.activated&&(kn(g),w()),d(g.pointerId))}function x(g){const C=c;C&&g.pointerId===C.pointerId&&(C.activated?(kn(g),m()):d(g.pointerId))}function k(g){if(g.key!=="Escape")return;const C=c;C&&(C.activated?(g.preventDefault(),g.stopImmediatePropagation(),g.stopPropagation(),m()):d(C.pointerId))}function X(){const g=c;g&&(g.activated?m():d(g.pointerId))}function T(){const g=c;g&&document.visibilityState==="hidden"&&(g.activated?m():d(g.pointerId))}function E(g){if(u||!n.isConnected||c||g.button!==0||!g.isPrimary)return;l||kn(g);const C=n.getBoundingClientRect(),M=gi({left:C.left,top:C.top});c={pointerId:g.pointerId,startPosition:M,offsetX:g.clientX-C.left,offsetY:g.clientY-C.top,targetWidth:C.width,targetHeight:C.height,startClientX:g.clientX,startClientY:g.clientY,activated:!l},t.dataset.dragging=c.activated?"true":"false";try{t.setPointerCapture(g.pointerId)}catch{}if(l){h();const N=g.pointerId;p=window.setTimeout(()=>{I(N)},i)}window.addEventListener("pointermove",S,xt),window.addEventListener("pointerup",v,xt),window.addEventListener("pointercancel",x,xt),window.addEventListener("keydown",k,xt),window.addEventListener("blur",X,xt),document.addEventListener("visibilitychange",T)}return t.dataset.dragging="false",t.addEventListener("pointerdown",E),()=>{if(u=!0,t.removeEventListener("pointerdown",E),c)try{c.activated?m():d(c.pointerId)}catch{}f(),h(),c=null,t.dataset.dragging="false"}}function Bo(){const e=document.createElementNS("http://www.w3.org/2000/svg","svg");return e.setAttribute("viewBox","0 0 20 20"),e.setAttribute("fill","none"),e.setAttribute("aria-hidden","true"),e}function Gn(){const e=document.createElementNS("http://www.w3.org/2000/svg","svg");return e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.setAttribute("aria-hidden","true"),e}function Dt(e){const t=document.createElementNS("http://www.w3.org/2000/svg","path");return t.setAttribute("d",e),t.setAttribute("stroke","currentColor"),t.setAttribute("stroke-width","2"),t.setAttribute("stroke-linecap","round"),t.setAttribute("stroke-linejoin","round"),t}function Ul(){const e=Bo();return e.append(Dt("M6 6l8 8M14 6l-8 8")),e}function aa(){const e=Bo(),t=[[7,6],[13,6],[7,10],[13,10],[7,14],[13,14]];for(const[n,o]of t){const r=document.createElementNS("http://www.w3.org/2000/svg","circle");r.setAttribute("cx",String(n)),r.setAttribute("cy",String(o)),r.setAttribute("r","1.4"),r.setAttribute("fill","currentColor"),e.append(r)}return e}function Xl(){const e=Bo();return e.classList.add("we-chevron"),e.append(Dt("M5 7l5 5 5-5")),e}function la(){const e=Gn();return e.append(Dt("M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6")),e}function ca(){const e=Gn();return e.append(Dt("M21 10h-10a8 8 0 00-8 8v2M21 10l-6 6m6-6l-6-6")),e}function jl(){const e=Bo();return e.append(Dt("M6 12l4-4 4 4")),e}function Wl(){const e=Gn();return e.append(Dt("M5 3h10l4 4v10a2 2 0 01-2 2H5a2 2 0 01-2-2V5a2 2 0 012-2Z")),e.append(Dt("M7 3v6h6V3")),e.append(Dt("M7 21v-6h10v6")),e}function Yl(){const e=Gn(),t=(n,o)=>{const r=document.createElementNS("http://www.w3.org/2000/svg","circle");return r.setAttribute("cx",String(n)),r.setAttribute("cy",String(o)),r.setAttribute("r","1.6"),r.setAttribute("fill","currentColor"),r};return e.append(t(12,6),t(12,12),t(12,18)),e}function ql(){const e=Gn();return e.append(Dt("M5.5 3.5l4.5 13.5l3.5-4l5.5 5.5l1.5-1.5l-5.5-5.5l4-3.5L5.5 3.5z")),e}function Kl(e){return!!e&&(typeof e=="object"||typeof e=="function")&&typeof e.then=="function"}function Zl(e){if(!e||typeof e!="object")return!1;const t=e.requestId;return t===void 0||typeof t=="string"}function Jl(e,t){const n=t!=null&&t.requestId?`requestId=${t.requestId}`:"";return n?`${e} (${n})`:e}const Ql=2400,ec=["success","completed","verified"],tc=["error","failed","timeout","cancelled","mismatch","lost","uncertain"],nc=["applying","running","starting","locating","verifying"];function bi(e){return ec.includes(e)?"success":tc.includes(e)?"error":nc.includes(e)?"progress":"idle"}function oc(e){const t=new Oe,n=e.dock??"top";let o=0,r=0,i="idle",s="",l=!1,a=null,c=!1,u=e.initialPosition??null;const p=document.createElement("div");p.className="we-toolbar",p.dataset.position=n,p.dataset.status=i,p.dataset.minimized="false",p.dataset.dragged=u?"true":"false",p.dataset.structureOpen="false",p.setAttribute("role","toolbar"),p.setAttribute("aria-label","ç¼–è¾‘å·¥å…·æ ");const f=document.createElement("button");f.type="button",f.className="we-drag-handle",f.setAttribute("aria-label","æ”¶èµ·å·¥å…·æ "),f.dataset.tooltip="æ”¶èµ·",f.append(aa());const h=document.createElement("div");h.className="we-toolbar-content";const d=document.createElement("div");d.className="we-toolbar-structure-group";const b=document.createElement("div");b.className="we-toolbar-structure-separator";const m=document.createElement("button");m.type="button",m.className="we-toolbar-apply-btn",m.textContent="å¤åˆ¶ prompt",m.setAttribute("aria-label","å¤åˆ¶ prompt");const w=document.createElement("button");w.type="button",w.className="we-toolbar-icon-btn",w.setAttribute("aria-label","ä¿å­˜æ–‡æœ¬"),w.dataset.tooltip="ä¿å­˜æ–‡æœ¬";const I=document.createElement("span");I.className="we-toolbar-icon-text",I.textContent="æ–‡",w.append(I);const S=document.createElement("button");S.type="button",S.className="we-toolbar-icon-btn",S.setAttribute("aria-label","ä¿å­˜æ ·å¼"),S.dataset.tooltip="ä¿å­˜æ ·å¼";const v=document.createElement("span");v.className="we-toolbar-icon-text",v.textContent="æ ·",S.append(v);const x=document.createElement("button");x.type="button",x.className="we-toolbar-group-icon-btn",x.setAttribute("aria-label","æ’¤é”€"),x.dataset.tooltip="æ’¤é”€";const k=document.createElement("span");k.className="we-toolbar-count",x.append(la(),k);const X=document.createElement("button");X.type="button",X.className="we-toolbar-group-icon-btn",X.setAttribute("aria-label","é‡åš"),X.dataset.tooltip="é‡åš";const T=document.createElement("span");T.className="we-toolbar-count",X.append(ca(),T);const E=document.createElement("button");E.type="button",E.className="we-toolbar-close-btn",E.setAttribute("aria-label","é€€å‡ºç¼–è¾‘"),E.dataset.tooltip="é€€å‡ºç¼–è¾‘",E.append(Ul());const g=document.createElement("span");g.className="we-sr-only",g.setAttribute("aria-live","polite"),d.append(x,X);const C=document.createElement("div");C.className="we-toolbar-end-actions",C.append(w,S,m,E),h.append(d,C),p.append(f,h,g),e.container.append(p),t.add(()=>p.remove());const M=16;function N(B){const K=p.getBoundingClientRect(),ge=window.innerWidth,we=window.innerHeight,ke=M,Se=Math.max(ke,ge-ke-K.width),ie=Math.max(ke,we-ke-K.height),Q=Number.isFinite(B.left)?B.left:0,P=Number.isFinite(B.top)?B.top:0;return{left:Math.round(Math.min(Se,Math.max(ke,Q))),top:Math.round(Math.min(ie,Math.max(ke,P)))}}function D(){if(p.dataset.dragged=u?"true":"false",!u){p.style.left="",p.style.top="",p.style.right="",p.style.bottom="",p.style.transform="";return}p.style.left=`${u.left}px`,p.style.top=`${u.top}px`,p.style.right="auto",p.style.bottom="auto",p.style.transform="none"}function H(B){var K;u=B?N(B):null,D(),(K=e.onPositionChange)==null||K.call(e,u)}function y(){return u}t.add(sa({handleEl:f,targetEl:p,clampMargin:M,onPositionChange:B=>H(B),clickThresholdMs:200,moveThresholdPx:5})),u!==null?H(u):D();function _(){a!==null&&(window.clearTimeout(a),a=null)}t.add(_);function F(B){const K=c;c=B,p.dataset.minimized=c?"true":"false",K&&!c&&u&&(H(u),p.addEventListener("transitionend",ge=>{ge.target===p&&(ge.propertyName!=="width"&&ge.propertyName!=="height"||!c&&u&&H(u))},{once:!0})),f.setAttribute("aria-label",c?"å±•å¼€å·¥å…·æ ":"æ”¶èµ·å·¥å…·æ "),f.dataset.tooltip=c?"å±•å¼€":"æ”¶èµ·"}function G(){k.textContent=String(o),T.textContent=String(r)}function $(){var ie,Q,P;x.disabled=l||o<=0,X.disabled=l||r<=0,x.dataset.tooltip=x.disabled?"æ’¤é”€":`æ’¤é”€ (${o})`,X.dataset.tooltip=X.disabled?"é‡åš":`é‡åš (${r})`;const B=(ie=e.getApplyBlockReason)==null?void 0:ie.call(e),K=!!B;m.disabled=l||o<=0||!e.onApply||K,m.textContent=l?"å¤åˆ¶ä¸­â€¦":"å¤åˆ¶ prompt",m.title=K?B:"";const ge=(Q=e.getSaveTextBlockReason)==null?void 0:Q.call(e),we=(P=e.getSaveStyleBlockReason)==null?void 0:P.call(e),ke=!!ge,Se=!!we;w.disabled=l||!e.onSaveText||ke,S.disabled=l||!e.onSaveStyle||Se,w.title=ke?ge??"":"",S.title=Se?we??"":"",w.dataset.tooltip=ke?ge??"ä¿å­˜æ–‡æœ¬":"ä¿å­˜æ–‡æœ¬",S.dataset.tooltip=Se?we??"ä¿å­˜æ ·å¼":"ä¿å­˜æ ·å¼"}function W(){const B=bi(i);p.dataset.status=B,p.dataset.statusDetail=i,g.textContent=i==="idle"?"":s}function J(){_(),a=window.setTimeout(()=>L("idle"),Ql)}function A(B,K){o=Math.max(0,Math.floor(B)),r=Math.max(0,Math.floor(K)),G(),$()}function L(B,K){i=B,s=(K??"").trim(),W();const ge=bi(i);ge==="success"||ge==="error"?J():_()}async function Y(){if(!m.disabled&&e.onApply){l=!0,$(),L("applying","å¤åˆ¶ä¸­â€¦");try{const B=e.onApply(),K=Kl(B)?await B:B,ge=Zl(K)?K:void 0;L("success",Jl("å·²å¤åˆ¶",ge))}catch(B){const K=B instanceof Error?B.message:String(B);L("error",K||"å¤±è´¥")}finally{l=!1,$()}}}return t.listen(m,"click",B=>{B.preventDefault(),Y()}),t.listen(w,"click",B=>{var K;B.preventDefault(),!w.disabled&&((K=e.onSaveText)==null||K.call(e))}),t.listen(S,"click",B=>{var K;B.preventDefault(),!S.disabled&&((K=e.onSaveStyle)==null||K.call(e))}),t.listen(f,"click",B=>{B.preventDefault(),F(!c)}),t.listen(x,"click",B=>{var K;B.preventDefault(),!x.disabled&&((K=e.onUndo)==null||K.call(e))}),t.listen(X,"click",B=>{var K;B.preventDefault(),!X.disabled&&((K=e.onRedo)==null||K.call(e))}),t.listen(E,"click",B=>{var K;B.preventDefault(),(K=e.onRequestClose)==null||K.call(e)}),G(),$(),W(),{setHistory:A,setStatus:L,getPosition:y,setPosition:H,dispose:()=>t.dispose()}}const rc=64,ic=36,sc=2,ac="â€º",lc="â¬¡",wi=10,Cn=8,cc=320;function uc(e,t){const n=e.trim();return n.length<=t?n:`${n.slice(0,Math.max(0,t-1)).trimEnd()}â€¦`}function dc(e){var i;const t=e.tagName.toLowerCase(),n=(i=e.id)==null?void 0:i.trim();let o="";if(n)o=`#${n}`;else{const s=Array.from(e.classList??[]).map(l=>l.trim()).filter(Boolean).slice(0,sc);s.length>0&&(o=`.${s.join(".")}`)}const r=`${t}${o}`;return{fullLabel:r,label:uc(r,ic)}}function fc(e){var o;const t=[];let n=e;for(let r=0;n&&r<rc;r++){const i=n.tagName.toUpperCase();if(i==="HTML"||i==="BODY")break;const s=n.parentElement;if(s){t.push({element:n,crossToParent:!1}),n=s;continue}const l=(o=n.getRootNode)==null?void 0:o.call(n);if(l instanceof ShadowRoot&&l.host instanceof Element){t.push({element:n,crossToParent:!0}),n=l.host;continue}t.push({element:n,crossToParent:!1});break}return t.reverse().map(({element:r,crossToParent:i})=>{const{label:s,fullLabel:l}=dc(r);return{element:r,label:s,fullLabel:l,boundaryBefore:i}})}function pc(e){const t=new Oe,n=e.dock??"top";let o=null,r=[],i=null,s=0,l=0;const a=document.createElement("nav");a.className="we-breadcrumbs",a.dataset.position=n,a.dataset.hidden="true",a.setAttribute("aria-label","é€‰æ‹©è·¯å¾„"),e.container.append(a),t.add(()=>a.remove());function c(m,w,I){return I<w?w:Math.min(I,Math.max(w,m))}function u(m){const w=16+cc+16;return m-w}function p(){const m=a.getBoundingClientRect();s=m.width,l=m.height}function f(){if(!o||!i||!(s>0&&l>0))return;const m=window.innerWidth,w=window.innerHeight,I=u(m),S=Math.min(m-Cn-s,I-s),v=c(i.left,Cn,S),x=i.top-wi-l,k=i.top+i.height+wi,X=x>=Cn?x:k,T=c(X,Cn,w-Cn-l);a.style.left=`${Math.round(v)}px`,a.style.top=`${Math.round(T)}px`}function h(){if(a.textContent="",!o){a.dataset.hidden="true";return}a.dataset.hidden="false";const m=document.createDocumentFragment();for(let w=0;w<r.length;w++){const I=r[w];if(w>0){const v=document.createElement("span"),x=I.boundaryBefore;v.className=x?"we-crumb-sep we-crumb-sep--shadow":"we-crumb-sep",v.textContent=x?lc:ac,v.setAttribute("aria-hidden","true"),m.append(v)}const S=document.createElement("button");S.type="button",S.className="we-crumb",S.dataset.index=String(w),S.textContent=I.label,S.title=I.fullLabel,w===r.length-1&&(S.classList.add("we-crumb--current"),S.setAttribute("aria-current","page")),m.append(S)}a.append(m),p(),f()}t.listen(a,"click",m=>{const w=m.target;if(!(w instanceof Element))return;const I=w.closest("button.we-crumb");if(!(I instanceof HTMLButtonElement))return;m.preventDefault();const S=I.dataset.index??"",v=Number(S);if(!Number.isInteger(v)||v<0)return;const x=r[v];x&&x.element.isConnected&&e.onSelect(x.element)});function d(m){t.isDisposed||(o=m,r=m?fc(m):[],h())}function b(m){t.isDisposed||(i=m,f())}return{setTarget:d,setAnchorRect:b,dispose:()=>t.dispose()}}function mc(e){return typeof e=="string"&&e.trim().length>0}function Qo(e){return e==null?!1:typeof e=="string"?e.trim().length>0:!0}function xi(...e){return e.filter(mc).join(" ")}function We(e){const{ariaLabel:t,type:n="text",inputMode:o,prefix:r,suffix:i,rootClassName:s,inputClassName:l,autocomplete:a="off",spellcheck:c=!1,placeholder:u}=e,p=document.createElement("div");p.className=xi("we-input-container",s);let f=null;const h=document.createElement("input");h.type=n,h.className=xi("we-input-container__input",l),h.setAttribute("autocomplete",a),h.spellcheck=c,h.setAttribute("aria-label",t),o&&(h.inputMode=o),u!==void 0&&(h.placeholder=u);let d=null;function b(m,w,I){if(!Qo(w))return I&&I.remove(),null;const S=I??document.createElement("span");return S.className=`we-input-container__${m}`,S.textContent="",typeof w=="string"?S.textContent=w:S.append(w),S}return Qo(r)&&(f=b("prefix",r,null),f&&p.append(f)),p.append(h),Qo(i)&&(d=b("suffix",i,null),d&&p.append(d)),{root:p,input:h,setPrefix(m){const w=b("prefix",m,f);w&&!f&&p.insertBefore(w,h),f=w},setSuffix(m){const w=b("suffix",m,d);w&&!d&&p.append(w),d=w},getSuffixText(){var w;return d&&((w=d.textContent)==null?void 0:w.trim())||null}}}const ua=new Set(["auto","inherit","initial","unset","none","fit-content","min-content","max-content","revert","revert-layer"]),da=/\b(?:calc|var|clamp|min|max|fit-content)\s*\(/i,fa=/^(-?(?:\d+|\d*\.\d+|\.\d+))\s*([a-zA-Z%]+)$/,pa=/^-?(?:\d+|\d*\.\d+|\.\d+)$/,ma=/^-?\d+\.$/;function hc(e){const t=e.trim();if(!t)return!1;const n=t.split(/\s+/)[0]??"";return/^-?(?:\d+|\d*\.\d+)([a-zA-Z%]+)$/.test(n)}function dt(e){const t=e.trim();if(!t)return{value:"",suffix:"px"};const n=t.toLowerCase();if(ua.has(n))return{value:t,suffix:null};if(da.test(t))return{value:t,suffix:null};const o=t.match(fa);if(o){const r=o[1]??"",i=o[2]??"";return{value:r,suffix:i||null}}return pa.test(t)?{value:t,suffix:"px"}:ma.test(t)?{value:t.slice(0,-1),suffix:"px"}:{value:t,suffix:null}}function ft(e,t){const n=e.trim();if(!n)return"";const o=n.toLowerCase();if(ua.has(o)||da.test(n)||fa.test(n))return n;if(ma.test(n)){const r=n.slice(0,-1);return t?`${r}${t}`:`${r}px`}return pa.test(n)?t?`${n}${t}`:`${n}px`:n}const gc=1,bc=10,wc=.1,xc=["","px","%","rem","em","vh","vw","vmin","vmax"],yc=10;function Kr(e){const t=e.indexOf(".");return t<0?0:Math.max(0,e.length-t-1)}function vc(e){if(!Number.isFinite(e))return 0;const t=String(e);return t.includes("e")||t.includes("E")?0:Kr(t)}function Ec(e){return Number.isFinite(e)?Math.max(0,Math.min(yc,Math.trunc(e))):0}function Sc(e,t){const n=Ec(t),o=e.toFixed(n);return n===0?o:o.replace(/(\.\d*?)0+$/,"$1").replace(/\.$/,"")}const kc=/^(-?(?:(?:\d+\.\d+)|(?:\d+\.)|(?:\d+)|(?:\.\d+)))$/;function Cc(e){const t=e.trim();if(!t)return null;const n=t.match(kc);if(!n)return null;const o=n[1]??"",r=o.endsWith(".")?o.slice(0,-1):o,i=Number(r);return Number.isFinite(i)?{value:i,digits:Kr(r)}:null}const Ac=/^(-?(?:(?:\d+\.\d+)|(?:\d+\.)|(?:\d+)|(?:\.\d+)))\s*([a-zA-Z%]*)$/;function Tc(e,t){const n=e.trim();if(!n)return null;const o=n.match(Ac);if(!o)return null;const r=o[1]??"",i=(o[2]??"").toLowerCase();if(!t.includes(i))return null;const s=r.endsWith(".")?r.slice(0,-1):r,l=Number(s);return Number.isFinite(l)?{value:l,digits:Kr(s),unit:i}:null}function Ye(e,t,n){const{mode:o,step:r=gc,shiftStep:i=bc,altStep:s=wc,min:l,max:a,integer:c=!1,allowedUnits:u=xc}=n;e.listen(t,"keydown",p=>{if(p.key!=="ArrowUp"&&p.key!=="ArrowDown"||p.metaKey||p.ctrlKey||t.disabled||t.readOnly)return;const f=p.key==="ArrowUp"?1:-1;let h;if(p.altKey?h=s:p.shiftKey?h=i:h=r,!Number.isFinite(h)||h===0)return;const d=(t.value||t.placeholder||"").trim();let b=null,m="";if(o==="number")b=Cc(d),!b&&!d&&(b={value:0,digits:0});else{const x=Tc(d,u);x?(b=x,m=x.unit):d||(b={value:0,digits:0},m="")}if(!b)return;const w=c?0:Math.max(b.digits,vc(h));let I=b.value+f*h;typeof l=="number"&&(I=Math.max(l,I)),typeof a=="number"&&(I=Math.min(a,I)),c&&(I=Math.round(I));const S=Sc(I,w),v=o==="css-length"?`${S}${m}`:S;p.preventDefault(),t.value=v;try{t.dispatchEvent(new Event("input",{bubbles:!0}))}catch{}})}const Nc=[{value:"fixed",label:"å›ºå®š"},{value:"fit",label:"è‡ªé€‚åº”"},{value:"fill",label:"å¡«å……"}],ha=["auto","fit-content","max-content","min-content"];function yi(e){try{const t=e.getRootNode();return t instanceof ShadowRoot?t.activeElement===e:document.activeElement===e}catch{return!1}}function er(e,t){try{const n=e.style;return!n||typeof n.getPropertyValue!="function"?"":n.getPropertyValue(t).trim()}catch{return""}}function Yn(e,t){try{return window.getComputedStyle(e).getPropertyValue(t).trim()}catch{return""}}function Rc(e,t){try{const n=e.getBoundingClientRect(),o=t==="width"?n.width:n.height;return Number.isFinite(o)?`${Math.round(o*100)/100}px`:"0px"}catch{return"0px"}}function An(e){const t=e.trim().toLowerCase();if(!t)return"fixed";if(t==="100%")return"fill";for(const n of ha)if(t===n||t.startsWith(`${n}(`))return"fit";return"fixed"}function Ic(e,t){var o;const n=t.trim().toLowerCase();for(const r of ha)if(n===r||n.startsWith(`${r}(`))return t.trim();try{if(typeof CSS<"u"&&((o=CSS.supports)!=null&&o.call(CSS,e,"fit-content")))return"fit-content"}catch{}return"auto"}function _c(e){const t=document.createElement("select");t.className="we-select we-size-mode-select",t.setAttribute("aria-label",e);for(const{value:n,label:o}of Nc){const r=document.createElement("option");r.value=n,r.textContent=o,t.appendChild(r)}return t}function Mc(e){const{container:t,transactionManager:n}=e,o=new Oe;let r=null;const i=document.createElement("div");i.className="we-field-group";function s(T,E){const g=document.createElement("div");g.className="we-size-field";const C=_c(`${T==="width"?"å®½åº¦":"é«˜åº¦"}æ¨¡å¼`),M=We({ariaLabel:T==="width"?"å®½åº¦":"é«˜åº¦",inputMode:"decimal",prefix:E,suffix:"px"});return Ye(o,M.input,{mode:"css-length"}),g.append(C,M.root),{property:T,column:g,modeSelect:C,input:M.input,container:M,lastFixedValue:"",handle:null}}const l=s("width","W"),a=s("height","H"),c=document.createElement("div");c.className="we-field-row",c.append(l.column,a.column),i.append(c),t.append(i),o.add(()=>i.remove());const u={width:l,height:a};function p(T){if(o.isDisposed)return null;const E=r;if(!E||!E.isConnected)return null;const g=u[T];if(g.handle)return g.handle;const C=n.beginStyle(E,T);return g.handle=C,C}function f(T){const E=u[T],g=E.handle;E.handle=null,g&&g.commit({merge:!0})}function h(T){const E=u[T],g=E.handle;E.handle=null,g&&g.rollback()}function d(){f("width"),f("height")}function b(T,E){T.container.root.hidden=E!=="fixed"}function m(T,E){const g=T.lastFixedValue.trim();if(g&&An(g)==="fixed")return g;const C=Yn(E,T.property);return C&&An(C)==="fixed"?C:Rc(E,T.property)}function w(T,E=!1){const g=u[T],C=r;if(!C||!C.isConnected){g.modeSelect.value="fixed",g.modeSelect.disabled=!0,b(g,"fixed"),g.input.value="",g.input.placeholder="",g.input.disabled=!0,g.container.setSuffix("px");return}if(g.modeSelect.disabled=!1,g.input.disabled=!1,!E&&(g.handle!==null||yi(g.input)||yi(g.modeSelect)))return;const M=er(C,T),N=M||Yn(C,T),D=An(M||N);if(g.modeSelect.value=D,b(g,D),D==="fixed"){const H=M||N;H&&An(H)==="fixed"&&(g.lastFixedValue=H)}if(D==="fixed"){const H=dt(N);g.input.value=H.value,g.input.placeholder="",g.container.setSuffix(H.suffix)}}function I(){w("width"),w("height")}function S(T){const E=u[T],g=E.modeSelect,C=()=>{const M=r;if(!M||!M.isConnected)return;const N=g.value;if(An(er(M,T)||Yn(M,T))==="fixed"&&N!=="fixed"){const y=E.container.getSuffixText(),_=ft(E.input.value,y);_&&(E.lastFixedValue=_)}b(E,N);const H=p(T);if(H)switch(N){case"fit":{const y=er(M,T)||Yn(M,T);H.set(Ic(T,y));break}case"fill":H.set("100%");break;case"fixed":{const y=m(E,M);E.lastFixedValue=y,H.set(y);const _=dt(y);E.input.value=_.value,E.container.setSuffix(_.suffix);break}}};o.listen(g,"input",C),o.listen(g,"change",C),o.listen(g,"blur",()=>{f(T),I()}),o.listen(g,"keydown",M=>{M.key==="Enter"?(M.preventDefault(),f(T),I(),g.blur()):M.key==="Escape"&&(M.preventDefault(),h(T),w(T,!0))})}function v(T){const E=u[T],g=E.input;o.listen(g,"input",()=>{const C=p(T);if(!C)return;const M=E.container.getSuffixText(),N=ft(g.value,M);C.set(N)}),o.listen(g,"blur",()=>{f(T),I()}),o.listen(g,"keydown",C=>{C.key==="Enter"?(C.preventDefault(),f(T),I(),g.blur()):C.key==="Escape"&&(C.preventDefault(),h(T),w(T,!0))})}S("width"),S("height"),v("width"),v("height");function x(T){o.isDisposed||(T!==r&&(d(),u.width.lastFixedValue="",u.height.lastFixedValue=""),r=T,I())}function k(){o.isDisposed||I()}function X(){d(),r=null,o.dispose()}return I(),{setTarget:x,refresh:k,dispose:X}}const vi="http://www.w3.org/2000/svg",qn=["padding-top","padding-right","padding-bottom","padding-left","margin-top","margin-right","margin-bottom","margin-left"],Lc={"padding-top":"M2 4h11M7.5 4v3.5","padding-right":"M4 2v11M4 7.5h3.5","padding-bottom":"M2 11h11M7.5 11v-3.5","padding-left":"M11 2v11M11 7.5h-3.5","margin-top":"M2 4h11M7.5 4v-3","margin-right":"M11 2v11M11 7.5h3","margin-bottom":"M2 11h11M7.5 11v3","margin-left":"M4 2v11M4 7.5h-3"};function Dc(e){const[t,n]=e.split("-");return`${t==="padding"?"å†…è¾¹è·":"å¤–è¾¹è·"}${{top:"ä¸Š",right:"å³",bottom:"ä¸‹",left:"å·¦"}[n]}`}function Pc(e){try{const t=e.getRootNode();return t instanceof ShadowRoot?t.activeElement===e:document.activeElement===e}catch{return!1}}function Fc(e,t){try{const n=e.style;return!n||typeof n.getPropertyValue!="function"?"":n.getPropertyValue(t).trim()}catch{return""}}function $c(e,t){try{return window.getComputedStyle(e).getPropertyValue(t).trim()}catch{return""}}function Oc(e){const t=document.createElementNS(vi,"svg");t.setAttribute("viewBox","0 0 15 15"),t.setAttribute("fill","none"),t.setAttribute("aria-hidden","true"),t.setAttribute("focusable","false");const n=document.createElementNS(vi,"path");return n.setAttribute("d",e),n.setAttribute("stroke","currentColor"),t.append(n),t}function Vc(e){const{container:t,transactionManager:n}=e,o=new Oe;let r=null;function i(S){const v=We({ariaLabel:Dc(S),inputMode:"decimal",prefix:Oc(Lc[S]),suffix:"px"});return Ye(o,v.input,{mode:"css-length"}),{property:S,input:v.input,container:v,handle:null}}const s=Object.create(null);for(const S of qn)s[S]=i(S);function l(S,v){const x=document.createElement("div");x.className="we-spacing-section";const k=document.createElement("div");k.className="we-spacing-header",k.textContent=S,x.append(k);const X=document.createElement("div");return X.className="we-spacing-grid",X.append(s[v[0]].container.root),X.append(s[v[1]].container.root),X.append(s[v[2]].container.root),X.append(s[v[3]].container.root),x.append(X),x}const a=document.createElement("div");a.className="we-field-group",a.append(l("å†…è¾¹è·",["padding-top","padding-right","padding-bottom","padding-left"]),l("å¤–è¾¹è·",["margin-top","margin-right","margin-bottom","margin-left"])),t.append(a),o.add(()=>a.remove());function c(S){if(o.isDisposed)return null;const v=r;if(!v||!v.isConnected)return null;const x=s[S];if(x.handle)return x.handle;const k=n.beginStyle(v,S);return x.handle=k,k}function u(S){const v=s[S],x=v.handle;v.handle=null,x&&x.commit({merge:!0})}function p(S){const v=s[S],x=v.handle;v.handle=null,x&&x.rollback()}function f(){for(const S of qn)u(S)}function h(S,v=!1){const x=s[S],k=r;if(!k||!k.isConnected){x.input.value="",x.input.placeholder="",x.input.disabled=!0,x.container.setSuffix("px");return}if(x.input.disabled=!1,(x.handle!==null||Pc(x.input))&&!v)return;const E=Fc(k,S)||$c(k,S),g=dt(E);x.input.value=g.value,x.input.placeholder="",x.container.setSuffix(g.suffix)}function d(){for(const S of qn)h(S)}function b(S){const v=s[S],x=v.input;o.listen(x,"input",()=>{const k=c(S);if(!k)return;const X=v.container.getSuffixText();k.set(ft(x.value,X))}),o.listen(x,"blur",()=>{u(S),d()}),o.listen(x,"keydown",k=>{k.key==="Enter"?(k.preventDefault(),u(S),d(),x.blur()):k.key==="Escape"&&(k.preventDefault(),p(S),h(S,!0))})}for(const S of qn)b(S);function m(S){o.isDisposed||(S!==r&&f(),r=S,d())}function w(){o.isDisposed||d()}function I(){f(),r=null,o.dispose()}return d(),{setTarget:m,refresh:w,dispose:I}}function Bc(e){try{return e.cloneNode(!0)}catch{return e}}function tr(e,t){if(t===null)return-1;for(let n=0;n<e.length;n++)if(e[n].value===t)return n;return-1}function nr(e){for(let t=0;t<e.length;t++)if(!e[t].disabled)return t;return-1}function Hc(e){for(let t=e.length-1;t>=0;t--)if(!e[t].disabled)return t;return-1}function zt(e){var S;const{container:t,ariaLabel:n,items:o,onChange:r}=e,i=new Oe;let s=!!e.disabled,l=null;const a=document.createElement("div");a.className="we-icon-button-group",a.setAttribute("role","radiogroup"),a.setAttribute("aria-label",n);const c=Math.max(1,e.columns??o.length);a.style.gridTemplateColumns=`repeat(${c}, 1fr)`,t.append(a),i.add(()=>a.remove());const u=[];function p(){a.setAttribute("aria-disabled",String(s));for(let v=0;v<u.length;v++){const x=u[v],k=o[v];x.disabled=s||!!k.disabled}}function f(){const v=tr(o,l),x=v>=0&&!u[v].disabled?v:nr(u);for(let k=0;k<u.length;k++){const X=u[k],T=o[k],E=l!==null&&T.value===l;X.setAttribute("aria-checked",E?"true":"false"),X.dataset.selected=E?"true":"false",X.tabIndex=k===x?0:-1}}function h(v,x){const k=tr(o,v);v!==null&&k<0&&(v=null);const X=v!==l;l=v,f(),x&&X&&l!==null&&(r==null||r(l))}function d(){const v=a.getRootNode(),x=v instanceof ShadowRoot?v.activeElement:document.activeElement,k=u.findIndex(E=>E===x);if(k>=0)return k;const X=tr(o,l);if(X>=0)return X;const T=nr(u);return T>=0?T:0}function b(v,x){if(x===0)return-1;for(let k=v;k>=0&&k<u.length;k+=x)if(!u[k].disabled)return k;return-1}function m(v,x){if(v<0||v>=o.length)return;const k=u[v];k.disabled||(h(o[v].value,x),k.focus())}function w(v){if(s||u.length===0)return;const x=d();let k=null;switch(v.key){case"ArrowLeft":k=b(x-1,-1);break;case"ArrowRight":k=b(x+1,1);break;case"ArrowUp":k=b(x-c,-c);break;case"ArrowDown":k=b(x+c,c);break;case"Home":k=nr(u);break;case"End":k=Hc(u);break;case"Enter":case" ":v.preventDefault(),m(x,!0);return;default:return}k!==null&&k>=0&&(v.preventDefault(),m(k,!0))}for(let v=0;v<o.length;v++){const x=o[v],k=document.createElement("button");k.type="button",k.className="we-icon-button-group__btn",k.setAttribute("role","radio"),k.setAttribute("aria-label",x.ariaLabel),x.title&&(k.dataset.tooltip=x.title),k.dataset.value=x.value,k.append(Bc(x.icon)),i.listen(k,"click",X=>{X.preventDefault(),!(s||k.disabled)&&(h(x.value,!0),k.focus())}),i.listen(k,"keydown",w),u.push(k),a.append(k)}p();const I=e.value??((S=o[0])==null?void 0:S.value)??null;return h(I,!1),{root:a,getValue(){return l},setValue(v){h(v,!1)},setDisabled(v){s=v,p(),f()},dispose(){i.dispose()}}}const ot="http://www.w3.org/2000/svg",ga=["static","relative","absolute","fixed","sticky"];function Zr(){const e=document.createElementNS(ot,"svg");return e.setAttribute("viewBox","0 0 15 15"),e.setAttribute("fill","none"),e.setAttribute("aria-hidden","true"),e.setAttribute("focusable","false"),e}function Jr(e){const t=document.createElementNS(ot,"rect");t.setAttribute("x","2"),t.setAttribute("y","2"),t.setAttribute("width","11"),t.setAttribute("height","11"),t.setAttribute("rx","1.5"),t.setAttribute("stroke","currentColor"),t.setAttribute("stroke-width","1"),t.setAttribute("stroke-dasharray","2 1"),t.setAttribute("fill","none"),t.setAttribute("opacity","0.5"),e.prepend(t)}function zc(e){const t=[];if(!e||e==="none")return t;const n=e.trim();let o=0;for(;o<n.length;){for(;o<n.length&&/\s/.test(n[o]);)o++;if(o>=n.length)break;const r=o;for(;o<n.length&&/[\w-]/.test(n[o]);)o++;const i=n.slice(r,o);for(;o<n.length&&/\s/.test(n[o]);)o++;if(n[o]!=="("){o++;continue}const s=o+1;let l=1;for(o++;o<n.length&&l>0;)n[o]==="("?l++:n[o]===")"&&l--,o++;const a=o-1,c=n.slice(s,a).trim(),u=n.slice(r,o);t.push({original:u,name:i.toLowerCase(),args:c})}return t}function Ei(e){const t=zc(e);let n=-1,o=-1,r=-1;for(let i=0;i<t.length;i++)switch(t[i].name){case"rotate":n===-1&&(n=i);break;case"scalex":o===-1&&(o=i);break;case"scaley":r===-1&&(r=i);break}return{functions:t,rotateIndex:n,scaleXIndex:o,scaleYIndex:r}}function Gc(e){return e.rotateIndex<0?"":e.functions[e.rotateIndex].args}function ba(e){if(e.scaleXIndex<0)return 1;const t=parseFloat(e.functions[e.scaleXIndex].args);return isNaN(t)?1:t}function wa(e){if(e.scaleYIndex<0)return 1;const t=parseFloat(e.functions[e.scaleYIndex].args);return isNaN(t)?1:t}function Uc(e){return ba(e)===-1}function Xc(e){return wa(e)===-1}function jc(e,t){const n=t.trim();e.rotateIndex>=0?n?e.functions[e.rotateIndex]={original:`rotate(${n})`,name:"rotate",args:n}:(e.functions.splice(e.rotateIndex,1),e.scaleXIndex>e.rotateIndex&&e.scaleXIndex--,e.scaleYIndex>e.rotateIndex&&e.scaleYIndex--,e.rotateIndex=-1):n&&(e.rotateIndex=e.functions.length,e.functions.push({original:`rotate(${n})`,name:"rotate",args:n}))}function Wc(e){ba(e)===-1?e.scaleXIndex>=0&&(e.functions.splice(e.scaleXIndex,1),e.rotateIndex>e.scaleXIndex&&e.rotateIndex--,e.scaleYIndex>e.scaleXIndex&&e.scaleYIndex--,e.scaleXIndex=-1):e.scaleXIndex>=0?e.functions[e.scaleXIndex]={original:"scaleX(-1)",name:"scalex",args:"-1"}:(e.scaleXIndex=e.functions.length,e.functions.push({original:"scaleX(-1)",name:"scalex",args:"-1"}))}function Yc(e){wa(e)===-1?e.scaleYIndex>=0&&(e.functions.splice(e.scaleYIndex,1),e.rotateIndex>e.scaleYIndex&&e.rotateIndex--,e.scaleXIndex>e.scaleYIndex&&e.scaleXIndex--,e.scaleYIndex=-1):e.scaleYIndex>=0?e.functions[e.scaleYIndex]={original:"scaleY(-1)",name:"scaley",args:"-1"}:(e.scaleYIndex=e.functions.length,e.functions.push({original:"scaleY(-1)",name:"scaley",args:"-1"}))}function or(e){return e.functions.map(t=>t.original).join(" ").trim()}function qc(e){if(!e)return"";const t=e.match(/^(-?[\d.]+)/);return t?t[1]:""}function Kc(e){if(!e)return"deg";const t=e.match(/[\d.]+(.*)$/);return t&&t[1]?t[1]:"deg"}function Zc(e){const t=Zr(),n=(i,s,l,a,c=1)=>{const u=document.createElementNS(ot,"rect");u.setAttribute("x",String(i)),u.setAttribute("y",String(s)),u.setAttribute("width",String(l)),u.setAttribute("height",String(a)),u.setAttribute("rx","0.5"),u.setAttribute("fill","currentColor"),c<1&&u.setAttribute("opacity",String(c)),t.append(u)},o=(i,s,l)=>{const a=document.createElementNS(ot,"rect");a.setAttribute("x",String(i)),a.setAttribute("y",String(s)),a.setAttribute("width",String(l)),a.setAttribute("height","1"),a.setAttribute("rx","0.5"),a.setAttribute("fill","currentColor"),t.append(a)},r=(i,s="1")=>{const l=document.createElementNS(ot,"path");l.setAttribute("d",i),l.setAttribute("stroke","currentColor"),l.setAttribute("stroke-width",s),l.setAttribute("stroke-linecap","round"),l.setAttribute("fill","none"),t.append(l)};switch(e){case"static":o(3.5,4.5,8),o(3.5,7.5,8),o(3.5,10.5,8);break;case"relative":{const i=document.createElementNS(ot,"rect");i.setAttribute("x","3.5"),i.setAttribute("y","3.5"),i.setAttribute("width","4"),i.setAttribute("height","4"),i.setAttribute("rx","0.5"),i.setAttribute("stroke","currentColor"),i.setAttribute("stroke-width","1"),i.setAttribute("stroke-dasharray","1.5 1"),i.setAttribute("fill","none"),i.setAttribute("opacity","0.5"),t.append(i),n(7.5,7.5,4,4),r("M5.5 7.5L7.5 9.5");break}case"absolute":r("M3 5.5H6M8 3V6","0.8"),n(6,6,5,5);break;case"fixed":{const i=document.createElementNS(ot,"circle");i.setAttribute("cx","7.5"),i.setAttribute("cy","4"),i.setAttribute("r","1.5"),i.setAttribute("fill","currentColor"),t.append(i),r("M7.5 5.5V8"),n(4.5,8,6,4);break}case"sticky":{const i=document.createElementNS(ot,"rect");i.setAttribute("x","3"),i.setAttribute("y","3"),i.setAttribute("width","9"),i.setAttribute("height","1.5"),i.setAttribute("rx","0.5"),i.setAttribute("fill","currentColor"),i.setAttribute("opacity","0.4"),t.append(i),n(4.5,5,6,6);break}}return Jr(t),t}function Jc(){const e=document.createElementNS(ot,"svg");e.setAttribute("viewBox","0 0 15 15"),e.setAttribute("fill","none"),e.setAttribute("aria-hidden","true"),e.setAttribute("focusable","false");const t=document.createElementNS(ot,"path");return t.setAttribute("stroke","currentColor"),t.setAttribute("stroke-width","1.2"),t.setAttribute("stroke-linecap","round"),t.setAttribute("stroke-linejoin","round"),t.setAttribute("d","M12 7.5a4.5 4.5 0 1 1-1.5-3.4M12 3v3h-3"),e.append(t),e}function Qc(){const e=Zr(),t=document.createElementNS(ot,"rect");t.setAttribute("x","3.5"),t.setAttribute("y","5"),t.setAttribute("width","3"),t.setAttribute("height","5"),t.setAttribute("rx","0.5"),t.setAttribute("fill","currentColor"),t.setAttribute("opacity","0.4");const n=document.createElementNS(ot,"rect");n.setAttribute("x","8.5"),n.setAttribute("y","5"),n.setAttribute("width","3"),n.setAttribute("height","5"),n.setAttribute("rx","0.5"),n.setAttribute("fill","currentColor");const o=document.createElementNS(ot,"path");return o.setAttribute("d","M7.5 3V12"),o.setAttribute("stroke","currentColor"),o.setAttribute("stroke-width","1"),o.setAttribute("stroke-dasharray","1.5 1"),o.setAttribute("opacity","0.6"),e.append(t,n,o),Jr(e),e}function eu(){const e=Zr(),t=document.createElementNS(ot,"rect");t.setAttribute("x","5"),t.setAttribute("y","3.5"),t.setAttribute("width","5"),t.setAttribute("height","3"),t.setAttribute("rx","0.5"),t.setAttribute("fill","currentColor"),t.setAttribute("opacity","0.4");const n=document.createElementNS(ot,"rect");n.setAttribute("x","5"),n.setAttribute("y","8.5"),n.setAttribute("width","5"),n.setAttribute("height","3"),n.setAttribute("rx","0.5"),n.setAttribute("fill","currentColor");const o=document.createElementNS(ot,"path");return o.setAttribute("d","M3 7.5H12"),o.setAttribute("stroke","currentColor"),o.setAttribute("stroke-width","1"),o.setAttribute("stroke-dasharray","1.5 1"),o.setAttribute("opacity","0.6"),e.append(t,n,o),Jr(e),e}function Si(e){try{const t=e.getRootNode();return t instanceof ShadowRoot?t.activeElement===e:document.activeElement===e}catch{return!1}}function Kn(e,t){try{const n=e.style;return!n||typeof n.getPropertyValue!="function"?"":n.getPropertyValue(t).trim()}catch{return""}}function Zn(e,t){try{return window.getComputedStyle(e).getPropertyValue(t).trim()}catch{return""}}function tu(e){const t=e.trim();return t?/^-?\d+\.$/.test(t)?t.slice(0,-1):t:""}function nu(e){return ga.includes(e)}function ou(e){const{container:t,transactionManager:n}=e,o=new Oe;let r=null;const i=document.createElement("div");i.className="we-field-group";const s=document.createElement("div");s.className="we-field";const l=document.createElement("span");l.className="we-field-label",l.textContent="å®šä½";const a=document.createElement("div");a.className="we-field-content",s.append(l,a);const c=zt({container:a,ariaLabel:"å®šä½ç±»å‹",columns:5,items:ga.map(A=>({value:A,ariaLabel:{static:"é™æ€",relative:"ç›¸å¯¹",absolute:"ç»å¯¹",fixed:"å›ºå®š",sticky:"ç²˜æ€§"}[A],title:{static:"é™æ€",relative:"ç›¸å¯¹",absolute:"ç»å¯¹",fixed:"å›ºå®š",sticky:"ç²˜æ€§"}[A],icon:Zc(A)})),onChange:A=>{const L=E("position");L&&L.set(A),g("position"),_()}});o.add(()=>c.dispose());const u=document.createElement("div");u.className="we-field-row";const p=We({ariaLabel:"X åæ ‡ (å·¦)",inputMode:"decimal",prefix:"X",suffix:"px"}),f=We({ariaLabel:"Y åæ ‡ (ä¸Š)",inputMode:"decimal",prefix:"Y",suffix:"px"});u.append(p.root,f.root),Ye(o,p.input,{mode:"css-length"}),Ye(o,f.input,{mode:"css-length"});const h=document.createElement("div");h.className="we-field";const d=document.createElement("span");d.className="we-field-label",d.textContent="å±‚çº§";const b=We({ariaLabel:"å±‚çº§ (z-index)",inputMode:"numeric",prefix:"Z",suffix:null});h.append(d,b.root),Ye(o,b.input,{mode:"number",integer:!0});const m=document.createElement("div");m.className="we-field";const w=document.createElement("span");w.className="we-field-label",w.textContent="æ—‹è½¬";const I=document.createElement("div");I.className="we-field-content",I.style.display="flex",I.style.gap="4px",I.style.alignItems="center";const S=We({ariaLabel:"æ—‹è½¬",inputMode:"decimal",prefix:Jc(),suffix:"deg"});S.root.style.flex="1",Ye(o,S.input,{mode:"number",step:1,shiftStep:15});const v=document.createElement("button");v.type="button",v.className="we-toggle-btn",v.setAttribute("aria-label","æ°´å¹³ç¿»è½¬"),v.setAttribute("aria-pressed","false"),v.dataset.tooltip="æ°´å¹³ç¿»è½¬",v.append(Qc());const x=document.createElement("button");x.type="button",x.className="we-toggle-btn",x.setAttribute("aria-label","å‚ç›´ç¿»è½¬"),x.setAttribute("aria-pressed","false"),x.dataset.tooltip="å‚ç›´ç¿»è½¬",x.append(eu()),I.append(S.root,v,x),m.append(w,I),i.append(s,u,h,m),t.append(i),o.add(()=>i.remove());const k={position:{kind:"icon-button-group",property:"position",group:c,handle:null},left:{kind:"input",property:"left",input:p.input,container:p,handle:null},top:{kind:"input",property:"top",input:f.input,container:f,handle:null},"z-index":{kind:"input",property:"z-index",input:b.input,container:b,handle:null},transform:{kind:"transform",rotateInput:S.input,rotateContainer:S,flipXBtn:v,flipYBtn:x,handle:null,cached:{functions:[],rotateIndex:-1,scaleXIndex:-1,scaleYIndex:-1}}},X=["position","left","top","z-index"],T=["position","left","top","z-index","transform"];function E(A){if(o.isDisposed)return null;const L=r;if(!L||!L.isConnected)return null;const Y=k[A];if(Y.kind==="transform")return null;if(Y.handle)return Y.handle;const B=n.beginStyle(L,A);return Y.handle=B,B}function g(A){const L=k[A];if(L.kind==="transform")return;const Y=L.handle;L.handle=null,Y&&Y.commit({merge:!0})}function C(A){const L=k[A];if(L.kind==="transform")return;const Y=L.handle;L.handle=null,Y&&Y.rollback()}function M(){if(o.isDisposed)return null;const A=r;if(!A||!A.isConnected)return null;const L=k.transform;if(L.handle)return L.handle;const Y=n.beginStyle(A,"transform");L.handle=Y;const B=Kn(A,"transform")||Zn(A,"transform");return L.cached=Ei(B),Y}function N(){const A=k.transform,L=A.handle;A.handle=null,L&&L.commit({merge:!0})}function D(){const A=k.transform,L=A.handle;A.handle=null,L&&L.rollback()}function H(){for(const A of X)g(A);N()}function y(A,L=!1){const Y=k[A],B=r;if(Y.kind==="icon-button-group"){const K=Y.group;if(!B||!B.isConnected){K.setDisabled(!0),K.setValue(null);return}if(K.setDisabled(!1),Y.handle!==null&&!L)return;const we=Kn(B,"position"),ke=Zn(B,"position"),Se=(we||ke).trim();K.setValue(nu(Se)?Se:"static");return}if(Y.kind==="input"){const K=Y.input;if(!B||!B.isConnected){K.disabled=!0,K.value="",K.placeholder="",Y.property==="z-index"?Y.container.setSuffix(null):Y.container.setSuffix("px");return}if(K.disabled=!1,(Y.handle!==null||Si(K))&&!L)return;const ke=Kn(B,Y.property)||Zn(B,Y.property);if(Y.property==="z-index")K.value=ke,Y.container.setSuffix(null);else{const Se=dt(ke);K.value=Se.value,Y.container.setSuffix(Se.suffix)}K.placeholder="";return}if(Y.kind==="transform"){const{rotateInput:K,rotateContainer:ge,flipXBtn:we,flipYBtn:ke}=Y;if(!B||!B.isConnected){K.disabled=!0,K.value="",K.placeholder="",ge.setSuffix("deg"),we.disabled=!0,ke.disabled=!0,we.setAttribute("aria-pressed","false"),ke.setAttribute("aria-pressed","false");return}if(K.disabled=!1,we.disabled=!1,ke.disabled=!1,(Y.handle!==null||Si(K))&&!L)return;const ie=Kn(B,"transform")||Zn(B,"transform"),Q=Ei(ie),P=Gc(Q),ae=qc(P),xe=Kc(P);K.value=ae,ge.setSuffix(xe||"deg"),we.setAttribute("aria-pressed",Uc(Q)?"true":"false"),ke.setAttribute("aria-pressed",Xc(Q)?"true":"false")}}function _(){for(const A of T)y(A)}function F(A){const L=k[A],Y=L.input;o.listen(Y,"input",()=>{const B=E(A);if(B)if(A==="z-index")B.set(tu(Y.value));else{const K=L.container.getSuffixText();B.set(ft(Y.value,K))}}),o.listen(Y,"blur",()=>{g(A),_()}),o.listen(Y,"keydown",B=>{B.key==="Enter"?(B.preventDefault(),g(A),_(),Y.blur()):B.key==="Escape"&&(B.preventDefault(),C(A),y(A,!0))})}F("left"),F("top"),F("z-index");const G=k.transform;o.listen(G.rotateInput,"input",()=>{const A=M();if(!A)return;const L=G.rotateInput.value.trim(),Y=G.rotateContainer.getSuffixText()||"deg",B=L?`${L}${Y}`:"";jc(G.cached,B),A.set(or(G.cached))}),o.listen(G.rotateInput,"blur",()=>{N(),_()}),o.listen(G.rotateInput,"keydown",A=>{A.key==="Enter"?(A.preventDefault(),N(),_(),G.rotateInput.blur()):A.key==="Escape"&&(A.preventDefault(),D(),y("transform",!0))}),o.listen(G.flipXBtn,"click",A=>{A.preventDefault();const L=M();L&&(Wc(G.cached),L.set(or(G.cached)),N(),_())}),o.listen(G.flipYBtn,"click",A=>{A.preventDefault();const L=M();L&&(Yc(G.cached),L.set(or(G.cached)),N(),_())});function $(A){o.isDisposed||(A!==r&&H(),r=A,_())}function W(){o.isDisposed||_()}function J(){H(),r=null,o.dispose()}return _(),{setTarget:$,refresh:W,dispose:J}}const rt="http://www.w3.org/2000/svg",xa=["block","inline","inline-block","flex","grid","none"],ya=["row","column","row-reverse","column-reverse"],ru=["nowrap","wrap","wrap-reverse"],Or=["flex-start","center","flex-end"],Je=12;function Jn(e){try{const t=e.getRootNode();return t instanceof ShadowRoot?t.activeElement===e:document.activeElement===e}catch{return!1}}function At(e,t){var n,o;try{const r=e.style;return((o=(n=r==null?void 0:r.getPropertyValue)==null?void 0:n.call(r,t))==null?void 0:o.trim())??""}catch{return""}}function Tt(e,t){try{return window.getComputedStyle(e).getPropertyValue(t).trim()}catch{return""}}function iu(e){return xa.includes(e)}function su(e){return ya.includes(e)}function ki(e){return Or.includes(e)}function Ci(e){const t=e.trim();return t==="inline-flex"?"flex":t==="inline-grid"?"grid":t}function st(e,t,n){return Number.isFinite(e)?Math.min(n,Math.max(t,Math.trunc(e))):t}function au(e){const t=[];let n=0,o="";for(let i=0;i<e.length;i++){const s=e[i];if(s==="("&&n++,s===")"&&n>0&&n--,n===0&&/\s/.test(s)){const l=o.trim();l&&t.push(l),o="";continue}o+=s}const r=o.trim();return r&&t.push(r),t}function lu(e){const t=e.match(/^repeat\(\s*(\d+)\s*,/i);if(!t)return null;const n=parseInt(t[1],10);return Number.isFinite(n)&&n>0?n:null}function Ai(e){const t=e.trim();if(!t||t==="none")return null;const n=au(t);let o=0;for(const r of n)/^\[.*\]$/.test(r)||(o+=lu(r)??1);return o>0?o:null}function Ti(e){const t=st(e,1,Je);return t===1?"1fr":`repeat(${t}, 1fr)`}function Sn(){const e=document.createElementNS(rt,"svg");return e.setAttribute("viewBox","0 0 15 15"),e.setAttribute("fill","none"),e.setAttribute("aria-hidden","true"),e.setAttribute("focusable","false"),e}function Bn(e,t="1.2"){e.setAttribute("stroke","currentColor"),e.setAttribute("stroke-width",t),e.setAttribute("stroke-linecap","round"),e.setAttribute("stroke-linejoin","round")}function cu(e){const t=Sn(),n=document.createElementNS(rt,"rect");n.setAttribute("x","2"),n.setAttribute("y","2"),n.setAttribute("width","11"),n.setAttribute("height","11"),n.setAttribute("rx","1.5"),n.setAttribute("stroke","currentColor"),n.setAttribute("stroke-width","1"),n.setAttribute("stroke-dasharray","2 1"),n.setAttribute("fill","none"),n.setAttribute("opacity","0.5");const o=(i,s,l,a)=>{const c=document.createElementNS(rt,"rect");c.setAttribute("x",String(i)),c.setAttribute("y",String(s)),c.setAttribute("width",String(l)),c.setAttribute("height",String(a)),c.setAttribute("rx","0.5"),c.setAttribute("fill","currentColor"),t.append(c)},r=(i,s,l)=>{const a=document.createElementNS(rt,"rect");a.setAttribute("x",String(i)),a.setAttribute("y",String(s)),a.setAttribute("width",String(l)),a.setAttribute("height","1"),a.setAttribute("rx","0.5"),a.setAttribute("fill","currentColor"),t.append(a)};switch(e){case"block":o(3.5,3.5,8,3),o(3.5,8.5,8,3);break;case"inline":r(3.5,4.5,8),r(3.5,7.5,5),r(3.5,10.5,6.5);break;case"inline-block":o(3.5,4.5,3.5,6),r(8,5.5,4),r(8,8.5,3);break;case"flex":o(3.5,4.5,2.5,6),o(6.5,4.5,2.5,6),o(9.5,4.5,2.5,6);break;case"grid":o(3.5,3.5,3.5,3.5),o(8,3.5,3.5,3.5),o(3.5,8,3.5,3.5),o(8,8,3.5,3.5);break;case"none":{const i=document.createElementNS(rt,"path");i.setAttribute("d","M4 11L11 4"),i.setAttribute("stroke","currentColor"),i.setAttribute("stroke-width","1.5"),i.setAttribute("stroke-linecap","round"),t.append(i);break}}return t.prepend(n),t}function uu(e){const t=Sn(),n=document.createElementNS(rt,"path");Bn(n,"1.5");const o={row:"M2 7.5H13M10 4.5L13 7.5L10 10.5","row-reverse":"M13 7.5H2M5 4.5L2 7.5L5 10.5",column:"M7.5 2V13M4.5 10L7.5 13L10.5 10","column-reverse":"M7.5 13V2M4.5 5L7.5 2L10.5 5"};return n.setAttribute("d",o[e]),t.append(n),t}function du(e){const t=Sn(),n=document.createElementNS(rt,"rect");n.setAttribute("x","2"),n.setAttribute("y","2"),n.setAttribute("width","11"),n.setAttribute("height","11"),n.setAttribute("rx","1.5"),n.setAttribute("stroke","currentColor"),n.setAttribute("stroke-width","1"),n.setAttribute("stroke-dasharray","2 1"),n.setAttribute("fill","none"),n.setAttribute("opacity","0.5");const o={"flex-start":3.5,center:5.5,"flex-end":7.5},r=document.createElementNS(rt,"rect");r.setAttribute("x",String(o[e])),r.setAttribute("y","4"),r.setAttribute("width","4"),r.setAttribute("height","3"),r.setAttribute("rx","0.5"),r.setAttribute("fill","currentColor");const i=document.createElementNS(rt,"rect");return i.setAttribute("x",String(o[e])),i.setAttribute("y","8"),i.setAttribute("width","4"),i.setAttribute("height","3"),i.setAttribute("rx","0.5"),i.setAttribute("fill","currentColor"),t.append(n,r,i),t}function fu(e){const t=Sn(),n=document.createElementNS(rt,"rect");n.setAttribute("x","2"),n.setAttribute("y","2"),n.setAttribute("width","11"),n.setAttribute("height","11"),n.setAttribute("rx","1.5"),n.setAttribute("stroke","currentColor"),n.setAttribute("stroke-width","1"),n.setAttribute("stroke-dasharray","2 1"),n.setAttribute("fill","none"),n.setAttribute("opacity","0.5");const o={"flex-start":3.5,center:5.5,"flex-end":7.5},r=document.createElementNS(rt,"rect");r.setAttribute("x","4"),r.setAttribute("y",String(o[e])),r.setAttribute("width","3"),r.setAttribute("height","4"),r.setAttribute("rx","0.5"),r.setAttribute("fill","currentColor");const i=document.createElementNS(rt,"rect");return i.setAttribute("x","8"),i.setAttribute("y",String(o[e])),i.setAttribute("width","3"),i.setAttribute("height","4"),i.setAttribute("rx","0.5"),i.setAttribute("fill","currentColor"),t.append(n,r,i),t}function Ni(){const e=Sn(),t=document.createElementNS(rt,"rect");t.setAttribute("x","3"),t.setAttribute("y","4"),t.setAttribute("width","3.5"),t.setAttribute("height","7"),t.setAttribute("rx","1"),Bn(t);const n=document.createElementNS(rt,"rect");return n.setAttribute("x","8.5"),n.setAttribute("y","4"),n.setAttribute("width","3.5"),n.setAttribute("height","7"),n.setAttribute("rx","1"),Bn(n),e.append(t,n),e}function Ri(){const e=Sn(),t=document.createElementNS(rt,"rect");t.setAttribute("x","4"),t.setAttribute("y","3"),t.setAttribute("width","7"),t.setAttribute("height","3.5"),t.setAttribute("rx","1"),Bn(t);const n=document.createElementNS(rt,"rect");return n.setAttribute("x","4"),n.setAttribute("y","8.5"),n.setAttribute("width","7"),n.setAttribute("height","3.5"),n.setAttribute("rx","1"),Bn(n),e.append(t,n),e}function pu(e){const{container:t,transactionManager:n}=e,o=new Oe;let r=null;const i=document.createElement("div");i.className="we-field-group";const s=document.createElement("div");s.className="we-field";const l=document.createElement("span");l.className="we-field-label",l.textContent="æ˜¾ç¤º";const a=document.createElement("div");a.className="we-field-content",s.append(l,a);const c=zt({container:a,ariaLabel:"æ˜¾ç¤ºæ¨¡å¼",columns:6,items:xa.map(ce=>({value:ce,ariaLabel:{block:"å—çº§",inline:"å†…è”","inline-block":"å†…è”å—",flex:"å¼¹æ€§",grid:"ç½‘æ ¼",none:"æ— "}[ce],title:{block:"å—çº§",inline:"å†…è”","inline-block":"å†…è”å—",flex:"å¼¹æ€§",grid:"ç½‘æ ¼",none:"æ— "}[ce],icon:cu(ce)})),onChange:ce=>{const pe=ve("display");pe&&pe.set(ce),Ae("display"),te()}});o.add(()=>c.dispose());const u=document.createElement("div");u.className="we-field";const p=document.createElement("span");p.className="we-field-label",p.textContent="å¸ƒå±€";const f=document.createElement("div");f.className="we-field-content",u.append(p,f);const h=zt({container:f,ariaLabel:"å¸ƒå±€æ–¹å‘",columns:4,items:ya.map(ce=>({value:ce,ariaLabel:{row:"æ°´å¹³",column:"å‚ç›´","row-reverse":"æ°´å¹³åå‘","column-reverse":"å‚ç›´åå‘"}[ce],title:{row:"æ°´å¹³",column:"å‚ç›´","row-reverse":"æ°´å¹³åå‘","column-reverse":"å‚ç›´åå‘"}[ce],icon:uu(ce)})),onChange:ce=>{const pe=ve("flex-direction");pe&&pe.set(ce),Ae("flex-direction"),te()}});o.add(()=>h.dispose()),h.setValue(null);const d=document.createElement("div");d.className="we-field";const b=document.createElement("span");b.className="we-field-label",b.textContent="æ¢è¡Œ";const m=document.createElement("select");m.className="we-select",m.setAttribute("aria-label","æ¢è¡Œ");for(const ce of ru){const pe=document.createElement("option");pe.value=ce,pe.textContent={nowrap:"ä¸æ¢è¡Œ",wrap:"æ¢è¡Œ","wrap-reverse":"æ¢è¡Œåå‘"}[ce],m.append(pe)}d.append(b,m);const w=document.createElement("div");w.className="we-field";const I=document.createElement("span");I.className="we-field-label",I.textContent="å¯¹é½";const S=document.createElement("div");S.className="we-field-content",S.style.display="flex",S.style.gap="4px",w.append(I,S);const v=document.createElement("div");v.style.flex="1",v.style.minWidth="0",v.style.display="flex",v.style.flexDirection="column",v.style.gap="2px";const x=document.createElement("span");x.className="we-field-hint",x.textContent="æ¨ª";const k=document.createElement("div");v.append(x,k);const X=document.createElement("div");X.style.flex="1",X.style.minWidth="0",X.style.display="flex",X.style.flexDirection="column",X.style.gap="2px";const T=document.createElement("span");T.className="we-field-hint",T.textContent="çºµ";const E=document.createElement("div");X.append(T,E),S.append(v,X);const g=zt({container:k,ariaLabel:"ä¸»è½´å¯¹é½",columns:3,items:Or.map(ce=>({value:ce,ariaLabel:{"flex-start":"èµ·ç‚¹å¯¹é½",center:"å±…ä¸­å¯¹é½","flex-end":"ç»ˆç‚¹å¯¹é½"}[ce],title:{"flex-start":"èµ·ç‚¹å¯¹é½",center:"å±…ä¸­å¯¹é½","flex-end":"ç»ˆç‚¹å¯¹é½"}[ce],icon:du(ce)})),onChange:ce=>{const pe=le();if(!pe)return;const de=C.getValue()??"center";pe.set({"justify-content":ce,"align-items":de}),se(),te()}}),C=zt({container:E,ariaLabel:"ä¾§è½´å¯¹é½",columns:3,items:Or.map(ce=>({value:ce,ariaLabel:{"flex-start":"èµ·ç‚¹å¯¹é½",center:"å±…ä¸­å¯¹é½","flex-end":"ç»ˆç‚¹å¯¹é½"}[ce],title:{"flex-start":"èµ·ç‚¹å¯¹é½",center:"å±…ä¸­å¯¹é½","flex-end":"ç»ˆç‚¹å¯¹é½"}[ce],icon:fu(ce)})),onChange:ce=>{const pe=le();if(!pe)return;const de=g.getValue()??"center";pe.set({"justify-content":de,"align-items":ce}),se(),te()}});o.add(()=>g.dispose()),o.add(()=>C.dispose()),g.setValue(null),C.setValue(null);const M=document.createElement("div");M.className="we-field";const N=document.createElement("span");N.className="we-field-label",N.textContent="ç½‘æ ¼";const D=document.createElement("div");D.className="we-field-content",D.style.position="relative",M.append(N,D);const H=document.createElement("button");H.type="button",H.className="we-grid-dimensions-preview",H.setAttribute("aria-label","ç½‘æ ¼å°ºå¯¸"),H.setAttribute("aria-expanded","false"),H.setAttribute("aria-haspopup","dialog");const y=document.createElement("span");y.textContent="1";const _=document.createElement("span");_.textContent=" Ã— ";const F=document.createElement("span");F.textContent="1",H.append(y,_,F);const G=document.createElement("div");G.className="we-grid-dimensions-popover",G.hidden=!0;const $=document.createElement("div");$.className="we-grid-dimensions-inputs";const W=We({ariaLabel:"ç½‘æ ¼åˆ—æ•°",inputMode:"numeric",prefix:Ni(),suffix:null});W.root.style.width="72px",W.root.style.flex="0 0 auto";const J=document.createElement("span");J.className="we-grid-dimensions-times",J.textContent="Ã—";const A=We({ariaLabel:"ç½‘æ ¼è¡Œæ•°",inputMode:"numeric",prefix:Ri(),suffix:null});A.root.style.width="72px",A.root.style.flex="0 0 auto",$.append(W.root,J,A.root);const L=document.createElement("div");L.className="we-grid-dimensions-matrix",L.setAttribute("role","grid");const Y=[];for(let ce=1;ce<=Je;ce++)for(let pe=1;pe<=Je;pe++){const de=document.createElement("button");de.type="button",de.className="we-grid-dimensions-cell",de.dataset.row=String(ce),de.dataset.col=String(pe),de.setAttribute("role","gridcell"),de.setAttribute("aria-label",`${pe} Ã— ${ce}`),Y.push(de),L.append(de)}const B=document.createElement("div");B.className="we-grid-dimensions-tooltip",B.hidden=!0,G.append($,L,B),D.append(H,G),Ye(o,W.input,{mode:"number",integer:!0,min:1,max:Je}),Ye(o,A.input,{mode:"number",integer:!0,min:1,max:Je});const K=document.createElement("div");K.className="we-field";const ge=document.createElement("span");ge.className="we-field-label",ge.textContent="é—´è·";const we=document.createElement("div");we.className="we-field-content";const ke=document.createElement("div");ke.className="we-grid-gap-inputs";const Se=We({ariaLabel:"è¡Œé—´è·",inputMode:"decimal",prefix:Ri(),suffix:"px"}),ie=We({ariaLabel:"åˆ—é—´è·",inputMode:"decimal",prefix:Ni(),suffix:"px"});ke.append(Se.root,ie.root),we.append(ke),K.append(ge,we),Ye(o,Se.input,{mode:"css-length"}),Ye(o,ie.input,{mode:"css-length"});const Q=document.createElement("div");Q.className="we-grid-gap-row",Q.hidden=!0,M.classList.add("we-grid-gap-col","we-grid-gap-col--grid"),K.classList.add("we-grid-gap-col","we-grid-gap-col--gap"),Q.append(M,K),i.append(s,u,d,w,Q),t.append(i),o.add(()=>i.remove());const P={display:{kind:"display-group",property:"display",group:c,handle:null,row:s},"flex-direction":{kind:"flex-direction-group",property:"flex-direction",group:h,handle:null,row:u},"flex-wrap":{kind:"select",property:"flex-wrap",element:m,handle:null,row:d},alignment:{kind:"flex-alignment",properties:["justify-content","align-items"],justifyGroup:g,alignGroup:C,handle:null,row:w},"grid-dimensions":{kind:"grid-dimensions",properties:["grid-template-columns","grid-template-rows"],previewButton:H,previewColsValue:y,previewRowsValue:F,popover:G,colsContainer:W,rowsContainer:A,matrix:L,tooltip:B,cells:Y,handle:null,row:M},"row-gap":{kind:"input",property:"row-gap",element:Se.input,container:Se,handle:null,row:K},"column-gap":{kind:"input",property:"column-gap",element:ie.input,container:ie,handle:null,row:K}},ae=["display","flex-direction","flex-wrap","row-gap","column-gap"],xe=["display","flex-direction","flex-wrap","alignment","grid-dimensions","row-gap","column-gap"];function ve(ce){if(o.isDisposed)return null;const pe=r;if(!pe||!pe.isConnected)return null;const de=P[ce];if(de.kind==="flex-alignment"||de.kind==="grid-dimensions")return null;if(de.handle)return de.handle;const _e=n.beginStyle(pe,ce);return de.handle=_e,_e}function Ae(ce){const pe=P[ce];if(pe.kind==="flex-alignment"||pe.kind==="grid-dimensions")return;const de=pe.handle;pe.handle=null,de&&de.commit({merge:!0})}function z(ce){const pe=P[ce];if(pe.kind==="flex-alignment"||pe.kind==="grid-dimensions")return;const de=pe.handle;pe.handle=null,de&&de.rollback()}function le(){if(o.isDisposed)return null;const ce=r;if(!ce||!ce.isConnected)return null;const pe=P.alignment;if(pe.kind!=="flex-alignment")return null;if(pe.handle)return pe.handle;const de=n.beginMultiStyle(ce,[...pe.properties]);return pe.handle=de,de}function se(){const ce=P.alignment;if(ce.kind!=="flex-alignment")return;const pe=ce.handle;ce.handle=null,pe==null||pe.commit({merge:!0})}function fe(){if(o.isDisposed)return null;const ce=r;if(!ce||!ce.isConnected)return null;const pe=P["grid-dimensions"];if(pe.kind!=="grid-dimensions")return null;if(pe.handle)return pe.handle;const de=n.beginMultiStyle(ce,[...pe.properties]);return pe.handle=de,de}function re(){const ce=P["grid-dimensions"];if(ce.kind!=="grid-dimensions")return;const pe=ce.handle;ce.handle=null,pe==null||pe.commit({merge:!0})}function O(){const ce=P["grid-dimensions"];if(ce.kind!=="grid-dimensions")return;const pe=ce.handle;ce.handle=null,pe==null||pe.rollback()}function R(){for(const ce of ae)Ae(ce);se(),re()}function V(){const ce=r,pe=ce?At(ce,"display")||Tt(ce,"display"):c.getValue()??"block",_e=Ci(pe).trim(),$e=_e==="flex"||_e==="inline-flex",Ie=_e==="grid"||_e==="inline-grid",De=$e||Ie;u.hidden=!$e,d.hidden=!$e,w.hidden=!$e,Q.hidden=!De,M.hidden=!Ie,K.hidden=!De}function j(ce,pe=!1){var $e;const de=P[ce],_e=r;if(de.kind==="display-group"){const Ie=de.group;if(!_e||!_e.isConnected){Ie.setDisabled(!0),Ie.setValue(null);return}if(Ie.setDisabled(!1),de.handle!==null&&!pe)return;const Ve=At(_e,"display"),Xe=Tt(_e,"display");let Ke=(Ve||Xe).trim();Ke=Ci(Ke),Ie.setValue(iu(Ke)?Ke:"block");return}if(de.kind==="flex-direction-group"){const Ie=de.group;if(!_e||!_e.isConnected){Ie.setDisabled(!0),Ie.setValue(null);return}if(Ie.setDisabled(!1),de.handle!==null&&!pe)return;const Ve=At(_e,"flex-direction"),Xe=Tt(_e,"flex-direction"),Ke=(Ve||Xe).trim();Ie.setValue(su(Ke)?Ke:null);return}if(de.kind==="flex-alignment"){if(!_e||!_e.isConnected){de.justifyGroup.setDisabled(!0),de.alignGroup.setDisabled(!0),de.justifyGroup.setValue(null),de.alignGroup.setValue(null);return}if(de.justifyGroup.setDisabled(!1),de.alignGroup.setDisabled(!1),de.handle!==null&&!pe)return;const De=At(_e,"justify-content"),Ve=Tt(_e,"justify-content"),Xe=At(_e,"align-items"),Ke=Tt(_e,"align-items"),pt=(De||Ve).trim(),Ct=(Xe||Ke).trim();ki(pt)&&ki(Ct)?(de.justifyGroup.setValue(pt),de.alignGroup.setValue(Ct)):(de.justifyGroup.setValue(null),de.alignGroup.setValue(null));return}if(de.kind==="grid-dimensions"){const{previewButton:Ie,popover:De,colsContainer:Ve,rowsContainer:Xe,tooltip:Ke,cells:pt}=de;if(!_e||!_e.isConnected){Ie.disabled=!0,de.previewColsValue.textContent="â€”",de.previewRowsValue.textContent="â€”",Ie.setAttribute("aria-expanded","false"),De.hidden=!0,Ve.input.disabled=!0,Xe.input.disabled=!0,Ke.hidden=!0;for(const ye of pt)ye.dataset.active="false",ye.dataset.selected="false";return}if(Ie.disabled=!1,Ve.input.disabled=!1,Xe.input.disabled=!1,(de.handle!==null||Jn(Ve.input)||Jn(Xe.input))&&!pe)return;const he=At(_e,"grid-template-columns")||Tt(_e,"grid-template-columns"),U=At(_e,"grid-template-rows")||Tt(_e,"grid-template-rows"),ee=st(Ai(he)??1,1,Je),me=st(Ai(U)??1,1,Je);Ve.input.value=String(ee),Xe.input.value=String(me),de.previewColsValue.textContent=String(ee),de.previewRowsValue.textContent=String(me),Ie.setAttribute("aria-label",`ç½‘æ ¼: ${ee} åˆ—, ${me} è¡Œ`),Ke.hidden=!0;for(const ye of pt){const Ne=parseInt(ye.dataset.col??"0",10),Fe=parseInt(ye.dataset.row??"0",10),Le=Ne>0&&Fe>0&&Ne<=ee&&Fe<=me;ye.dataset.selected=Le?"true":"false",ye.dataset.active=Le?"true":"false"}return}if(de.kind==="input"){const Ie=de.element;if(!_e||!_e.isConnected){Ie.disabled=!0,Ie.value="",Ie.placeholder="",de.container.setSuffix("px");return}if(Ie.disabled=!1,(de.handle!==null||Jn(Ie))&&!pe)return;const Xe=At(_e,de.property)||Tt(_e,de.property),Ke=dt(Xe);Ie.value=Ke.value,de.container.setSuffix(Ke.suffix),Ie.placeholder="";return}if(de.kind==="select"){const Ie=de.element;if(!_e||!_e.isConnected){Ie.disabled=!0;return}if(Ie.disabled=!1,(de.handle!==null||Jn(Ie))&&!pe)return;const Ve=At(_e,de.property),Xe=Tt(_e,de.property),Ke=Ve||Xe,pt=Array.from(Ie.options).some(Ct=>Ct.value===Ke);Ie.value=pt?Ke:(($e=Ie.options[0])==null?void 0:$e.value)??""}}function te(){for(const ce of xe)j(ce);V()}function q(ce){const pe=P[ce];if(pe.kind!=="select")return;const de=pe.element,_e=()=>{const $e=ve(ce);$e&&$e.set(de.value)};o.listen(de,"input",_e),o.listen(de,"change",_e),o.listen(de,"blur",()=>{Ae(ce),te()}),o.listen(de,"keydown",$e=>{$e.key==="Enter"?($e.preventDefault(),Ae(ce),te(),de.blur()):$e.key==="Escape"&&($e.preventDefault(),z(ce),j(ce,!0))})}function ne(ce){const pe=P[ce];if(pe.kind!=="input")return;const de=pe.element;o.listen(de,"input",()=>{const _e=ve(ce);if(!_e)return;const $e=pe.container.getSuffixText();_e.set(ft(de.value,$e))}),o.listen(de,"blur",()=>{Ae(ce),te()}),o.listen(de,"keydown",_e=>{_e.key==="Enter"?(_e.preventDefault(),Ae(ce),te(),de.blur()):_e.key==="Escape"&&(_e.preventDefault(),z(ce),j(ce,!0))})}q("flex-wrap"),ne("row-gap"),ne("column-gap");let ue=null,Z=null;function be(ce,pe,de){const _e=ue??pe,$e=Z??de;for(const Ie of ce.cells){const De=parseInt(Ie.dataset.col??"0",10),Ve=parseInt(Ie.dataset.row??"0",10),Xe=De>0&&Ve>0&&De<=pe&&Ve<=de,Ke=De>0&&Ve>0&&De<=_e&&Ve<=$e;Ie.dataset.selected=Xe?"true":"false",Ie.dataset.active=Ke?"true":"false"}ue!==null&&Z!==null?(ce.tooltip.textContent=`${ue} Ã— ${Z}`,ce.tooltip.hidden=!1):ce.tooltip.hidden=!0}function oe(ce,pe){ce.popover.hidden=!pe,ce.previewButton.setAttribute("aria-expanded",pe?"true":"false"),ue=null,Z=null;const de=st(parseInt(ce.colsContainer.input.value||"1",10)||1,1,Je),_e=st(parseInt(ce.rowsContainer.input.value||"1",10)||1,1,Je);be(ce,de,_e)}function Ce(ce,pe){const de=fe();de&&de.set({"grid-template-columns":Ti(ce),"grid-template-rows":Ti(pe)})}const Te=P["grid-dimensions"];if(Te.kind==="grid-dimensions"){o.listen(Te.previewButton,"click",$e=>{$e.preventDefault(),oe(Te,Te.popover.hidden),Te.popover.hidden||(Te.colsContainer.input.focus(),Te.colsContainer.input.select())});const ce=Te.previewButton.getRootNode(),pe=ce instanceof ShadowRoot?ce:document,de=$e=>{if(Te.kind!=="grid-dimensions"||Te.popover.hidden)return;const Ie=$e.target;M.contains(Ie)||oe(Te,!1)};pe.addEventListener("click",de,!0),o.add(()=>{pe.removeEventListener("click",de,!0)});const _e=$e=>{o.listen($e,"input",()=>{const Ie=st(parseInt(Te.colsContainer.input.value||"1",10)||1,1,Je),De=st(parseInt(Te.rowsContainer.input.value||"1",10)||1,1,Je);be(Te,Ie,De),Ce(Ie,De)}),o.listen($e,"blur",()=>{re(),te()}),o.listen($e,"keydown",Ie=>{if(Ie.key==="Enter"){Ie.preventDefault(),re(),te();return}Ie.key==="Escape"&&(Ie.preventDefault(),O(),oe(Te,!1),j("grid-dimensions",!0))})};_e(Te.colsContainer.input),_e(Te.rowsContainer.input),o.listen(Te.matrix,"mouseover",$e=>{const De=$e.target.closest(".we-grid-dimensions-cell");if(!De)return;ue=st(parseInt(De.dataset.col??"1",10)||1,1,Je),Z=st(parseInt(De.dataset.row??"1",10)||1,1,Je);const Ve=st(parseInt(Te.colsContainer.input.value||"1",10)||1,1,Je),Xe=st(parseInt(Te.rowsContainer.input.value||"1",10)||1,1,Je);be(Te,Ve,Xe)}),o.listen(Te.matrix,"mouseleave",()=>{ue=null,Z=null;const $e=st(parseInt(Te.colsContainer.input.value||"1",10)||1,1,Je),Ie=st(parseInt(Te.rowsContainer.input.value||"1",10)||1,1,Je);be(Te,$e,Ie)}),o.listen(Te.matrix,"click",$e=>{const De=$e.target.closest(".we-grid-dimensions-cell");if(!De)return;const Ve=st(parseInt(De.dataset.col??"1",10)||1,1,Je),Xe=st(parseInt(De.dataset.row??"1",10)||1,1,Je);Te.colsContainer.input.value=String(Ve),Te.rowsContainer.input.value=String(Xe),Ce(Ve,Xe),re(),oe(Te,!1),te()})}function et(ce){o.isDisposed||(ce!==r&&R(),r=ce,te())}function Ee(){o.isDisposed||te()}function Pe(){R(),r=null,o.dispose()}return te(),{setTarget:et,refresh:Ee,dispose:Pe}}const mu=8,hu=100;function gu(e){const{container:t,tokensService:n,onSelect:o,maxVisible:r=mu}=e,i=new Oe;let s=null,l=[],a=[],c=!1,u="",p=null,f=-1;const h=document.createElement("div");h.className="we-token-picker",h.hidden=!0;const d=document.createElement("input");d.type="text",d.className="we-token-filter",d.placeholder="æœç´¢å˜é‡...",d.autocomplete="off",d.spellcheck=!1;const b=document.createElement("div");b.className="we-token-toggle-row";const m=document.createElement("label");m.className="we-token-toggle-label";const w=document.createElement("input");w.type="checkbox",w.className="we-token-toggle-checkbox";const I=document.createElement("span");I.textContent="æ˜¾ç¤ºæ‰€æœ‰å˜é‡",m.append(w,I),b.append(m);const S=document.createElement("div");S.className="we-token-list",S.style.maxHeight=`${r*36}px`;const v=document.createElement("div");v.className="we-token-empty",v.textContent="æœªæ‰¾åˆ°å˜é‡",v.hidden=!0,h.append(d,b,S,v),t.append(h),i.add(()=>h.remove());function x(){if(!s||!s.isConnected){l=[],a=[];return}if(c){const G=s.getRootNode();l=n.getRootTokens(G).tokens.map(W=>{const J=n.resolveToken(s,W.name);return{token:W,computedValue:J.computedValue}})}else l=[...n.getContextTokens(s).tokens];k()}function k(){const G=u.toLowerCase().trim();G?a=l.filter($=>{const W=$.token.name.toLowerCase(),J=$.computedValue.toLowerCase();return W.includes(G)||J.includes(G)}):a=l,f=a.length>0?0:-1,X()}function X(){if(S.innerHTML="",a.length===0){v.hidden=!1,S.hidden=!0;return}v.hidden=!0,S.hidden=!1;for(let G=0;G<a.length;G++){const $=a[G],W=T($,G);S.append(W)}E()}function T(G,$){const W=document.createElement("button");W.type="button",W.className="we-token-item",W.dataset.index=String($),W.dataset.name=G.token.name;const J=document.createElement("span");J.className="we-token-name",J.textContent=G.token.name;const A=document.createElement("span");A.className="we-token-value",A.textContent=G.computedValue||"(æœªè®¾ç½®)";const L=G.computedValue.toLowerCase();if((L.startsWith("#")||L.startsWith("rgb")||L.startsWith("hsl")||/^[a-z]+$/.test(L))&&G.computedValue){const B=document.createElement("span");B.className="we-token-swatch",B.style.backgroundColor=G.computedValue,W.append(B)}return W.append(J,A),W}function E(){const G=S.querySelectorAll(".we-token-item");G.forEach(($,W)=>{$.classList.toggle("we-token-item--selected",W===f)}),f>=0&&f<G.length&&G[f].scrollIntoView({block:"nearest"})}function g(G){if(G<0||G>=a.length)return;const $=a[G],W=n.formatCssVar($.token.name);D(),o($.token.name,W)}function C(){f>=0&&g(f)}i.listen(d,"input",()=>{u=d.value,p&&clearTimeout(p),p=setTimeout(()=>{p=null,k()},hu)}),i.listen(d,"keydown",G=>{switch(G.key){case"ArrowDown":G.preventDefault(),a.length>0&&(f=Math.min(f+1,a.length-1),E());break;case"ArrowUp":G.preventDefault(),a.length>0&&(f=Math.max(f-1,0),E());break;case"Enter":G.preventDefault(),C();break;case"Escape":G.preventDefault(),D();break}}),i.listen(w,"change",()=>{c=w.checked,x()}),i.listen(S,"click",G=>{const W=G.target.closest(".we-token-item");if(!W)return;const J=parseInt(W.dataset.index??"-1",10);J>=0&&g(J)}),i.listen(h,"mousedown",G=>{G.preventDefault()});function M(G){i.isDisposed||(s=G&&G.isConnected?G:null,u="",d.value="",!h.hidden&&x())}function N(){i.isDisposed||h.hidden&&(h.hidden=!1,x(),d.focus())}function D(){i.isDisposed||(h.hidden=!0,u="",d.value="",f=-1)}function H(){return h.hidden?(N(),!0):(D(),!1)}function y(){return!h.hidden}function _(){i.isDisposed||h.hidden||x()}function F(){p&&(clearTimeout(p),p=null),s=null,l=[],a=[],i.dispose()}return{setTarget:M,show:N,hide:D,toggle:H,isVisible:y,refresh:_,dispose:F}}const Ii="http://www.w3.org/2000/svg",bu="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m0-5.656a4 4 0 015.656 0l4 4a4 4 0 11-5.656 5.656l-1.1-1.102";function wu(e){const{container:t,ariaLabel:n,tokenName:o,previewColor:r=null,leadingElement:i=null,disabled:s=!1,onClick:l,onClear:a}=e,c=new Oe;let u=!!s,p=String(o),f=typeof r=="string"?r:null,h=i??null;const d=document.createElement("div");d.className="we-token-pill",d.dataset.disabled=u?"true":"false",d.setAttribute("role","group"),d.setAttribute("aria-label",n);const b=document.createElement("div");b.className="we-token-pill__leading";const m=document.createElement("div");m.className="we-token-pill__swatch",m.setAttribute("aria-hidden","true");const w=document.createElement("button");w.type="button",w.className="we-token-pill__main",w.setAttribute("aria-label",n),w.dataset.tooltip="åˆ‡æ¢å˜é‡";const I=document.createElement("span");I.className="we-token-pill__name";const S=document.createElementNS(Ii,"svg");S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.setAttribute("aria-hidden","true"),S.classList.add("we-token-pill__icon");const v=document.createElementNS(Ii,"path");v.setAttribute("d",bu),v.setAttribute("stroke","currentColor"),v.setAttribute("stroke-width","2"),v.setAttribute("stroke-linecap","round"),v.setAttribute("stroke-linejoin","round"),S.append(v),w.append(I,S);const x=document.createElement("button");x.type="button",x.className="we-token-pill__clear",x.setAttribute("aria-label","æ¸…é™¤å˜é‡"),x.dataset.tooltip="æ¸…é™¤å˜é‡",x.textContent="Ã—",d.append(b,w,x),t.append(d),c.add(()=>d.remove());function k(){for(;b.firstChild;)b.removeChild(b.firstChild);h?b.append(h):(m.style.backgroundColor=f??"",b.append(m))}function X(){I.textContent=p}function T(){d.dataset.disabled=u?"true":"false",w.disabled=u,x.disabled=u,h instanceof HTMLButtonElement&&(h.disabled=u)}return c.listen(w,"click",E=>{E.preventDefault(),!u&&(l==null||l())}),c.listen(x,"click",E=>{E.preventDefault(),E.stopPropagation(),!u&&(a==null||a())}),c.listen(d,"keydown",E=>{if(!u&&(E.key==="Backspace"||E.key==="Delete")){const g=E.composedPath();(g.includes(w)||g.includes(d))&&(E.preventDefault(),a==null||a())}}),k(),X(),T(),{root:d,setTokenName(E){p=String(E??""),X()},setPreviewColor(E){f=typeof E=="string"?E:null,h||(m.style.backgroundColor=f??"")},setLeadingElement(E){h=E??null,k(),T()},setDisabled(E){u=!!E,T()},focus(){try{w.focus()}catch{}},dispose(){c.dispose()}}}const _i="#000000",xu=`
  <svg class="we-token-btn-icon" viewBox="0 0 24 24" fill="none" aria-hidden="true">
    <path d="M12 3a9 9 0 100 18h1a2 2 0 002-2v-1a2 2 0 012-2h1a3 3 0 003-3 10 10 0 00-9-10z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    <circle cx="7.5" cy="10.5" r="1" fill="currentColor"/>
    <circle cx="10.5" cy="7.5" r="1" fill="currentColor"/>
    <circle cx="13.5" cy="10.5" r="1" fill="currentColor"/>
  </svg>
`;function yu(e){return Number.isFinite(e)?Math.max(0,Math.min(255,Math.round(e))):0}function rr(e){return yu(e).toString(16).padStart(2,"0")}function vu(e){const t=e.match(/rgba?\(\s*([0-9.]+)\s*,\s*([0-9.]+)\s*,\s*([0-9.]+)/i);if(!t)return null;const n=Number(t[1]),o=Number(t[2]),r=Number(t[3]);return!Number.isFinite(n)||!Number.isFinite(o)||!Number.isFinite(r)?null:`#${rr(n)}${rr(o)}${rr(r)}`}function Eu(e){const t=e.trim().toLowerCase();if(!t.startsWith("#"))return null;if(/^#[0-9a-f]{6}$/.test(t))return t;if(/^#[0-9a-f]{3}$/.test(t)){const n=t[1],o=t[2],r=t[3];return`#${n}${n}${o}${o}${r}${r}`}if(/^#[0-9a-f]{8}$/.test(t))return t.slice(0,7);if(/^#[0-9a-f]{4}$/.test(t)){const n=t[1],o=t[2],r=t[3];return`#${n}${n}${o}${o}${r}${r}`}return null}function Su(e){try{const t=e.getRootNode();if(t instanceof ShadowRoot)return t.activeElement}catch{}return document.activeElement}function Un(e){const{container:t,ariaLabel:n,onInput:o,onCommit:r,onCancel:i,tokensService:s,getTokenTarget:l,tokenPickerMaxVisible:a}=e,c=new Oe;let u="",p="",f=_i,h=!1,d=!1,b=null,m=null,w=null;const I=document.createElement("div");I.className="we-color-field",I.style.position="relative";const S=document.createElement("button");S.type="button",S.className="we-color-swatch",S.dataset.tooltip="é€‰æ‹©é¢œè‰²",S.setAttribute("aria-label",`é€‰æ‹©${n}`);const v=document.createElement("input");v.type="color",v.className="we-color-native-input",v.value=f,v.tabIndex=-1;const x=document.createElement("input");x.type="text",x.className="we-input we-color-text",x.autocomplete="off",x.spellcheck=!1,x.setAttribute("aria-label",n);const k=document.createElement("span");k.style.cssText="position:fixed;left:-9999px;top:0;width:1px;height:1px;pointer-events:none;opacity:0",k.setAttribute("aria-hidden","true"),S.append(v),s&&(m=document.createElement("button"),m.type="button",m.className="we-token-btn",m.setAttribute("aria-label","é€‰æ‹©è®¾è®¡å˜é‡"),m.dataset.tooltip="é€‰æ‹©è®¾è®¡å˜é‡",m.innerHTML=xu),I.append(S,x),m&&I.append(m),I.append(k),t.append(I),c.add(()=>I.remove()),s&&(b=wu({container:I,ariaLabel:`${n} å˜é‡`,tokenName:"",disabled:!1,onClick:()=>D(),onClear:()=>y()}),b.root.hidden=!0,c.add(()=>b==null?void 0:b.dispose())),s&&(w=gu({container:I,tokensService:s,maxVisible:a,onSelect:H}),c.add(()=>w==null?void 0:w.dispose()),c.listen(document,"click",_=>{if(!(w!=null&&w.isVisible()))return;const F=_.target;I.contains(F)||w.hide()}));function X(){const _=u.trim(),F=p.trim();return _&&/\bvar\s*\(/i.test(_)&&F?F:_||F}function T(_){const F=_.trim();if(!F)return{swatch:null,hex:null};const G=Eu(F);if(G)return{swatch:G,hex:G};try{if(k.style.backgroundColor="",k.style.backgroundColor=F,!k.style.backgroundColor)return{swatch:null,hex:null};const $=getComputedStyle(k).backgroundColor,W=vu($);return{swatch:$||null,hex:W}}catch{return{swatch:null,hex:null}}}function E(){const _=X(),F=T(_);F.swatch?S.style.backgroundColor=F.swatch:S.style.backgroundColor="",F.hex&&(f=F.hex,v.value=F.hex)}function g(){if(v.disabled)return;const _=X(),F=T(_);F.hex&&(f=F.hex),v.value=f;const G=v.showPicker;if(typeof G=="function")try{G.call(v);return}catch{}try{v.click()}catch{}}function C(){if(!s)return null;const _=s.parseCssVar(u.trim());return _?_.name:null}function M(_,F){if(!(!s||!b)){if(_===h){_&&F&&b.setTokenName(F);return}if(h=_,_){const G=F??C()??"";b.setTokenName(G),b.setLeadingElement(S),b.root.hidden=!1,x.hidden=!0,m&&(m.hidden=!0)}else b.root.hidden=!0,b.setLeadingElement(null),x.hidden=!1,m&&(m.hidden=!1),(S.parentElement!==I||S.nextSibling!==x)&&I.insertBefore(S,x)}}function N(){if(!s||!b)return;const _=C();M(!!_,_??void 0)}function D(){!w||!s||d||(w.setTarget((l==null?void 0:l())??null),w.toggle())}function H(_,F){p="",x.placeholder="",u=F,x.value=u,E(),o==null||o(u.trim()),r==null||r(),M(!0,_)}function y(){if(!s||!b||d)return;w==null||w.hide();const _=f||_i;p="",x.placeholder="",u=_,x.value=u,E(),o==null||o(u),r==null||r(),M(!1)}return c.listen(S,"keydown",_=>{(_.key==="Enter"||_.key===" ")&&(_.preventDefault(),g())}),c.listen(x,"input",()=>{u=x.value,E(),o==null||o(u.trim())}),c.listen(x,"blur",()=>{r==null||r(),N()}),c.listen(x,"keydown",_=>{_.key==="Enter"?(_.preventDefault(),r==null||r(),x.blur()):_.key==="Escape"&&(_.preventDefault(),i==null||i())}),c.listen(v,"input",()=>{u=v.value,x.value=u,E(),o==null||o(u)}),c.listen(v,"change",()=>{r==null||r(),N()}),m&&c.listen(m,"click",_=>{_.preventDefault(),_.stopPropagation(),D()}),E(),N(),{setValue(_){u=String(_??""),x.value=u,E(),N()},setPlaceholder(_){p=String(_??""),x.placeholder=p,E()},setDisabled(_){d=!!_,S.disabled=d,x.disabled=d,v.disabled=d,m&&(m.disabled=d),b==null||b.setDisabled(d),d&&(w==null||w.hide())},isFocused(){const _=Su(I);return _ instanceof HTMLElement?I.contains(_):!1},dispose(){c.dispose()}}}const Mi=[{value:"none",label:"æ— "},{value:"linear",label:"çº¿æ€§æ¸å˜"},{value:"radial",label:"å¾„å‘æ¸å˜"}],ku=[{value:"ellipse",label:"æ¤­åœ†"},{value:"circle",label:"åœ†å½¢"}],Ro=180,nn=50,St={color:"#000000",position:0},Vr={color:"#ffffff",position:100};let Li=0;function Hn(){try{if(typeof crypto<"u"&&typeof crypto.randomUUID=="function")return crypto.randomUUID()}catch{}return Li+=1,`stop_${Li}_${Date.now()}`}function fn(){return[{id:Hn(),color:St.color,position:St.position},{id:Hn(),color:Vr.color,position:Vr.position}]}function Cu(e){return e.map(t=>({id:Hn(),color:t.color,position:t.position,placeholderColor:t.placeholderColor}))}function Au(e,t){return e.length===t.length?t.map((n,o)=>{var r;return{id:((r=e[o])==null?void 0:r.id)??Hn(),color:n.color,position:n.position,placeholderColor:n.placeholderColor}}):Cu(t)}function Di(e){var t;if(Pn(e.color)){const n=(t=e.placeholderColor)==null?void 0:t.trim();return n||"transparent"}return e.color}function yn(e){return Number.isFinite(e)?Math.max(0,Math.min(255,Math.round(e))):0}function ir(e){return yn(e).toString(16).padStart(2,"0")}function Qn(e){const t=un(e.a,0,1);if(t>=1)return`#${ir(e.r)}${ir(e.g)}${ir(e.b)}`;const n=Math.round(t*1e3)/1e3;return`rgba(${yn(e.r)}, ${yn(e.g)}, ${yn(e.b)}, ${n})`}function Tu(e){const t=e.trim().toLowerCase();if(!t.startsWith("#"))return null;if(/^#[0-9a-f]{3}$/.test(t)){const n=Number.parseInt(t[1]+t[1],16),o=Number.parseInt(t[2]+t[2],16),r=Number.parseInt(t[3]+t[3],16);return{r:n,g:o,b:r,a:1}}if(/^#[0-9a-f]{4}$/.test(t)){const n=Number.parseInt(t[1]+t[1],16),o=Number.parseInt(t[2]+t[2],16),r=Number.parseInt(t[3]+t[3],16),i=Number.parseInt(t[4]+t[4],16)/255;return{r:n,g:o,b:r,a:i}}if(/^#[0-9a-f]{6}$/.test(t)){const n=Number.parseInt(t.slice(1,3),16),o=Number.parseInt(t.slice(3,5),16),r=Number.parseInt(t.slice(5,7),16);return{r:n,g:o,b:r,a:1}}if(/^#[0-9a-f]{8}$/.test(t)){const n=Number.parseInt(t.slice(1,3),16),o=Number.parseInt(t.slice(3,5),16),r=Number.parseInt(t.slice(5,7),16),i=Number.parseInt(t.slice(7,9),16)/255;return{r:n,g:o,b:r,a:i}}return null}function sr(e){const t=e.trim();if(!t)return null;if(t.endsWith("%")){const o=Number(t.slice(0,-1));return Number.isFinite(o)?yn(o/100*255):null}const n=Number(t);return Number.isFinite(n)?yn(n):null}function Nu(e){const t=e.trim();if(!t)return null;if(t.endsWith("%")){const o=Number(t.slice(0,-1));return Number.isFinite(o)?un(o/100,0,1):null}const n=Number(t);return Number.isFinite(n)?un(n,0,1):null}function Pi(e){const t=e.trim();if(!/^rgba?\(/i.test(t))return null;const n=t.indexOf("("),o=t.lastIndexOf(")");if(n<0||o<n)return null;const r=t.slice(n+1,o).trim();if(!r)return null;let i=r,s=null;const l=r.indexOf("/");l!==-1&&(i=r.slice(0,l).trim(),s=r.slice(l+1).trim());const a=i.includes(",")?i.split(",").map(h=>h.trim()).filter(Boolean):i.split(/\s+/).map(h=>h.trim()).filter(Boolean);if(a.length<3)return null;const c=sr(a[0]),u=sr(a[1]),p=sr(a[2]);if(c===null||u===null||p===null)return null;let f=1;if(!s&&a.length>=4&&(s=a[3]),s){const h=Nu(s);h!==null&&(f=h)}return{r:c,g:u,b:p,a:f}}function eo(e,t,n){return e+(t-e)*n}function Ru(e,t,n){const o=un(n,0,1);return{r:eo(e.r,t.r,o),g:eo(e.g,t.g,o),b:eo(e.b,t.b,o),a:eo(e.a,t.a,o)}}function pn(e){try{const t=e.getRootNode();return t instanceof ShadowRoot?t.activeElement===e:document.activeElement===e}catch{return!1}}function Iu(e,t){var n,o;try{const r=e.style;return((o=(n=r==null?void 0:r.getPropertyValue)==null?void 0:n.call(r,t))==null?void 0:o.trim())??""}catch{return""}}function _u(e,t){try{return window.getComputedStyle(e).getPropertyValue(t).trim()}catch{return""}}function to(e){const t=e.trim();return!t||t.toLowerCase()==="none"}function un(e,t,n){return Number.isFinite(e)?Math.max(t,Math.min(n,e)):t}function no(e){const t=e.trim();if(!t)return null;const n=Number(t);return Number.isFinite(n)?n:null}function Mu(e){const t=e.trim();if(!t)return null;const n=t.match(/^(-?(?:\d+\.?\d*|\.\d+))\s*deg$/i);if(!n)return null;const o=Number(n[1]);return Number.isFinite(o)?o:null}function Qr(e){const t=e.trim();if(!t)return null;const n=t.match(/^(-?(?:\d+\.?\d*|\.\d+))\s*%$/);if(!n)return null;const o=Number(n[1]);return Number.isFinite(o)?o:null}function ar(e){const t=e.trim().toLowerCase();if(!t)return null;const n=Qr(t);return n!==null?n:t==="center"?50:t==="left"?0:t==="right"?100:null}function lr(e){const t=e.trim().toLowerCase();if(!t)return null;const n=Qr(t);return n!==null?n:t==="center"?50:t==="top"?0:t==="bottom"?100:null}function Lu(e){const t=e.trim().toLowerCase();return t==="left"||t==="right"}function Du(e){const t=e.trim().toLowerCase();return t==="top"||t==="bottom"}function va(e){return un(e,0,360)}function Qe(e){return un(e,0,100)}function Ea(e,t){const n=[];let o=0,r=null,i=!1,s=0;for(let l=0;l<e.length;l++){const a=e[l];if(i){i=!1;continue}if(a==="\\"){i=!0;continue}if(r){a===r&&(r=null);continue}if(a==='"'||a==="'"){r=a;continue}if(a==="("){o++;continue}if(a===")"){o=Math.max(0,o-1);continue}o===0&&a===t&&(n.push(e.slice(s,l)),s=l+1)}return n.push(e.slice(s)),n}function Sa(e){const t=[];let n=0,o=null,r=!1,i="";const s=()=>{const l=i.trim();l&&t.push(l),i=""};for(let l=0;l<e.length;l++){const a=e[l];if(r){i+=a,r=!1;continue}if(a==="\\"){i+=a,r=!0;continue}if(o){i+=a,a===o&&(o=null);continue}if(a==='"'||a==="'"){i+=a,o=a;continue}if(a==="("){n++,i+=a;continue}if(a===")"){n=Math.max(0,n-1),i+=a;continue}if(n===0&&/\s/.test(a)){s();continue}i+=a}return s(),t}function ka(e){const t=e.trim();if(!t)return null;const n=Sa(t);if(n.length===0)return null;const o=n[0]??"";if(!o)return null;let r=null;for(let i=1;i<n.length;i++){const s=Qr(n[i]??"");if(s!==null){r=s;break}}return{color:o,position:r}}function Ca(e){if(e.length===0)return[];if(e.length===1)return[{color:e[0].color.trim()||St.color,position:Qe(e[0].position??0)}];const t=e.map(s=>s.color.trim()||St.color),n=e.map(s=>s.position===null?null:Qe(s.position));n[0]===null&&(n[0]=0);const o=n.length-1;n[o]===null&&(n[o]=100);let r=n[0]??0;for(let s=1;s<n.length;s++){const l=n[s];l!==null&&(l<r?n[s]=r:r=l)}let i=null;for(let s=0;s<n.length;s++)if(n[s]===null)i===null&&(i=s);else if(i!==null){const l=n[i-1]??0,a=n[s]??100,c=s-i+1;for(let u=i;u<s;u++){const p=(u-i+1)/c;n[u]=l+(a-l)*p}i=null}return e.map((s,l)=>({color:t[l],position:Qe(n[l]??0)}))}function Pu(e){const t=e.trim(),n=t.toLowerCase();let o=null,r="";if(n.startsWith("linear-gradient"))o="linear",r="linear-gradient";else if(n.startsWith("radial-gradient"))o="radial",r="radial-gradient";else return null;let i=r.length;for(;i<t.length&&/\s/.test(t[i]);)i++;if(t[i]!=="(")return null;const s=i;let l=0,a=null,c=!1;for(let u=s;u<t.length;u++){const p=t[u];if(c){c=!1;continue}if(p==="\\"){c=!0;continue}if(a){p===a&&(a=null);continue}if(p==='"'||p==="'"){a=p;continue}if(p==="("){l++;continue}if(p===")"&&(l--,l===0)){if(t.slice(u+1).trim())return null;const h=t.slice(s+1,u);return{kind:o,args:h}}}return null}function Fu(e){const t=Ea(e,",").map(c=>c.trim()).filter(Boolean);if(t.length<2)return null;const n=t[0]??"";if(n.toLowerCase().startsWith("to "))return null;const r=Mu(n);let i=Ro,s=0;if(r!==null){if(t.length<3)return null;i=r,s=1}const l=t.slice(s),a=[];for(const c of l){const u=ka(c);if(!u)return null;a.push(u)}return a.length<2?null:{type:"linear",angle:va(i),stops:Ca(a)}}const $u=new Set(["closest-side","farthest-side","closest-corner","farthest-corner"]);function Ou(e){const t=Ea(e,",").map(b=>b.trim()).filter(Boolean);if(t.length<2)return null;let n="ellipse",o=null,r=0;const i=t[0]??"",s=Sa(i),l=s.map(b=>b.toLowerCase());for(const b of l)if($u.has(b))return null;const a=l.indexOf("at"),c=a>=0,u=l.includes("circle"),p=l.includes("ellipse");if((u||p||c)&&(r=1,u?n="circle":p&&(n="ellipse"),c)){const b=s[a+1]??"",m=s[a+2]??"";let w=null,I=null;Du(b)?(I=lr(b),w=m?ar(m):null):(Lu(b),w=ar(b),I=m?lr(m):null),o={x:Qe(w??nn),y:Qe(I??nn)}}const h=t.slice(r),d=[];for(const b of h){const m=ka(b);if(!m)return null;d.push(m)}return d.length<2?null:{type:"radial",shape:n,position:o,stops:Ca(d)}}function Fi(e){const t=Pu(e);return t?t.kind==="linear"?Fu(t.args):Ou(t.args):null}function Pn(e){return/\bvar\s*\(/i.test(e)}function Vu(e,t){return e.length===0||t.length===0?[]:e.map(n=>{let o=t[0],r=Math.abs(o.position-n.position);for(let i=1;i<t.length;i++){const s=t[i],l=Math.abs(s.position-n.position);l<r&&(o=s,r=l)}return o.color})}function ei(e){var he;const{container:t,transactionManager:n,tokensService:o,property:r="background-image",allowNone:i=!0}=e,s=new Oe;let l=null,a=i?"none":"linear",c=fn(),u=((he=c[0])==null?void 0:he.id)??null,p=null,f=null,h=null;const d=document.createElement("div");d.className="we-field-group";function b(U,ee){const me=document.createElement("div");me.className="we-field";const ye=document.createElement("span");ye.className="we-field-label",ye.textContent=U;const Ne=document.createElement("input");return Ne.type="text",Ne.className="we-input",Ne.autocomplete="off",Ne.spellcheck=!1,Ne.inputMode="decimal",Ne.setAttribute("aria-label",ee),me.append(ye,Ne),{row:me,input:Ne}}function m(U,ee,me){const ye=document.createElement("div");ye.className="we-field";const Ne=document.createElement("span");Ne.className="we-field-label",Ne.textContent=U;const Fe=document.createElement("select");Fe.className="we-select",Fe.setAttribute("aria-label",ee);for(const Le of me){const Re=document.createElement("option");Re.value=Le.value,Re.textContent=Le.label,Fe.append(Re)}return ye.append(Ne,Fe),{row:ye,select:Fe}}const w=i?Mi:Mi.filter(U=>U.value!=="none"),{row:I,select:S}=m("ç±»å‹","æ¸å˜ç±»å‹",w),v=document.createElement("div");v.className="we-gradient-bar-row";const x=document.createElement("div");x.className="we-gradient-bar",x.setAttribute("aria-label","æ¸å˜é¢„è§ˆ");const k=document.createElement("div");k.className="we-gradient-bar-thumbs",x.append(k),v.append(x);const{row:X,input:T}=b("è§’åº¦","æ¸å˜è§’åº¦ (deg)");T.placeholder=String(Ro);const{row:E,select:g}=m("å½¢çŠ¶","å¾„å‘æ¸å˜å½¢çŠ¶",ku),{row:C,input:M}=b("ä½ç½® X","å¾„å‘ä½ç½® X (%)"),{row:N,input:D}=b("ä½ç½® Y","å¾„å‘ä½ç½® Y (%)"),H=document.createElement("div");H.className="we-gradient-stops-header";const y=document.createElement("span");y.className="we-gradient-stops-title",y.textContent="æ¸å˜èŠ‚ç‚¹";const _=document.createElement("button");_.type="button",_.className="we-icon-btn we-gradient-stops-add",_.setAttribute("aria-label","æ·»åŠ èŠ‚ç‚¹"),_.disabled=!1,_.textContent="+",H.append(y,_);const F=document.createElement("div");F.className="we-gradient-stops-list",F.setAttribute("role","list"),d.append(I,v,X,E,C,N,H,F),t.append(d),s.add(()=>d.remove()),Ye(s,T,{mode:"number",min:0,max:360,step:1,shiftStep:15,altStep:.1}),Ye(s,M,{mode:"number",min:0,max:100,step:1,shiftStep:10,altStep:.1}),Ye(s,D,{mode:"number",min:0,max:100,step:1,shiftStep:10,altStep:.1});const G=document.createElement("div"),$=document.createElement("input");$.type="text",$.className="we-gradient-stop-pos-input",$.autocomplete="off",$.spellcheck=!1,$.inputMode="decimal",$.placeholder="0",$.setAttribute("aria-label","é€‰ä¸­èŠ‚ç‚¹ä½ç½® (%)"),G.append($),Ye(s,$,{mode:"number",min:0,max:100,step:1,shiftStep:10});function W(){le(),h&&(Ie(),B()),De()}function J(){K(),De(!0)}s.listen($,"input",()=>{const U=u;if(!U)return;const ee=no($.value);ee!==null&&(ge(U,ee),Ie())}),s.listen($,"blur",W),s.listen($,"keydown",U=>{U.key==="Enter"?(U.preventDefault(),W(),$.blur()):U.key==="Escape"&&(U.preventDefault(),J())});const A=document.createElement("div"),L=Un({container:A,ariaLabel:"é€‰ä¸­èŠ‚ç‚¹é¢œè‰²",tokensService:o,getTokenTarget:()=>l,onInput:U=>{const ee=u;if(!ee)return;const me=c.findIndex(ye=>ye.id===ee);me<0||(c[me].color=U,L.setPlaceholder(Pn(U)?c[me].placeholderColor??"":""),Ie())},onCommit:()=>{B(),De()},onCancel:()=>{K(),De(!0)}});s.add(()=>L.dispose());function Y(){if(s.isDisposed)return null;const U=l;return!U||!U.isConnected?null:h||(h=n.beginStyle(U,r),h)}function B(){const U=h;h=null,U&&U.commit({merge:!0})}function K(){const U=h;h=null,U&&U.rollback()}function ge(U,ee){const me=c.findIndex(Ne=>Ne.id===U);if(me<0)return;const ye=Qe(ee);c[me].position=ye}function we(U){for(const ee of c){const me=U.get(ee.id);me!==void 0&&(ee.position=me)}}function ke(U){const ee=p;if(ee){p=null,x.classList.remove("we-gradient-bar--dragging"),ee.thumbElement.classList.remove("we-gradient-thumb--dragging");try{ee.thumbElement.releasePointerCapture(ee.pointerId)}catch{}U?(le(),Ie(),B(),De()):(we(ee.initialPositions),K(),De(!0))}}function Se(U){const ee=x.getBoundingClientRect();if(ee.width<=0)return 0;const ye=(U-ee.left)/ee.width*100;return Qe(ye)}function ie(U,ee){if(p||a==="none"||S.disabled||(f==null?void 0:f.stopId)===U)return;f&&Q(!0);const me=new Map;for(const ye of c)me.set(ye.id,ye.position);f={stopId:U,initialPositions:me,thumbElement:ee},Y()}function Q(U){const ee=f;ee&&(f=null,U?(le(),Ie(),B(),De()):(we(ee.initialPositions),K(),De(!0)))}function P(U){if(p||a==="none"||S.disabled)return;const me=U.currentTarget.dataset.stopId;me&&u!==me&&(u=me,j({preserveThumbs:!0}))}function ae(U){const ee=f;!ee||U.currentTarget!==ee.thumbElement||Q(!0)}function xe(U){if(U.metaKey||U.ctrlKey||p||a==="none"||S.disabled)return;const ee=U.currentTarget,me=ee.dataset.stopId;if(!me)return;if(U.key==="Escape"){const Me=f;if(!Me||Me.stopId!==me)return;U.preventDefault(),U.stopPropagation(),Q(!1);return}if(!(U.key==="ArrowLeft"||U.key==="ArrowRight"||U.key==="ArrowUp"||U.key==="ArrowDown"))return;U.preventDefault(),U.stopPropagation();const Ne=U.key==="ArrowLeft"||U.key==="ArrowDown"?-1:1,Fe=U.shiftKey?10:1,Le=Ne*Fe;u=me,ie(me,ee);const Re=c.findIndex(Me=>Me.id===me);Re<0||(ge(me,c[Re].position+Le),Ie())}function ve(U,ee){const me=Qe(ee),ye=Math.round(me*100)/100,Ne=Object.is(ye,-0)?0:ye;U.setAttribute("role","slider"),U.setAttribute("aria-label","æ¸å˜èŠ‚ç‚¹ä½ç½®"),U.setAttribute("aria-valuemin","0"),U.setAttribute("aria-valuemax","100"),U.setAttribute("aria-valuenow",String(Ne)),U.setAttribute("aria-valuetext",`${Ne}%`),U.setAttribute("aria-orientation","horizontal")}const Ae=document.createElement("div");Ae.style.cssText="position:fixed;left:-9999px;top:0;width:1px;height:1px;pointer-events:none;opacity:0",d.append(Ae),s.add(()=>Ae.remove());function z(U){const ee=U.trim();if(!ee)return null;if(ee.toLowerCase()==="transparent")return{r:0,g:0,b:0,a:0};const ye=Tu(ee);if(ye)return ye;const Ne=Pi(ee);if(Ne)return Ne;try{if(Ae.style.color="",Ae.style.color=ee,!Ae.style.color)return null;const Fe=getComputedStyle(Ae).color;return Pi(Fe)}catch{return null}}function le(){if(c.length<=1)return;const U=c.map((ee,me)=>({stop:ee,index:me}));U.sort((ee,me)=>ee.stop.position-me.stop.position||ee.index-me.index),c=U.map(ee=>ee.stop)}function se(U){const ee=Qe(U),me=c.length>=2?c:fn();if(me.length===0)return St.color;const ye=me.slice().sort((tt,Ue)=>tt.position-Ue.position);let Ne=ye[0],Fe=ye[ye.length-1];for(const tt of ye)if(tt.position<=ee&&(Ne=tt),tt.position>=ee){Fe=tt;break}const Le=z(Di(Ne)),Re=z(Di(Fe));if(!Le&&!Re)return Ne.color.trim()||St.color;if(!Le)return Qn(Re);if(!Re)return Qn(Le);const Me=Fe.position-Ne.position;if(!Number.isFinite(Me)||Me<=0)return Qn(Le);const Ge=un((ee-Ne.position)/Me,0,1);return Qn(Ru(Le,Re,Ge))}function fe(){const U=u;if(!U)return nn;const me=(c.length>=2?c:fn()).slice().sort((Re,Me)=>Re.position-Me.position),ye=me.findIndex(Re=>Re.id===U);if(ye<0)return nn;const Ne=me[ye],Fe=me[ye+1],Le=me[ye-1];return Fe?Qe((Ne.position+Fe.position)/2):Le?Qe((Le.position+Ne.position)/2):nn}function re(U){if(c.length===0)return null;let ee=c[0],me=Math.abs(ee.position-U);for(let ye=1;ye<c.length;ye++){const Ne=c[ye],Fe=Math.abs(Ne.position-U);if(Fe<me){ee=Ne,me=Fe;continue}if(Fe===me){const Le=Ne.position>=U,Re=ee.position>=U;Le&&!Re&&(ee=Ne)}}return ee.id}function O(U,ee={}){if(a==="none"||S.disabled)return;const me=Qe(U),ye={id:Hn(),position:me,color:se(me)};c.push(ye),u=ye.id,le(),Ie(),B(),ee.focusColor&&queueMicrotask(()=>{const Ne=A.querySelector("input.we-color-text");Ne==null||Ne.focus()})}function R(U){var ye;if(a==="none"||S.disabled||c.length<=2)return;const ee=c.findIndex(Ne=>Ne.id===U);if(ee<0)return;const me=c[ee];c.splice(ee,1),u===U&&(u=re(me.position),u||(u=((ye=c[0])==null?void 0:ye.id)??null)),le(),Ie(),B()}function V(U){return U instanceof HTMLInputElement||U instanceof HTMLTextAreaElement||U instanceof HTMLElement&&U.isContentEditable}function j(U={}){var Le;const ee=U.refreshStopsList??!0,me=U.preserveThumbs??!1;if(a==="none"){x.style.backgroundImage="none",k.textContent="",ee&&oe([],[],[]);return}const ye=_e();if(ye.length===0){x.style.backgroundImage="none",k.textContent="",ee&&oe([],[],[]);return}const Ne=ye.map((Re,Me)=>{var Ue;const Ge=c[Me];return{color:Pn(Re.color)?((Ue=Ge==null?void 0:Ge.placeholderColor)==null?void 0:Ue.trim())||"transparent":Re.color,position:Re.position}});x.style.backgroundImage=de(Ne);const Fe=c.length>=2?c:fn();if((!u||!Fe.some(Re=>Re.id===u))&&(u=((Le=Fe[0])==null?void 0:Le.id)??null),me){const Re=k.querySelectorAll(".we-gradient-thumb");for(const Me of Re){const Ge=Me.dataset.stopId;if(!Ge)continue;const tt=Fe.findIndex(Yt=>Yt.id===Ge);if(tt<0)continue;const Ue=ye[tt],Ze=Ne[tt];if(!Ue||!Ze)continue;Me.style.left=`${Qe(Ue.position)}%`,Me.style.backgroundColor=Ze.color,ve(Me,Ue.position);const wt=Ge===u;Me.classList.toggle("we-gradient-thumb--active",wt)}}else{k.textContent="";for(let Re=0;Re<ye.length;Re++){const Me=Fe[Re],Ge=ye[Re],tt=Ne[Re];if(!Me||!Ge||!tt)continue;const Ue=document.createElement("button");Ue.type="button",Ue.className=Me.id===u?"we-gradient-thumb we-gradient-thumb--active":"we-gradient-thumb",Ue.dataset.stopId=Me.id,Ue.style.left=`${Qe(Ge.position)}%`,Ue.style.backgroundColor=tt.color,ve(Ue,Ge.position),Ue.addEventListener("pointerdown",te),Ue.addEventListener("keydown",xe),Ue.addEventListener("focus",P),Ue.addEventListener("blur",ae),k.append(Ue)}}ee&&!me&&oe(Fe,ye,Ne)}function te(U){if(p||a==="none"||S.disabled||U.button!==0||!U.isPrimary)return;const ee=U.currentTarget,me=ee.dataset.stopId;if(!me)return;f&&(f=null),U.preventDefault(),U.stopPropagation(),u=me;const ye=new Map;for(const Ne of c)ye.set(Ne.id,Ne.position);p={stopId:me,pointerId:U.pointerId,initialPositions:ye,thumbElement:ee},x.classList.add("we-gradient-bar--dragging"),ee.classList.add("we-gradient-thumb--dragging");try{ee.setPointerCapture(U.pointerId)}catch{}Y(),j({preserveThumbs:!0,refreshStopsList:!1})}function q(U){const ee=p;if(!ee||U.pointerId!==ee.pointerId)return;const me=Se(U.clientX);ge(ee.stopId,me),Ie()}function ne(U){const ee=p;ee&&U.pointerId===ee.pointerId&&ke(!0)}function ue(U){const ee=p;ee&&U.pointerId===ee.pointerId&&ke(!1)}function Z(U){p&&U.key==="Escape"&&(U.preventDefault(),U.stopImmediatePropagation(),U.stopPropagation(),ke(!1))}const be={capture:!0,passive:!1};s.listen(window,"pointermove",q,be),s.listen(window,"pointerup",ne,be),s.listen(window,"pointercancel",ue,be),s.listen(window,"keydown",Z,be);function oe(U,ee,me){if(F.textContent="",a==="none"||U.length===0||ee.length===0)return;const ye=Le=>{const Re=Qe(Le),Me=Math.round(Re*100)/100;return Object.is(Me,-0)?0:Me},Ne=Le=>`${ye(Le)}%`,Fe=ee.map((Le,Re)=>({index:Re,stop:Le,model:U[Re],preview:me[Re]})).filter(Le=>!!(Le.model&&Le.preview)).sort((Le,Re)=>Le.stop.position-Re.stop.position||Le.index-Re.index);for(let Le=0;Le<Fe.length;Le++){const Re=Fe[Le],Me=Re.model,Ge=Re.stop,tt=Re.preview,Ue=Me.id===u,Ze=document.createElement("div");Ze.className=Ue?"we-gradient-stop-row we-gradient-stop-row--active":"we-gradient-stop-row",Ze.dataset.stopId=Me.id,Ze.setAttribute("role","button"),Ze.tabIndex=0,Ze.setAttribute("aria-label",`é€‰æ‹©ä½äº ${Ne(Ge.position)} çš„èŠ‚ç‚¹`);const wt=document.createElement("div");wt.className="we-gradient-stop-pos";const Yt=document.createElement("span");Yt.className="we-gradient-stop-pos-static",Yt.textContent=Ne(Ge.position),Yt.title="ç¼–è¾‘ä½ç½®";const Go=document.createElement("div");Go.className="we-gradient-stop-pos-editor",Ue&&(Go.append(G),Ee()||($.value=String(ye(Ge.position)))),wt.append(Yt,Go);const Uo=document.createElement("div");Uo.className="we-gradient-stop-color";const Pt=document.createElement("button");Pt.type="button",Pt.className="we-gradient-stop-color-static",Pt.tabIndex=-1,Pt.setAttribute("aria-label","é€‰ä¸­èŠ‚ç‚¹"),Pt.title="ç¼–è¾‘é¢œè‰²";const Xo=document.createElement("span");Xo.className="we-gradient-stop-swatch",Xo.style.backgroundColor=tt.color;const jo=document.createElement("span");jo.className="we-gradient-stop-color-text",jo.textContent=Ge.color.trim()||St.color,Pt.append(Xo,jo);const Wo=document.createElement("div");Wo.className="we-gradient-stop-color-editor",Ue&&(Wo.append(A),L.isFocused()||(L.setValue(Ge.color),L.setPlaceholder(Pn(Ge.color)?Me.placeholderColor??"":""))),Uo.append(Pt,Wo);const qt=document.createElement("button");qt.type="button",qt.className="we-icon-btn we-gradient-stop-remove",qt.setAttribute("aria-label","ç§»é™¤èŠ‚ç‚¹");const Qa=!S.disabled&&U.length>2;qt.disabled=!Qa,qt.textContent="â€“",qt.addEventListener("click",Be=>{Be.preventDefault(),Be.stopPropagation(),R(Me.id)});const ri=()=>{queueMicrotask(()=>{$.focus(),$.select()})},ii=()=>{queueMicrotask(()=>{const Be=A.querySelector("input.we-color-text");Be==null||Be.focus()})},Xn=Be=>{u=Me.id,j(),Be!=null&&Be.focusColor&&ii(),Be!=null&&Be.focusPosition&&ri()};Ze.addEventListener("click",Be=>{Me.id!==u&&(Be.preventDefault(),Xn())}),Ze.addEventListener("keydown",Be=>{var si;if(!V(Be.target)){if(Be.key==="ArrowUp"||Be.key==="ArrowDown"){Be.preventDefault(),Be.stopPropagation();const ai=Be.key==="ArrowUp"?Math.max(0,Le-1):Math.min(Fe.length-1,Le+1);if(ai===Le)return;const Yo=(si=Fe[ai])==null?void 0:si.model;if(!Yo)return;u=Yo.id,j(),queueMicrotask(()=>{const qo=F.querySelector(`.we-gradient-stop-row[data-stop-id="${Yo.id}"]`);qo==null||qo.focus()});return}Me.id!==u&&(Be.key==="Enter"||Be.key===" ")&&(Be.preventDefault(),Xn())}}),Yt.addEventListener("click",Be=>{if(Be.preventDefault(),Be.stopPropagation(),Me.id===u){ri();return}Xn({focusPosition:!0})}),Pt.addEventListener("click",Be=>{if(Be.preventDefault(),Be.stopPropagation(),Me.id===u){ii();return}Xn({focusColor:!0})}),Ze.append(wt,Uo,qt),F.append(Ze)}}function Ce(){v.hidden=a==="none",X.hidden=a!=="linear",E.hidden=a!=="radial",C.hidden=a!=="radial",N.hidden=a!=="radial",H.hidden=a==="none",F.hidden=a==="none",_.disabled=S.disabled||a==="none"}function Te(U){S.disabled=U,T.disabled=U,g.disabled=U,M.disabled=U,D.disabled=U,_.disabled=U,$.disabled=U||a==="none",L.setDisabled(U||a==="none")}function et(U={}){var ee;T.value=String(Ro),g.value="ellipse",M.value="",D.value="",c=fn(),u=((ee=c[0])==null?void 0:ee.id)??null,U.skipPreview||j()}function Ee(){return pn($)}function Pe(){return h!==null||pn(S)||pn(T)||pn(g)||pn(M)||pn(D)||Ee()||L.isFocused()}function ce(U){return U.map(ee=>{const me=ee.color.trim()||St.color,ye=Qe(ee.position);return`${me} ${ye}%`}).join(", ")}function pe(U){if(a==="none"||U.length===0)return"none";const ee=ce(U);if(a==="linear")return`linear-gradient(${va(no(T.value)??Ro)}deg, ${ee})`;const me=g.value||"ellipse",ye=M.value.trim(),Ne=D.value.trim();if(!!!(ye||Ne))return`radial-gradient(${me}, ${ee})`;const Le=Qe(no(ye)??nn),Re=Qe(no(Ne)??nn);return`radial-gradient(${me} at ${Le}% ${Re}%, ${ee})`}function de(U){return U.length===0?"linear-gradient(90deg, transparent, transparent)":`linear-gradient(90deg, ${ce(U)})`}function _e(){return(c.length>=2?c:fn()).map(ee=>({color:ee.color.trim()||St.color,position:Qe(ee.position)}))}function $e(){if(a==="none")return"none";const U=_e();return pe(U)}function Ie(){if(s.isDisposed)return;const U=p!==null,ee=f!==null,me=L.isFocused()||Ee();j({preserveThumbs:U||ee,refreshStopsList:U||ee?!1:!me});const ye=l;if(!ye||!ye.isConnected)return;const Ne=Y();Ne&&Ne.set($e())}function De(U=!1){var Ue;const ee=l;if(!ee||!ee.isConnected){Te(!0);const Ze=i?"none":"linear";a=Ze,S.value=Ze,et(),Ce(),j();return}if(Te(!1),Pe()&&!U)return;const me=Iu(ee,r),Ne=!me||/\bvar\s*\(/i.test(me)?_u(ee,r):"",Fe=to(me)?null:Fi(me),Le=to(Ne)?null:Fi(Ne);let Re=null,Me="none";if(me.trim()?to(me)?(Re=null,Me="none"):Fe?(Re=Fe,Me="inline"):(Re=null,Me="none"):to(Ne)?(Re=null,Me="none"):Le?(Re=Le,Me="computed"):(Re=null,Me="none"),et({skipPreview:!0}),!Re){const Ze=i?"none":"linear";a=Ze,S.value=Ze,Ce(),j();return}const Ge=Re.stops.length>=2?Re.stops.slice():[{...St},{...Vr}];if(Me==="inline"&&Pn(me)&&Le){const Ze=Vu(Ge,Le.stops);for(let wt=0;wt<Ge.length;wt++)Ge[wt].placeholderColor=Ze[wt]??""}c=Au(c,Ge),(!u||!c.some(Ze=>Ze.id===u))&&(u=((Ue=c[0])==null?void 0:Ue.id)??null),Re.type==="linear"?(a="linear",S.value="linear",T.value=String(Re.angle)):(a="radial",S.value="radial",g.value=Re.shape,Re.position?(M.value=String(Re.position.x),D.value=String(Re.position.y)):(M.value="",D.value="")),Ce(),j()}function Ve(U){s.listen(U,"input",Ie),s.listen(U,"blur",()=>{B(),De()}),s.listen(U,"keydown",ee=>{ee.key==="Enter"?(ee.preventDefault(),B(),De(),U.blur()):ee.key==="Escape"&&(ee.preventDefault(),K(),De(!0))})}function Xe(U,ee){const me=()=>{ee==null||ee(),Ie()};s.listen(U,"input",me),s.listen(U,"change",me),s.listen(U,"blur",()=>{B(),De()}),s.listen(U,"keydown",ye=>{ye.key==="Enter"?(ye.preventDefault(),B(),De(),U.blur()):ye.key==="Escape"&&(ye.preventDefault(),K(),De(!0))})}Xe(S,()=>{a=S.value,Ce()}),Xe(g),Ve(T),Ve(M),Ve(D),s.listen(_,"click",U=>{U.preventDefault(),!_.disabled&&O(fe(),{focusColor:!0})}),s.listen(x,"dblclick",U=>{p||a==="none"||S.disabled||U.composedPath().some(me=>me instanceof HTMLElement&&me.classList.contains("we-gradient-thumb"))||(U.preventDefault(),O(Se(U.clientX),{focusColor:!0}))}),s.listen(d,"keydown",U=>{if(U.key!=="Delete"&&U.key!=="Backspace"||p||a==="none"||S.disabled)return;const ee=u;if(!ee||V(U.target))return;const me=U.composedPath();!me.includes(F)&&!me.includes(x)||(U.preventDefault(),U.stopPropagation(),R(ee))});function Ke(U){s.isDisposed||(U!==l&&B(),l=U,De(!0))}function pt(){s.isDisposed||De()}function Ct(){B(),l=null,s.dispose()}return S.value=a,et(),Ce(),De(!0),{setTarget:Ke,refresh:pt,dispose:Ct}}const sn="http://www.w3.org/2000/svg",Bu=["100","200","300","400","500","600","700","800","900"],Aa=["left","center","right","justify"],Ta=["baseline","middle","top","bottom"],Hu=["solid","gradient"],$i=["inherit","system-ui","sans-serif","serif","monospace"],oo="custom";function Na(){const e=document.createElementNS(sn,"svg");return e.setAttribute("viewBox","0 0 15 15"),e.setAttribute("fill","none"),e.setAttribute("aria-hidden","true"),e.setAttribute("focusable","false"),e}function zu(e){const t=Na(),n=document.createElementNS(sn,"rect");n.setAttribute("x","2"),n.setAttribute("y","2"),n.setAttribute("width","11"),n.setAttribute("height","11"),n.setAttribute("rx","1.5"),n.setAttribute("stroke","currentColor"),n.setAttribute("stroke-width","1"),n.setAttribute("stroke-dasharray","2 1"),n.setAttribute("fill","none"),n.setAttribute("opacity","0.5");const o={left:[[3.5,8],[3.5,5],[3.5,6.5]],center:[[3.5,8],[5,5],[4.25,6.5]],right:[[3.5,8],[6.5,5],[5.5,6.5]],justify:[[3.5,8],[3.5,8],[3.5,8]]},r=[4.5,7.5,10.5];return o[e].forEach(([s,l],a)=>{const c=document.createElementNS(sn,"rect");c.setAttribute("x",String(s)),c.setAttribute("y",String(r[a]-.5)),c.setAttribute("width",String(l)),c.setAttribute("height","1"),c.setAttribute("rx","0.5"),c.setAttribute("fill","currentColor"),t.append(c)}),t.prepend(n),t}function Gu(e){const t=Na(),n=document.createElementNS(sn,"rect");n.setAttribute("x","2"),n.setAttribute("y","2"),n.setAttribute("width","11"),n.setAttribute("height","11"),n.setAttribute("rx","1.5"),n.setAttribute("stroke","currentColor"),n.setAttribute("stroke-width","1"),n.setAttribute("stroke-dasharray","2 1"),n.setAttribute("fill","none"),n.setAttribute("opacity","0.5");const o={top:3.5,middle:5.5,bottom:7.5,baseline:6.5},r=document.createElementNS(sn,"rect");r.setAttribute("x","4"),r.setAttribute("y",String(o[e])),r.setAttribute("width","3"),r.setAttribute("height","4"),r.setAttribute("rx","0.5"),r.setAttribute("fill","currentColor");const i=document.createElementNS(sn,"rect");if(i.setAttribute("x","8"),i.setAttribute("y",String(o[e])),i.setAttribute("width","3"),i.setAttribute("height","4"),i.setAttribute("rx","0.5"),i.setAttribute("fill","currentColor"),t.append(n,r,i),e==="baseline"){const s=document.createElementNS(sn,"path");s.setAttribute("d","M3 10H12"),s.setAttribute("stroke","currentColor"),s.setAttribute("stroke-width","1"),s.setAttribute("stroke-dasharray","1.5 1"),t.append(s)}return t}function Uu(e){return Aa.includes(e)}function Xu(e){return Ta.includes(e)}function cr(e){try{const t=e.getRootNode();return t instanceof ShadowRoot?t.activeElement===e:document.activeElement===e}catch{return!1}}function yt(e,t){var n,o;try{const r=e.style;return((o=(n=r==null?void 0:r.getPropertyValue)==null?void 0:n.call(r,t))==null?void 0:o.trim())??""}catch{return""}}function vt(e,t){try{return window.getComputedStyle(e).getPropertyValue(t).trim()}catch{return""}}function Ra(e){return/\b(?:linear|radial|conic)-gradient\s*\(/i.test(e.trim())}function ju(e){const t=e.trim().toLowerCase();return t?!!(t==="transparent"||/^rgba\([^)]*,\s*0\s*\)$/.test(t)):!1}function Oi(e){const t=yt(e,"background-image")||vt(e,"background-image"),n=yt(e,"-webkit-background-clip")||vt(e,"-webkit-background-clip"),o=yt(e,"-webkit-text-fill-color")||vt(e,"-webkit-text-fill-color"),r=t&&t.toLowerCase()!=="none"&&Ra(t),i=n.toLowerCase().includes("text"),s=ju(o);return r&&i&&s?"gradient":"solid"}function Wu(e){const{container:t,transactionManager:n,tokensService:o}=e,r=new Oe;let i=null,s="solid";const l=document.createElement("div");l.className="we-field-group";const a=document.createElement("div");a.className="we-field";const c=document.createElement("span");c.className="we-field-label",c.textContent="å­—ä½“";const u=document.createElement("div");u.className="we-field-content",u.style.display="flex",u.style.flexDirection="column",u.style.gap="4px";const p=document.createElement("select");p.className="we-select",p.setAttribute("aria-label","å­—ä½“ç³»åˆ—");for(const R of $i){const V=document.createElement("option");V.value=R,V.textContent=R,p.append(V)}const f=document.createElement("option");f.value=oo,f.textContent="è‡ªå®šä¹‰â€¦",p.append(f);const h=We({ariaLabel:"è‡ªå®šä¹‰å­—ä½“ç³»åˆ—",prefix:null,suffix:null,placeholder:"ä¾‹å¦‚ Inter, system-ui"});h.root.style.display="none",h.input.disabled=!0,u.append(p,h.root),a.append(c,u);const d=document.createElement("div");d.className="we-field";const b=document.createElement("span");b.className="we-field-label",b.textContent="å­—å·";const m=We({ariaLabel:"å­—å·",inputMode:"decimal",prefix:null,suffix:"px"});d.append(b,m.root);const w=document.createElement("div");w.className="we-field";const I=document.createElement("span");I.className="we-field-label",I.textContent="å­—é‡";const S=document.createElement("select");S.className="we-select",S.setAttribute("aria-label","å­—é‡");for(const R of Bu){const V=document.createElement("option");V.value=R,V.textContent=R,S.append(V)}w.append(I,S);const v=document.createElement("div");v.className="we-field";const x=document.createElement("span");x.className="we-field-label",x.textContent="è¡Œé«˜";const k=We({ariaLabel:"è¡Œé«˜",inputMode:"decimal",prefix:null,suffix:null});v.append(x,k.root);const X=document.createElement("div");X.className="we-field";const T=document.createElement("span");T.className="we-field-label",T.textContent="å­—è·";const E=We({ariaLabel:"å­—è·",inputMode:"decimal",prefix:null,suffix:"px"});X.append(T,E.root),Ye(r,m.input,{mode:"css-length"}),Ye(r,k.input,{mode:"css-length",step:.1,shiftStep:1,altStep:.01}),Ye(r,E.input,{mode:"css-length",step:.1,shiftStep:1,altStep:.01});const g=document.createElement("div");g.className="we-field";const C=document.createElement("span");C.className="we-field-label",C.textContent="æ–‡æœ¬å¯¹é½";const M=document.createElement("div");M.className="we-field-content",g.append(C,M);const N=document.createElement("div");N.className="we-field";const D=document.createElement("span");D.className="we-field-label",D.textContent="å‚ç›´å¯¹é½";const H=document.createElement("div");H.className="we-field-content",N.append(D,H);const y=document.createElement("div");y.className="we-field";const _=document.createElement("span");_.className="we-field-label",_.textContent="ç±»å‹";const F=document.createElement("select");F.className="we-select",F.setAttribute("aria-label","æ–‡æœ¬é¢œè‰²ç±»å‹");for(const R of Hu){const V=document.createElement("option");V.value=R,V.textContent=R==="solid"?"çº¯è‰²":"æ¸å˜",F.append(V)}y.append(_,F);const G=document.createElement("div");G.className="we-field";const $=document.createElement("span");$.className="we-field-label",$.textContent="é¢œè‰²";const W=document.createElement("div");W.style.minWidth="0",G.append($,W);const J=document.createElement("div"),A=document.createElement("div");A.className="we-field-row",d.style.flex="1",d.style.minWidth="0",w.style.flex="1",w.style.minWidth="0",A.append(d,w);const L=document.createElement("div");L.className="we-field-row",v.style.flex="1",v.style.minWidth="0",X.style.flex="1",X.style.minWidth="0",L.append(v,X),l.append(a,A,L,g,N,y,G,J),t.append(l),r.add(()=>l.remove());const Y=zt({container:M,ariaLabel:"æ–‡æœ¬å¯¹é½",columns:4,items:Aa.map(R=>{const V={left:"å·¦å¯¹é½",center:"å±…ä¸­",right:"å³å¯¹é½",justify:"ä¸¤ç«¯å¯¹é½"}[R];return{value:R,ariaLabel:V,title:V,icon:zu(R)}}),onChange:R=>{const V=Se("text-align");V&&V.set(R),ie("text-align"),Ae()}});r.add(()=>Y.dispose());const B=zt({container:H,ariaLabel:"å‚ç›´å¯¹é½",columns:4,items:Ta.map(R=>{const V={baseline:"åŸºçº¿",middle:"å±…ä¸­",top:"é¡¶å¯¹é½",bottom:"åº•å¯¹é½"}[R];return{value:R,ariaLabel:V,title:V,icon:Gu(R)}}),onChange:R=>{const V=Se("vertical-align");V&&V.set(R),ie("vertical-align"),Ae()}});r.add(()=>B.dispose());const K=Un({container:W,ariaLabel:"æ–‡æœ¬é¢œè‰²",tokensService:o,getTokenTarget:()=>i,onInput:R=>{const V=Se("color");V&&V.set(R)},onCommit:()=>{ie("color"),Ae()},onCancel:()=>{Q("color"),ve("color",!0)}});r.add(()=>K.dispose());const ge=ei({container:J,transactionManager:n,tokensService:o,property:"background-image",allowNone:!1});r.add(()=>ge.dispose());const we={"font-family":{kind:"font-family",property:"font-family",select:p,custom:h,controlsContainer:u,handle:null},"font-size":{kind:"standard",property:"font-size",element:m.input,container:m,handle:null},"font-weight":{kind:"standard",property:"font-weight",element:S,handle:null},"line-height":{kind:"standard",property:"line-height",element:k.input,container:k,handle:null},"letter-spacing":{kind:"standard",property:"letter-spacing",element:E.input,container:E,handle:null},"text-align":{kind:"text-align",property:"text-align",group:Y,handle:null},"vertical-align":{kind:"vertical-align",property:"vertical-align",group:B,handle:null},color:{kind:"color",property:"color",field:K,handle:null}},ke=["font-family","font-size","font-weight","line-height","letter-spacing","text-align","vertical-align","color"];function Se(R){if(r.isDisposed)return null;const V=i;if(!V||!V.isConnected)return null;const j=we[R];if(j.handle)return j.handle;const te=n.beginStyle(V,R);return j.handle=te,te}function ie(R){const V=we[R],j=V.handle;V.handle=null,j&&j.commit({merge:!0})}function Q(R){const V=we[R],j=V.handle;V.handle=null,j&&j.rollback()}function P(){for(const R of ke)ie(R)}function ae(){G.hidden=s!=="solid",J.hidden=s!=="gradient"}function xe(R){const V=i;if(s=R,F.value=R,ae(),!V||!V.isConnected)return;ie("color");const j=n.beginMultiStyle(V,["background-image","-webkit-background-clip","-webkit-text-fill-color"]);if(j){if(R==="solid")j.set({"background-image":"","-webkit-background-clip":"","-webkit-text-fill-color":""});else{const te=yt(V,"background-image"),q=vt(V,"background-image"),ne=te||q,Z=ne&&Ra(ne)?ne:"linear-gradient(90deg, #000000, #ffffff)";j.set({"background-image":Z,"-webkit-background-clip":"text","-webkit-text-fill-color":"transparent"})}j.commit({merge:!0})}}r.listen(F,"change",()=>{const R=F.value;xe(R),ge.refresh(),Ae()});function ve(R,V=!1){var ue;const j=we[R],te=i;if(j.kind==="font-family"){const Z=$i;if(!te||!te.isConnected){j.select.disabled=!0,j.select.value=Z[0]??"inherit",j.custom.input.disabled=!0,j.custom.input.value="",j.custom.root.style.display="none";return}if(j.select.disabled=!1,(j.handle!==null||cr(j.select)||cr(j.custom.input))&&!V)return;const Ce=yt(te,R)||vt(te,R),Te=Ce.trim().toLowerCase();Z.includes(Te)?(j.select.value=Te,j.custom.root.style.display="none",j.custom.input.disabled=!0):(j.select.value=oo,j.custom.root.style.display="",j.custom.input.disabled=!1,j.custom.input.value=Ce);return}if(j.kind==="text-align"){const Z=j.group;if(!te||!te.isConnected){Z.setDisabled(!0),Z.setValue(null);return}if(Z.setDisabled(!1),j.handle!==null&&!V)return;const oe=yt(te,R),Ce=vt(te,R),Te=(oe||Ce).trim();Z.setValue(Uu(Te)?Te:"left");return}if(j.kind==="vertical-align"){const Z=j.group;if(!te||!te.isConnected){Z.setDisabled(!0),Z.setValue(null);return}if(Z.setDisabled(!1),j.handle!==null&&!V)return;const oe=yt(te,R),Ce=vt(te,R),Te=(oe||Ce).trim();Z.setValue(Xu(Te)?Te:"baseline");return}if(j.kind==="color"){const Z=j.field;if(!te||!te.isConnected){Z.setDisabled(!0),Z.setValue(""),Z.setPlaceholder("");return}if(Z.setDisabled(!1),(j.handle!==null||Z.isFocused())&&!V)return;const oe=yt(te,R),Ce=vt(te,R);oe?(Z.setValue(oe),Z.setPlaceholder(/\bvar\s*\(/i.test(oe)?Ce:"")):(Z.setValue(Ce),Z.setPlaceholder(""));return}const q=j.element;if(!te||!te.isConnected){q.disabled=!0,q instanceof HTMLInputElement&&(q.value="",q.placeholder="",j.container&&(R==="font-size"||R==="letter-spacing"?j.container.setSuffix("px"):R==="line-height"&&j.container.setSuffix(null)));return}q.disabled=!1;const ne=j.handle!==null||cr(q);if(q instanceof HTMLInputElement){if(ne&&!V)return;const be=yt(te,R)||vt(te,R);if(j.container)if(R==="font-size"||R==="letter-spacing"){const oe=dt(be);q.value=oe.value,j.container.setSuffix(oe.suffix)}else if(R==="line-height")if(hc(be)){const oe=dt(be);q.value=oe.value,j.container.setSuffix(oe.suffix)}else q.value=be,j.container.setSuffix(null);else q.value=be;else q.value=be;q.placeholder=""}else{const Z=yt(te,R),be=vt(te,R);if(ne&&!V)return;const oe=Z||be,Ce=Array.from(q.options).some(Te=>Te.value===oe);q.value=Ce?oe:((ue=q.options[0])==null?void 0:ue.value)??""}}function Ae(){for(const V of ke)ve(V);const R=!!(i&&i.isConnected);F.disabled=!R,ae()}function z(R){const V=we[R];if(V.kind!=="standard")return;const j=V.element,te=()=>{const q=Se(R);q&&q.set(j.value)};r.listen(j,"input",te),r.listen(j,"change",te),r.listen(j,"blur",()=>{ie(R),Ae()}),r.listen(j,"keydown",q=>{q.key==="Enter"?(q.preventDefault(),ie(R),Ae(),j.blur()):q.key==="Escape"&&(q.preventDefault(),Q(R),ve(R,!0))})}function le(R,V=j=>j.trim()){const j=we[R];if(j.kind!=="standard")return;const te=j.element;r.listen(te,"input",()=>{var ue;const q=Se(R);if(!q)return;const ne=((ue=j.container)==null?void 0:ue.getSuffixText())??null;q.set(V(te.value,ne))}),r.listen(te,"blur",()=>{ie(R),Ae()}),r.listen(te,"keydown",q=>{q.key==="Enter"?(q.preventDefault(),ie(R),Ae(),te.blur()):q.key==="Escape"&&(q.preventDefault(),Q(R),ve(R,!0))})}function se(){const R=we["font-family"];if(R.kind!=="font-family")return;const{select:V,custom:j,controlsContainer:te}=R,q=()=>{const ue=V.value===oo;j.root.style.display=ue?"":"none",j.input.disabled=!ue,ue&&j.input.focus()},ne=()=>{if(q(),V.value===oo)return;const ue=Se("font-family");ue&&ue.set(V.value)};r.listen(V,"input",ne),r.listen(V,"change",ne),r.listen(j.input,"input",()=>{const ue=Se("font-family");ue&&ue.set(j.input.value.trim())}),r.listen(te,"focusout",ue=>{const Z=ue.relatedTarget;Z instanceof Node&&te.contains(Z)||(ie("font-family"),Ae())}),r.listen(V,"keydown",ue=>{ue.key==="Enter"?(ue.preventDefault(),ie("font-family"),Ae(),V.blur()):ue.key==="Escape"&&(ue.preventDefault(),Q("font-family"),ve("font-family",!0))}),r.listen(j.input,"keydown",ue=>{ue.key==="Enter"?(ue.preventDefault(),ie("font-family"),Ae(),j.input.blur()):ue.key==="Escape"&&(ue.preventDefault(),Q("font-family"),ve("font-family",!0))})}se(),le("font-size",ft),z("font-weight"),le("line-height",(R,V)=>{const j=R.trim();return j?/[a-zA-Z%]/.test(j)?j:V?`${j}${V}`:j:""}),le("letter-spacing",ft);function fe(R){r.isDisposed||(R!==i&&P(),i=R,R&&R.isConnected?s=Oi(R):s="solid",F.value=s,ae(),ge.setTarget(R),Ae())}function re(){if(r.isDisposed)return;const R=i;if(R&&R.isConnected){const V=Oi(R);V!==s&&(s=V,F.value=V)}ge.refresh(),Ae()}function O(){P(),i=null,r.dispose()}return Ae(),{setTarget:fe,refresh:re,dispose:O}}function Yu(e){const{sliderAriaLabel:t,inputAriaLabel:n,min:o,max:r,step:i,inputMode:s="decimal",inputWidthPx:l=72}=e,a=document.createElement("div");a.className="we-slider-input";const c=document.createElement("input");c.type="range",c.className="we-slider-input__slider",c.min=String(o),c.max=String(r),c.step=String(i),c.value=String(o),c.setAttribute("aria-label",t);function u(){const m=parseFloat(c.value),w=parseFloat(c.min),I=parseFloat(c.max),S=(m-w)/(I-w)*100;c.style.setProperty("--progress",`${S}%`)}u(),c.addEventListener("input",u);const p=We({ariaLabel:n,inputMode:s,prefix:null,suffix:null,rootClassName:"we-slider-input__number"});p.root.style.width=`${l}px`,p.root.style.flex="0 0 auto",a.append(c,p.root);function f(m){c.disabled=m,p.input.disabled=m}function h(m){c.disabled=m}function d(m){const w=String(m);c.value=w,p.input.value=w,u()}function b(m){c.value=String(m),u()}return{root:a,slider:c,input:p.input,inputContainer:p,setDisabled:f,setSliderDisabled:h,setValue:d,setSliderValue:b}}const qu=["visible","hidden","scroll","auto"],Ku=["content-box","border-box"];function ur(e){try{const t=e.getRootNode();return t instanceof ShadowRoot?t.activeElement===e:document.activeElement===e}catch{return!1}}function dr(e){return e.trim()}const Zu=/^-?(?:(?:\d+\.\d+)|(?:\d+\.)|(?:\d+)|(?:\.\d+))$/;function ro(e){if(!Number.isFinite(e))return 1;const t=Math.min(1,Math.max(0,e));return Object.is(t,-0)?0:t}function io(e){const t=e.trim();if(!t||!Zu.test(t))return null;const n=t.endsWith(".")?t.slice(0,-1):t,o=Number(n);return Number.isFinite(o)?o:null}function Vi(e,t){var n,o;try{const r=e.style;return((o=(n=r==null?void 0:r.getPropertyValue)==null?void 0:n.call(r,t))==null?void 0:o.trim())??""}catch{return""}}function Bi(e,t){try{return window.getComputedStyle(e).getPropertyValue(t).trim()}catch{return""}}function Ju(e){const{container:t,transactionManager:n}=e,o=new Oe;let r=null;const i=document.createElement("div");i.className="we-field-group";function s(M,N,D,H){const y=document.createElement("div");y.className="we-field";const _=document.createElement("span");_.className="we-field-label",_.textContent=M;const F=document.createElement("select");F.className="we-select",F.setAttribute("aria-label",N);for(const G of D){const $=document.createElement("option");$.value=G,$.textContent=(H==null?void 0:H[G])??G,F.appendChild($)}return y.append(_,F),{row:y,select:F}}const{row:l,select:a}=s("æº¢å‡º","æº¢å‡º",qu,{visible:"å¯è§",hidden:"éšè—",scroll:"æ»šåŠ¨",auto:"è‡ªåŠ¨"}),{row:c,select:u}=s("ç›’æ¨¡å‹","ç›’æ¨¡å‹",Ku,{"content-box":"å†…å®¹ç›’","border-box":"è¾¹æ¡†ç›’"}),p=document.createElement("div");p.className="we-field";const f=document.createElement("span");f.className="we-field-label",f.textContent="ä¸é€æ˜åº¦";const h=document.createElement("div");h.className="we-field-content",p.append(f,h);const d=Yu({sliderAriaLabel:"ä¸é€æ˜åº¦æ»‘å—",inputAriaLabel:"ä¸é€æ˜åº¦",min:0,max:1,step:.01,inputMode:"decimal",inputWidthPx:72});h.append(d.root),Ye(o,d.input,{mode:"number",min:0,max:1,step:.01,shiftStep:.1,altStep:.001}),i.append(l,c,p),t.appendChild(i),o.add(()=>i.remove());const b={overflow:{kind:"select",property:"overflow",element:a,handle:null},"box-sizing":{kind:"select",property:"box-sizing",element:u,handle:null},opacity:{kind:"opacity",property:"opacity",control:d,handle:null}},m=["overflow","box-sizing","opacity"];function w(M){if(o.isDisposed)return null;const N=r;if(!N||!N.isConnected)return null;const D=b[M];if(D.handle)return D.handle;const H=n.beginStyle(N,M);return D.handle=H,H}function I(M){const N=b[M],D=N.handle;N.handle=null,D&&D.commit({merge:!0})}function S(M){const N=b[M],D=N.handle;N.handle=null,D&&D.rollback()}function v(){for(const M of m)I(M)}function x(M,N=!1){var y;const D=b[M],H=r;if(D.kind==="opacity"){const{slider:_,input:F}=D.control;if(!H||!H.isConnected){D.control.setDisabled(!0),_.value="0",F.value="",F.placeholder="";return}if(D.control.setDisabled(!1),(D.handle!==null||ur(_)||ur(F))&&!N)return;const $=Vi(H,M),W=Bi(H,M),J=$||W;F.value=J,F.placeholder="";const A=io(J),L=io(W);if($&&A===null){D.control.setSliderDisabled(!0),L!==null&&D.control.setSliderValue(ro(L));return}const Y=A??L??1;D.control.setSliderDisabled(!1),D.control.setSliderValue(ro(Y))}else{const _=D.element;if(!H||!H.isConnected){_.disabled=!0;return}if(_.disabled=!1,(D.handle!==null||ur(_))&&!N)return;const G=Vi(H,M),$=Bi(H,M),W=G||$,J=Array.from(_.options).some(A=>A.value===W);_.value=J?W:((y=_.options[0])==null?void 0:y.value)??""}}function k(){for(const M of m)x(M)}function X(){const M=b.opacity;if(M.kind!=="opacity")return;const{slider:N,input:D}=M.control,H=()=>{const y=dr(D.value),_=io(y);if(_!==null){const F=ro(_),G=String(F);if(y!==G){D.value=G;const $=M.handle;$&&$.set(G)}}I("opacity"),k()};o.listen(N,"input",()=>{if(N.disabled)return;D.value=N.value;const y=w("opacity");y&&y.set(dr(N.value))}),o.listen(N,"change",H),o.listen(N,"blur",H),o.listen(N,"keydown",y=>{y.key==="Enter"?(y.preventDefault(),I("opacity"),k(),N.blur()):y.key==="Escape"&&(y.preventDefault(),S("opacity"),x("opacity",!0))}),o.listen(D,"input",()=>{const y=dr(D.value),_=w("opacity");_&&_.set(y);const F=io(y);if(F===null){M.control.setSliderDisabled(y.length>0);return}M.control.setSliderDisabled(!1),M.control.setSliderValue(ro(F))}),o.listen(D,"blur",H),o.listen(D,"keydown",y=>{y.key==="Enter"?(y.preventDefault(),I("opacity"),k(),D.blur()):y.key==="Escape"&&(y.preventDefault(),S("opacity"),x("opacity",!0))})}function T(M){const N=b[M];if(N.kind!=="select")return;const D=N.element,H=()=>{const y=w(M);y&&y.set(D.value)};o.listen(D,"input",H),o.listen(D,"change",H),o.listen(D,"blur",()=>{I(M),k()}),o.listen(D,"keydown",y=>{y.key==="Enter"?(y.preventDefault(),I(M),k(),D.blur()):y.key==="Escape"&&(y.preventDefault(),S(M),x(M,!0))})}T("overflow"),T("box-sizing"),X();function E(M){o.isDisposed||(M!==r&&v(),r=M,k())}function g(){o.isDisposed||k()}function C(){v(),r=null,o.dispose()}return k(),{setTarget:E,refresh:g,dispose:C}}const cn="http://www.w3.org/2000/svg",Qu=["solid","dashed","dotted","none"],ed=["solid","gradient"],td=["all","top","right","bottom","left"],Kt=["top-left","top-right","bottom-right","bottom-left"],mn={"top-left":"border-top-left-radius","top-right":"border-top-right-radius","bottom-right":"border-bottom-right-radius","bottom-left":"border-bottom-left-radius"},nd=["border-radius","border-top-left-radius","border-top-right-radius","border-bottom-right-radius","border-bottom-left-radius"];function so(e){try{const t=e.getRootNode();return t instanceof ShadowRoot?t.activeElement===e:document.activeElement===e}catch{return!1}}function ct(e,t){var n,o;try{const r=e.style;return((o=(n=r==null?void 0:r.getPropertyValue)==null?void 0:n.call(r,t))==null?void 0:o.trim())??""}catch{return""}}function nt(e,t){try{return window.getComputedStyle(e).getPropertyValue(t).trim()}catch{return""}}function Hi(e){const t=e.trim().toLowerCase();return!t||t==="none"?"solid":/\b(?:linear|radial|conic)-gradient\s*\(/i.test(t)?"gradient":"solid"}function od(e){const t=document.createElementNS(cn,"svg");t.setAttribute("viewBox","0 0 15 15"),t.setAttribute("fill","none"),t.setAttribute("aria-hidden","true"),t.setAttribute("focusable","false");const n=document.createElementNS(cn,"rect");n.setAttribute("x","3.5"),n.setAttribute("y","3.5"),n.setAttribute("width","8"),n.setAttribute("height","8"),n.setAttribute("stroke","currentColor"),n.setAttribute("stroke-width","1"),n.setAttribute("opacity","0.4"),t.appendChild(n);const o=document.createElementNS(cn,"path");switch(o.setAttribute("stroke","currentColor"),o.setAttribute("stroke-width","2"),o.setAttribute("stroke-linecap","round"),e){case"all":o.setAttribute("d","M3.5 3.5h8v8h-8z");break;case"top":o.setAttribute("d","M3.5 3.5h8");break;case"right":o.setAttribute("d","M11.5 3.5v8");break;case"bottom":o.setAttribute("d","M3.5 11.5h8");break;case"left":o.setAttribute("d","M3.5 3.5v8");break}return t.appendChild(o),t}function rd(){const e=document.createElementNS(cn,"svg");e.setAttribute("viewBox","0 0 15 15"),e.setAttribute("fill","none"),e.setAttribute("aria-hidden","true"),e.setAttribute("focusable","false");const t=document.createElementNS(cn,"path");return t.setAttribute("stroke","currentColor"),t.setAttribute("stroke-width","1.5"),t.setAttribute("stroke-linecap","round"),t.setAttribute("stroke-linejoin","round"),t.setAttribute("d","M4 6V4H6 M9 4H11V6 M11 9V11H9 M6 11H4V9"),e.appendChild(t),e}function ao(e){const t=document.createElementNS(cn,"svg");t.setAttribute("viewBox","0 0 15 15"),t.setAttribute("fill","none"),t.setAttribute("aria-hidden","true"),t.setAttribute("focusable","false");const n=document.createElementNS(cn,"path");switch(n.setAttribute("stroke","currentColor"),n.setAttribute("stroke-width","1.5"),n.setAttribute("stroke-linecap","round"),n.setAttribute("stroke-linejoin","round"),e){case"top-left":n.setAttribute("d","M11 4H6Q4 4 4 6V11");break;case"top-right":n.setAttribute("d","M4 4H9Q11 4 11 6V11");break;case"bottom-right":n.setAttribute("d","M11 4V9Q11 11 9 11H4");break;case"bottom-left":n.setAttribute("d","M4 4V9Q4 11 6 11H11");break}return t.appendChild(n),t}function id(e){const{container:t,transactionManager:n,tokensService:o}=e,r=new Oe;let i=null,s="all",l="solid";const a=document.createElement("div");a.className="we-field-group";function c(O,R,V,j){const te=document.createElement("div");te.className="we-field";const q=document.createElement("span");q.className="we-field-label",q.textContent=O;const ne=document.createElement("select");ne.className="we-select",ne.setAttribute("aria-label",R);for(const ue of V){const Z=document.createElement("option");Z.value=ue,Z.textContent=j&&j[ue]||ue,ne.appendChild(Z)}return te.append(q,ne),{row:te,select:ne}}function u(O){const R=document.createElement("div");R.className="we-field";const V=document.createElement("span");V.className="we-field-label",V.textContent=O;const j=document.createElement("div");return j.style.flex="1",j.style.minWidth="0",R.append(V,j),{row:R,colorFieldContainer:j}}const p=document.createElement("div");p.className="we-field";const f=document.createElement("span");f.className="we-field-label",f.textContent="è¾¹";const h=document.createElement("div");h.style.flex="1",p.append(f,h);const d=document.createElement("div");d.className="we-field";const b=document.createElement("span");b.className="we-field-label",b.textContent="å®½åº¦";const m=We({ariaLabel:"è¾¹æ¡†å®½åº¦",inputMode:"decimal",prefix:null,suffix:"px"});d.append(b,m.root);const w=m.input,{row:I,select:S}=c("æ ·å¼","è¾¹æ¡†æ ·å¼",Qu,{solid:"å®çº¿",dashed:"è™šçº¿",dotted:"ç‚¹çº¿",none:"æ— "}),{row:v,select:x}=c("ç±»å‹","è¾¹æ¡†é¢œè‰²ç±»å‹",ed,{solid:"çº¯è‰²",gradient:"æ¸å˜"}),{row:k,colorFieldContainer:X}=u("é¢œè‰²"),T=document.createElement("div"),E=document.createElement("div");E.className="we-field";const g=document.createElement("span");g.className="we-field-label",g.textContent="åœ†è§’";const C=document.createElement("div");C.className="we-radius-control";const M=document.createElement("div");M.className="we-field-row";const N=We({ariaLabel:"åœ†è§’",inputMode:"decimal",prefix:null,suffix:"px"});N.root.style.flex="1";const D=document.createElement("button");D.type="button",D.className="we-toggle-btn",D.setAttribute("aria-label","ç¼–è¾‘åœ†è§’"),D.setAttribute("aria-pressed","false"),D.dataset.tooltip="ç¼–è¾‘åœ†è§’",D.append(rd()),M.append(N.root,D);const H=document.createElement("div");H.className="we-radius-corners-grid",H.hidden=!0;const y={"top-left":We({ariaLabel:"å·¦ä¸Šåœ†è§’",inputMode:"decimal",prefix:ao("top-left"),suffix:"px"}),"top-right":We({ariaLabel:"å³ä¸Šåœ†è§’",inputMode:"decimal",prefix:ao("top-right"),suffix:"px"}),"bottom-left":We({ariaLabel:"å·¦ä¸‹åœ†è§’",inputMode:"decimal",prefix:ao("bottom-left"),suffix:"px"}),"bottom-right":We({ariaLabel:"å³ä¸‹åœ†è§’",inputMode:"decimal",prefix:ao("bottom-right"),suffix:"px"})};H.append(y["top-left"].root,y["top-right"].root,y["bottom-left"].root,y["bottom-right"].root),C.append(M),E.append(g,C);const _={kind:"border-radius",property:"border-radius",root:E,unified:N,toggleButton:D,cornersGrid:H,corners:y,handle:null,expanded:!1,mode:null,cornersMaterialized:!1},F=document.createElement("div");F.className="we-field-row",d.style.flex="1",d.style.minWidth="0",E.style.flex="1",E.style.minWidth="0",F.append(d,E),Ye(r,w,{mode:"css-length"}),Ye(r,N.input,{mode:"css-length"});for(const O of Kt)Ye(r,y[O].input,{mode:"css-length"});a.append(p,F,H,I,v,k,T),t.appendChild(a),r.add(()=>a.remove());const G=zt({container:h,ariaLabel:"è¾¹æ¡†è¾¹ç¼˜",columns:5,value:s,items:td.map(O=>{const R={all:"å…¨éƒ¨",top:"ä¸Š",right:"å³",bottom:"ä¸‹",left:"å·¦"};return{value:O,ariaLabel:R[O],title:R[O],icon:od(O)}}),onChange:O=>{O!==s&&(K("border-width"),K("border-style"),K("border-color"),s=O,ve())}});r.add(()=>G.dispose());const $=Un({container:X,ariaLabel:"è¾¹æ¡†é¢œè‰²",tokensService:o,getTokenTarget:()=>i,onInput:O=>{const R=B("border-color");R&&R.set(O)},onCommit:()=>{K("border-color"),ve()},onCancel:()=>{ge("border-color"),xe("border-color",!0)}});r.add(()=>$.dispose());const W=ei({container:T,transactionManager:n,tokensService:o,property:"border-image-source",allowNone:!0});r.add(()=>W.dispose());const J={"border-width":{kind:"text",property:"border-width",element:w,handle:null},"border-style":{kind:"select",property:"border-style",element:S,handle:null},"border-color":{kind:"color",property:"border-color",field:$,handle:null},"border-radius":_},A=["border-width","border-style","border-color","border-radius"];function L(O){return s==="all"?`border-${O}`:`border-${s}-${O}`}function Y(O){return O==="border-width"?L("width"):O==="border-style"?L("style"):O==="border-color"?L("color"):O}function B(O){if(r.isDisposed)return null;const R=i;if(!R||!R.isConnected)return null;const V=J[O];if(V.kind==="border-radius")return null;if(V.handle)return V.handle;const j=Y(O),te=n.beginStyle(R,j);return V.handle=te,te}function K(O){const R=J[O];if(R.kind==="border-radius")return;const V=R.handle;R.handle=null,V&&V.commit({merge:!0})}function ge(O){const R=J[O];if(R.kind==="border-radius")return;const V=R.handle;R.handle=null,V&&V.rollback()}function we(){if(r.isDisposed)return null;const O=J["border-radius"];if(O.kind!=="border-radius")return null;const R=i;if(!R||!R.isConnected)return null;if(O.handle)return O.handle;const V=n.beginMultiStyle(R,[...nd]);return O.handle=V,O.mode=null,O.cornersMaterialized=!1,V}function ke(){const O=J["border-radius"];if(O.kind!=="border-radius")return;const R=O.handle;O.handle=null,O.mode=null,O.cornersMaterialized=!1,R&&R.commit({merge:!0})}function Se(){const O=J["border-radius"];if(O.kind!=="border-radius")return;const R=O.handle;O.handle=null,O.mode=null,O.cornersMaterialized=!1,R&&R.rollback()}function ie(){for(const O of A)K(O);ke()}function Q(){k.hidden=l!=="solid",T.hidden=l!=="gradient"}function P(){const O=!!(i&&i.isConnected);l==="gradient"&&(s!=="all"&&(K("border-width"),K("border-style"),K("border-color"),s="all"),G.setValue("all")),G.setDisabled(!O||l==="gradient")}function ae(O){const R=i;if(l=O,x.value=O,Q(),P(),!R||!R.isConnected)return;const V=n.beginMultiStyle(R,["border-image-source","border-image-slice"]);if(V){if(O==="solid")V.set({"border-image-source":"none","border-image-slice":""});else{const j=ct(R,"border-image-source"),te=nt(R,"border-image-source"),q=j||te,ue=q&&q.trim()&&q.trim().toLowerCase()!=="none"&&/\b(?:linear|radial|conic)-gradient\s*\(/i.test(q)?q:"linear-gradient(90deg, #000000, #ffffff)";V.set({"border-image-source":ue,"border-image-slice":"1"})}V.commit({merge:!0})}}r.listen(x,"change",()=>{const O=x.value;ae(O),W.refresh(),ve()});function xe(O,R=!1){var q;const V=J[O],j=i,te=Y(O);if(V.kind==="border-radius"){const ne=!!(j&&j.isConnected);V.unified.input.disabled=!ne,V.toggleButton.disabled=!ne;for(const oe of Kt)V.corners[oe].input.disabled=!ne;if(!ne||!j){V.unified.input.value="",V.unified.input.placeholder="",V.unified.setSuffix("px");for(const oe of Kt)V.corners[oe].input.value="",V.corners[oe].input.placeholder="",V.corners[oe].setSuffix("px");return}const ue=Kt.some(oe=>so(V.corners[oe].input));if((V.handle!==null||so(V.unified.input)||ue)&&!R)return;const be=ct(j,"border-radius");if(be){const oe=dt(be);V.unified.input.value=oe.value,V.unified.setSuffix(oe.suffix)}else{const oe=nt(j,mn["top-left"]),Ce=nt(j,mn["top-right"]),Te=nt(j,mn["bottom-right"]),et=nt(j,mn["bottom-left"]),Ee=oe===Ce&&oe===Te&&oe===et?oe:nt(j,"border-radius"),Pe=dt(Ee);V.unified.input.value=Pe.value,V.unified.setSuffix(Pe.suffix)}V.unified.input.placeholder="";for(const oe of Kt){const Ce=mn[oe],Te=ct(j,Ce),et=nt(j,Ce),Pe=dt(Te||et);V.corners[oe].input.value=Pe.value,V.corners[oe].input.placeholder="",V.corners[oe].setSuffix(Pe.suffix)}return}if(V.kind==="text"){const ne=V.element;if(!j||!j.isConnected){ne.disabled=!0,ne.value="",ne.placeholder="",O==="border-width"&&m.setSuffix("px");return}if(ne.disabled=!1,(V.handle!==null||so(ne))&&!R)return;const Z=ct(j,te),be=nt(j,te);if(O==="border-width"){const oe=dt(Z||be);ne.value=oe.value,m.setSuffix(oe.suffix)}else ne.value=Z||be;ne.placeholder=""}else if(V.kind==="select"){const ne=V.element;if(!j||!j.isConnected){ne.disabled=!0;return}if(ne.disabled=!1,(V.handle!==null||so(ne))&&!R)return;const Z=ct(j,te),be=nt(j,te),oe=Z||be,Ce=Array.from(ne.options).some(Te=>Te.value===oe);ne.value=Ce?oe:((q=ne.options[0])==null?void 0:q.value)??""}else{const ne=V.field;if(!j||!j.isConnected){ne.setDisabled(!0),ne.setValue(""),ne.setPlaceholder("");return}if(ne.setDisabled(!1),(V.handle!==null||ne.isFocused())&&!R)return;const Z=ct(j,te),be=nt(j,te);Z?(ne.setValue(Z),ne.setPlaceholder(/\bvar\s*\(/i.test(Z)?be:"")):(ne.setValue(be),ne.setPlaceholder(""))}}function ve(){for(const R of A)xe(R);const O=!!(i&&i.isConnected);x.disabled=!O,Q(),P()}function Ae(O){const R=J[O];if(R.kind!=="text")return;const V=R.element,j=()=>ft(V.value,m.getSuffixText());r.listen(V,"input",()=>{const te=B(O);te&&te.set(j())}),r.listen(V,"blur",()=>{K(O),ve()}),r.listen(V,"keydown",te=>{te.key==="Enter"?(te.preventDefault(),K(O),ve(),V.blur()):te.key==="Escape"&&(te.preventDefault(),ge(O),xe(O,!0))})}function z(O){const R=J[O];if(R.kind!=="select")return;const V=R.element,j=()=>{const te=B(O);te&&te.set(V.value)};r.listen(V,"input",j),r.listen(V,"change",j),r.listen(V,"blur",()=>{K(O),ve()}),r.listen(V,"keydown",te=>{te.key==="Enter"?(te.preventDefault(),K(O),ve(),V.blur()):te.key==="Escape"&&(te.preventDefault(),ge(O),xe(O,!0))})}function le(){const O=J["border-radius"];if(O.kind!=="border-radius")return;const R=q=>{O.expanded=q,O.cornersGrid.hidden=!q,O.toggleButton.setAttribute("aria-pressed",q?"true":"false")};R(!1),r.listen(O.toggleButton,"click",()=>{R(!O.expanded)});const V=()=>{const q=we();if(!q)return;O.mode="unified",O.cornersMaterialized=!1;const ne=ft(O.unified.input.value,O.unified.getSuffixText());q.set({"border-top-left-radius":"","border-top-right-radius":"","border-bottom-right-radius":"","border-bottom-left-radius":"","border-radius":""}),q.set({"border-radius":ne})},j=q=>{const ne=i;if(!ne||!ne.isConnected)return;const ue=we();if(!ue)return;const Z=mn[q],be=O.corners[q],oe=ft(be.input.value,be.getSuffixText());if(O.mode!=="corners"||!O.cornersMaterialized){const Ce={"border-radius":"","border-top-left-radius":ct(ne,"border-top-left-radius")||nt(ne,"border-top-left-radius"),"border-top-right-radius":ct(ne,"border-top-right-radius")||nt(ne,"border-top-right-radius"),"border-bottom-right-radius":ct(ne,"border-bottom-right-radius")||nt(ne,"border-bottom-right-radius"),"border-bottom-left-radius":ct(ne,"border-bottom-left-radius")||nt(ne,"border-bottom-left-radius")};Ce[Z]=oe,ue.set(Ce),O.mode="corners",O.cornersMaterialized=!0;return}ue.set({"border-radius":"",[Z]:oe})};r.listen(O.unified.input,"input",V);for(const q of Kt)r.listen(O.corners[q].input,"input",()=>j(q));r.listen(O.root,"focusout",q=>{const ne=q.relatedTarget;ne instanceof Node&&O.root.contains(ne)||(ke(),ve())});const te=q=>{r.listen(q,"keydown",ne=>{ne.key==="Enter"?(ne.preventDefault(),ke(),ve(),q.blur()):ne.key==="Escape"&&(ne.preventDefault(),Se(),xe("border-radius",!0))})};te(O.unified.input);for(const q of Kt)te(O.corners[q].input)}Ae("border-width"),z("border-style"),le();function se(O){if(!r.isDisposed){if(O!==i&&ie(),i=O,O&&O.isConnected){const R=ct(O,"border-image-source")||nt(O,"border-image-source");l=Hi(R)}else l="solid";x.value=l,l==="gradient"&&(s="all",G.setValue("all")),W.setTarget(O),ve()}}function fe(){if(r.isDisposed)return;const O=i;if(O&&O.isConnected){const R=ct(O,"border-image-source")||nt(O,"border-image-source"),V=Hi(R);V!==l&&(l=V,x.value=V,V==="gradient"&&(s="all",G.setValue("all")))}W.refresh(),ve()}function re(){ie(),i=null,r.dispose()}return ve(),{setTarget:se,refresh:fe,dispose:re}}const sd=["solid","gradient","image"];function ad(e){try{const t=e.getRootNode();return t instanceof ShadowRoot?t.activeElement===e:document.activeElement===e}catch{return!1}}function fr(e,t){var n,o;try{const r=e.style;return((o=(n=r==null?void 0:r.getPropertyValue)==null?void 0:n.call(r,t))==null?void 0:o.trim())??""}catch{return""}}function pr(e,t){try{return window.getComputedStyle(e).getPropertyValue(t).trim()}catch{return""}}function ld(e){const t=e.trim().toLowerCase();return!t||t==="none"?"solid":/\b(?:linear|radial|conic)-gradient\s*\(/i.test(t)?"gradient":/\burl\s*\(/i.test(t)?"image":"solid"}function cd(e){var n;const t=e.trim().match(/\burl\(\s*(['"]?)(.*?)\1\s*\)/i);return((n=t==null?void 0:t[2])==null?void 0:n.trim())??""}function ud(e){const t=e.trim();return t?/^none$/i.test(t)?"none":/^url\s*\(/i.test(t)?t:`url("${t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}")`:""}function dd(e){const{container:t,transactionManager:n,tokensService:o}=e,r=new Oe;let i=null,s="solid";const l=document.createElement("div");l.className="we-field-group";function a(F,G){const $=document.createElement("div");$.className="we-field";const W=document.createElement("span");W.className="we-field-label",W.textContent=F;const J=document.createElement("input");return J.type="text",J.className="we-input",J.autocomplete="off",J.setAttribute("aria-label",G),$.append(W,J),{row:$,input:J}}function c(F){const G=document.createElement("div");G.className="we-field";const $=document.createElement("span");$.className="we-field-label",$.textContent=F;const W=document.createElement("div");return W.style.flex="1",W.style.minWidth="0",G.append($,W),{row:G,colorFieldContainer:W}}const u=document.createElement("div");u.className="we-field";const p=document.createElement("span");p.className="we-field-label",p.textContent="ç±»å‹";const f=document.createElement("select");f.className="we-select",f.setAttribute("aria-label","èƒŒæ™¯ç±»å‹");for(const F of sd){const G=document.createElement("option");G.value=F,G.textContent={solid:"çº¯è‰²",gradient:"æ¸å˜",image:"å›¾ç‰‡"}[F],f.appendChild(G)}u.append(p,f);const{row:h,colorFieldContainer:d}=c("é¢œè‰²"),b=document.createElement("div"),{row:m,input:w}=a("é“¾æ¥","èƒŒæ™¯å›¾ç‰‡é“¾æ¥");w.placeholder="https://...",w.spellcheck=!1,l.append(u,h,b,m),t.appendChild(l),r.add(()=>l.remove());const I=ei({container:b,transactionManager:n,tokensService:o});r.add(()=>I.dispose());const S=Un({container:d,ariaLabel:"èƒŒæ™¯é¢œè‰²",tokensService:o,getTokenTarget:()=>i,onInput:F=>{const G=k("background-color");G&&G.set(F)},onCommit:()=>{X("background-color"),N()},onCancel:()=>{T("background-color"),M("background-color",!0)}});r.add(()=>S.dispose());const v={"background-color":{kind:"color",property:"background-color",field:S,handle:null},"background-image":{kind:"text",property:"background-image",element:w,handle:null}},x=["background-color","background-image"];function k(F){if(r.isDisposed)return null;const G=i;if(!G||!G.isConnected)return null;const $=v[F];if($.handle)return $.handle;const W=n.beginStyle(G,F);return $.handle=W,W}function X(F){const G=v[F],$=G.handle;G.handle=null,$&&$.commit({merge:!0})}function T(F){const G=v[F],$=G.handle;G.handle=null,$&&$.rollback()}function E(){for(const F of x)X(F)}function g(){h.hidden=s!=="solid",b.hidden=s!=="gradient",m.hidden=s!=="image"}function C(F){const G=i;if(s=F,f.value=F,g(),!(!G||!G.isConnected)&&F==="solid"){X("background-image");const $=n.beginStyle(G,"background-image");$&&($.set("none"),$.commit({merge:!0}))}}r.listen(f,"change",()=>{const F=f.value;C(F),I.refresh(),N()});function M(F,G=!1){const $=v[F],W=i;if($.kind==="text"){const J=$.element;if(!W||!W.isConnected){J.disabled=!0,J.value="",J.placeholder="";return}if(J.disabled=!1,($.handle!==null||ad(J))&&!G)return;const L=fr(W,F),Y=pr(W,F),B=L||Y;F==="background-image"?J.value=cd(B):J.value=B,J.placeholder=""}else{const J=$.field;if(!W||!W.isConnected){J.setDisabled(!0),J.setValue(""),J.setPlaceholder("");return}if(J.setDisabled(!1),($.handle!==null||J.isFocused())&&!G)return;const L=fr(W,F),Y=pr(W,F);L?(J.setValue(L),J.setPlaceholder(/\bvar\s*\(/i.test(L)?Y:"")):(J.setValue(Y),J.setPlaceholder(""))}}function N(){for(const G of x)M(G);const F=!!(i&&i.isConnected);f.disabled=!F,g()}function D(F){const G=v[F];if(G.kind!=="text")return;const $=G.element,W=ud;r.listen($,"input",()=>{const J=k(F);J&&J.set(W($.value))}),r.listen($,"blur",()=>{X(F),N()}),r.listen($,"keydown",J=>{J.key==="Enter"?(J.preventDefault(),X(F),N(),$.blur()):J.key==="Escape"&&(J.preventDefault(),T(F),M(F,!0))})}D("background-image");function H(F){if(!r.isDisposed){if(F!==i&&E(),i=F,F&&F.isConnected){const G=fr(F,"background-image")||pr(F,"background-image");s=ld(G),f.value=s}else s="solid",f.value="solid";I.setTarget(F),g(),N()}}function y(){r.isDisposed||(I.refresh(),N())}function _(){E(),i=null,r.dispose()}return g(),N(),{setTarget:H,refresh:y,dispose:_}}const fd=/^-?(?:\d+\.?\d*|\.\d+)(?:[a-zA-Z%]+)?$/;function pd(e){return/^[a-zA-Z_-]+\s*\(/.test(e)}function Fn(e){const t=e.trim();return!t||t.toLowerCase()==="none"?"":/^-?(?:\d+|\d*\.\d+)$/.test(t)?`${t}px`:/^-?\d+\.$/.test(t)?`${t.slice(0,-1)}px`:t}function Zt(e,t){var n,o;try{const r=e.style;return((o=(n=r==null?void 0:r.getPropertyValue)==null?void 0:n.call(r,t))==null?void 0:o.trim())??""}catch{return""}}function Ia(e,t){const n=[];let o=0,r=null,i=!1,s=0;for(let l=0;l<e.length;l++){const a=e[l];if(i){i=!1;continue}if(a==="\\"){i=!0;continue}if(r){a===r&&(r=null);continue}if(a==='"'||a==="'"){r=a;continue}if(a==="("){o++;continue}if(a===")"){o=Math.max(0,o-1);continue}o===0&&a===t&&(n.push(e.slice(s,l)),s=l+1)}return n.push(e.slice(s)),n}function md(e){const t=[];let n=0,o=null,r=!1,i="";const s=()=>{const l=i.trim();l&&t.push(l),i=""};for(let l=0;l<e.length;l++){const a=e[l];if(r){i+=a,r=!1;continue}if(a==="\\"){i+=a,r=!0;continue}if(o){i+=a,a===o&&(o=null);continue}if(a==='"'||a==="'"){i+=a,o=a;continue}if(a==="("){n++,i+=a;continue}if(a===")"){n=Math.max(0,n-1),i+=a;continue}if(n===0&&/\s/.test(a)){s();continue}i+=a}return s(),t}function hd(e){var l;const t=e.trim();if(!t||t.toLowerCase()==="none")return null;const n=((l=Ia(t,",")[0])==null?void 0:l.trim())??"";if(!n||n.toLowerCase()==="none")return null;const o=md(n);if(o.length===0)return null;let r=!1;const i=[],s=[];for(const a of o){if(/^inset$/i.test(a)){r=!0;continue}fd.test(a)||pd(a)&&i.length<4?i.push(a):s.push(a)}return i.length<2?null:{inset:r,offsetX:i[0]??"",offsetY:i[1]??"",blurRadius:i[2]??"",spreadRadius:i[3]??"",color:s.join(" ").trim()}}function _a(e){const t=Fn(e.offsetX),n=Fn(e.offsetY),o=Fn(e.blurRadius),r=Fn(e.spreadRadius),i=e.color.trim();if(!t&&!n&&!o&&!r&&!i)return"";const s=[];return e.inset&&s.push("inset"),s.push(t||"0px",n||"0px"),(o||r)&&s.push(o||"0px"),r&&s.push(r),i&&s.push(i),s.join(" ")}function Ma(e,t){const n=e,o=n.toLowerCase(),r=t.toLowerCase();let i=0;for(;i<n.length;){const s=o.indexOf(r,i);if(s<0)return null;if(s>0){const f=n[s-1];if(/[a-zA-Z0-9_-]/.test(f)){i=s+r.length;continue}}let l=s+r.length;for(;l<n.length&&/\s/.test(n[l]);)l++;if(n[l]!=="("){i=s+r.length;continue}const a=l;let c=0,u=null,p=!1;for(let f=a;f<n.length;f++){const h=n[f];if(p){p=!1;continue}if(h==="\\"){p=!0;continue}if(u){h===u&&(u=null);continue}if(h==='"'||h==="'"){u=h;continue}if(h==="("){c++;continue}if(h===")"){if(c--,c===0)return{start:s,end:f+1,args:n.slice(a+1,f)};continue}}return null}return null}function gd(e){const t=e.trim();if(!t||t.toLowerCase()==="none")return"";const n=Ma(t,"blur");return n?n.args.trim():""}function lo(e,t){const n=e.trim().toLowerCase()==="none"?"":e.trim(),o=n?Ma(n,"blur"):null,r=Fn(t);if(!r){if(!o)return n;const c=n.slice(0,o.start).trimEnd(),u=n.slice(o.end).trimStart();return c&&u?`${c} ${u}`.trim():(c||u).trim()}const i=`blur(${r})`;if(!o)return n?`${n} ${i}`.trim():i;const s=n.slice(0,o.start).trimEnd(),l=n.slice(o.end).trimStart(),a=[];return s&&a.push(s),a.push(i),l&&a.push(l),a.join(" ")}const jt="http://www.w3.org/2000/svg",mr="box-shadow",Br=[{value:"drop-shadow",label:"å¤–é˜´å½±",category:"shadow"},{value:"inner-shadow",label:"å†…é˜´å½±",category:"shadow"},{value:"layer-blur",label:"å›¾å±‚æ¨¡ç³Š",category:"blur"},{value:"backdrop-blur",label:"èƒŒæ™¯æ¨¡ç³Š",category:"blur"}];let zi=0;function zn(){try{if(typeof crypto<"u"&&typeof crypto.randomUUID=="function")return crypto.randomUUID()}catch{}return zi+=1,`shadow_${zi}_${Date.now()}`}function It(e){return e.type==="drop-shadow"||e.type==="inner-shadow"}function on(e){return e.type==="layer-blur"||e.type==="backdrop-blur"}function Gi(){return{id:zn(),enabled:!0,type:"drop-shadow",kind:"parsed",inset:!1,offsetX:"0px",offsetY:"4px",blurRadius:"12px",spreadRadius:"0px",color:"rgba(0, 0, 0, 0.15)"}}function bd(e){return{id:zn(),enabled:!0,type:e,kind:"parsed",radius:"8px"}}function hr(e){const t=Br.find(n=>n.value===e.type);return t?t.label:e.kind==="raw"?"è‡ªå®šä¹‰æ•ˆæœ":"æœªçŸ¥æ•ˆæœ"}function Ui(e){if(e.kind==="raw")return`raw:${e.property}:${e.rawText.trim()}`;if(It(e)){const t=_a({inset:e.inset,offsetX:e.offsetX,offsetY:e.offsetY,blurRadius:e.blurRadius,spreadRadius:e.spreadRadius,color:e.color});return`shadow:${e.type}:${t.toLowerCase()}`}return`blur:${e.type}:${e.radius}`}function wd(e){const t=e.trim();if(!t||t.toLowerCase()==="none")return[];const n=Ia(t,",").map(r=>r.trim()).filter(Boolean),o=[];for(const r of n){const i=hd(r);i?o.push({id:zn(),enabled:!0,type:i.inset?"inner-shadow":"drop-shadow",kind:"parsed",inset:i.inset,offsetX:i.offsetX,offsetY:i.offsetY,blurRadius:i.blurRadius,spreadRadius:i.spreadRadius,color:i.color}):o.push({id:zn(),enabled:!0,type:"raw",kind:"raw",property:"box-shadow",rawText:r})}return o}function Xi(e,t){const n=gd(e);return n?{id:zn(),enabled:!0,type:t,kind:"parsed",radius:n}:null}function ji(e){return e.filter(n=>n.enabled&&(It(n)||n.kind==="raw"&&n.property==="box-shadow")).map(n=>n.kind==="raw"?n.rawText.trim():It(n)?_a({inset:n.inset,offsetX:n.offsetX,offsetY:n.offsetY,blurRadius:n.blurRadius,spreadRadius:n.spreadRadius,color:n.color}):"").map(n=>n.trim()).filter(Boolean).join(", ")}function co(e,t){const n=e.find(o=>o.type===t&&o.enabled);return n&&on(n)?n:null}function xd(e,t){const n=new Set,o=new Map;for(const s of e){const l=Ui(s),a=o.get(l)??[];a.push(s),o.set(l,a)}const r=t.map(s=>{const l=Ui(s),a=o.get(l),c=a==null?void 0:a.shift();return c?(n.add(c.id),{...s,id:c.id,enabled:!0}):s}),i=e.filter(s=>!s.enabled&&!n.has(s.id));return[...r,...i]}function ti(e,t="0 0 24 24"){const n=document.createElementNS(jt,"svg");n.setAttribute("viewBox",t),n.setAttribute("fill","none"),n.setAttribute("aria-hidden","true");const o=document.createElementNS(jt,"path");return o.setAttribute("d",e),o.setAttribute("stroke","currentColor"),o.setAttribute("stroke-width","2"),o.setAttribute("stroke-linecap","round"),o.setAttribute("stroke-linejoin","round"),n.append(o),n}function yd(){return ti("M12 5v14M5 12h14")}function vd(){return ti("M9 6h6M10 6l.5-1.5h3L14 6M7 6l1 14h8l1-14")}function Ed(){const e=document.createElementNS(jt,"svg");e.setAttribute("viewBox","0 0 20 20"),e.setAttribute("fill","none"),e.setAttribute("aria-hidden","true");const t=document.createElementNS(jt,"path");t.setAttribute("d","M4 5H16 M4 10H16 M4 15H16"),t.setAttribute("stroke","currentColor"),t.setAttribute("stroke-width","2"),t.setAttribute("stroke-linecap","round"),t.setAttribute("stroke-linejoin","round"),e.append(t);const n=[[7,5],[13,10],[9,15]];for(const[o,r]of n){const i=document.createElementNS(jt,"circle");i.setAttribute("cx",String(o)),i.setAttribute("cy",String(r)),i.setAttribute("r","1.6"),i.setAttribute("fill","none"),i.setAttribute("stroke","currentColor"),i.setAttribute("stroke-width","2"),e.append(i)}return e}function uo(e){if(e){const t=document.createElementNS(jt,"svg");t.setAttribute("viewBox","0 0 24 24"),t.setAttribute("fill","none"),t.setAttribute("aria-hidden","true");const n=document.createElementNS(jt,"path");n.setAttribute("d","M2.5 12s3.5-7 9.5-7 9.5 7 9.5 7-3.5 7-9.5 7-9.5-7-9.5-7z"),n.setAttribute("stroke","currentColor"),n.setAttribute("stroke-width","2"),n.setAttribute("stroke-linecap","round"),n.setAttribute("stroke-linejoin","round");const o=document.createElementNS(jt,"circle");return o.setAttribute("cx","12"),o.setAttribute("cy","12"),o.setAttribute("r","3"),o.setAttribute("stroke","currentColor"),o.setAttribute("stroke-width","2"),t.append(n,o),t}return ti("M3 3l18 18M10.6 10.6A3 3 0 0012 15a3 3 0 002.4-4.4M9.5 5.8A10.7 10.7 0 0112 5c6 0 9.5 7 9.5 7a17.4 17.4 0 01-3.1 4.1M6.2 6.2A17.8 17.8 0 002.5 12s3.5 7 9.5 7c1 0 1.9-.2 2.8-.5")}function gr(e){const t=document.createElement("button");return t.type="button",t.className="we-effects-icon-btn",t.setAttribute("aria-label",e),t}function Sd(e){return e.kind==="raw"?"raw":It(e)?"shadow":on(e)?"blur":"raw"}function kd(e){const{container:t,transactionManager:n,tokensService:o,headerActionsContainer:r}=e,i=new Oe,s=new WeakMap;let l=null,a=[],c=new Map,u=null,p=null,f=null;const h=document.createElement("div");h.className="we-field-group we-effects",t.append(h),i.add(()=>h.remove());const d=document.createElement("button");if(d.type="button",d.className="we-effects-icon-btn",d.setAttribute("aria-label","Add effect"),d.append(yd()),r)r.insertBefore(d,r.firstChild),i.add(()=>d.remove());else{const A=document.createElement("div");A.className="we-effects-toolbar",A.append(d),h.append(A)}const b=document.createElement("div");b.className="we-effects-list",h.append(b);const m=new Map;function w(A){a=A,c=new Map(A.map(Y=>[Y.id,Y]));const L=l;L&&s.set(L,A)}function I(A){return c.get(A)??null}function S(A){if(i.isDisposed)return null;const L=l;return!L||!L.isConnected?null:(p&&f===A||(p&&p.commit({merge:!0}),p=n.beginStyle(L,A),f=A),p)}function v(){const A=p;p=null,f=null,A&&A.commit({merge:!0})}function x(){const A=p;p=null,f=null,A&&A.rollback()}function k(){return p!==null||u!==null}function X(){const A=l;if(!A||!A.isConnected)return;const L=S(mr);L&&L.set(ji(a));const Y=co(a,"layer-blur");if(Y){const K=S("filter");if(K){const ge=Zt(A,"filter");K.set(lo(ge,Y.radius))}}const B=co(a,"backdrop-blur");if(B){const K=S("backdrop-filter");if(K){const ge=Zt(A,"backdrop-filter");K.set(lo(ge,B.radius))}}}function T(){const A=l;if(!A||!A.isConnected)return;v(),n.applyStyle(A,mr,ji(a),{merge:!1});const L=co(a,"layer-blur"),Y=Zt(A,"filter");n.applyStyle(A,"filter",lo(Y,(L==null?void 0:L.radius)??""),{merge:!1});const B=co(a,"backdrop-blur"),K=Zt(A,"backdrop-filter");n.applyStyle(A,"backdrop-filter",lo(K,(B==null?void 0:B.radius)??""),{merge:!1})}function E(A){const L=(A==null?void 0:A.commit)??!1,Y=(A==null?void 0:A.rollback)??!1;Y?x():L&&v();const B=u!==null;u=null;for(const K of m.values())K.setOpen(!1);B&&!Y&&y(!0)}function g(A){if(A===u){E({commit:!0});return}if(E({commit:!0}),!A)return;const L=m.get(A);if(L){u=A;for(const[Y,B]of m)B.setOpen(Y===A);L.focusFirst()}}function C(A,L){const Y=dt(L);A.input.value=Y.value,A.setSuffix(Y.suffix)}function M(A,L){if(A.kind==="raw")return null;if(L==="layer-blur"||L==="backdrop-blur"){const we=bd(L),ke=on(A)?A.radius:It(A)?A.blurRadius:we.radius;return{...we,id:A.id,enabled:A.enabled,radius:ke||we.radius}}const Y=Gi(),B=It(A)?A:null,K=on(A)?A:null,ge=(B==null?void 0:B.blurRadius)??(K==null?void 0:K.radius)??Y.blurRadius;return{...Y,id:A.id,enabled:A.enabled,type:L,inset:L==="inner-shadow",offsetX:(B==null?void 0:B.offsetX)??Y.offsetX,offsetY:(B==null?void 0:B.offsetY)??Y.offsetY,blurRadius:ge||Y.blurRadius,spreadRadius:(B==null?void 0:B.spreadRadius)??Y.spreadRadius,color:(B==null?void 0:B.color)??Y.color}}function N(A,L){var ge;const Y=I(A);if(!Y||Y.kind==="raw"||Y.type===L)return;const B=M(Y,L);if(!B)return;let K=a.map(we=>we.id===A?B:we);(B.type==="layer-blur"||B.type==="backdrop-blur")&&(K=K.filter(we=>we.id===A||we.type!==B.type)),w(K),H(),T(),u===A&&((ge=m.get(A))==null||ge.focusFirst())}function D(A){const L=new Oe,Y=document.createElement("div");Y.className="we-effects-item-wrap";const B=document.createElement("div");B.className="we-effects-item",B.dataset.enabled=A.enabled?"true":"false",B.dataset.open="false";const K=gr("Adjust effect");K.append(Ed());const ge=document.createElement("button");ge.type="button",ge.className="we-effects-name";const we=gr("Toggle visibility"),ke=gr("Remove effect");ke.append(vd()),B.append(K,ge,we,ke);const Se=document.createElement("div");if(Se.className="we-effects-popover",Se.hidden=!0,Y.append(B,Se),L.listen(K,"click",q=>{q.preventDefault(),q.stopPropagation(),g(A.id)}),L.listen(ge,"click",q=>{q.preventDefault(),q.stopPropagation(),g(A.id)}),L.listen(we,"click",q=>{q.preventDefault(),q.stopPropagation();const ne=I(A.id);ne&&(ne.enabled=!ne.enabled,B.dataset.enabled=ne.enabled?"true":"false",we.replaceChildren(uo(ne.enabled)),T())}),L.listen(ke,"click",q=>{var ne;q.preventDefault(),q.stopPropagation(),u===A.id&&E({commit:!0}),w(a.filter(ue=>ue.id!==A.id)),(ne=m.get(A.id))==null||ne.dispose(),m.delete(A.id),H(),T()}),A.kind==="raw"){const q=document.createElement("div");q.className="we-effects-popover-content";const ne=document.createElement("div");ne.className="we-field";const ue=document.createElement("span");ue.className="we-field-label",ue.textContent="æ•°å€¼";const Z=document.createElement("input");return Z.type="text",Z.className="we-input",Z.autocomplete="off",Z.spellcheck=!1,Z.setAttribute("aria-label","Shadow value"),ne.append(ue,Z),q.append(ne),Se.append(q),L.listen(Z,"input",()=>{const oe=I(A.id);!oe||oe.kind!=="raw"||(oe.rawText=Z.value,X())}),L.listen(Z,"blur",()=>{v()}),L.listen(Z,"keydown",oe=>{oe.key==="Enter"?(oe.preventDefault(),v(),Z.blur()):oe.key==="Escape"&&(oe.preventDefault(),E({rollback:!0}),y(!0))}),{id:A.id,viewType:"raw",root:Y,row:B,adjustBtn:K,nameBtn:ge,eyeBtn:we,deleteBtn:ke,popover:Se,rawInput:Z,disposer:L,setOpen(oe){B.dataset.open=oe?"true":"false",Se.hidden=!oe},focusFirst(){Z.focus(),Z.select()},sync(oe){B.dataset.enabled=oe.enabled?"true":"false",ge.textContent=hr(oe),we.replaceChildren(uo(oe.enabled)),oe.kind==="raw"&&(Z.value=oe.rawText)},dispose(){L.dispose(),Y.remove()}}}if(on(A)){const q=document.createElement("div");q.className="we-effects-popover-content";const ne=document.createElement("div");ne.className="we-field";const ue=document.createElement("span");ue.className="we-field-label",ue.textContent="ç±»å‹";const Z=document.createElement("select");Z.className="we-select",Z.setAttribute("aria-label","Effect type");for(const Ee of Br){const Pe=document.createElement("option");Pe.value=Ee.value,Pe.textContent=Ee.label,Z.append(Pe)}ne.append(ue,Z);const be=document.createElement("div");be.className="we-field";const oe=document.createElement("span");oe.className="we-field-label",oe.textContent="æ¨¡ç³Š";const Ce=We({ariaLabel:"Blur radius",inputMode:"decimal",suffix:"px"});be.append(oe,Ce.root),q.append(ne,be),Se.append(q),Ye(L,Ce.input,{mode:"css-length",min:0,step:1,shiftStep:10,altStep:.1}),L.listen(Ce.input,"input",()=>{const Ee=I(A.id);!Ee||!on(Ee)||(Ee.radius=ft(Ce.input.value,Ce.getSuffixText()),X())}),L.listen(Ce.input,"blur",()=>{v(),y(!0)}),L.listen(Ce.input,"keydown",Ee=>{Ee.key==="Enter"?(Ee.preventDefault(),v(),y(!0),Ce.input.blur()):Ee.key==="Escape"&&(Ee.preventDefault(),E({rollback:!0}),y(!0))});const Te=()=>{N(A.id,Z.value)};return L.listen(Z,"input",Te),L.listen(Z,"change",Te),{id:A.id,viewType:"blur",root:Y,row:B,adjustBtn:K,nameBtn:ge,eyeBtn:we,deleteBtn:ke,popover:Se,disposer:L,typeSelect:Z,radiusInput:Ce,setOpen(Ee){B.dataset.open=Ee?"true":"false",Se.hidden=!Ee},focusFirst(){Ce.input.focus(),Ce.input.select()},sync(Ee){B.dataset.enabled=Ee.enabled?"true":"false",ge.textContent=hr(Ee),we.replaceChildren(uo(Ee.enabled)),on(Ee)&&(Z.value=Ee.type,C(Ce,Ee.radius))},dispose(){L.dispose(),Y.remove()}}}const ie=document.createElement("div");ie.className="we-effects-popover-content";const Q=document.createElement("div");Q.className="we-field";const P=document.createElement("span");P.className="we-field-label",P.textContent="ç±»å‹";const ae=document.createElement("select");ae.className="we-select",ae.setAttribute("aria-label","Effect type");for(const q of Br){const ne=document.createElement("option");ne.value=q.value,ne.textContent=q.label,ae.append(ne)}Q.append(P,ae);const xe=document.createElement("div");xe.className="we-field-row";const ve=We({ariaLabel:"Shadow offset X",inputMode:"decimal",prefix:"X",suffix:"px"}),Ae=We({ariaLabel:"Shadow offset Y",inputMode:"decimal",prefix:"Y",suffix:"px"});xe.append(ve.root,Ae.root);const z=document.createElement("div");z.className="we-field-row";const le=We({ariaLabel:"Shadow blur radius",inputMode:"decimal",prefix:"B",suffix:"px"}),se=We({ariaLabel:"Shadow spread radius",inputMode:"decimal",prefix:"S",suffix:"px"});z.append(le.root,se.root);const fe=document.createElement("div");fe.className="we-field";const re=document.createElement("span");re.className="we-field-label",re.textContent="é¢œè‰²";const O=document.createElement("div");O.style.minWidth="0",fe.append(re,O),ie.append(Q,xe,z,fe),Se.append(ie),Ye(L,ve.input,{mode:"css-length"}),Ye(L,Ae.input,{mode:"css-length"}),Ye(L,le.input,{mode:"css-length",min:0,step:1,shiftStep:10,altStep:.1}),Ye(L,se.input,{mode:"css-length",step:1,shiftStep:10,altStep:.1});const R=Un({container:O,ariaLabel:"Shadow color",tokensService:o,getTokenTarget:()=>l,onInput:q=>{const ne=I(A.id);!ne||!It(ne)||(ne.color=q,X())},onCommit:()=>{v()},onCancel:()=>{x(),y(!0)}});L.add(()=>R.dispose());const V=(q,ne)=>{L.listen(q.input,"input",()=>{const ue=I(A.id);if(!ue||!It(ue))return;const Z=ft(q.input.value,q.getSuffixText());ue[ne]=Z,X()}),L.listen(q.input,"blur",()=>{v(),y(!0)}),L.listen(q.input,"keydown",ue=>{ue.key==="Enter"?(ue.preventDefault(),v(),y(!0),q.input.blur()):ue.key==="Escape"&&(ue.preventDefault(),x(),y(!0))})};V(ve,"offsetX"),V(Ae,"offsetY"),V(le,"blurRadius"),V(se,"spreadRadius");const j=()=>{N(A.id,ae.value)};return L.listen(ae,"input",j),L.listen(ae,"change",j),{id:A.id,viewType:"shadow",root:Y,row:B,adjustBtn:K,nameBtn:ge,eyeBtn:we,deleteBtn:ke,popover:Se,disposer:L,typeSelect:ae,offsetX:ve,offsetY:Ae,blur:le,spread:se,colorField:R,setOpen(q){B.dataset.open=q?"true":"false",Se.hidden=!q},focusFirst(){ae.focus()},sync(q){B.dataset.enabled=q.enabled?"true":"false",ge.textContent=hr(q),we.replaceChildren(uo(q.enabled)),It(q)&&(ae.value=q.type,C(ve,q.offsetX),C(Ae,q.offsetY),C(le,q.blurRadius),C(se,q.spreadRadius),R.setValue(q.color))},dispose(){L.dispose(),Y.remove()}}}function H(){const A=new Set(a.map(L=>L.id));for(const[L,Y]of Array.from(m.entries()))A.has(L)||(u===L&&(u=null),Y.dispose(),m.delete(L));for(const L of a){const Y=m.get(L.id),B=Sd(L);(!Y||Y.viewType!==B)&&(Y==null||Y.dispose(),m.set(L.id,D(L)));const K=m.get(L.id);K.sync(L),K.setOpen(u===L.id),b.append(K.root)}}function y(A=!1){const L=l;if(!L||!L.isConnected){d.disabled=!0,w([]),E({commit:!0}),H();return}if(d.disabled=!1,!A&&k())return;const Y=Zt(L,mr),B=wd(Y),K=Zt(L,"filter"),ge=Xi(K,"layer-blur"),we=Zt(L,"backdrop-filter"),ke=Xi(we,"backdrop-blur"),Se=[...B,...ge?[ge]:[],...ke?[ke]:[]],ie=s.get(L)??[];w(xd(ie,Se)),H()}i.listen(d,"click",A=>{A.preventDefault(),A.stopPropagation();const L=l;if(!L||!L.isConnected)return;E({commit:!0});const Y=Gi(),B=[...a,Y];w(B),H(),T(),g(Y.id)});const _=A=>{const L=u;if(!L)return;const Y=m.get(L);if(!Y)return;const B=typeof A.composedPath=="function"?A.composedPath():[];(B.length>0?B.includes(Y.root):(()=>{const ge=A.target;return!!(ge&&Y.root.contains(ge))})())||E({commit:!0})},F=h.ownerDocument;F.addEventListener("click",_,!0),i.add(()=>F.removeEventListener("click",_,!0));const G=A=>{A.key==="Escape"&&u&&(A.preventDefault(),A.stopPropagation(),E({rollback:!0}),y(!0))};h.addEventListener("keydown",G,!0),i.add(()=>h.removeEventListener("keydown",G,!0));function $(A){i.isDisposed||(A!==l&&(v(),E({commit:!0})),l=A,A&&A.isConnected?w(s.get(A)??[]):w([]),y(!0))}function W(){i.isDisposed||y(!1)}function J(){v(),l=null;for(const A of m.values())A.dispose();m.clear(),i.dispose()}return y(!0),{setTarget:$,refresh:W,dispose:J}}const Cd=10,Ad=20,Td=2,br=20;function wr(e){var s,l;const t=e.tagName.toLowerCase(),n=e;let o=t;const r=(s=n.id)==null?void 0:s.trim();r&&(o+=`#${r}`);const i=Array.from(e.classList??[]).slice(0,Td).filter(Boolean);if(i.length>0&&(o+=`.${i.join(".")}`),!e.children.length){const a=((l=e.textContent)==null?void 0:l.trim())??"";a.length>0&&a.length<=br?o+=` "${a}"`:a.length>br&&(o+=` "${a.slice(0,br-3)}..."`)}return o}function Nd(e){const t=[];let n=e.parentElement;for(;n&&t.length<Cd;){if(n===document.body||n===document.documentElement){t.unshift(n);break}if(n.shadowRoot)break;t.unshift(n),n=n.parentElement}return t}function Rd(e){return Array.from(e.children).slice(0,Ad)}function Id(e){if(!e||!e.isConnected)return[];const t=[],n=Nd(e);for(let i=0;i<n.length;i++)t.push({element:n[i],label:wr(n[i]),depth:i,isSelected:!1,isAncestor:!0,isChild:!1});const o=n.length;t.push({element:e,label:wr(e),depth:o,isSelected:!0,isAncestor:!1,isChild:!1});const r=Rd(e);for(const i of r)t.push({element:i,label:wr(i),depth:o+1,isSelected:!1,isAncestor:!1,isChild:!0});return t}function _d(e){const{container:t,onSelect:n}=e,o=new Oe;let r=null;const i=document.createElement("div");i.className="we-tree";const s=document.createElement("div");s.className="we-tree-empty",s.textContent="è¯·é€‰æ‹©ä¸€ä¸ªå…ƒç´ ä»¥æŸ¥çœ‹ç»“æ„å±‚çº§ã€‚";const l=document.createElement("div");l.className="we-tree-list",l.setAttribute("role","tree"),i.append(s,l),t.append(i),o.add(()=>i.remove());function a(){const f=Id(r),h=f.length>0;if(s.hidden=h,l.hidden=!h,!h){l.innerHTML="";return}l.innerHTML="";for(const d of f){const b=document.createElement("div");if(b.className="we-tree-item",b.setAttribute("role","treeitem"),b.style.paddingLeft=`${8+d.depth*16}px`,d.isSelected&&(b.classList.add("we-tree-item--selected"),b.setAttribute("aria-selected","true")),d.isAncestor&&b.classList.add("we-tree-item--ancestor"),d.isChild&&b.classList.add("we-tree-item--child"),d.depth>0){const I=document.createElement("span");I.className="we-tree-indent",I.textContent=d.isChild?"â””":"â”œ",b.append(I)}const m=document.createElement("span");m.className="we-tree-icon",m.textContent="â—‡",b.append(m);const w=document.createElement("span");w.className="we-tree-label",w.textContent=d.label,b.append(w),o.listen(b,"click",I=>{I.preventDefault(),I.stopPropagation(),d.element.isConnected&&n&&n(d.element)}),o.listen(b,"mouseenter",()=>{d.element.isConnected&&d.element.classList.add("we-tree-hover-highlight")}),o.listen(b,"mouseleave",()=>{d.element.classList.remove("we-tree-hover-highlight")}),l.append(b)}}function c(f){o.isDisposed||(r=f,a())}function u(){o.isDisposed||a()}function p(){r=null,o.dispose()}return a(),{setTarget:c,refresh:u,dispose:p}}const Md=8,Ld=400;function Wi(e){const t=[],n=new Set;for(const o of e??[]){const r=String(o??"").trim();r&&(n.has(r)||(n.add(r),t.push(r)))}return t}function Dd(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Yi(e){return String(e??"").split(/\s+/).map(t=>t.trim()).filter(Boolean)}function qi(e){try{const t=e.classList;if(t&&typeof t[Symbol.iterator]=="function")return Array.from(t).filter(Boolean)}catch{}try{return(e.getAttribute("class")??"").split(/\s+/).map(n=>n.trim()).filter(Boolean)}catch{return[]}}function Pd(e){const{container:t,onClassChange:n,getSuggestions:o}=e,r=new Oe;let i=null,s=[],l=!1;const a=document.createElement("div");a.className="we-class-editor",a.setAttribute("role","group"),a.setAttribute("aria-label","ç±»åç¼–è¾‘å™¨");const c=document.createElement("div");c.className="we-class-chips";const u=document.createElement("input");u.type="text",u.className="we-input we-class-input",u.autocomplete="off",u.spellcheck=!1,u.placeholder="æ·»åŠ ç±»å",u.setAttribute("aria-label","æ·»åŠ ç±»å");const p=document.createElement("div");p.className="we-class-suggestions",p.hidden=!0,a.append(c,u,p),t.append(a),r.add(()=>a.remove());function f(){c.innerHTML="";for(const E of s){const g=document.createElement("span");g.className="we-class-chip";const C=document.createElement("span");C.className="we-class-chip-text",C.textContent=E;const M=document.createElement("button");M.type="button",M.className="we-class-chip-remove",M.textContent="Ã—",M.dataset.action="remove",M.dataset.value=E,M.setAttribute("aria-label",`Remove class ${E}`),g.append(C,M),c.append(g)}}function h(){p.hidden=!0,p.innerHTML=""}function d(){if(u.disabled){h();return}const E=u.value.trim();if(!E){h();return}const g=(o==null?void 0:o())??[];if(!Array.isArray(g)||g.length===0){h();return}const C=new Set(s),M=new Set,N=[];for(const D of g){const H=String(D??"").trim();if(H&&!C.has(H)&&H.startsWith(E)&&!M.has(H)&&(M.add(H),N.push(H),N.length>=Md))break}if(N.length===0){h();return}p.hidden=!1,p.innerHTML="";for(const D of N){const H=document.createElement("button");H.type="button",H.className="we-class-suggestion",H.textContent=D,H.dataset.action="suggestion",H.dataset.value=D,p.append(H)}}function b(E){s=Wi(E),f(),d()}function m(E){if(!i||!i.isConnected)return;const g=Wi(E);if(Dd(g,s)){d();return}s=g,f(),d(),n(s.slice())}function w(E){if(!E.length)return;const g=s.slice(),C=new Set(g);for(const M of E){const N=String(M??"").trim();N&&(C.has(N)||(C.add(N),g.push(N)))}m(g)}function I(E){const g=String(E??"").trim();if(!g)return;const C=s.filter(M=>M!==g);m(C)}function S(){s.length!==0&&m(s.slice(0,-1))}function v(){const E=Yi(u.value);E.length!==0&&(w(E),u.value="",d())}r.listen(p,"mousedown",E=>{E.preventDefault()}),r.listen(c,"click",E=>{var N,D;const g=E.target,C=(N=g==null?void 0:g.closest)==null?void 0:N.call(g,'button[data-action="remove"]'),M=(D=C==null?void 0:C.dataset)==null?void 0:D.value;!C||!M||(E.preventDefault(),I(M))}),r.listen(p,"click",E=>{var N,D;const g=E.target,C=(N=g==null?void 0:g.closest)==null?void 0:N.call(g,'button[data-action="suggestion"]'),M=(D=C==null?void 0:C.dataset)==null?void 0:D.value;!C||!M||(E.preventDefault(),w([M]),u.value="",d(),u.focus())}),r.listen(u,"compositionstart",()=>{l=!0}),r.listen(u,"compositionend",()=>{l=!1,d()}),r.listen(u,"input",()=>{d()}),r.listen(u,"blur",()=>{h()}),r.listen(u,"paste",()=>{window.setTimeout(()=>{if(r.isDisposed)return;Yi(u.value).length>1?v():d()},0)}),r.listen(u,"keydown",E=>{if(!u.disabled){if(E.key==="Enter"){if(l)return;E.preventDefault(),v();return}if(E.key===" "){if(l)return;u.value.trim()&&(E.preventDefault(),v());return}if(E.key==="Backspace"){!u.value&&s.length>0&&(E.preventDefault(),S());return}E.key==="Escape"&&(p.hidden?u.value&&(E.preventDefault(),u.value="",d()):(E.preventDefault(),h()))}});function x(E){if(!r.isDisposed){if(i=E&&E.isConnected?E:null,u.value="",h(),u.disabled=!i,!i){b([]);return}b(qi(i))}}function k(E){r.isDisposed||b(E)}function X(){if(r.isDisposed)return;const E=i;if(!E||!E.isConnected){x(null);return}b(qi(E))}function T(){i=null,s=[],r.dispose()}return x(null),{setTarget:x,setClasses:k,refresh:X,dispose:T}}function xr(e){return String(e??"").trim().toLowerCase()}function Ki(e){return String(e??"").trim()}function Fd(){let e=!1,t=null;const n=new Map,o=new Map;function r(){var h;if(e||typeof document>"u")return null;if((h=t==null?void 0:t.host)!=null&&h.isConnected)return t;const c=document.documentElement??document.body;if(!c)return null;const u=document.createElement("div");u.setAttribute("aria-hidden","true"),u.style.cssText="all: initial;display: block;position: fixed;left: -100000px;top: 0;width: 100px;height: 100px;overflow: hidden;pointer-events: none;contain: layout style paint;z-index: -1;visibility: hidden;";const p=u.attachShadow({mode:"open"}),f=document.createElement("div");return f.style.cssText="all: initial; display: block;",p.append(f),c.append(u),t={host:u,shadow:p,container:f},t}function i(c){const u=xr(c);if(!u)return null;const p=n.get(u);if(p!=null&&p.isConnected)return p;const f=r();if(!f)return null;let h;try{h=document.createElement(u)}catch{h=document.createElement("div")}return f.container.append(h),n.set(u,h),h}function s(c,u){const p=xr(c);if(!p)return;const f=(u??[]).map(w=>Ki(w)).filter(Boolean);if(f.length===0)return;const h=o.get(p)??new Map;o.has(p)||o.set(p,h);const d=[];for(const w of f)h.has(w)||d.push(w);if(d.length===0)return;const b=i(p);if(!b)return;let m=null;try{m=window.getComputedStyle(b)}catch{m=null}if(!m){for(const w of d)h.set(w,"");return}for(const w of d){let I="";try{I=String(m.getPropertyValue(w)??"").trim()}catch{I=""}h.set(w,I)}}function l(c,u){var h;const p=xr(c),f=Ki(u);return!p||!f?"":(s(p,[f]),((h=o.get(p))==null?void 0:h.get(f))??"")}function a(){var c;e=!0;try{(c=t==null?void 0:t.host)==null||c.remove()}catch{}t=null,n.clear(),o.clear()}return{ensureBaselineValues:s,getBaselineValue:l,dispose:a}}const Po=[0,0,0,0];function Ho(e,t){for(let n=0;n<4;n++)if(e[n]!==t[n])return e[n]>t[n]?1:-1;return 0}function Io(e){const t=[];let n=0,o=0,r=0,i=null;for(let l=0;l<e.length;l++){const a=e[l];if(i){if(a==="\\"){l+=1;continue}a===i&&(i=null);continue}if(a==='"'||a==="'"){i=a;continue}if(a==="\\"){l+=1;continue}if(a==="["?r+=1:a==="]"&&r>0?r-=1:a==="("?o+=1:a===")"&&o>0&&(o-=1),a===","&&o===0&&r===0){const c=e.slice(n,l).trim();c&&t.push(c),n=l+1}}const s=e.slice(n).trim();return s&&t.push(s),t}function yr(e){let t=Po;for(const n of e)Ho(n,t)>0&&(t=n);return t}function _o(e){let t=0,n=0,o=0,r=!0;for(let i=0;i<e.length;i++){const s=e[i];if(s==="\\"){i+=1;continue}if(s==="["){n+=1,i=La(e,i),r=!1;continue}if(Bd(e,i)){i=Hd(e,i),r=!0;continue}if(s==="#"){t+=1,i=Tn(e,i+1)-1,r=!1;continue}if(s==="."){n+=1,i=Tn(e,i+1)-1,r=!1;continue}if(s===":"){if(e[i+1]===":"){o+=1;const p=i+2,f=Tn(e,p),h=e.slice(p,f).toLowerCase();if(i=f-1,e[i+1]==="("&&h==="slotted"){const{content:d,endIndex:b}=Zi(e,i+1),m=yr(Io(d).map(_o));t+=m[1],n+=m[2],o+=m[3],i=b}r=!1;continue}const a=i+1,c=Tn(e,a),u=e.slice(a,c).toLowerCase();if(Od.has(u)){o+=1,i=c-1,r=!1;continue}if(e[c]==="("){const{content:p,endIndex:f}=Zi(e,c);if(i=f,u==="where"){r=!1;continue}if(u==="is"||u==="not"||u==="has"){const h=yr(Io(p).map(_o));t+=h[1],n+=h[2],o+=h[3],r=!1;continue}if(u==="nth-child"||u==="nth-last-child"){n+=1;const h=zd(p);if(h){const d=yr(Io(h).map(_o));t+=d[1],n+=d[2],o+=d[3]}r=!1;continue}n+=1,r=!1;continue}n+=1,i=c-1,r=!1;continue}if(r){if(s==="*"){r=!1;continue}if(Vd(s)){o+=1,i=Tn(e,i+1)-1,r=!1;continue}}}return[0,t,n,o]}function $d(e,t){const n=Io(t);let o=null,r=Po;for(const i of n)try{if(!e.matches(i))continue;const s=_o(i);(!o||Ho(s,r)>0)&&(o=i,r=s)}catch{}return o?{matchedSelector:o,specificity:r}:null}const Od=new Set(["before","after","first-line","first-letter","selection","backdrop","placeholder"]);function Vd(e){return/[a-zA-Z_]/.test(e)||e.charCodeAt(0)>=128}function Tn(e,t){let n=t;for(;n<e.length;n++){const o=e[n];if(o==="\\"){n+=1;continue}if(!(/[a-zA-Z0-9_-]/.test(o)||o.charCodeAt(0)>=128))break}return n}function La(e,t){let n=1,o=null;for(let r=t+1;r<e.length;r++){const i=e[r];if(o){if(i==="\\"){r+=1;continue}i===o&&(o=null);continue}if(i==='"'||i==="'"){o=i;continue}if(i==="\\"){r+=1;continue}if(i==="[")n+=1;else if(i==="]"&&(n-=1,n===0))return r}return e.length-1}function Zi(e,t){let n=1,o=null;for(let r=t+1;r<e.length;r++){const i=e[r];if(o){if(i==="\\"){r+=1;continue}i===o&&(o=null);continue}if(i==='"'||i==="'"){o=i;continue}if(i==="\\"){r+=1;continue}if(i==="[")r=La(e,r);else if(i==="(")n+=1;else if(i===")"&&(n-=1,n===0))return{content:e.slice(t+1,r),endIndex:r}}return{content:e.slice(t+1),endIndex:e.length-1}}function Bd(e,t){const n=e[t];return/\s/.test(n)||n===">"||n==="+"||n==="~"||n==="|"}function Hd(e,t){let n=t;for(;n<e.length&&/\s/.test(e[n]);)n++;return e[n]==="|"&&e[n+1]==="|"?n+1:e[n]===">"||e[n]==="+"||e[n]==="~"||e[n]==="|"?n:n-1}function zd(e){let t=0,n=0,o=null;for(let r=0;r<e.length;r++){const i=e[r];if(o){if(i==="\\"){r+=1;continue}i===o&&(o=null);continue}if(i==='"'||i==="'"){o=i;continue}if(i==="\\"){r+=1;continue}if(i==="["?n+=1:i==="]"&&n>0?n-=1:i==="("?t+=1:i===")"&&t>0&&(t-=1),t===0&&n===0&&Gd(e,r))return e.slice(r+2).trimStart()}return null}function Gd(e,t){if(e[t]!=="o"||e[t+1]!=="f")return!1;const n=e[t-1],o=e[t+2],r=n===void 0||/\s/.test(n),i=o===void 0||/\s/.test(o);return r&&i}const Ud=new Set(["color","color-scheme","caret-color","accent-color","font","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","letter-spacing","line-height","text-rendering","text-size-adjust","text-transform","text-indent","text-align","text-align-last","text-justify","text-shadow","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-underline-position","tab-size","white-space","word-break","overflow-wrap","word-spacing","hyphens","line-break","direction","unicode-bidi","writing-mode","text-orientation","text-combine-upright","list-style","list-style-image","list-style-position","list-style-type","border-collapse","border-spacing","caption-side","empty-cells","cursor","visibility","pointer-events","user-select","quotes","orphans","widows","fill","fill-opacity","fill-rule","stroke","stroke-width","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-dasharray","stroke-dashoffset","stroke-opacity","paint-order","shape-rendering","image-rendering","color-interpolation","color-interpolation-filters","color-rendering","dominant-baseline","alignment-baseline","baseline-shift","text-anchor","stop-color","stop-opacity","flood-color","flood-opacity","lighting-color","marker","marker-start","marker-mid","marker-end"]);function Nn(e){const t=String(e||"").trim();return t?t.startsWith("--")?!0:Ud.has(t.toLowerCase()):!1}const Xd={margin:["margin-top","margin-right","margin-bottom","margin-left"],padding:["padding-top","padding-right","padding-bottom","padding-left"],inset:["top","right","bottom","left"],border:["border-top-width","border-right-width","border-bottom-width","border-left-width","border-top-style","border-right-style","border-bottom-style","border-left-style","border-top-color","border-right-color","border-bottom-color","border-left-color"],"border-width":["border-top-width","border-right-width","border-bottom-width","border-left-width"],"border-style":["border-top-style","border-right-style","border-bottom-style","border-left-style"],"border-color":["border-top-color","border-right-color","border-bottom-color","border-left-color"],"border-top":["border-top-width","border-top-style","border-top-color"],"border-right":["border-right-width","border-right-style","border-right-color"],"border-bottom":["border-bottom-width","border-bottom-style","border-bottom-color"],"border-left":["border-left-width","border-left-style","border-left-color"],"border-radius":["border-top-left-radius","border-top-right-radius","border-bottom-right-radius","border-bottom-left-radius"],outline:["outline-color","outline-style","outline-width"],background:["background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size"],font:["font-style","font-variant","font-weight","font-stretch","font-size","line-height","font-family"],flex:["flex-grow","flex-shrink","flex-basis"],"flex-flow":["flex-direction","flex-wrap"],"place-content":["align-content","justify-content"],"place-items":["align-items","justify-items"],"place-self":["align-self","justify-self"],gap:["row-gap","column-gap"],"grid-gap":["row-gap","column-gap"],overflow:["overflow-x","overflow-y"],"grid-area":["grid-row-start","grid-column-start","grid-row-end","grid-column-end"],"grid-row":["grid-row-start","grid-row-end"],"grid-column":["grid-column-start","grid-column-end"],"grid-template":["grid-template-rows","grid-template-columns","grid-template-areas"],"text-emphasis":["text-emphasis-style","text-emphasis-color"],"text-decoration":["text-decoration-line","text-decoration-style","text-decoration-color","text-decoration-thickness"],transition:["transition-property","transition-duration","transition-timing-function","transition-delay"],animation:["animation-name","animation-duration","animation-timing-function","animation-delay","animation-iteration-count","animation-direction","animation-fill-mode","animation-play-state"],columns:["column-width","column-count"],"column-rule":["column-rule-width","column-rule-style","column-rule-color"],"list-style":["list-style-position","list-style-image","list-style-type"]};function Ji(e){const t=String(e||"").trim();if(!t)return[];if(t.startsWith("--"))return[t];const n=t.toLowerCase();return Xd[n]??[n]}function jd(e){const t=String(e||"").trim();return t?t.startsWith("--")?t:t.toLowerCase():""}function Wd(e,t){return e[0]!==t[0]?e[0]>t[0]?1:-1:e[1]!==t[1]?e[1]>t[1]?1:-1:e[2]!==t[2]?e[2]>t[2]?1:-1:0}function Yd(e,t){if(e.important!==t.important)return e.important?1:-1;const n=Ho(e.specificity,t.specificity);return n!==0?n:Wd(e.sourceOrder,t.sourceOrder)}function Qi(e){const t=new Map;for(const o of e)for(const r of o.affects){const i=t.get(r);(!i||Yd(o,i)>0)&&t.set(r,o)}const n=new Map;for(const o of e)n.set(o.id,"overridden");for(const[,o]of t)n.set(o.id,"active");return{winners:t,declStatus:n}}var Ks;const es=(Ks=globalThis.CSSRule)==null?void 0:Ks.CONTAINER_RULE;var Zs;const ts=(Zs=globalThis.CSSRule)==null?void 0:Zs.SCOPE_RULE;function ns(e){var t,n;if(e.disabled)return!1;try{const o=((n=(t=e.media)==null?void 0:t.mediaText)==null?void 0:n.trim())??"";return!o||o.toLowerCase()==="all"?!0:window.matchMedia(o).matches}catch{return!0}}function vr(e,t){var r;const n=typeof e.href=="string"?e.href:void 0;if(n){const i=((r=n.split("/").pop())==null?void 0:r.split("?")[0])??n;return{url:n,label:i}}const o=e.ownerNode;if(o&&o.nodeType===Node.ELEMENT_NODE){const i=o;if(i.tagName==="STYLE")return{label:`<style #${t}>`};if(i.tagName==="LINK")return{label:`<link #${t}>`}}return{label:`<constructed #${t}>`}}function os(e){try{return e.cssRules}catch{return null}}function qd(e,t){var n,o;try{const r=((o=(n=e.media)==null?void 0:n.mediaText)==null?void 0:o.trim())??"";return!r||r.toLowerCase()==="all"?!0:window.matchMedia(r).matches}catch(r){return t.push(`Failed to evaluate @media rule: ${String(r)}`),!1}}function Kd(e,t){var n;try{const o=((n=e.conditionText)==null?void 0:n.trim())??"";return!o||typeof(CSS==null?void 0:CSS.supports)!="function"?!0:CSS.supports(o)}catch(o){return t.push(`Failed to evaluate @supports rule: ${String(o)}`),!1}}function Zd(e,t){const n=[],o=[];let r=0;const i=e,s=[];try{for(const c of Array.from(i.styleSheets??[]))c&&c instanceof CSSStyleSheet&&s.push(c)}catch{}try{const c=Array.from(i.adoptedStyleSheets??[]);for(const u of c)u&&u instanceof CSSStyleSheet&&s.push(u)}catch{}let l=0;function a(c,u){var p,f;for(const h of Array.from(c)){if(r+=1,es&&h.type===es){n.push("Skipped @container rules (not evaluated in CSSOM collector)");continue}if(ts&&h.type===ts){n.push("Skipped @scope rules (not evaluated in CSSOM collector)");continue}if(h.type===CSSRule.IMPORT_RULE){const b=h;try{const w=((f=(p=b.media)==null?void 0:p.mediaText)==null?void 0:f.trim())??"";if(w&&w.toLowerCase()!=="all"&&!window.matchMedia(w).matches)continue}catch{}const m=b.styleSheet;if(m){if(u.stack.has(m)){const w=vr(m,u.sheetIndex);n.push(`Detected @import cycle, skipping: ${w.url??w.label}`);continue}u.stack.add(m);try{if(!ns(m))continue;const w=os(m),I=vr(m,u.sheetIndex);if(!w){n.push(`Skipped @import stylesheet (cannot access cssRules, likely cross-origin): ${I.url??I.label}`);continue}a(w,{sheetIndex:u.sheetIndex,sourceForRules:I,topSheet:m,stack:u.stack})}finally{u.stack.delete(m)}}continue}if(h.type===CSSRule.MEDIA_RULE){qd(h,n)&&a(h.cssRules,u);continue}if(h.type===CSSRule.SUPPORTS_RULE){Kd(h,n)&&a(h.cssRules,u);continue}if(h.type===CSSRule.STYLE_RULE){const b=h;o.push({sheetIndex:u.sheetIndex,order:l++,selectorText:b.selectorText??"",style:b.style,source:u.sourceForRules});continue}const d=h;if(d.cssRules&&typeof d.cssRules.length=="number")try{a(d.cssRules,u)}catch{}}}for(let c=0;c<s.length;c++){const u=s[c];if(!ns(u))continue;const p=vr(u,c),f=os(u);if(!f){n.push(`Skipped stylesheet (cannot access cssRules, likely cross-origin): ${p.url??p.label}`);continue}const h=new Set;h.add(u),a(f,{sheetIndex:c,sourceForRules:p,topSheet:u,stack:h})}return{root:e,rootId:t,flatRules:o,warnings:n,stats:{styleSheets:s.length,rulesScanned:r}}}function rs(e){const t=[],n=Number((e==null?void 0:e.length)??0);for(let o=0;o<n;o++){let r="";try{r=e.item(o)}catch{r=""}if(r=jd(r),!r)continue;let i="",s=!1;try{i=e.getPropertyValue(r)??"",s=String(e.getPropertyPriority(r)??"")==="important"}catch{i="",s=!1}t.push({property:r,value:String(i).trim(),important:s,declIndex:o})}return t}function Jd(e){const t=e;return!!t.style&&typeof t.style.getPropertyValue=="function"&&typeof t.style.getPropertyPriority=="function"}function Er(e,t=2){var i;const n=e.tagName.toLowerCase(),o=(i=e.id)==null?void 0:i.trim();if(o)return`${n}#${o}`;const r=Array.from(e.classList??[]).slice(0,t).filter(Boolean);return r.length?`${n}.${r.join(".")}`:n}function is(e){var t;try{const n=(t=e.getRootNode)==null?void 0:t.call(e);return n instanceof ShadowRoot?n:e.ownerDocument??document}catch{return e.ownerDocument??document}}function ss(e){var t;if(e.parentElement)return e.parentElement;try{const n=(t=e.getRootNode)==null?void 0:t.call(e);if(n instanceof ShadowRoot)return n.host}catch{}return null}function as(e,t,n,o){const r=[],i=[],s=[],l=t.root instanceof ShadowRoot?"shadow":"document";let a=null;if(o.includeInline&&Jd(e)){const c=rs(e.style),u=[];for(const p of c){const f=Ji(p.property);if(!o.declFilter({property:p.property,affects:f}))continue;const h=`inline:${n}:${p.declIndex}`;u.push({id:h,name:p.property,value:p.value,important:p.important,affects:f,status:"overridden"}),s.push({id:h,important:p.important,specificity:[1,0,0,0],sourceOrder:[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,p.declIndex],property:p.property,value:p.value,affects:f,ownerRuleId:`inline:${n}`,ownerElementId:n})}a={id:`inline:${n}`,origin:"inline",selector:"element.style",matchedSelector:"element.style",specificity:[1,0,0,0],source:{label:"element.style"},order:Number.MAX_SAFE_INTEGER,decls:u}}for(const c of t.flatRules){const u=$d(e,c.selectorText);if(!u)continue;const p=rs(c.style),f=[],h=`rule:${t.rootId}:${c.sheetIndex}:${c.order}`;for(const d of p){const b=Ji(d.property);if(!o.declFilter({property:d.property,affects:b}))continue;const m=`${h}:${d.declIndex}`;f.push({id:m,name:d.property,value:d.value,important:d.important,affects:b,status:"overridden"}),s.push({id:m,important:d.important,specificity:u.specificity,sourceOrder:[c.sheetIndex,c.order,d.declIndex],property:d.property,value:d.value,affects:b,ownerRuleId:h,ownerElementId:n})}f.length!==0&&i.push({id:h,origin:"rule",selector:c.selectorText,matchedSelector:u.matchedSelector,specificity:u.specificity,source:c.source,order:c.order,decls:f})}return i.sort((c,u)=>{const p=c.specificity??Po,f=u.specificity??Po,h=Ho(f,p);return h!==0?h:u.order-c.order}),{element:e,elementId:n,root:t.root,rootType:l,inlineRule:a,matchedRules:i,candidates:s,warnings:r,stats:{matchedRules:i.length}}}function Qd(e,t={}){const n=[],o=Number.isFinite(t.maxInheritanceDepth)?Math.max(0,t.maxInheritanceDepth):10,r=new WeakMap;let i=1;const s=new WeakMap;let l=1;const a=new WeakMap,c=[];function u(C){const M=r.get(C);if(M)return M;const N=i++;return r.set(C,N),N}function p(C){const M=a.get(C);if(M)return M;const N=s.get(C)??(()=>{const H=l++;return s.set(C,H),H})(),D=Zd(C,N);return a.set(C,D),c.push(D),D}if(!e||!e.isConnected)return{target:{label:Er(e),root:"document"},warnings:["Target element is not connected; snapshot may be incomplete."],stats:{roots:0,styleSheets:0,rulesScanned:0,matchedRules:0},sections:[]};const f=is(e),h=p(f);n.push(...h.warnings);const d=as(e,h,u(e),{includeInline:!0,declFilter:()=>!0}),b=Qi(d.candidates),m=b.declStatus;if(d.inlineRule)for(const C of d.inlineRule.decls)C.status=m.get(C.id)??"overridden";for(const C of d.matchedRules)for(const M of C.decls)M.status=m.get(M.id)??"overridden";const w=[];let I=ss(e);for(;I&&w.length<o;)w.push(I),I=ss(I);const S=new Set;for(const C of d.candidates)for(const M of C.affects)Nn(M)&&S.add(M);const v=[];for(const C of w){const M=is(C),N=p(M);n.push(...N.warnings);const D=as(C,N,u(C),{includeInline:!0,declFilter:({affects:_})=>_.some(Nn)}),H=[];for(const _ of D.candidates){const F=_.affects.filter(Nn);if(F.length===0)continue;const G={..._,affects:F};H.push(G);for(const $ of F)S.add($)}const y=Qi(H);D.inlineRule&&(D.inlineRule.decls=D.inlineRule.decls.map(_=>({..._,affects:_.affects.filter(Nn)})).filter(_=>_.affects.length>0),D.inlineRule.decls.length===0&&(D.inlineRule=null)),D.matchedRules=D.matchedRules.map(_=>({..._,decls:_.decls.map(F=>({...F,affects:F.affects.filter(Nn)})).filter(F=>F.affects.length>0)})).filter(_=>_.decls.length>0),!(!D.inlineRule&&D.matchedRules.length===0)&&v.push({ancestor:C,label:Er(C),collected:{...D,candidates:H},overrides:y})}const x=new Set;for(const C of S)if(!b.winners.has(C))for(const M of v){const N=M.overrides.winners.get(C);if(N){x.add(N.id);break}}for(const C of v){if(C.collected.inlineRule)for(const M of C.collected.inlineRule.decls)M.status=x.has(M.id)?"active":"overridden";for(const M of C.collected.matchedRules)for(const N of M.decls)N.status=x.has(N.id)?"active":"overridden"}const k=[];k.push({kind:"inline",title:"element.style",rules:d.inlineRule?[d.inlineRule]:[]}),k.push({kind:"matched",title:"Matched CSS Rules",rules:d.matchedRules});for(const C of v){const M=[];C.collected.inlineRule&&M.push(C.collected.inlineRule),M.push(...C.collected.matchedRules),k.push({kind:"inherited",title:`Inherited from ${C.label}`,inheritedFrom:{label:C.label},rules:M})}let X=0,T=0;const E=new Set;for(const C of c)E.add(C.rootId),X+=C.stats.styleSheets,T+=C.stats.rulesScanned;const g=Array.from(new Set([...n,...d.warnings]));return{target:{label:Er(e),root:f instanceof ShadowRoot?"shadow":"document"},warnings:g,stats:{roots:E.size,styleSheets:X,rulesScanned:T,matchedRules:d.stats.matchedRules},sections:k}}function ef(e){return e?`(${e[0]}, ${e[1]}, ${e[2]}, ${e[3]})`:""}function ls(e){try{const t=e.classList;if(t&&typeof t[Symbol.iterator]=="function")return Array.from(t).filter(Boolean)}catch{}try{return(e.getAttribute("class")??"").split(/\s+/).map(n=>n.trim()).filter(Boolean)}catch{return[]}}function tf(e,t){const n=new Set,o=[];for(const i of t??[]){const s=String(i??"").trim();s&&(n.has(s)||(n.add(s),o.push(s)))}const r=o.join(" ").trim();try{r?e.setAttribute("class",r):e.removeAttribute("class")}catch{}}function nf(e){const t=String(e??"");let n="";for(let o=0;o<t.length;o++){const r=t[o];if(r!=="\\"){n+=r;continue}if(o>=t.length-1)break;let i=o+1,s="";for(;i<t.length&&s.length<6&&/[0-9a-fA-F]/.test(t[i]);)s+=t[i],i+=1;if(s.length>0){const l=Number.parseInt(s,16);if(Number.isFinite(l)&&l>=0&&l<=1114111){n+=String.fromCodePoint(l),i<t.length&&/\s/.test(t[i])&&(i+=1),o=i-1;continue}}n+=t[i]??"",o=i}return n}function of(e,t){for(let n=t;n<e.length;n++){const o=e[n];if(o==="\\"){const r=n+1;if(r>=e.length)return e.length;if(/[0-9a-fA-F]/.test(e[r])){let i=r,s=0;for(;i<e.length&&s<6&&/[0-9a-fA-F]/.test(e[i]);)i+=1,s+=1;i<e.length&&/\s/.test(e[i])&&(i+=1),n=i-1}else n=r;continue}if(/\s/.test(o)||o==="."||o==="#"||o===":"||o==="["||o==="]"||o==="("||o===")"||o===","||o===">"||o==="+"||o==="~"||o==="|")return n}return e.length}function rf(e){const t=[],n=String(e??"");let o=0,r=null;for(let i=0;i<n.length;i++){const s=n[i];if(r){if(s==="\\"){i+=1;continue}s===r&&(r=null);continue}if(s==='"'||s==="'"){r=s;continue}if(s==="["){o+=1;continue}if(s==="]"){o=Math.max(0,o-1);continue}if(o>0||s!==".")continue;const l=i+1;if(l>=n.length)continue;const a=of(n,l),c=n.slice(l,a),u=nf(c).trim();u&&t.push(u),i=a-1}return t}function sf(e){const t=[],n=new Set;for(const o of e.sections)for(const r of o.rules){const i=r.matchedSelector??r.selector;for(const s of rf(i))if(s&&!n.has(s)&&(n.add(s),t.push(s),t.length>=Ld))return t}return t}function Da(e){return e.trim().startsWith("--")}const cs=new Set(["*","html","body",":root",":where(*)",":is(*)"]);function af(e){const t=e.trim().toLowerCase();return cs.has(t)?!0:t.split(/\s*,\s*/).every(o=>o.split(/\s+/).filter(Boolean).every(i=>cs.has(i)||i===">"||i==="+"||i==="~"))}function Pa(e){if(Array.isArray(e.affects)){const t=e.affects;if(t&&t.length>0)return t}return[e.name]}function lf(e){const t=new Set;for(const n of e.sections)for(const o of n.rules)for(const r of o.decls)if(r.status==="active"&&!Da(r.name))for(const i of Pa(r)){const s=String(i??"").trim();s&&t.add(s)}return Array.from(t)}function cf(e,t){if(e.status!=="active"||!t.computedStyle)return!1;const n=Pa(e);let o=!1;for(const r of n){const i=String(r??"").trim();if(!i)continue;let s="";try{s=String(t.computedStyle.getPropertyValue(i)??"").trim()}catch{s=""}const l=t.defaults.getBaselineValue(t.tagName,i);if((s||l)&&(o=!0),s!==l)return!1}return o}function Fa(e,t){return!(Da(e.name)||cf(e,t))}function $a(e,t){if(!af(e))return!1;const n=t.toLowerCase();return!(n==="html"||n==="body")}function uf(e,t,n){const o=e.matchedSelector??e.selector;if(e.origin==="rule"&&$a(o,n.tagName))return null;const r=e.decls.filter(c=>Fa(c,n));if(r.length===0)return null;const i=document.createElement("div");i.className="we-css-rule",i.dataset.ruleId=e.id,i.dataset.origin=e.origin;const s=document.createElement("div");s.className="we-css-rule-header";const l=document.createElement("span");if(l.className="we-css-rule-selector",l.textContent=e.matchedSelector??e.selector,l.title=e.selector,s.append(l),e.source){const c=document.createElement("span");c.className="we-css-rule-source",c.textContent=e.source.label,e.source.url&&(c.title=e.source.url),s.append(c)}if(e.origin==="rule"&&e.specificity){const c=document.createElement("span");c.className="we-css-rule-spec",c.textContent=ef(e.specificity),c.title="ä¼˜å…ˆçº§ (å†…è”, ID, ç±», ç±»å‹)",s.append(c)}i.append(s);const a=document.createElement("div");a.className="we-css-decls";for(const c of r){const u=df(c);a.append(u)}return i.append(a),i}function df(e){const t=document.createElement("div");t.className="we-css-decl",t.dataset.status=e.status;const n=document.createElement("span");n.className="we-css-decl-name",n.textContent=e.name;const o=document.createElement("span");o.className="we-css-decl-colon",o.textContent=": ";const r=document.createElement("span");r.className="we-css-decl-value-container";const i=document.createElement("span");if(i.className="we-css-decl-value",i.textContent=e.value,r.append(i),e.important){const l=document.createElement("span");l.className="we-css-decl-important",l.textContent="!important",r.append(l)}const s=document.createElement("span");return s.className="we-css-decl-semi",s.textContent=";",t.append(n,o,r,s),t}function ff(e,t){const n=e.matchedSelector??e.selector;return e.origin==="rule"&&$a(n,t.tagName)?!1:e.decls.some(o=>Fa(o,t))}function Oa(e,t){return e.rules.some(n=>ff(n,t))}function pf(e,t,n){if(!Oa(e,n))return null;const o=document.createElement("div");if(o.className="we-css-section",o.dataset.kind=e.kind,e.kind==="inherited"){const i=document.createElement("div");i.className="we-css-section-header";const s=document.createElement("span");s.className="we-css-section-title",s.textContent=e.title,i.append(s),o.append(i)}const r=document.createElement("div");r.className="we-css-section-rules";for(const i of e.rules){const s=uf(i,t,n);s&&r.append(s)}return r.childElementCount===0?null:(o.append(r),o)}function mf(e){const{container:t,transactionManager:n,onClassChange:o}=e,r=new Oe,i=Fd();r.add(()=>i.dispose());let s=null,l=null,a=[],c=null,u=!1,p=!1;const f=document.createElement("div");f.className="we-css-panel";const h=document.createElement("div");h.className="we-css-class-editor-mount";const d=document.createElement("div");d.className="we-css-info",d.hidden=!0;const b=document.createElement("div");b.className="we-css-empty",b.textContent="æš‚æ— æ ·å¼";const m=document.createElement("div");m.className="we-css-warnings",m.hidden=!0;const w=document.createElement("div");w.className="we-css-sections",c=Pd({container:h,onClassChange:T=>{const E=s;if(!E||!E.isConnected)return;const g=ls(E);n?n.recordClass(E,g,T):tf(E,T),c==null||c.setClasses(ls(E)),o==null||o(),S()},getSuggestions:()=>a}),f.append(h,d,m,b,w),t.append(f),r.add(()=>f.remove());function I(){if(w.innerHTML="",m.innerHTML="",!l){b.hidden=!1,b.textContent="è¯·é€‰æ‹©å…ƒç´ ä»¥æŸ¥çœ‹æ ·å¼",d.hidden=!0,m.hidden=!0;return}const T=s?s.tagName.toLowerCase():"";let E=null;try{s!=null&&s.isConnected&&(E=window.getComputedStyle(s))}catch{E=null}const g={defaults:i,tagName:T,computedStyle:E};if(E&&T&&i.ensureBaselineValues(T,lf(l)),!l.sections.some(M=>Oa(M,g)))b.hidden=!1,b.textContent="æœªåŒ¹é…åˆ° CSS è§„åˆ™",d.hidden=!0;else{b.hidden=!0;const{stats:M}=l;d.textContent=`åŒ¹é…åˆ° ${M.matchedRules} æ¡è§„åˆ™ï¼ˆ${M.styleSheets} ä¸ªæ ·å¼è¡¨ï¼Œå…±æ‰«æ ${M.rulesScanned} æ¡è§„åˆ™ï¼‰`,d.hidden=!1}if(l.warnings.length>0){m.hidden=!1;for(const M of l.warnings.slice(0,5)){const N=document.createElement("div");N.className="we-css-warning",N.textContent=M,m.append(N)}if(l.warnings.length>5){const M=document.createElement("div");M.className="we-css-warning-more",M.textContent=`...ä»¥åŠå¦å¤– ${l.warnings.length-5} ä¸ªè­¦å‘Š`,m.append(M)}}else m.hidden=!0;for(const M of l.sections){const N=pf(M,r,g);N&&w.append(N)}}function S(){if(!u){p=!0;return}if(!s||!s.isConnected){l=null,a=[],c==null||c.setTarget(null),I();return}l=Qd(s,{maxInheritanceDepth:0}),a=l?sf(l):[],I(),p=!1}function v(T){r.isDisposed||(s=T,c==null||c.setTarget(T),S())}function x(){r.isDisposed||(c==null||c.refresh(),S())}function k(T){r.isDisposed||(u=T,T&&p&&S())}function X(){s=null,l=null,c==null||c.dispose(),c=null,a=[],u=!1,p=!1,r.dispose()}return I(),{setTarget:v,refresh:x,setVisible:k,dispose:X}}const Fo=15,hf=40;function _t(e){return e&&typeof e=="object"?e:null}function Mt(e){if(typeof e=="string")return e.trim()||void 0}function fo(e){if(typeof e=="number"&&Number.isFinite(e))return e;const t=Number.parseInt(String(e),10);return Number.isFinite(t)?t:void 0}function po(e){if(!e)return;if(typeof e=="function"){const n=e;return Mt(n.displayName)??Mt(n.name)}const t=_t(e);if(t)return Mt(t.displayName)??Mt(t.name)}function gf(e){let t=e;for(let n=0;n<hf&&t;n++){const o=_t(t);if(!o)break;const r=_t(o._debugSource),i=Mt(r==null?void 0:r.fileName);if(i){const c=po(o.elementType)??po(o.type);return{file:i,line:fo(r==null?void 0:r.lineNumber),column:fo(r==null?void 0:r.columnNumber),componentName:c}}const s=_t(o._debugOwner),l=_t(s==null?void 0:s._debugSource),a=Mt(l==null?void 0:l.fileName);if(a){const c=po(s==null?void 0:s.elementType)??po(s==null?void 0:s.type);return{file:a,line:fo(l==null?void 0:l.lineNumber),column:fo(l==null?void 0:l.columnNumber),componentName:c}}t=o.return}return null}function bf(e){try{let t=e;for(let n=0;n<Fo&&t;n++){const o=t;for(const r of Object.keys(o))if(r.startsWith("__reactFiber$")||r.startsWith("__reactInternalInstance$")){const i=gf(o[r]);if(i)return i}t=t.parentElement}}catch{}return null}function wf(e){if(typeof e!="string")return null;const t=e.trim();if(!t)return null;const n=t.match(/:(\d+)(?::(\d+))?$/);if(!n)return{file:t};const o=t.slice(0,n.index).trim();if(!o)return null;const r=Number.parseInt(n[1],10),i=n[2]?Number.parseInt(n[2],10):void 0;return{file:o,line:Number.isFinite(r)&&r>0?r:void 0,column:i!==void 0&&Number.isFinite(i)&&i>0?i:void 0}}function xf(e){try{let t=e;for(let n=0;n<Fo&&t;n++){if(typeof t.getAttribute=="function"){const o=t.getAttribute("data-v-inspector");if(o){const r=wf(o);if(r!=null&&r.file)return r}}t=t.parentElement}}catch{}return null}function yf(e){try{const t=xf(e);if(t!=null&&t.file){let o,r=e;for(let i=0;i<Fo&&r;i++){const l=_t(r.__vueParentComponent),a=_t(l==null?void 0:l.type);if(o=Mt(a==null?void 0:a.name),o)break;r=r.parentElement}return{...t,componentName:o}}let n=e;for(let o=0;o<Fo&&n;o++){const i=_t(n.__vueParentComponent),s=_t(i==null?void 0:i.type),l=Mt(s==null?void 0:s.__file);if(l)return{file:l,componentName:Mt(s==null?void 0:s.name)};n=n.parentElement}}catch{}return null}function vf(e){const t=bf(e);if(t)return t;const n=yf(e);return n||null}const Hr=5,Ef=32,Sf=8,kf=["data-testid","data-test-id","data-test","data-qa","data-cy","name","title","alt","aria-label"],Cf=3,Af=["data-testid","data-test-id","data-test","data-qa","data-cy"],Tf=24,Va=20;function Et(e){if(typeof CSS<"u"&&typeof CSS.escape=="function")return CSS.escape(e);const t=String(e),n=t.length;if(n===0)return"";let o="";const r=t.charCodeAt(0);for(let i=0;i<n;i++){const s=t.charCodeAt(i);if(s===0){o+="ï¿½";continue}if(s>=1&&s<=31||s===127||i===0&&s>=48&&s<=57||i===1&&s>=48&&s<=57&&r===45){o+=`\\${s.toString(16)} `;continue}if(i===0&&n===1&&s===45){o+=`\\${t.charAt(i)}`;continue}s>=48&&s<=57||s>=65&&s<=90||s>=97&&s<=122||s===45||s===95?o+=t.charAt(i):o+=`\\${t.charAt(i)}`}return o}function ni(e){var n;const t=(n=e.getRootNode)==null?void 0:n.call(e);return t instanceof ShadowRoot?t:document}function Mo(e,t){try{return e.querySelector(t)}catch{return null}}function ut(e,t){try{return e.querySelectorAll(t).length===1}catch{return!1}}function Ba(e,t){var r;const n=(r=e.id)==null?void 0:r.trim();if(!n)return null;const o=`#${Et(n)}`;return ut(t,o)?o:null}function Nf(e,t,n){var i;const o=[];if(n<=0)return o;const r=e.tagName.toLowerCase();for(const s of kf){if(o.length>=n)break;const l=(i=e.getAttribute(s))==null?void 0:i.trim();if(!l)continue;const a=`[${s}="${Et(l)}"]`;if(ut(t,a)){o.push(a);continue}const c=`${r}${a}`;ut(t,c)&&o.push(c)}return o}function Rf(e,t,n){const o=[];if(n<=0)return o;const r=e.tagName.toLowerCase(),i=Array.from(e.classList).filter(a=>a&&/^[a-zA-Z_][a-zA-Z0-9_-]*$/.test(a)).slice(0,Tf);if(i.length===0)return o;const s=new Map;for(const a of i){if(o.length>=n)return o;const c=`.${Et(a)}`,u=ut(t,c);s.set(a,u),u&&o.push(c)}for(const a of i){if(o.length>=n)return o;if(s.get(a)===!0)continue;const c=`${r}.${Et(a)}`;ut(t,c)&&o.push(c)}const l=Math.min(i.length,Cf);for(let a=0;a<l;a++)for(let c=a+1;c<l;c++){if(o.length>=n)return o;const u=i[a],p=i[c],f=`.${Et(u)}.${Et(p)}`;if(ut(t,f)){o.push(f);continue}const h=`${r}${f}`;ut(t,h)&&o.push(h)}if(l>=3&&o.length<n){const a=`.${Et(i[0])}.${Et(i[1])}.${Et(i[2])}`;if(ut(t,a))o.push(a);else{const c=`${r}${a}`;o.length<n&&ut(t,c)&&o.push(c)}}return o}function If(e,t){const n=[];let o=e;const r=t instanceof Document;for(;o&&o.nodeType===Node.ELEMENT_NODE;){const s=o.tagName.toLowerCase();if(r&&s==="body")break;let l=s;const a=o.parentElement,c=o.parentNode;let u;a?u=Array.from(a.children):c instanceof ShadowRoot||c instanceof Document?u=Array.from(c.children):u=[];const p=u.filter(f=>f.tagName===o.tagName);if(p.length>1){const f=p.indexOf(o)+1;l+=`:nth-of-type(${f})`}if(n.unshift(l),o=a,!a&&c===t)break}const i=n.join(" > ");return r?`body > ${i}`:i||"*"}function _f(e,t,n){const o=[];let r=t;for(let i=0;r&&r!==e&&i<Va;i++){let l=r.tagName.toLowerCase();const a=r.parentElement,c=r.parentNode;let u;a?u=Array.from(a.children):c instanceof ShadowRoot||c instanceof Document?u=Array.from(c.children):u=[];const p=u.filter(f=>f.tagName===r.tagName);if(p.length>1){const f=p.indexOf(r)+1;l+=`:nth-of-type(${f})`}if(o.unshift(l),!a){if(c===n)break;break}r=a}return r!==e?null:o.join(" > ")||null}function Mf(e,t){var r;const n=Ba(e,t);if(n)return n;const o=e.tagName.toLowerCase();for(const i of Af){const s=(r=e.getAttribute(i))==null?void 0:r.trim();if(!s)continue;const l=`[${i}="${Et(s)}"]`;if(ut(t,l))return l;const a=`${o}${l}`;if(ut(t,a))return a}return null}function Lf(e,t){let n=e.parentElement;for(let o=0;n&&o<Va;o++){const r=n.tagName.toUpperCase();if(r==="HTML"||r==="BODY")break;const i=Mf(n,t);if(i){const s=_f(n,e,t);if(!s){n=n.parentElement;continue}const l=`${i} ${s}`;if(!ut(t,l)){n=n.parentElement;continue}if(Mo(t,l)===e)return l}n=n.parentElement}return null}function Df(e){var o;const t=[];let n=e;for(;;){const r=(o=n.getRootNode)==null?void 0:o.call(n);if(!(r instanceof ShadowRoot))break;const i=r.host;if(!(i instanceof Element))break;const s=ni(i),l=$f(i,{root:s});if(!l)break;t.unshift(l),n=i}return t.length>0?t:void 0}function Pf(e,t){return e.replace(/\s+/g," ").trim().slice(0,t)}function Ha(e){var s,l;const t=[],n=((s=e.tagName)==null?void 0:s.toLowerCase())??"unknown";t.push(n);const o=(l=e.id)==null?void 0:l.trim();o&&t.push(`id=${o}`);const r=Array.from(e.classList).slice(0,Sf);r.length>0&&t.push(`class=${r.join(".")}`);const i=Pf(e.textContent??"",Ef);return i&&t.push(`text=${i}`),t.join("|")}function Ff(e){const t=[];let n=e;for(;n;){const o=n.parentElement;if(o){const s=Array.from(o.children).indexOf(n);s>=0&&t.unshift(s),n=o;continue}const r=n.parentNode;if(r instanceof ShadowRoot||r instanceof Document){const s=Array.from(r.children).indexOf(n);s>=0&&t.unshift(s)}break}return t}function za(e,t={}){const n=t.root??ni(e),o=Math.max(1,t.maxCandidates??Hr),r=[],i=(c,u=o)=>{if(!c||r.length>=u)return;const p=c.trim();!p||r.includes(p)||r.push(p)},s=o>=Hr?Lf(e,n):null,l=1+(s?1:0),a=Math.max(1,o-l);i(Ba(e,n),a);for(const c of Nf(e,n,a-r.length))i(c,a);for(const c of Rf(e,n,a-r.length))i(c,a);return i(If(e,n)),i(s),r.slice(0,o)}function $f(e,t={}){return za(e,t)[0]??""}function je(e){const t=ni(e),n=vf(e)??void 0;return{selectors:za(e,{root:t,maxCandidates:Hr}),fingerprint:Ha(e),path:Ff(e),shadowHostChain:Df(e),debugSource:n}}function us(e,t){try{return e.querySelectorAll(t).length===1}catch{return!1}}function Of(e,t){const n=Ha(e),o=t.split("|"),r=n.split("|");if(o[0]!==r[0])return!1;const i=o.find(l=>l.startsWith("id=")),s=r.find(l=>l.startsWith("id="));return!(i&&i!==s)}function He(e,t=document){var r,i;let n=t;if((r=e.frameChain)!=null&&r.length)for(const s of e.frameChain){const l=Mo(n,s);if(!(l instanceof HTMLIFrameElement))return null;const a=l.contentDocument;if(!a)return null;n=a}let o=n;if((i=e.shadowHostChain)!=null&&i.length)for(const s of e.shadowHostChain){if(!us(o,s))return null;const l=Mo(o,s);if(!l)return null;const a=l.shadowRoot;if(!a)return null;o=a}for(const s of e.selectors){if(!us(o,s))continue;const l=Mo(o,s);if(l&&!(e.fingerprint&&!Of(l,e.fingerprint)))return l}return null}function Lt(e){var r,i;const t=e.selectors.join("|"),n=((r=e.shadowHostChain)==null?void 0:r.join(">"))??"";return`frame:${((i=e.frameChain)==null?void 0:i.join(">"))??""}|shadow:${n}|sel:${t}`}const Vf=250,Bf=new Set(["__proto__","constructor","prototype","__defineGetter__","__defineSetter__","__lookupGetter__","__lookupSetter__"]);function Rn(e){return Bf.has(String(e??"").trim())}function Hf(e,t){if(e==="react"){const n=t==null?void 0:t.trim();return n?`React ${n}`:"React"}if(e==="vue"){const n=t==null?void 0:t.trim();return n?`Vue ${n}`:"Vue"}return"æœªçŸ¥"}function zf(e){return e?String(e):""}function ds(e){switch(e.kind){case"null":return"null";case"undefined":return"undefined";case"boolean":return e.value?"true":"false";case"number":return e.special?e.special:typeof e.value=="number"?String(e.value):"NaN";case"string":return e.truncated?`"${e.value}â€¦"`:JSON.stringify(e.value);case"bigint":return`${e.value}n`;case"symbol":return`Symbol(${e.description})`;case"function":return`Æ’ ${e.name??"(åŒ¿å)"}`;case"react_element":return e.display;case"dom_element":{const t=String(e.tagName??"").toLowerCase()||"å…ƒç´ ",n=e.id?`#${e.id}`:"",o=e.className?`.${String(e.className).split(/\s+/).filter(Boolean).slice(0,2).join(".")}`:"";return`<${t}${n}${o}>`}case"date":return e.value;case"regexp":return`/${e.source}/${e.flags}`;case"error":return`${e.name}: ${e.message}`;case"circular":return`[Circular #${e.refId}]`;case"max_depth":return e.preview;case"array":return`Array(${e.length})`;case"object":return`${e.name??"Object"} {â€¦}`;case"map":return`Map(${e.size})`;case"set":return`Set(${e.size})`;case"unknown":return e.preview;default:return String(e.kind??"æœªçŸ¥")}}function Gf(e){return e.special||typeof e.value!="number"?!1:Number.isFinite(e.value)}function fs(e){const t=e.trim();if(!t)return{ok:!1};if(/^-?\d+\.$/.test(t)){const n=Number(t.slice(0,-1));return Number.isFinite(n)?{ok:!0,value:n}:{ok:!1}}if(/^-?(?:\d+|\d*\.\d+)$/.test(t)){const n=Number(t);return Number.isFinite(n)?{ok:!0,value:n}:{ok:!1}}return{ok:!1}}function mo(e,t){return t?e?{...e,...t,capabilities:t.capabilities??e.capabilities,props:t.props??e.props,meta:{...e.meta??{},...t.meta??{}}}:t:e}function Uf(e,t,n){if(e)return"åŠ è½½ä¸­â€¦";if(!t)return n?`é”™è¯¯ â€¢ ${n}`:"ç­‰å¾…é€‰æ‹©å…ƒç´ â€¦";const o=[],r=t.capabilities;r?(o.push(`è¯»å–: ${r.canRead?"æ˜¯":"å¦"}`),o.push(`å†™å…¥: ${r.canWrite?"æ˜¯":"å¦"}`)):(o.push("è¯»å–: æœªçŸ¥"),o.push("å†™å…¥: æœªçŸ¥"));const i=zf(t.hookStatus);return i&&o.push(`hook: ${i}`),t.needsRefresh&&o.push("éœ€è¦åˆ·æ–°"),n&&o.push("é”™è¯¯"),o.join(" â€¢ ")}function Sr(e){var t;return!!((t=e==null?void 0:e.capabilities)!=null&&t.canWrite)&&!(e!=null&&e.needsRefresh)}function Xf(e){var t;return!!((t=e==null?void 0:e.capabilities)!=null&&t.canRead)}function ps(e,t){const n=e==null?void 0:e.props;return!n||!Array.isArray(n.entries)?null:n.entries.find(o=>o.key===t)??null}function ms(e,t){if(t.classList.remove("we-props-input--invalid"),e.value.kind==="string"){t.value=e.value.value??"";return}if(e.value.kind==="number"){typeof e.value.value=="number"&&Number.isFinite(e.value.value)?t.value=String(e.value.value):e.value.special?t.value=e.value.special:t.value="";return}e.value.kind==="boolean"&&(t.checked=!!e.value.value)}function jf(e,t,n){var r;if(!((r=e==null?void 0:e.props)!=null&&r.entries))return;const o=e.props.entries.find(i=>i.key===t);if(o){if(typeof n=="string"){o.value={kind:"string",value:n},o.editable=!0;return}if(typeof n=="number"){o.value={kind:"number",value:n},o.editable=!0;return}o.value={kind:"boolean",value:n},o.editable=!0}}function Wf(e){const{container:t,propsBridge:n}=e,o=new Oe,r=document.createElement("div");r.className="we-tooltip",r.hidden=!0;const i=t.getRootNode();i instanceof ShadowRoot?i.appendChild(r):document.body.appendChild(r),o.add(()=>r.remove());function s(ie){const Q=ie.getAttribute("data-tip");if(!Q){r.hidden=!0;return}const P=ie.getBoundingClientRect();r.textContent=Q,r.style.left=`${P.left+P.width/2}px`,r.style.top=`${P.bottom+4}px`,r.hidden=!1}function l(){r.hidden=!0}let a=null,c=null,u=!1,p=!1,f=!1,h=0,d=null,b=null;const m=new Map,w=document.createElement("div");w.className="we-props-panel";const I=document.createElement("div");I.className="we-props-meta";const S=document.createElement("div");S.className="we-props-meta-title";const v=document.createElement("div");v.className="we-props-title-left";const x=document.createElement("div");x.className="we-props-component",x.textContent="å±æ€§";const k=document.createElement("span");k.className="we-props-badge",k.textContent="æœªçŸ¥",v.append(x,k);const X=document.createElement("div");X.className="we-props-title-actions";const T=document.createElement("button");T.type="button",T.className="we-props-action-btn",T.dataset.tip="åˆ·æ–°",T.setAttribute("aria-label","åˆ·æ–°å±æ€§"),T.innerHTML=`<svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M11.5 7C11.5 9.48528 9.48528 11.5 7 11.5C4.51472 11.5 2.5 9.48528 2.5 7C2.5 4.51472 4.51472 2.5 7 2.5C8.5 2.5 9.83 3.25 10.6 4.4M10.6 2V4.4H8.2" stroke="currentColor" stroke-width="1.3" stroke-linecap="round" stroke-linejoin="round"/>
  </svg>`;const E=document.createElement("button");E.type="button",E.className="we-props-action-btn",E.dataset.tip="é‡ç½®",E.setAttribute("aria-label","é‡ç½®å±æ€§ä¿®æ”¹"),E.innerHTML=`<svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M3 5.5H8.5C10.1569 5.5 11.5 6.84315 11.5 8.5C11.5 10.1569 10.1569 11.5 8.5 11.5H7M3 5.5L5.5 3M3 5.5L5.5 8" stroke="currentColor" stroke-width="1.3" stroke-linecap="round" stroke-linejoin="round"/>
  </svg>`,X.append(T,E),S.append(v,X);const g=document.createElement("div");g.className="we-props-status";const C=document.createElement("div");C.className="we-props-warning",C.hidden=!0;const M=document.createElement("div");M.className="we-props-error",M.hidden=!0,I.append(S,g,C,M);const N=document.createElement("div");N.className="we-props-list";const D=document.createElement("div");D.className="we-props-empty",D.textContent="è¯·é€‰æ‹©å…ƒç´ ä»¥æŸ¥çœ‹å±æ€§ã€‚";const H=document.createElement("div");H.className="we-props-rows",N.append(D,H),w.append(I,N),t.append(w),o.add(()=>w.remove());function y(){for(const[,ie]of m)clearTimeout(ie.timeoutId);m.clear()}function _(){if(m.size===0)return;const ie=[...m.keys()];for(const Q of ie){const P=m.get(Q);P&&(clearTimeout(P.timeoutId),m.delete(Q),Y(Q,P.value))}}o.add(y);function F(ie){const Q=m.get(ie);Q&&(clearTimeout(Q.timeoutId),m.delete(ie))}function G(ie){const Q=m.get(ie);Q&&(clearTimeout(Q.timeoutId),m.delete(ie),Y(ie,Q.value))}function $(ie,Q){F(ie);const P=window.setTimeout(()=>{m.delete(ie),Y(ie,Q)},Vf);m.set(ie,{timeoutId:P,value:Q})}function W(){var z;const ie=!!(a&&a.isConnected),Q=d==null?void 0:d.framework,P=d==null?void 0:d.frameworkVersion,ae=d==null?void 0:d.componentName;x.textContent=ae||"å±æ€§",k.textContent=Hf(Q,P),g.textContent=ie?Uf(f,d,b):"è¯·é€‰æ‹©å…ƒç´ ä»¥æŸ¥çœ‹å±æ€§ã€‚",C.hidden=!0,C.textContent="",ie&&(d!=null&&d.needsRefresh?(C.hidden=!1,C.textContent="éœ€è¦åˆ·æ–°é¡µé¢ä»¥å¯ç”¨å®Œæ•´çš„å±æ€§æŸ¥çœ‹ä¸ç¼–è¾‘ã€‚"):(d==null?void 0:d.hookStatus)==="RENDERERS_NO_EDITING"?(C.hidden=!1,C.textContent="ç¼–è¾‘ä¸å¯ç”¨ï¼ˆå¯èƒ½æ˜¯æœªå¯ç”¨ overrideProps çš„ç”Ÿäº§æ„å»ºï¼‰ã€‚"):(z=d==null?void 0:d.props)!=null&&z.truncated&&(C.hidden=!1,C.textContent="å±æ€§åˆ—è¡¨å·²è¢«æˆªæ–­ã€‚")),M.hidden=!b,M.textContent=b??"";const xe=d==null?void 0:d.hookStatus,ve=xe==="HOOK_MISSING"||xe==="HOOK_PRESENT_NO_RENDERERS",Ae=(d==null?void 0:d.needsRefresh)&&ve;T.dataset.tip=Ae?"å¯ç”¨å¹¶é‡æ–°åŠ è½½":"åˆ·æ–°",T.disabled=!ie||f,E.disabled=!ie||f||!Sr(d)}function J(){H.innerHTML="";const ie=!!(a&&a.isConnected),Q=d;if(!ie){D.hidden=!1,D.classList.remove("we-loading"),D.textContent="è¯·é€‰æ‹©å…ƒç´ ä»¥æŸ¥çœ‹å±æ€§ã€‚";return}if(f){D.hidden=!1,D.classList.add("we-loading"),D.innerHTML=`<svg width="14" height="14" viewBox="0 0 14 14" fill="none" style="animation: we-spin 0.8s linear infinite;">
        <circle cx="7" cy="7" r="5.5" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-dasharray="20 14" />
      </svg><span>æ­£åœ¨åŠ è½½å±æ€§â€¦</span>`;return}if(D.classList.remove("we-loading"),!Xf(Q)){D.hidden=!1;const fe=Q==null?void 0:Q.hookStatus;Q!=null&&Q.needsRefresh||fe==="HOOK_MISSING"||fe==="HOOK_PRESENT_NO_RENDERERS"?D.textContent="å±æ€§æŸ¥çœ‹æœªå°±ç»ªã€‚è¯·åœ¨å¼€å‘æ¨¡å¼ä¸‹åˆ·æ–°é¡µé¢ã€‚":fe==="RENDERERS_NO_EDITING"?D.textContent="å½“å‰æ„å»ºä¸æ”¯æŒå±æ€§æŸ¥çœ‹/ç¼–è¾‘ã€‚":D.textContent="æ­¤å…ƒç´ ä¸æ”¯æŒå±æ€§æŸ¥çœ‹ã€‚";return}const ae=Q==null?void 0:Q.props;if(!ae||!Array.isArray(ae.entries)||ae.entries.length===0){D.hidden=!1,D.textContent=(Q==null?void 0:Q.framework)==="vue"?"æœªå‘ç° Props æˆ– Attrsã€‚":"æœªå‘ç° Propsã€‚";return}D.hidden=!0;const ve=!Sr(Q)||f,Ae=(Q==null?void 0:Q.framework)==="vue",z=ae.entries,se=Ae&&z.some(fe=>fe.source==="attrs")?[{title:"å±æ€§ (Props)",entries:z.filter(fe=>fe.source!=="attrs")},{title:"å±æ€§ (Attrs)",entries:z.filter(fe=>fe.source==="attrs")}].filter(fe=>fe.entries.length>0):[{title:"",entries:z}];for(const fe of se){if(fe.title){const re=document.createElement("div");re.className="we-props-group",re.textContent=fe.title,H.append(re)}for(const re of fe.entries){const O=document.createElement("div");O.className="we-props-row";const R=document.createElement("div");R.className="we-props-key",R.textContent=re.key;const V=document.createElement("div");V.className="we-props-value";const j=Rn(re.key),te=!!re.editable&&!j,ne=(Array.isArray(re.enumValues)?re.enumValues:[]).filter(Z=>typeof Z=="string"&&Z.trim().length>0);if(te&&re.value.kind==="string"&&ne.length>0){const Z=document.createElement("select");Z.className="we-select we-props-input",Z.disabled=ve,Z.dataset.propKey=re.key,Z.dataset.propKind="enum",Z.setAttribute("aria-label",`é€‰æ‹©å±æ€§ ${re.key}`);const be=re.value.kind==="string"?re.value.value??"":"",oe=new Set;if(be&&!ne.includes(be)){const Ce=document.createElement("option");Ce.value=be,Ce.textContent=`${be} (å½“å‰å€¼)`,Z.append(Ce),oe.add(be)}for(const Ce of ne){if(oe.has(Ce))continue;oe.add(Ce);const Te=document.createElement("option");Te.value=Ce,Te.textContent=Ce,Z.append(Te)}be&&oe.has(be)&&(Z.value=be),V.append(Z)}else if(te&&re.value.kind==="boolean"){const Z=document.createElement("label");Z.className="we-props-bool";const be=document.createElement("input");be.type="checkbox",be.className="we-props-checkbox",be.checked=!!re.value.value,be.disabled=ve,be.dataset.propKey=re.key,be.dataset.propKind="boolean",be.setAttribute("aria-label",`åˆ‡æ¢å±æ€§ ${re.key}`);const oe=document.createElement("span");oe.textContent=be.checked?"true":"false",oe.dataset.weBoolText="1",Z.append(be,oe),V.append(Z)}else if(te&&re.value.kind==="string"){const Z=document.createElement("input");Z.type="text",Z.className="we-input we-props-input",Z.autocomplete="off",Z.spellcheck=!1,Z.value=re.value.value??"",Z.disabled=ve,Z.dataset.propKey=re.key,Z.dataset.propKind="string",Z.setAttribute("aria-label",`ç¼–è¾‘å±æ€§ ${re.key}`),V.append(Z)}else if(te&&re.value.kind==="number"&&Gf(re.value)){const Z=document.createElement("input");Z.type="text",Z.inputMode="decimal",Z.className="we-input we-props-input",Z.autocomplete="off",Z.spellcheck=!1,Z.value=String(re.value.value),Z.disabled=ve,Z.dataset.propKey=re.key,Z.dataset.propKind="number",Z.setAttribute("aria-label",`ç¼–è¾‘å±æ€§ ${re.key}`),V.append(Z)}else V.classList.add("we-props-value--readonly"),V.textContent=j?`${ds(re.value)} (å·²é˜»æ­¢)`:ds(re.value);O.append(R,V),H.append(O)}}}function A(){W(),J()}async function L(){var ae,xe;if(o.isDisposed)return;if(!u){p=!0;return}const ie=a,Q=c;if(!ie||!ie.isConnected||!Q){d=null,b=null,f=!1,p=!1,A();return}const P=h;f=!0,b=null,A();try{const ve=await n.probe(Q);if(o.isDisposed||P!==h)return;if(d=mo(d,ve.data),ve.ok||(b=ve.error??"å±æ€§æ¢æµ‹å¤±è´¥"),!!((xe=(ae=ve.data)==null?void 0:ae.capabilities)!=null&&xe.canRead)){const z=await n.read(Q);if(o.isDisposed||P!==h)return;d=mo(d,z.data),z.ok||(b=z.error??"å±æ€§è¯»å–å¤±è´¥")}}catch(ve){if(o.isDisposed||P!==h)return;b=ve instanceof Error?ve.message:String(ve)}finally{!o.isDisposed&&P===h&&(f=!1,p=!1,A())}}async function Y(ie,Q){if(o.isDisposed)return;const P=a,ae=c;if(!P||!P.isConnected||!ae)return;if(Rn(ie)){b="å·²é˜»æ­¢çš„å±æ€§é”®ï¼ˆå®‰å…¨åŸå› ï¼‰",W();return}const xe=h;if(!Sr(d)){b="æ­¤å…ƒç´ ä¸æ”¯æŒå±æ€§ç¼–è¾‘ã€‚",W();return}try{const Ae=await n.write(ae,[ie],Q);if(o.isDisposed||xe!==h)return;if(d=mo(d,Ae.data),!Ae.ok){b=Ae.error??"å±æ€§å†™å…¥å¤±è´¥",W();return}b=null,jf(d,ie,Q),W()}catch(Ae){if(o.isDisposed||xe!==h)return;b=Ae instanceof Error?Ae.message:String(Ae),W()}}async function B(){if(o.isDisposed)return;const ie=a,Q=c;if(!ie||!ie.isConnected||!Q)return;const P=h;y(),f=!0,b=null,A();try{const ae=await n.reset(Q);if(o.isDisposed||P!==h)return;d=mo(d,ae.data),ae.ok||(b=ae.error??"å±æ€§é‡ç½®å¤±è´¥")}catch(ae){if(o.isDisposed||P!==h)return;b=ae instanceof Error?ae.message:String(ae)}finally{!o.isDisposed&&P===h&&(f=!1,W(),L())}}const K=ie=>{o.listen(ie,"mouseenter",()=>s(ie)),o.listen(ie,"mouseleave",l)};K(T),K(E),o.listen(T,"click",ie=>{ie.preventDefault(),y(),L()}),o.listen(E,"click",ie=>{ie.preventDefault(),B()}),o.listen(H,"input",ie=>{const Q=ie.target;if(!(Q instanceof HTMLInputElement)||Q.disabled||Q.type==="checkbox")return;const P=Q.dataset.propKey??"",ae=Q.dataset.propKind??"";if(!(!P||!ae||Rn(P)||ie.isComposing)){if(ae==="string"){$(P,Q.value);return}if(ae==="number"){const ve=fs(Q.value);if(!Q.value.trim()){F(P),Q.classList.remove("we-props-input--invalid");return}if(!ve.ok){F(P),Q.classList.add("we-props-input--invalid");return}Q.classList.remove("we-props-input--invalid"),$(P,ve.value)}}}),o.listen(H,"change",ie=>{var Ae;const Q=ie.target;if(!Q)return;if(Q instanceof HTMLSelectElement){if(Q.disabled)return;const z=Q.dataset.propKey??"",le=Q.dataset.propKind??"";if(!z||le!=="enum"||Rn(z))return;Y(z,Q.value);return}if(!(Q instanceof HTMLInputElement)||Q.disabled||Q.type!=="checkbox")return;const P=Q.dataset.propKey??"",ae=Q.dataset.propKind??"";if(!P||ae!=="boolean"||Rn(P))return;const xe=Q.closest(".we-props-bool"),ve=(Ae=xe==null?void 0:xe.querySelector)==null?void 0:Ae.call(xe,'span[data-we-bool-text="1"]');ve&&(ve.textContent=Q.checked?"true":"false"),Y(P,Q.checked)}),o.listen(H,"keydown",ie=>{const Q=ie.target;if(!(Q instanceof HTMLInputElement)||Q.disabled)return;const P=Q.dataset.propKey??"",ae=Q.dataset.propKind??"";if(!(!P||!ae)){if(ie.key==="Enter"){if(ie.isComposing)return;ie.preventDefault(),G(P);try{Q.blur()}catch{}return}if(ie.key==="Escape"){ie.preventDefault(),F(P);const xe=ps(d,P);if(!xe)return;ms(xe,Q)}}}),o.listen(H,"focusout",ie=>{const Q=ie.target;if(!(Q instanceof HTMLInputElement)||Q.disabled)return;const P=Q.dataset.propKey??"",ae=Q.dataset.propKind??"";if(P){if(ae==="number"){const xe=fs(Q.value);if(!Q.value.trim()||!xe.ok){F(P),Q.classList.remove("we-props-input--invalid");const ve=ps(d,P);ve&&ms(ve,Q);return}}G(P)}});function ge(ie){o.isDisposed||(_(),h+=1,a=ie&&ie.isConnected?ie:null,c=a?je(a):null,d=null,b=null,f=!1,p=!1,A(),u?L():p=!0)}function we(){o.isDisposed||(y(),L())}function ke(ie){o.isDisposed||(u=ie,ie&&p&&L())}function Se(){a=null,c=null,d=null,b=null,f=!1,p=!1,o.dispose()}return A(),{setTarget:ge,refresh:we,setVisible:ke,dispose:Se}}const Yf=[{id:"spacing",label:"é—´è·",collapsible:!0},{id:"layout",label:"å¸ƒå±€",collapsible:!0},{id:"background",label:"èƒŒæ™¯",collapsible:!0},{id:"typography",label:"æ–‡å­—",collapsible:!0},{id:"border",label:"è¾¹æ¡†",collapsible:!0},{id:"position",label:"å®šä½",collapsible:!0},{id:"size",label:"å°ºå¯¸",collapsible:!0},{id:"appearance",label:"å¤–è§‚",collapsible:!0},{id:"effects",label:"æ•ˆæœ",collapsible:!1}];let qf=0;function kr(e){var i;const t=e.tagName.toLowerCase(),o=(i=e.id)==null?void 0:i.trim();if(o)return`${t}#${o}`;const r=Array.from(e.classList??[]).slice(0,2);return r.length>0?`${t}.${r.join(".")}`:t}function Kf(e,t,n,o){const r=`we_group_${e}_${++qf}`,i=(o==null?void 0:o.collapsible)??!0;let s=!1;const l=document.createElement("section");l.className="we-group",l.dataset.group=e,l.dataset.collapsed="false";const a=document.createElement("div");a.className="we-group-header";const c=document.createElement("span");c.textContent=t;let u;if(i){const m=document.createElement("button");m.type="button",m.className="we-group-toggle",m.setAttribute("aria-expanded","true"),m.setAttribute("aria-controls",r),m.append(c,Xl()),n.listen(m,"click",w=>{w.preventDefault(),b()}),u=m}else{const m=document.createElement("div");m.className="we-group-toggle we-group-toggle--static",m.append(c),u=m}const p=document.createElement("div");p.className="we-group-header-actions",a.append(u,p);const f=document.createElement("div");f.className="we-group-body",f.id=r,l.append(a,f);function h(m){i&&(s=m,l.dataset.collapsed=s?"true":"false",u.setAttribute("aria-expanded",s?"false":"true"))}function d(){return s}function b(){i&&h(!s)}return{root:l,body:f,headerActions:p,setCollapsed:h,isCollapsed:d,toggle:b}}function Zf(e){const t=new Oe;let n=null,o=e.defaultTab??"design";const r=e.showPropsTab??!1,i=e.showDomTab??!1;o==="props"&&!r&&(o="design"),o==="dom"&&!i&&(o="design");let s=!1,l=e.initialPosition??null;const a=new Map,c=[];let u=null,p=null,f=null,h=0,d=0,b=!1,m=!1,w=!1,I=null,S=null,v=null,x=null,k=null,X=null;const T=document.createElement("aside");T.className="we-panel we-prop-panel",T.setAttribute("role","complementary"),T.setAttribute("aria-label","å±æ€§é¢æ¿"),T.dataset.tab=o,T.dataset.empty="true",T.dataset.minimized="false",T.dataset.dragged=l?"true":"false",T.dataset.menuOpen="false";const E=document.createElement("header");E.className="we-header";const g=document.createElement("div");g.className="we-prop-header-left";const C=document.createElement("div");C.className="we-prop-header-right";const M=document.createElement("button");M.type="button",M.className="we-drag-handle",M.setAttribute("aria-label","æ‹–æ‹½å±æ€§é¢æ¿"),M.dataset.tooltip="æ‹–æ‹½",M.append(aa());const N=document.createElement("button");N.type="button",N.className="we-prop-action-btn",N.setAttribute("aria-label","æ’¤é”€"),N.dataset.tooltip="æ’¤é”€";const D=document.createElement("span");D.className="we-prop-count",D.hidden=!0,N.append(la(),D);const H=document.createElement("button");H.type="button",H.className="we-prop-action-btn",H.setAttribute("aria-label","é‡åš"),H.dataset.tooltip="é‡åš";const y=document.createElement("span");y.className="we-prop-count",y.hidden=!0,H.append(ca(),y);const _=document.createElement("div");_.className="we-prop-undo-redo",_.append(N,H);const F=document.createElement("button");F.type="button",F.className="we-icon-btn we-prop-selection-btn",F.setAttribute("aria-label","é€‰æ‹©æ¨¡å¼"),F.dataset.tooltip="ç¦ç”¨é€‰æ‹© (è¿›å…¥äº¤äº’æ¨¡å¼)",F.style.marginRight="8px",F.append(ql());let G=!0;function $(){G?(F.dataset.active="true",F.style.color="#008F5D",F.style.backgroundColor="rgba(0, 143, 93, 0.1)",F.dataset.tooltip="å·²å¯ç”¨é€‰æ‹©"):(F.dataset.active="false",F.style.color="var(--ant-text-color-secondary, rgba(0, 0, 0, 0.45))",F.style.backgroundColor="transparent",F.dataset.tooltip="å·²ç¦ç”¨é€‰æ‹©")}t.listen(F,"click",he=>{var U;he.preventDefault(),G=!G,$(),(U=e.onToggleSelectionMode)==null||U.call(e,G)}),$(),g.append(F,_);const W=document.createElement("div");W.className="we-prop-target",W.hidden=!0;const J=document.createElement("div");J.className="we-prop-tabs",J.setAttribute("role","tablist"),J.setAttribute("aria-label","å±æ€§æ ‡ç­¾"),J.hidden=!0;const A=document.createElement("button");A.type="button",A.className="we-tab",A.setAttribute("role","tab"),A.dataset.tab="design",A.textContent="è®¾è®¡";const L=document.createElement("button");L.type="button",L.className="we-tab",L.setAttribute("role","tab"),L.dataset.tab="css",L.textContent="æ ·å¼";const Y=document.createElement("button");Y.type="button",Y.className="we-tab",Y.setAttribute("role","tab"),Y.dataset.tab="props",Y.textContent="å±æ€§";const B=document.createElement("button");B.type="button",B.className="we-tab",B.setAttribute("role","tab"),B.dataset.tab="dom",B.textContent="ç»“æ„",J.append(A,L),r&&J.append(Y),i&&J.append(B);const K=document.createElement("div");K.className="we-prop-menu-wrap",K.dataset.open="false";const ge=document.createElement("button");ge.type="button",ge.className="we-icon-btn we-prop-menu-btn",ge.setAttribute("aria-label","ä¿å­˜"),ge.dataset.tooltip="ä¿å­˜",ge.append(Wl());const we=document.createElement("div");we.className="we-prop-menu",we.setAttribute("role","menu");const ke=document.createElement("button");ke.type="button",ke.className="we-prop-menu-item",ke.setAttribute("role","menuitem"),ke.dataset.action="save-style",ke.textContent="å¼ºåˆ¶ä¿å­˜æ ·å¼";const Se=document.createElement("button");Se.type="button",Se.className="we-prop-menu-item",Se.setAttribute("role","menuitem"),Se.dataset.action="save-text",Se.textContent="å¼ºåˆ¶ä¿å­˜æ–‡æœ¬";const ie=document.createElement("button");ie.type="button",ie.className="we-prop-menu-item",ie.setAttribute("role","menuitem"),ie.dataset.action="copy-prompt",ie.textContent="å¤åˆ¶ prompt",we.append(ke,Se,ie),K.append(ge,we);const Q=document.createElement("div");Q.className="we-prop-menu-wrap",Q.dataset.open="false";const P=document.createElement("button");P.type="button",P.className="we-icon-btn we-prop-more-btn",P.setAttribute("aria-label","æ›´å¤š"),P.dataset.tooltip="æ›´å¤š",P.append(Yl());const ae=document.createElement("div");ae.className="we-prop-menu",ae.setAttribute("role","menu");const xe=document.createElement("button");xe.type="button",xe.className="we-prop-menu-item",xe.setAttribute("role","menuitem"),xe.dataset.action="clear-edits",xe.textContent="æ¸…ç©ºç¼–è¾‘";const ve=document.createElement("button");ve.type="button",ve.className="we-prop-menu-item",ve.setAttribute("role","menuitem"),ve.dataset.action="clear-forced-styles",ve.textContent="æ¸…ç©ºå¼ºåˆ¶æ ·å¼",ae.append(xe,ve),Q.append(P,ae);const Ae=document.createElement("button");Ae.type="button",Ae.className="we-icon-btn we-minimize-btn",Ae.setAttribute("aria-label","æ”¶èµ·å±æ€§é¢æ¿"),Ae.dataset.tooltip="æ”¶èµ·",Ae.append(jl()),C.append(K,Q,Ae,W),E.append(M,g,C);const z=document.createElement("div");z.className="we-prop-body";const le=document.createElement("div");le.className="we-prop-empty",le.textContent="è¯·é€‰æ‹©ä¸€ä¸ªå…ƒç´ ä»¥æŸ¥çœ‹å’Œç¼–è¾‘å±æ€§ã€‚";const se=document.createElement("div");se.className="we-prop-tab-content",se.dataset.tabContent="design";for(const{id:he,label:U,collapsible:ee}of Yf){const me=Kf(he,U,t,{collapsible:ee});a.set(he,me),se.append(me.root)}const fe=document.createElement("div");fe.className="we-prop-tab-content",fe.dataset.tabContent="css";const re=document.createElement("div");re.className="we-prop-tab-content",re.dataset.tabContent="props";const O=document.createElement("div");O.className="we-prop-tab-content",O.dataset.tabContent="dom",z.append(le,se,fe),r&&z.append(re),i&&z.append(O),T.append(E,z),e.container.append(T),t.add(()=>T.remove());const R=16;function V(he){const U=T.getBoundingClientRect(),ee=window.innerWidth,me=window.innerHeight,ye=R,Ne=Math.max(ye,ee-ye-U.width),Fe=Math.max(ye,me-ye-U.height),Le=Number.isFinite(he.left)?he.left:0,Re=Number.isFinite(he.top)?he.top:0;return{left:Math.round(Math.min(Ne,Math.max(ye,Le))),top:Math.round(Math.min(Fe,Math.max(ye,Re)))}}function j(){if(T.dataset.dragged=l?"true":"false",!l){T.style.left="",T.style.top="",T.style.right="",T.style.bottom="";return}T.style.left=`${l.left}px`,T.style.top=`${l.top}px`,T.style.right="auto",T.style.bottom="auto"}function te(he){var U;l=he?V(he):null,j(),(U=e.onPositionChange)==null||U.call(e,l)}function q(){return l}t.add(sa({handleEl:M,targetEl:T,clampMargin:R,onPositionChange:he=>te(he)})),l!==null?te(l):j();function ne(){const he=a.get("size");he&&(I=Mc({container:he.body,transactionManager:e.transactionManager}),c.push(I));const U=a.get("spacing");U&&(v=Vc({container:U.body,transactionManager:e.transactionManager}),c.push(v));const ee=a.get("position");ee&&(S=ou({container:ee.body,transactionManager:e.transactionManager}),c.push(S));const me=a.get("layout");if(me){const Me=pu({container:me.body,transactionManager:e.transactionManager});c.push(Me)}const ye=a.get("typography");if(ye){const Me=Wu({container:ye.body,transactionManager:e.transactionManager,tokensService:e.tokensService});c.push(Me)}const Ne=a.get("appearance");if(Ne){const Me=Ju({container:Ne.body,transactionManager:e.transactionManager});c.push(Me)}const Fe=a.get("border");if(Fe){const Me=id({container:Fe.body,transactionManager:e.transactionManager,tokensService:e.tokensService});c.push(Me)}const Le=a.get("background");if(Le){const Me=dd({container:Le.body,transactionManager:e.transactionManager,tokensService:e.tokensService});c.push(Me)}const Re=a.get("effects");if(Re){const Me=kd({container:Re.body,transactionManager:e.transactionManager,tokensService:e.tokensService,headerActionsContainer:Re.headerActions});c.push(Me)}}ne(),i&&(u=_d({container:O,onSelect:he=>{e.onSelectElement(he)}})),p=mf({container:fe,transactionManager:e.transactionManager,onClassChange:()=>{n&&(W.textContent=kr(n))}}),r&&e.propsBridge&&(f=Wf({container:re,propsBridge:e.propsBridge}));function ue(he,U){if(U){console.log(`[WebEditorV2][Menu] ${he}`,U);return}console.log(`[WebEditorV2][Menu] ${he}`)}function Z(){T.dataset.menuOpen=m||w?"true":"false"}function be(he){m=he,K.dataset.open=m?"true":"false",m&&(w=!1,Q.dataset.open="false"),Z()}function oe(he){w=he,Q.dataset.open=w?"true":"false",w&&(m=!1,K.dataset.open="false"),Z()}async function Ce(he){if(he){b=!0,Te();try{await he()}finally{b=!1,Te()}}}function Te(){var Re,Me,Ge;D.textContent=String(h),y.textContent=String(d),D.hidden=h<=0,y.hidden=d<=0;const he=h>0&&!!e.onUndo,U=d>0&&!!e.onRedo;N.disabled=b||!he,H.disabled=b||!U,N.dataset.tooltip=he?`æ’¤é”€ (${h})`:"æ’¤é”€",H.dataset.tooltip=U?`é‡åš (${d})`:"é‡åš";const ee=(Re=e.getCopyPromptBlockReason)==null?void 0:Re.call(e),me=(Me=e.getSaveTextBlockReason)==null?void 0:Me.call(e),ye=(Ge=e.getSaveStyleBlockReason)==null?void 0:Ge.call(e),Ne=h===0||!!ee||!e.onCopyPrompt,Fe=!!me||!e.onSaveText,Le=!!ye||!e.onSaveStyle;ie.disabled=b||Ne,Se.disabled=b||Fe,ke.disabled=b||Le,ie.title=ee??"",Se.title=me??"",ke.title=ye??"",xe.disabled=b||!e.onClearEdits,ve.disabled=b||!e.onClearForcedStyles}Te(),t.listen(N,"click",he=>{var U;he.preventDefault(),!N.disabled&&((U=e.onUndo)==null||U.call(e))}),t.listen(H,"click",he=>{var U;he.preventDefault(),!H.disabled&&((U=e.onRedo)==null||U.call(e))}),t.listen(ie,"click",he=>{he.preventDefault(),!ie.disabled&&(ue("click copy"),be(!1),Ce(e.onCopyPrompt))}),t.listen(Se,"click",he=>{he.preventDefault(),!Se.disabled&&(ue("click save-text"),be(!1),Ce(e.onSaveText))}),t.listen(ke,"click",he=>{he.preventDefault(),!ke.disabled&&(ue("click save-style"),be(!1),Ce(e.onSaveStyle))}),t.listen(ge,"click",he=>{he.preventDefault(),!b&&(ue(`toggle menu -> ${!m}`),be(!m))}),t.listen(xe,"click",he=>{he.preventDefault(),!xe.disabled&&(ue("click clear-edits"),oe(!1),Ce(e.onClearEdits))}),t.listen(ve,"click",he=>{he.preventDefault(),!ve.disabled&&(ue("click clear-forced-styles"),oe(!1),Ce(e.onClearForcedStyles))}),t.listen(P,"click",he=>{he.preventDefault(),!b&&(ue(`toggle more menu -> ${!w}`),oe(!w))});function et(he){try{const ee=typeof he.composedPath=="function"?he.composedPath():null;if(ee&&ee.length>0)return ee.includes(K)||ee.includes(ge)||ee.includes(we)||ee.includes(Q)||ee.includes(P)||ee.includes(ae)}catch{}const U=he.target;return U instanceof Node&&(K.contains(U)||ge.contains(U)||we.contains(U)||Q.contains(U)||P.contains(U)||ae.contains(U))}t.listen(window,"pointerdown",he=>{if(!m&&!w)return;const U=et(he);ue("window pointerdown",{inside:U}),!U&&(be(!1),oe(!1))},{capture:!0}),t.listen(A,"click",he=>{he.preventDefault(),Ve("design")}),t.listen(L,"click",he=>{he.preventDefault(),Ve("css")}),r&&t.listen(Y,"click",he=>{he.preventDefault(),Ve("props")}),i&&t.listen(B,"click",he=>{he.preventDefault(),Ve("dom")}),t.listen(Ae,"click",he=>{he.preventDefault(),Ee(!s)});function Ee(he){s=he,T.dataset.minimized=s?"true":"false",z.hidden=s,J.hidden=s,g.hidden=s,K.hidden=s,Q.hidden=s,s&&(be(!1),oe(!1)),Ae.setAttribute("aria-label",s?"å±•å¼€å±æ€§é¢æ¿":"æ”¶èµ·å±æ€§é¢æ¿"),Ae.dataset.tooltip=s?"å±•å¼€":"æ”¶èµ·",!s&&l?te(l):j()}function Pe(){T.dataset.tab=o,A.setAttribute("aria-selected",o==="design"?"true":"false"),L.setAttribute("aria-selected",o==="css"?"true":"false"),r&&Y.setAttribute("aria-selected",o==="props"?"true":"false"),i&&B.setAttribute("aria-selected",o==="dom"?"true":"false");const he=n!==null;se.hidden=!he||o!=="design",fe.hidden=!he||o!=="css",r?re.hidden=!he||o!=="props":re.hidden=!0,i?O.hidden=!he||o!=="dom":O.hidden=!0,p==null||p.setVisible(he&&o==="css"),r&&(f==null||f.setVisible(he&&o==="props"))}function ce(){const he=n!==null;T.dataset.empty=he?"false":"true",le.hidden=he,he||(W.textContent=""),Pe()}function pe(){for(const he of c)he.setTarget(n);u==null||u.setTarget(n),p==null||p.setTarget(n),f==null||f.setTarget(n)}function de(){X!==null&&(cancelAnimationFrame(X),X=null)}function _e(){t.isDisposed||X===null&&(X=requestAnimationFrame(()=>{X=null,!t.isDisposed&&(!n||!n.isConnected||(I==null||I.refresh(),S==null||S.refresh(),v==null||v.refresh()))}))}function $e(){if(de(),x)try{x.disconnect()}catch{}x=null,k=null}function Ie(he){if($e(),!(!he||!he.isConnected)&&!(typeof MutationObserver>"u")){k=he,x=new MutationObserver(()=>{t.isDisposed||k===n&&_e()});try{x.observe(he,{attributes:!0,attributeFilter:["style"]})}catch{$e()}}}t.add($e);function De(he){t.isDisposed||(n=he,he&&(W.textContent=kr(he)),ce(),pe(),Ie(n))}function Ve(he){t.isDisposed||(he==="props"&&!r||he==="dom"&&!i?o="design":o=he,Pe())}function Xe(){return o}function Ke(){if(!t.isDisposed){n&&(W.textContent=kr(n));for(const he of c)he.refresh();u==null||u.refresh(),p==null||p.refresh(),f==null||f.refresh()}}function pt(he,U){h=Math.max(0,Math.floor(he)),d=Math.max(0,Math.floor(U)),Te()}function Ct(){u==null||u.dispose(),u=null,p==null||p.dispose(),p=null,f==null||f.dispose(),f=null;for(const he of c)he.dispose();c.length=0,a.clear(),n=null,t.dispose()}return ce(),{setTarget:De,setTab:Ve,getTab:Xe,refresh:Ke,setHistory:pt,getPosition:q,setPosition:te,dispose:Ct}}class Jf extends Error{constructor(n,o){super(n);jn(this,"data");this.name="PropsError",this.data=o}}const ho={REQUEST:"web-editor-props:request",RESPONSE:"web-editor-props:response",CLEANUP:"web-editor-props:cleanup"},hn=1,Qf=2500,gn=200;function In(){try{if(typeof crypto<"u"&&typeof crypto.randomUUID=="function")return crypto.randomUUID()}catch{}return`req-${Date.now()}-${Math.random().toString(16).slice(2)}`}function ep(e){return e===void 0?{$we:"undefined"}:e}function tp(e){return e!==null&&typeof e=="object"}function np(e){return e instanceof Error&&e.message||String(e)}function op(e){if(e==null)return!0;const t=typeof e;return t==="string"||t==="boolean"?!0:t==="number"?Number.isFinite(e):!1}const rp=new Set(["__proto__","constructor","prototype","__defineGetter__","__defineSetter__","__lookupGetter__","__lookupSetter__"]);function ip(e){return e.some(t=>typeof t=="string"&&rp.has(t))}function sp(e={}){const t=Math.max(gn,e.defaultTimeoutMs??Qf),n=new Map;let o=!1;function r(){if(o)throw new Jf("PropsBridge is disposed")}function i(b){for(const[m,w]of n)clearTimeout(w.timeoutId),w.resolve({ok:!1,error:b}),n.delete(m)}function s(b){if(o)return;const m=b.detail;if(!tp(m)||m.v!==hn)return;const w=typeof m.requestId=="string"?m.requestId:"";if(!w)return;const I=n.get(w);if(!I)return;n.delete(w),clearTimeout(I.timeoutId);const S=!!m.success,v=m.data??void 0,x=typeof m.error=="string"?m.error:void 0;I.resolve({ok:S,data:v,error:S?void 0:x||"Props agent error"})}window.addEventListener(ho.RESPONSE,s);function l(b,m){r();const{requestId:w}=b;return w?n.has(w)?Promise.resolve({ok:!1,error:`Duplicate requestId: ${w}`}):new Promise(I=>{const S=window.setTimeout(()=>{n.delete(w),I({ok:!1,error:`Props agent timeout after ${m}ms (op=${b.op})`})},m);n.set(w,{resolve:I,timeoutId:S});try{window.dispatchEvent(new CustomEvent(ho.REQUEST,{detail:b}))}catch(v){clearTimeout(S),n.delete(w),I({ok:!1,error:`Failed to dispatch props request: ${np(v)}`})}}):Promise.resolve({ok:!1,error:"requestId is required"})}async function a(b,m){const w={v:hn,requestId:In(),op:"probe",locator:b};return l(w,Math.max(gn,m??t))}async function c(b,m){const w={v:hn,requestId:In(),op:"read",locator:b};return l(w,Math.max(gn,m??t))}async function u(b,m,w,I){if(!Array.isArray(m)||m.length===0)return{ok:!1,error:"prop path is required"};if(ip(m))return{ok:!1,error:"Invalid prop path: contains dangerous key"};if(!op(w))return{ok:!1,error:"Only primitive prop values are supported"};const S={v:hn,requestId:In(),op:"write",locator:b,payload:{propPath:m,propValue:ep(w)}};return l(S,Math.max(gn,I??t))}async function p(b,m){const w={v:hn,requestId:In(),op:"reset",locator:b};return l(w,Math.max(gn,m??t))}async function f(b){if(o)return;const m=Math.max(gn,b??800);try{const w={v:hn,requestId:In(),op:"cleanup"};await l(w,m)}catch{}finally{try{window.dispatchEvent(new CustomEvent(ho.CLEANUP))}catch{}h()}}function h(){if(!o){o=!0;try{window.removeEventListener(ho.RESPONSE,s)}catch{}i("PropsBridge disposed")}}function d(){return o}return{probe:a,read:c,write:u,reset:p,cleanup:f,dispose:h,isDisposed:d}}const hs="data-mcp-canvas",gs="overlay",ap=100,Cr={hover:{strokeColor:at.hover,fillColor:`${at.hover}15`,lineWidth:2,dashPattern:[6,4]},selection:{strokeColor:at.selected,fillColor:"transparent",lineWidth:2,dashPattern:[]},dragGhost:{strokeColor:at.selectionBorder,fillColor:at.dragGhost,lineWidth:2,dashPattern:[8,6]}};function bs(e){return Number.isFinite(e)&&e>0}function Ar(e){return e?Number.isFinite(e.left)&&Number.isFinite(e.top)&&bs(e.width)&&bs(e.height):!1}function go(e){return e?Number.isFinite(e.x1)&&Number.isFinite(e.y1)&&Number.isFinite(e.x2)&&Number.isFinite(e.y2):!1}function bo(e,t,n){return Number.isFinite(e)?Math.min(n,Math.max(t,e)):t}function ws(e){return 1-Math.pow(1-e,3)}function wo(e,t,n){return e+(t-e)*n}function xs(e,t,n){return{left:wo(e.left,t.left,n),top:wo(e.top,t.top,n),width:wo(e.width,t.width,n),height:wo(e.height,t.height,n)}}function lp(e,t,n,o,r,i){const s=Math.max(0,Math.min(i,Math.min(o,r)/2));e.moveTo(t+s,n),e.arcTo(t+o,n,t+o,n+r,s),e.arcTo(t+o,n+r,t,n+r,s),e.arcTo(t,n+r,t,n,s),e.arcTo(t,n,t+o,n,s),e.closePath()}function cp(e){const{container:t}=e,n=new Oe,o=t.querySelector(`canvas[${hs}="${gs}"]`);o&&o.remove();const r=document.createElement("canvas");r.setAttribute(hs,gs),r.setAttribute("aria-hidden","true"),Object.assign(r.style,{position:"absolute",inset:"0",width:"100%",height:"100%",pointerEvents:"none",display:"block"}),t.append(r),n.add(()=>r.remove());const i=r.getContext("2d",{alpha:!0,desynchronized:!0});if(!i)throw n.dispose(),new Error(`${ze} Failed to get canvas 2D context`);const s=i;let l=null,a=null,c=null,u=null,p=null,f=null,h=null,d=1,b=1,m=1,w=!0,I=null;function S(){I!==null&&(cancelAnimationFrame(I),I=null)}n.add(S);function v(){I!==null||n.isDisposed||(I=requestAnimationFrame(()=>{I=null,M()}))}function x(){const $=Math.max(1,window.devicePixelRatio||1),W=Math.max(1,d),J=Math.max(1,b),A=Math.round(W*$),L=Math.round(J*$);return r.width!==A||r.height!==L||Math.abs(m-$)>.001?(m=$,r.width=A,r.height=L,s.setTransform(m,0,0,m,0,0),s.lineJoin="round",s.lineCap="round",!0):!1}function k(){x(),s.clearRect(0,0,d,b)}function X($,W){if(!Ar($))return;const J=Math.round($.width),A=Math.round($.height);if(J<=0||A<=0)return;const L=Math.round($.left)+.5,Y=Math.round($.top)+.5;s.save(),s.lineWidth=W.lineWidth,s.strokeStyle=W.strokeColor,s.fillStyle=W.fillColor,s.setLineDash(W.dashPattern),s.beginPath(),s.rect(L,Y,J,A),s.fill(),s.stroke(),s.restore()}function T($){if(!go($))return;s.save(),s.lineWidth=Nl,s.strokeStyle=at.insertionLine,s.setLineDash([]),s.lineCap="round";const W=Math.round($.x1)+.5,J=Math.round($.y1)+.5,A=Math.round($.x2)+.5,L=Math.round($.y2)+.5;s.beginPath(),s.moveTo(W,J),s.lineTo(A,L),s.stroke(),s.restore()}function E($){if(!(!$||$.length===0)){s.save(),s.lineWidth=Ml,s.strokeStyle=at.guideLine,s.setLineDash([]),s.lineCap="round",s.beginPath();for(const W of $){if(!go(W))continue;const J=Math.round(W.x1)+.5,A=Math.round(W.y1)+.5,L=Math.round(W.x2)+.5,Y=Math.round(W.y2)+.5;s.moveTo(J,A),s.lineTo(L,Y)}s.stroke(),s.restore()}}function g($){if(!$||$.length===0)return;s.save(),s.lineWidth=Dl,s.strokeStyle=at.guideLine,s.setLineDash([]),s.lineCap="round";const W=Pl;s.beginPath();for(const J of $){const A=J.line;if(!go(A))continue;const L=Math.round(A.x1)+.5,Y=Math.round(A.y1)+.5,B=Math.round(A.x2)+.5,K=Math.round(A.y2)+.5;s.moveTo(L,Y),s.lineTo(B,K),J.axis==="x"?(s.moveTo(L,Y-W),s.lineTo(L,Y+W),s.moveTo(B,K-W),s.lineTo(B,K+W)):(s.moveTo(L-W,Y),s.lineTo(L+W,Y),s.moveTo(B-W,K),s.lineTo(B+W,K))}s.stroke(),s.font=Fl,s.textAlign="center",s.textBaseline="middle";for(const J of $){const A=J.line;if(!go(A))continue;const L=s.measureText(J.text),Y=L.width,B=Number.isFinite(L.actualBoundingBoxAscent)?L.actualBoundingBoxAscent:8,K=Number.isFinite(L.actualBoundingBoxDescent)?L.actualBoundingBoxDescent:3,ge=B+K,we=Math.ceil(Y+$l*2),ke=Math.ceil(ge+Ol*2),Se=(A.x1+A.x2)/2,ie=(A.y1+A.y2)/2,Q=Bl;let P=Se-we/2,ae=ie-ke/2;J.axis==="x"?(ae=ie-ke/2-Q,ae<0&&(ae=ie+Q-ke/2)):(P=Se+Q-we/2,P+we>d&&(P=Se-Q-we/2));const xe=Math.max(2,d-we-2),ve=Math.max(2,b-ke-2);P=bo(P,2,xe),ae=bo(ae,2,ve),s.save(),s.fillStyle=at.distanceLabelBg,s.strokeStyle=at.distanceLabelBorder,s.lineWidth=1,s.beginPath(),lp(s,P,ae,we,ke,Vl),s.fill(),s.stroke(),s.fillStyle=at.distanceLabelText,s.fillText(J.text,P+we/2,ae+ke/2),s.restore()}s.restore()}function C(){n.isDisposed||(w=!0,v())}function M(){if(n.isDisposed||!w)return;S(),w=!1;const $=performance.now();let W=l;if(a){const J=$-a.startTime,A=bo(J/a.durationMs,0,1),L=ws(A);W=xs(a.start,a.end,L),A>=1?a=null:w=!0}k(),X(W,Cr.hover),X(c,Cr.selection),X(u,Cr.dragGhost),T(p),E(f),g(h),w&&v()}function N($,W){if(!((W==null?void 0:W.animate)===!0)){a=null,l=$,C();return}const A=performance.now();let L=l;if(a){const Y=A-a.startTime,B=bo(Y/a.durationMs,0,1),K=ws(B);L=xs(a.start,a.end,K)}if(!Ar(L)||!Ar($)){a=null,l=$,C();return}a={start:{...L},end:{...$},startTime:A,durationMs:ap},l=$,C()}function D($){c=$,C()}function H($){u=$,C()}function y($){p=$,C()}function _($){f=$&&$.length>0?$:null,C()}function F($){h=$&&$.length>0?$:null,C()}function G(){l=null,a=null,c=null,u=null,p=null,f=null,h=null,C()}try{const $=t.getBoundingClientRect();d=Math.max(1,$.width),b=Math.max(1,$.height)}catch($){console.warn(`${ze} Initial size measurement failed:`,$)}return n.observeResize(t,$=>{const W=$[0],J=W==null?void 0:W.contentRect;if(!J)return;const A=Math.max(1,J.width),L=Math.max(1,J.height);Math.abs(A-d)<.5&&Math.abs(L-b)<.5||(d=A,b=L,C())}),C(),{canvas:r,markDirty:C,render:M,clear:G,setHoverRect:N,setSelectionRect:D,setDragGhostRect:H,setInsertionLine:y,setGuideLines:_,setDistanceLabels:F,dispose:()=>n.dispose()}}function it(e){return typeof e=="number"&&Number.isFinite(e)}function oi(e){return e?it(e.left)&&it(e.top)&&it(e.width)&&it(e.height)&&e.width>.5&&e.height>.5:!1}function Tr(e){try{const t=e.getBoundingClientRect(),n={left:t.left,top:t.top,width:t.width,height:t.height};return oi(n)?n:null}catch{return null}}function mt(e){return e.left+e.width}function ht(e){return e.top+e.height}function bn(e){return e.left+e.width/2}function wn(e){return e.top+e.height/2}function Ga(e,t){switch(t){case"left":return e.left;case"center":return bn(e);case"right":return mt(e)}}function Ua(e,t){switch(t){case"top":return e.top;case"middle":return wn(e);case"bottom":return ht(e)}}function ys(){return{x:[],y:[]}}function up(e){const t=e.parentElement;if(!t)return ys();const n=Tr(e),o=n?bn(n):0,r=n?wn(n):0,i=t.children,s=i.length;let l=-1;for(let b=0;b<s;b++)if(i[b]===e){l=b;break}if(l===-1)return ys();const a=[];let c=0,u=1,p=1;for(;c<mi;){const b=l-u,m=l+p,w=b>=0,I=m<s;if(!w&&!I)break;if(w){const S=i[b],v=Tr(S);if(v){const x=bn(v)-o,k=wn(v)-r;a.push({rect:v,distanceSquared:x*x+k*k})}c++,u++}if(I&&c<mi){const S=i[m],v=Tr(S);if(v){const x=bn(v)-o,k=wn(v)-r;a.push({rect:v,distanceSquared:x*x+k*k})}c++,p++}}a.sort((b,m)=>b.distanceSquared-m.distanceSquared);const f=a.slice(0,_l),h=[],d=[];for(const{rect:b}of f)h.push({type:"left",value:b.left,source:"sibling",sourceRect:b}),h.push({type:"center",value:bn(b),source:"sibling",sourceRect:b}),h.push({type:"right",value:mt(b),source:"sibling",sourceRect:b}),d.push({type:"top",value:b.top,source:"sibling",sourceRect:b}),d.push({type:"middle",value:wn(b),source:"sibling",sourceRect:b}),d.push({type:"bottom",value:ht(b),source:"sibling",sourceRect:b});return{x:h,y:d}}function dp(){const e=Math.max(1,window.innerWidth||1),t=Math.max(1,window.innerHeight||1);return{x:[{type:"left",value:0,source:"viewport"},{type:"center",value:e/2,source:"viewport"},{type:"right",value:e,source:"viewport"}],y:[{type:"top",value:0,source:"viewport"},{type:"middle",value:t/2,source:"viewport"},{type:"bottom",value:t,source:"viewport"}]}}function fp(...e){const t=[],n=[];for(const o of e)t.push(...o.x),n.push(...o.y);return{x:t,y:n}}function zr(e,t,n,o,r){const i=e.left,s=mt(e);if(t==="left"){if(n==="right"){const l=o-i;return!it(l)||l<r?null:{left:i,top:e.top,width:l,height:e.height}}if(n==="center"){const l=(o-i)*2;return!it(l)||l<r?null:{left:i,top:e.top,width:l,height:e.height}}return e}if(t==="right"){if(n==="left"){const l=s-o;return!it(l)||l<r?null:{left:o,top:e.top,width:l,height:e.height}}if(n==="center"){const l=2*o-s,a=s-l;return!it(a)||a<r?null:{left:l,top:e.top,width:a,height:e.height}}return e}return e}function Gr(e,t,n,o,r){const i=e.top,s=ht(e);if(t==="top"){if(n==="bottom"){const l=o-i;return!it(l)||l<r?null:{left:e.left,top:i,width:e.width,height:l}}if(n==="middle"){const l=(o-i)*2;return!it(l)||l<r?null:{left:e.left,top:i,width:e.width,height:l}}return e}if(t==="bottom"){if(n==="top"){const l=s-o;return!it(l)||l<r?null:{left:e.left,top:o,width:e.width,height:l}}if(n==="middle"){const l=2*o-s,a=s-l;return!it(a)||a<r?null:{left:e.left,top:l,width:e.width,height:a}}return e}return e}function pp(e,t,n,o,r,i){let s=null;for(const l of n){if(!o.includes(l.type))continue;const a=Ga(e,l.type),c=Math.abs(l.value-a);if(c>r)continue;const u=zr(e,t,l.type,l.value,i);if(!u)continue;(!s||c<s.distance||c===s.distance&&l.source==="sibling"&&s.anchor.source!=="sibling")&&(s={distance:c,anchor:l,snappedRect:u})}return s}function mp(e,t,n,o,r,i){let s=null;for(const l of n){if(!o.includes(l.type))continue;const a=Ua(e,l.type),c=Math.abs(l.value-a);if(c>r)continue;const u=Gr(e,t,l.type,l.value,i);if(!u)continue;(!s||c<s.distance||c===s.distance&&l.source==="sibling"&&s.anchor.source!=="sibling")&&(s={distance:c,anchor:l,snappedRect:u})}return s}function hp(e,t,n,o){const r=[],i=Math.max(1,o.width),s=Math.max(1,o.height);if(t){const l=t.value;if(t.source==="viewport"||!t.sourceRect)r.push({x1:l,y1:0,x2:l,y2:s});else{const a=t.sourceRect,c=Math.min(a.top,e.top),u=Math.max(ht(a),ht(e));r.push({x1:l,y1:c,x2:l,y2:u})}}if(n){const l=n.value;if(n.source==="viewport"||!n.sourceRect)r.push({x1:0,y1:l,x2:i,y2:l});else{const a=n.sourceRect,c=Math.min(a.left,e.left),u=Math.max(mt(a),mt(e));r.push({x1:c,y1:l,x2:u,y2:l})}}return r}function gp(e){const{rect:t,resize:n,anchors:o,thresholdPx:r,hysteresisPx:i,minSizePx:s,viewport:l}=e;if(!oi(t))return{snappedRect:t,guideLines:[],lockX:null,lockY:null};const a=n.hasWest?"right":n.hasEast?"left":null,c=n.hasNorth?"bottom":n.hasSouth?"top":null,u=a==="left"?["right","center"]:a==="right"?["left","center"]:[],p=c==="top"?["bottom","middle"]:c==="bottom"?["top","middle"]:[];let f={...t},h=e.lockX,d=e.lockY;if(a){if(h)if(!u.includes(h.type))h=null;else{const m=Ga(f,h.type),w=Math.abs(h.value-m),I=zr(f,a,h.type,h.value,s);(w>r+i||!I)&&(h=null)}if(h){const m=zr(f,a,h.type,h.value,s);m&&(f=m)}else{const m=pp(f,a,o.x,u,r,s);m&&(h={type:m.anchor.type,value:m.anchor.value,source:m.anchor.source,sourceRect:m.anchor.sourceRect??null},f=m.snappedRect)}}else h=null;if(c){if(d)if(!p.includes(d.type))d=null;else{const m=Ua(f,d.type),w=Math.abs(d.value-m),I=Gr(f,c,d.type,d.value,s);(w>r+i||!I)&&(d=null)}if(d){const m=Gr(f,c,d.type,d.value,s);m&&(f=m)}else{const m=mp(f,c,o.y,p,r,s);m&&(d={type:m.anchor.type,value:m.anchor.value,source:m.anchor.source,sourceRect:m.anchor.sourceRect??null},f=m.snappedRect)}}else d=null;const b=hp(f,h,d,l);return{snappedRect:f,guideLines:b,lockX:h,lockY:d}}function Ft(e,t){return it(e)&&e>0&&e>=t}function $t(e){const t=Math.round(e);return`${Object.is(t,-0)?0:t}px`}function vs(e,t,n){return it(e)?Math.min(n,Math.max(t,e)):t}function bp(e){const{rect:t,lockX:n,lockY:o,viewport:r,minGapPx:i}=e;if(!oi(t))return[];const s=it(r.width)?Math.max(1,r.width):1,l=it(r.height)?Math.max(1,r.height):1,a=Math.max(0,i),c=[];if(n&&n.source==="sibling"&&n.sourceRect){const u=n.sourceRect,p=t.top-ht(u),f=u.top-ht(t);Ft(p,a)?c.push({kind:"sibling",axis:"y",value:Math.round(p),text:$t(p),line:{x1:n.value,y1:ht(u),x2:n.value,y2:t.top}}):Ft(f,a)&&c.push({kind:"sibling",axis:"y",value:Math.round(f),text:$t(f),line:{x1:n.value,y1:ht(t),x2:n.value,y2:u.top}})}if(o&&o.source==="sibling"&&o.sourceRect){const u=o.sourceRect,p=t.left-mt(u),f=u.left-mt(t);Ft(p,a)?c.push({kind:"sibling",axis:"x",value:Math.round(p),text:$t(p),line:{x1:mt(u),y1:o.value,x2:t.left,y2:o.value}}):Ft(f,a)&&c.push({kind:"sibling",axis:"x",value:Math.round(f),text:$t(f),line:{x1:mt(t),y1:o.value,x2:u.left,y2:o.value}})}if(n&&n.source==="viewport"){const u=vs(wn(t),0,l),p=t.left,f=s-mt(t),h=()=>Ft(p,a)?(c.push({kind:"viewport",axis:"x",value:Math.round(p),text:$t(p),line:{x1:0,y1:u,x2:t.left,y2:u}}),!0):!1,d=()=>Ft(f,a)?(c.push({kind:"viewport",axis:"x",value:Math.round(f),text:$t(f),line:{x1:mt(t),y1:u,x2:s,y2:u}}),!0):!1;n.type==="center"?(h(),d()):n.type==="left"?h()||d():d()||h()}if(o&&o.source==="viewport"){const u=vs(bn(t),0,s),p=t.top,f=l-ht(t),h=()=>Ft(p,a)?(c.push({kind:"viewport",axis:"y",value:Math.round(p),text:$t(p),line:{x1:u,y1:0,x2:u,y2:t.top}}),!0):!1,d=()=>Ft(f,a)?(c.push({kind:"viewport",axis:"y",value:Math.round(f),text:$t(f),line:{x1:u,y1:ht(t),x2:u,y2:l}}),!0):!1;o.type==="middle"?(h(),d()):o.type==="top"?h()||d():d()||h()}return c}const _n=1,wp=3,xp=["nw","n","ne","e","se","s","sw","w"],yp={n:"ns-resize",s:"ns-resize",e:"ew-resize",w:"ew-resize",ne:"nesw-resize",sw:"nesw-resize",nw:"nwse-resize",se:"nwse-resize"};function xo(e){return typeof e=="number"&&Number.isFinite(e)}function yo(e){return e?xo(e.left)&&xo(e.top)&&xo(e.width)&&xo(e.height)&&e.width>.5&&e.height>.5:!1}function vo(e,t){return Number.isFinite(e)?e<t?t:e:t}function Gt(e){const t=e.trim();if(!t||t==="auto"||t==="none")return null;const n=t.match(/^(-?\d+(?:\.\d+)?)px$/);if(n){const r=Number(n[1]);return Number.isFinite(r)?r:null}const o=Number(t);return Number.isFinite(o)?o:null}function Ot(e){if(!Number.isFinite(e))return"0px";const t=Math.round(e*100)/100;return`${Object.is(t,-0)?0:t}px`}function vp(e){const t=e.trim().toLowerCase();return t==="fixed"?"fixed":t==="absolute"?"absolute":t==="relative"||t==="sticky"?"relative":"static"}function Es(e){return e==="w"||e==="nw"||e==="sw"}function Nr(e){return e==="e"||e==="ne"||e==="se"}function Ss(e){return e==="n"||e==="nw"||e==="ne"}function Rr(e){return e==="s"||e==="sw"||e==="se"}function Ep(e){try{const t=e.getBoundingClientRect();return!Number.isFinite(t.left)||!Number.isFinite(t.top)||!Number.isFinite(t.width)||!Number.isFinite(t.height)?null:{left:t.left,top:t.top,width:Math.max(0,t.width),height:Math.max(0,t.height)}}catch{return null}}function Xa(e){try{return window.getComputedStyle(e)}catch{return null}}function Eo(e,t,n){const o=Gt(e.getPropertyValue(t))??0,r=Gt(e.getPropertyValue(n))??0;return o+r}function Sp(e){const n=e.getPropertyValue("box-sizing").trim()==="border-box"?"border-box":"content-box",o=Eo(e,"padding-left","padding-right"),r=Eo(e,"padding-top","padding-bottom"),i=Eo(e,"border-left-width","border-right-width"),s=Eo(e,"border-top-width","border-bottom-width");return{boxSizing:n,horizontalExtras:o+i,verticalExtras:r+s}}function ks(e,t,n){return n==="border-box"?e:Math.max(0,e-t)}function kp(e){try{const t=e.offsetParent;if(t instanceof HTMLElement){const n=t.getBoundingClientRect(),o=Xa(t),r=o?Gt(o.getPropertyValue("border-left-width"))??0:0,i=o?Gt(o.getPropertyValue("border-top-width"))??0:0;return{originX:n.left+r,originY:n.top+i,scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}}catch{}return{originX:0,originY:0,scrollLeft:0,scrollTop:0}}function So(e){e.cancelable&&e.preventDefault(),e.stopPropagation()}function Cp(e){const t=new Oe,{container:n,canvasOverlay:o,transactionManager:r,positionTracker:i}=e,s=document.createElement("div");s.className="we-handles-layer",s.setAttribute("aria-hidden","true"),n.append(s),t.add(()=>s.remove());const l=document.createElement("div");l.className="we-selection-frame",l.hidden=!0,s.append(l);const a=document.createElement("div");a.className="we-size-hud",a.hidden=!0,l.append(a);const c=new Map;for(const y of xp){const _=document.createElement("div");_.className="we-resize-handle",_.dataset.dir=y,_.tabIndex=-1,l.append(_),c.set(y,_)}let u=null,p=null,f=null,h=null;function d(){h!==null&&(cancelAnimationFrame(h),h=null)}t.add(d);function b(y){if(!(!!u&&yo(y))){l.hidden=!0;return}l.hidden=!1,l.style.transform=`translate3d(${y.left}px, ${y.top}px, 0)`,l.style.width=`${y.width}px`,l.style.height=`${y.height}px`}function m(y){if(!y){a.hidden=!0,a.textContent="";return}a.hidden=!1,a.textContent=y}function w(y){document.body.style.cursor=y.prevBodyCursor,document.body.style.userSelect=y.prevBodyUserSelect}function I(y){const _=f;if(_){if(d(),f=null,_.tx)try{_.tx.rollback()}catch(F){console.warn(`${ze} Resize rollback failed:`,F)}try{w(_)}catch{}try{o.setGuideLines(null),o.setDistanceLabels(null),o.render()}catch{}m(null),b(p);try{i.forceUpdate()}catch{}y&&console.log(`${ze} Resize cancelled (${y})`)}}function S(){const y=f;if(y){if(d(),f=null,y.tx)try{y.tx.commit({merge:!1})}catch(_){console.warn(`${ze} Resize commit failed:`,_);try{y.tx.rollback()}catch{}}try{w(y)}catch{}try{o.setGuideLines(null),o.setDistanceLabels(null),o.render()}catch{}m(null);try{i.forceUpdate()}catch{}}}function v(){h!==null||t.isDisposed||(h=requestAnimationFrame(()=>{h=null,x()}))}function x(){const y=f;if(!y)return;if(!y.target.isConnected){I("target_disconnected");return}const _=y.lastClientX-y.startClientX,F=y.lastClientY-y.startClientY;if(!y.hasPassedThreshold){if(Math.hypot(_,F)<wp)return;y.hasPassedThreshold=!0;const we=r.beginMultiStyle(y.target,Array.from(y.properties));if(!we){I("tx_unavailable");return}y.tx=we;try{const ke=up(y.target),Se=dp();y.anchors=fp(ke,Se)}catch{y.anchors=null}}const G=y.tx;if(!G){I("tx_missing");return}let $=y.startRect.width,W=y.startRect.height;y.affectsWidth&&(Nr(y.dir)&&($=vo(y.startRect.width+_,_n)),Es(y.dir)&&($=vo(y.startRect.width-_,_n))),y.affectsHeight&&(Rr(y.dir)&&(W=vo(y.startRect.height+F,_n)),Ss(y.dir)&&(W=vo(y.startRect.height-F,_n)));const J=y.hasWest?y.startRect.width-$:0,A=y.hasNorth?y.startRect.height-W:0,L={left:y.startRect.left+J,top:y.startRect.top+A,width:$,height:W};let Y=L;if(y.anchors){const we=Nr(y.dir),ke=Rr(y.dir),Se=gp({rect:L,resize:{hasWest:y.hasWest,hasEast:we,hasNorth:y.hasNorth,hasSouth:ke},anchors:y.anchors,thresholdPx:Rl,hysteresisPx:Il,minSizePx:_n,lockX:y.lockX,lockY:y.lockY,viewport:{width:window.innerWidth||1,height:window.innerHeight||1}});y.lockX=Se.lockX,y.lockY=Se.lockY,Y=Se.snappedRect;const ie=bp({rect:Y,lockX:y.lockX,lockY:y.lockY,minGapPx:Ll,viewport:{width:window.innerWidth||1,height:window.innerHeight||1}}),Q=Se.guideLines.length>0,P=ie.length>0;if(Q||y.hadGuidesLastFrame||P||y.hadDistanceLabelsLastFrame){try{o.setGuideLines(Q?Se.guideLines:null),o.setDistanceLabels(P?ie:null),o.render()}catch{}y.hadGuidesLastFrame=Q,y.hadDistanceLabelsLastFrame=P}$=Y.width,W=Y.height}const B=Y.left-y.startRect.left,K=Y.top-y.startRect.top;b(Y),m(`${Math.round(Y.width)} Ã— ${Math.round(Y.height)}`);const ge={};if(y.affectsWidth){const we=ks($,y.extras.horizontalExtras,y.extras.boxSizing);ge.width=Ot(we)}if(y.affectsHeight){const we=ks(W,y.extras.verticalExtras,y.extras.boxSizing);ge.height=Ot(we)}y.mode==="absolute"||y.mode==="fixed"?(y.affectsWidth&&(ge.left=Ot(y.startPosX+B),ge.right=""),y.affectsHeight&&(ge.top=Ot(y.startPosY+K),ge.bottom="")):y.mode==="relative"?(y.affectsWidth&&y.hasWest&&(ge.left=Ot(y.startPosX+B)),y.affectsHeight&&y.hasNorth&&(ge.top=Ot(y.startPosY+K))):(y.affectsWidth&&y.hasWest&&(ge["margin-left"]=Ot(y.startPosX+B)),y.affectsHeight&&y.hasNorth&&(ge["margin-top"]=Ot(y.startPosY+K)));try{G.set(ge)}catch(we){console.warn(`${ze} Resize preview apply failed:`,we),I("apply_failed")}}function k(y,_,F){if(t.isDisposed||F.button!==0)return;const G=u;if(!G||!G.isConnected)return;f&&I("restart");const $=Xa(G);if(!$)return;const W=$.getPropertyValue("transform").trim();if(W&&W!=="none"){console.warn(`${ze} Resize handles do not support transformed elements yet`);return}const J=$.getPropertyValue("position"),A=vp(J),L=Es(y),Y=Ss(y),B=L||Nr(y),K=Y||Rr(y),ge=$.getPropertyValue("margin-left").trim().toLowerCase(),we=$.getPropertyValue("margin-top").trim().toLowerCase(),ke=Gt(ge)??0,Se=Gt(we)??0;if(A==="static"){if(L&&ge==="auto"){console.warn(`${ze} Resize from west is disabled when margin-left is auto`);return}if(Y&&we==="auto"){console.warn(`${ze} Resize from north is disabled when margin-top is auto`);return}}const ie=yo(p)?p:Ep(G);if(!ie||!yo(ie))return;const Q=[];B&&(Q.push("width"),A==="absolute"||A==="fixed"?Q.push("left","right"):A==="relative"?L&&Q.push("left"):L&&Q.push("margin-left")),K&&(Q.push("height"),A==="absolute"||A==="fixed"?Q.push("top","bottom"):A==="relative"?Y&&Q.push("top"):Y&&Q.push("margin-top"));let P=null,ae=0,xe=0;A==="absolute"?(P=kp(G),ae=B?ie.left-ke-P.originX+P.scrollLeft:0,xe=K?ie.top-Se-P.originY+P.scrollTop:0):A==="fixed"?(P={originX:0,originY:0,scrollLeft:0,scrollTop:0},ae=B?ie.left-ke:0,xe=K?ie.top-Se:0):A==="relative"?(ae=B&&L?Gt($.getPropertyValue("left"))??0:0,xe=K&&Y?Gt($.getPropertyValue("top"))??0:0):(ae=B&&L?ke:0,xe=K&&Y?Se:0);const ve=Sp($),Ae=document.body.style.cursor,z=document.body.style.userSelect;f={pointerId:F.pointerId,dir:y,handleEl:_,target:G,mode:A,properties:Q,tx:null,hasPassedThreshold:!1,affectsWidth:B,affectsHeight:K,hasWest:L,hasNorth:Y,anchors:null,lockX:null,lockY:null,hadGuidesLastFrame:!1,hadDistanceLabelsLastFrame:!1,startClientX:F.clientX,startClientY:F.clientY,lastClientX:F.clientX,lastClientY:F.clientY,startRect:ie,startPosX:ae,startPosY:xe,absOrigin:P,extras:ve,prevBodyCursor:Ae,prevBodyUserSelect:z};try{_.setPointerCapture(F.pointerId)}catch{}document.body.style.cursor=yp[y],document.body.style.userSelect="none",So(F),b(ie),v()}function X(y){const _=f;_&&y.pointerId===_.pointerId&&(So(y),_.lastClientX=y.clientX,_.lastClientY=y.clientY,v())}function T(y){const _=f;_&&y.pointerId===_.pointerId&&(So(y),_.lastClientX=y.clientX,_.lastClientY=y.clientY,S())}function E(y){const _=f;_&&y.pointerId===_.pointerId&&(So(y),I(y.type))}function g(y){f&&y.key==="Escape"&&(y.preventDefault(),y.stopImmediatePropagation(),y.stopPropagation(),I("escape"))}function C(){f&&I("blur")}function M(){f&&document.visibilityState!=="visible"&&I("visibilitychange")}for(const[y,_]of c)t.listen(_,"pointerdown",F=>k(y,_,F)),t.listen(_,"pointermove",X),t.listen(_,"pointerup",T),t.listen(_,"pointercancel",E),t.listen(_,"lostpointercapture",E);t.listen(document,"keydown",g,{capture:!0}),t.listen(window,"blur",C),t.listen(document,"visibilitychange",M);function N(y){t.isDisposed||(f&&I("target_change"),y instanceof HTMLElement&&y.isConnected?u=y:u=null,b(p))}function D(y){if(!t.isDisposed){if(p=yo(y)?y:null,!u||!u.isConnected){l.hidden=!0;return}if(f&&!p){I("rect_lost");return}f||b(p)}}function H(){I("dispose"),u=null,p=null,t.dispose()}return b(null),{setTarget:N,setSelectionRect:D,dispose:H}}function Lo(e){return e instanceof Document||e instanceof ShadowRoot}function ja(e){var n;const t=(n=e.tagName)==null?void 0:n.toUpperCase();return t==="HTML"||t==="BODY"||t==="HEAD"}function Ap(e){const{left:t,top:n,width:o,height:r}=e;return!Number.isFinite(t)||!Number.isFinite(n)||!Number.isFinite(o)||!Number.isFinite(r)?null:{left:t,top:n,width:Math.max(0,o),height:Math.max(0,r)}}function Tp(e,t,n){if(!Number.isFinite(t)||!Number.isFinite(n))return[];try{if(typeof e.elementsFromPoint=="function")return e.elementsFromPoint(t,n)}catch{}try{const o=e.elementFromPoint(t,n);return o?[o]:[]}catch{return[]}}function Np(e){try{const t=window.getComputedStyle(e),n=t.display;if(n==="grid"||n==="inline-grid")return null;if(n==="flex"||n==="inline-flex"){const o=t.flexWrap;if(o==="wrap"||o==="wrap-reverse")return null;switch(t.flexDirection){case"row":return{axis:"x",reverse:!1};case"row-reverse":return{axis:"x",reverse:!0};case"column":return{axis:"y",reverse:!1};case"column-reverse":return{axis:"y",reverse:!0};default:return{axis:"y",reverse:!1}}}return{axis:"y",reverse:!1}}catch{return null}}function Rp(e,t,n,o,r){const i=o==="x"?t.left+t.width/2:t.top+t.height/2,s=r?-e:e,l=r?-i:i;return n?n==="before"?s>l+pi?"after":"before":s<l-pi?"before":"after":s<l?"before":"after"}function Cs(e,t,n){return e.parentNode!==t?!1:n===e||n===e.nextSibling||n===null&&e.nextSibling===null}function Ip(e,t,n,o){var i;if(!e.isConnected||o(e)||e===t||ja(e)||t.contains(e)||!e.parentElement)return!1;const r=(i=e.getRootNode)==null?void 0:i.call(e);return!(!Lo(r)||r!==n)}function _p(e){const t=new Oe,{canvasOverlay:n,isOverlayElement:o,positionTracker:r,transactionManager:i,uiRoot:s}=e;let l=null,a=null;function c(){a!==null&&(cancelAnimationFrame(a),a=null)}t.add(c);function u(x,k){s.style.pointerEvents=x?k.uiPointerEventsBefore:"none"}function p(){n.setDragGhostRect(null),n.setInsertionLine(null),n.render()}function f(){const x=l;x&&(c(),u(!0,x),p(),l=null)}function h(x){const X=Tp(x.draggedRoot,x.lastClientX,x.lastClientY).slice(0,Tl).find(_=>Ip(_,x.draggedElement,x.draggedRoot,o));if(!X)return null;const T=X.parentElement;if(!T)return null;const E=Np(T);if(!E)return null;let g;try{g=X.getBoundingClientRect()}catch{return null}if(!Number.isFinite(g.left)||!Number.isFinite(g.top)||g.width<=.5||g.height<=.5)return null;const C=x.preview&&x.preview.target===X?x.preview.side:null,M=E.axis==="x"?x.lastClientX:x.lastClientY,N=Rp(M,g,C,E.axis,E.reverse),D=N==="before"?X:X.nextSibling,H=Cs(x.draggedElement,T,D);let y;if(E.axis==="x"){const _=E.reverse?g.left+g.width:g.left,F=E.reverse?g.left:g.left+g.width,G=N==="before"?_:F;y={x1:G,y1:g.top,x2:G,y2:g.top+g.height}}else{const _=E.reverse?g.top+g.height:g.top,F=E.reverse?g.top:g.top+g.height,G=N==="before"?_:F;y={x1:g.left,y1:G,x2:g.left+g.width,y2:G}}return{target:X,parent:T,side:N,referenceNode:D,isNoop:H,indicatorLine:y}}function d(){var X;a=null;const x=l;if(!x)return;if(!x.draggedElement.isConnected){x.moveHandle.cancel(),f();return}const k={left:x.lastClientX-x.pointerOffsetX,top:x.lastClientY-x.pointerOffsetY,width:x.startRect.width,height:x.startRect.height};x.preview=h(x),n.setDragGhostRect(k),n.setInsertionLine(((X=x.preview)==null?void 0:X.indicatorLine)??null),n.render()}function b(){t.isDisposed||a===null&&(a=requestAnimationFrame(d))}function m(x,k){var C,M;const X=k.parent;if(!X.isConnected||x===X||x.contains(X))return!1;const T=(C=x.getRootNode)==null?void 0:C.call(x),E=(M=X.getRootNode)==null?void 0:M.call(X);if(!Lo(T)||!Lo(E)||T!==E||!k.target.isConnected||k.target.parentElement!==X)return!1;const g=k.side==="before"?k.target:k.target.nextSibling;if(Cs(x,X,g))return!0;try{return X.insertBefore(x,g),!0}catch(N){return console.warn(`${ze} DOM move failed:`,N),!1}}function w(x){var N;if(t.isDisposed)return!1;l&&(l.moveHandle.cancel(),f());const k=x.draggedElement;if(!k||!(k instanceof Element)||!k.isConnected||ja(k))return!1;const X=(N=k.getRootNode)==null?void 0:N.call(k),T=Lo(X)?X:document;let E;try{E=k.getBoundingClientRect()}catch{return!1}const g=Ap(E);if(!g||g.width<=.5||g.height<=.5)return!1;const C=i.beginMove(k);if(!C)return!1;const M=s.style.pointerEvents;return l={pointerId:x.pointerId,draggedElement:k,draggedRoot:T,startRect:g,pointerOffsetX:x.startClientX-g.left,pointerOffsetY:x.startClientY-g.top,lastClientX:x.clientX,lastClientY:x.clientY,preview:null,uiPointerEventsBefore:M,moveHandle:C},u(!1,l),b(),console.log(`${ze} Drag started`),!0}function I(x){const k=l;k&&x.pointerId===k.pointerId&&(k.lastClientX=x.clientX,k.lastClientY=x.clientY,b())}function S(x){const k=l;if(!k||x.pointerId!==k.pointerId)return;k.lastClientX=x.clientX,k.lastClientY=x.clientY,c();const X=h(k);if(!X||X.isNoop){k.moveHandle.cancel(),f(),console.log(`${ze} Drag cancelled (no-op or no target)`);return}if(!m(k.draggedElement,X)){k.moveHandle.cancel(),f(),console.log(`${ze} Drag failed (DOM move error)`);return}k.moveHandle.commit(k.draggedElement),r.forceUpdate(),f(),console.log(`${ze} Drag completed`)}function v(x){const k=l;k&&(k.moveHandle.cancel(),f(),console.log(`${ze} Drag cancelled`))}return t.add(()=>{const x=l;x&&(x.moveHandle.cancel(),f())}),{onDragStart:w,onDragMove:I,onDragEnd:S,onDragCancel:v,dispose:()=>t.dispose()}}const Nt={capture:!0,passive:!1},Mp=["pointerup","pointercancel","pointerover","pointerout","pointerenter","pointerleave"],Lp=["mouseup","click","dblclick","contextmenu","auxclick","mouseover","mouseout","mouseenter","mouseleave"],Dp=["keyup","keypress"],Pp=["touchstart","touchmove","touchend","touchcancel"];function Fp(e){const{isOverlayElement:t,onHover:n,onSelect:o,onDeselect:r,onStartEdit:i,findTargetForSelect:s,getSelectedElement:l,onStartDrag:a,onDragMove:c,onDragEnd:u,onDragCancel:p}=e,f=new Oe,h=typeof PointerEvent<"u";let d="hover",b=null,m=null,w=null,I=null,S=!1,v=!1,x=!1,k=0,X=0,T=null;function E(P){try{if(typeof P.composedPath=="function")return P.composedPath().some(ae=>t(ae))}catch{}return t(P.target)}function g(P){const ae=m;if(!ae)return!1;try{if(typeof P.composedPath=="function")return P.composedPath().some(ve=>ve===ae)}catch{}const xe=P.target;return xe instanceof Node&&ae.contains(xe)}function C(P){d!=="interaction"&&(P.cancelable&&P.preventDefault(),P.stopImmediatePropagation(),P.stopPropagation())}function M(P){return{alt:P.altKey,shift:P.shiftKey,ctrl:P.ctrlKey,meta:P.metaKey}}function N(P){return P instanceof PointerEvent?P.pointerId:0}function D(P){return!(h&&!(P instanceof PointerEvent))}function H(P,ae){try{if(typeof P.composedPath=="function")return P.composedPath().some(ve=>ve===ae)}catch{}const xe=P.target;return xe instanceof Node&&ae.contains(xe)}function y(){w=null,I=null,S=!1}function _(P){if(d==="dragging"){y();try{p==null||p({reason:P})}catch{}v=!0,L("selecting")}}function F(P,ae,xe){if(d==="dragging"&&!(I===null||I!==P)){y();try{u==null||u({pointerId:P,clientX:ae,clientY:xe})}catch{}v=!0,L("selecting")}}function G(P,ae){if(!Number.isFinite(P)||!Number.isFinite(ae))return null;const xe=document.elementFromPoint(P,ae);return!xe||t(xe)?null:xe}function $(P,ae,xe,ve){if(!Number.isFinite(ae)||!Number.isFinite(xe))return null;if(s){const Ae=s(ae,xe,ve,P);return Ae&&t(Ae)?null:Ae}return G(ae,xe)}function W(){T!==null&&(cancelAnimationFrame(T),T=null)}f.add(W);function J(P=!1){if(T=null,f.isDisposed||d!=="hover"&&d!=="selecting"||!x)return;const ae=G(k,X);!P&&ae===b||(b=ae,n(ae))}function A(P=!1){T===null&&(f.isDisposed||(T=requestAnimationFrame(()=>{J(P)})))}function L(P){if(f.isDisposed||d===P)return;const ae=d;if(d=P,ae==="editing"&&P!=="editing"&&(m=null),ae==="selecting"&&P!=="selecting"&&(w=null),P==="interaction"&&ae!=="interaction"&&(r(),W(),b&&(b=null,n(null))),ae==="dragging"&&P!=="dragging"){const xe=!v;if(v=!1,y(),xe)try{p==null||p({reason:"mode_change"})}catch{}}else v=!1;ae==="hover"&&P!=="hover"&&(W(),b?(b=null,n(null)):b=null),P==="hover"&&ae!=="hover"&&(b=null,y(),r(),x&&A(!0))}function Y(P){if(!(d==="editing"&&g(P))){if(E(P)){d==="hover"&&b!==null&&(b=null,n(null));return}if(C(P),k=P.clientX,X=P.clientY,x=!0,d==="dragging"&&D(P)){const ae=N(P),xe=P instanceof PointerEvent;if(S!==xe)return;I!==null&&ae===I&&(c==null||c({pointerId:ae,clientX:P.clientX,clientY:P.clientY}));return}if(d==="selecting"&&w&&D(P)){const ae=N(P);if(ae!==w.pointerId)return;const xe=P instanceof PointerEvent;if(w.isPointerEventOrigin!==xe)return;const ve=P.clientX-w.startClientX,Ae=P.clientY-w.startClientY;if(Math.hypot(ve,Ae)<Al)return;const z={pointerId:ae,draggedElement:w.selectedElement,startClientX:w.startClientX,startClientY:w.startClientY,clientX:P.clientX,clientY:P.clientY,modifiers:w.modifiers},le=w.isPointerEventOrigin;if(w=null,!((a==null?void 0:a(z))??!1))return;I=ae,S=le,L("dragging"),c==null||c({pointerId:ae,clientX:P.clientX,clientY:P.clientY});return}d!=="hover"&&d!=="selecting"||A()}}function B(P){if(d==="editing"&&g(P)||E(P)||(C(P),k=P.clientX,X=P.clientY,x=!0,P.button!==0))return;const ae=M(P);if(d==="selecting"){if(!D(P))return;const ve=(l==null?void 0:l())??null,Ae=$(P,P.clientX,P.clientY,ae);if(Ae&&Ae!==ve){w=null,o(Ae,ae);return}if(a&&ve&&ve.isConnected&&H(P,ve)){const z=P instanceof PointerEvent;w={pointerId:N(P),startClientX:P.clientX,startClientY:P.clientY,modifiers:ae,selectedElement:ve,isPointerEventOrigin:z}}return}if(d==="dragging")return;if(d==="editing"){try{m==null||m.blur()}catch{}L("selecting");return}if(d!=="hover")return;const xe=$(P,P.clientX,P.clientY,ae);xe&&(L("selecting"),o(xe,ae))}function K(P){if(d==="editing"&&g(P)||E(P)||(C(P),P.button!==0)||!i)return;const ae=M(P),xe=$(P,P.clientX,P.clientY,ae);!xe||!i(xe,ae)||(m=xe,L("editing"))}function ge(P){if(!(d==="editing"&&g(P))&&!E(P)&&(C(P),P.key==="Escape")){if(d==="dragging"){_("escape");return}d==="selecting"&&(w=null,L("hover"))}}function we(P){if(d==="editing"&&g(P)||E(P)||(C(P),!D(P)))return;const ae=N(P),xe=P instanceof PointerEvent;d==="selecting"&&w&&w.pointerId===ae&&w.isPointerEventOrigin===xe&&(w=null),d==="dragging"&&S===xe&&F(ae,P.clientX,P.clientY)}function ke(P){if(d==="editing"&&g(P)||E(P))return;C(P);const ae=P.pointerId;w&&w.pointerId===ae&&w.isPointerEventOrigin&&(w=null),d==="dragging"&&S&&(I===null||I!==ae||_("pointercancel"))}function Se(P){if(d!=="interaction"&&!E(P)&&!(d==="editing"&&g(P))){if(P.type==="dblclick"){K(P);return}if(P.type==="pointerup"||P.type==="mouseup"){we(P);return}if(P.type==="pointercancel"){ke(P);return}C(P)}}if(h){f.listen(document,"pointermove",Y,Nt),f.listen(document,"pointerdown",B,Nt);for(const P of Mp)f.listen(document,P,Se,Nt)}f.listen(document,"mousemove",Y,Nt),f.listen(document,"mousedown",B,Nt);for(const P of Lp)f.listen(document,P,Se,Nt);f.listen(document,"keydown",ge,Nt);for(const P of Dp)f.listen(document,P,Se,Nt);for(const P of Pp)f.listen(document,P,Se,Nt);function ie(){d==="selecting"&&w&&(w=null),d==="dragging"&&_("blur")}function Q(){document.visibilityState!=="visible"&&(d==="selecting"&&w&&(w=null),d==="dragging"&&_("visibilitychange"))}return f.listen(window,"blur",ie),f.listen(document,"visibilitychange",Q),f.add(()=>{if(d==="dragging")try{p==null||p({reason:"dispose"})}catch{}y()}),{getMode:()=>d,setMode:L,dispose:()=>f.dispose()}}const Ir={passive:!0},$p=.5,As={childList:!0,subtree:!0};function Op(e){const{left:t,top:n,width:o,height:r}=e;return!Number.isFinite(t)||!Number.isFinite(n)||!Number.isFinite(o)||!Number.isFinite(r)?null:{left:t,top:n,width:Math.max(0,o),height:Math.max(0,r)}}function ko(e,t){return Math.abs(e-t)<$p}function Ts(e,t){return e===t?!0:!e||!t?!1:ko(e.left,t.left)&&ko(e.top,t.top)&&ko(e.width,t.width)&&ko(e.height,t.height)}function Vp(e,t){return Ts(e.hover,t.hover)&&Ts(e.selection,t.selection)}function Bp(e){const{onPositionUpdate:t}=e,n=new Oe;let o=null,r=null,i={hover:null,selection:null},s=null;function l(){s!==null&&(cancelAnimationFrame(s),s=null)}n.add(l);function a(){n.isDisposed||s===null&&(s=requestAnimationFrame(()=>{s=null,d()}))}let c=new Oe;n.add(()=>c.dispose());function u(){var X;c.dispose(),c=new Oe;const S=r;if(!S)return;c.observeResize(S,()=>{n.isDisposed||r===S&&a()});const v=()=>{n.isDisposed||r===S&&a()},x=(X=S.getRootNode)==null?void 0:X.call(S);x instanceof ShadowRoot&&c.observeMutation(x,v,As);const k=document.body??document.documentElement;k&&c.observeMutation(k,v,As)}function p(S){return S&&S.isConnected?S:null}function f(S){if(!S)return null;try{return Op(S.getBoundingClientRect())}catch{return null}}function h(){const S=p(o),v=p(r);if(o&&!S&&(o=null),r&&!v&&(r=null,u()),S&&v&&S===v){const x=f(S);return{hover:x,selection:x}}return{hover:f(S),selection:f(v)}}function d(){if(n.isDisposed)return;const S=h();Vp(S,i)||(i=S,t(S))}function b(){!o&&!r&&!i.hover&&!i.selection||a()}n.listen(window,"scroll",b,Ir),n.listen(document,"scroll",b,{...Ir,capture:!0}),n.listen(window,"resize",b,Ir);function m(S){n.isDisposed||o!==S&&(o=S,a())}function w(S){n.isDisposed||r!==S&&(r=S,u(),a())}function I(S){if(!n.isDisposed){if(l(),S){const v=h();i=v,t(v);return}d()}}return{setHoverElement:m,setSelectionElement:w,forceUpdate:I,dispose:()=>n.dispose()}}const Hp=8,zp=6,Gp=60,Ut=.5,Up=new Set(["A","BUTTON","INPUT","SELECT","TEXTAREA","LABEL","SUMMARY","DETAILS"]),Xp=new Set(["button","link","checkbox","radio","switch","tab","menuitem","option","combobox","textbox"]),jp=new Set(["DIV","SPAN","SECTION","ARTICLE","MAIN","HEADER","FOOTER","NAV","ASIDE"]);function kt(e){const t=Number.parseFloat(e);return Number.isFinite(t)?t:0}function Wp(e){const t=e.trim().toLowerCase();if(t==="transparent")return!0;const n=t.match(/^rgba?\((.+)\)$/);if(n){const r=n[1].split(",").map(i=>i.trim());if(r.length>=4){const i=Number.parseFloat(r[3]);return Number.isFinite(i)&&i<=.01}return!1}const o=t.match(/^hsla?\((.+)\)$/);if(o){const r=o[1].split(",").map(i=>i.trim());if(r.length>=4){const i=Number.parseFloat(r[3]);return Number.isFinite(i)&&i<=.01}return!1}return!1}function Yp(e){var t;for(const n of Array.from(e.childNodes))if(n.nodeType===Node.TEXT_NODE&&((t=n.textContent)!=null&&t.trim()))return!0;return!1}function Mn(e){var t;if(e.parentElement)return e.parentElement;try{const n=(t=e.getRootNode)==null?void 0:t.call(e);if(n instanceof ShadowRoot)return n.host}catch{}return null}function Ns(e,t){if(!Number.isFinite(e)||!Number.isFinite(t))return[];try{if(typeof document.elementsFromPoint=="function")return document.elementsFromPoint(e,t)}catch{}const n=document.elementFromPoint(e,t);return n?[n]:[]}function _r(){const e=Math.max(1,window.innerWidth||1),t=Math.max(1,window.innerHeight||1);return e*t}function Rs(e){try{const t=e.getBoundingClientRect();return!Number.isFinite(t.left)||!Number.isFinite(t.top)||!Number.isFinite(t.width)||!Number.isFinite(t.height)?null:t}catch{return null}}function Is(e,t){return e.display==="none"||e.visibility==="hidden"||e.visibility==="collapse"||kt(e.opacity)<=.01||e.contentVisibility==="hidden"||t.width<=Ut||t.height<=Ut}function _s(e,t){let n=0;const o=[];(!Wp(t.backgroundColor)||t.backgroundImage!=="none")&&(n+=2,o.push("visual:background:+2")),[kt(t.borderTopWidth),kt(t.borderRightWidth),kt(t.borderBottomWidth),kt(t.borderLeftWidth)].some(l=>l>Ut)&&(t.borderTopStyle!=="none"||t.borderRightStyle!=="none"||t.borderBottomStyle!=="none"||t.borderLeftStyle!=="none")&&(n+=3,o.push("visual:border:+3")),t.boxShadow&&t.boxShadow!=="none"&&(n+=2,o.push("visual:shadow:+2")),t.outlineStyle!=="none"&&kt(t.outlineWidth)>Ut&&(n+=1,o.push("visual:outline:+1"));const s=e.tagName.toUpperCase();return(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SVG")&&(n+=2,o.push("visual:media:+2")),e instanceof SVGElement&&s!=="SVG"&&(n-=1,o.push("visual:svg-sub:-1")),{points:n,reasons:o}}function Ms(e,t){var s;let n=0;const o=[],r=e.tagName.toUpperCase();Up.has(r)&&(n+=6,o.push(`type:${r.toLowerCase()}:+6`));const i=((s=e.getAttribute("role"))==null?void 0:s.toLowerCase())??"";return i&&Xp.has(i)&&(n+=4,o.push(`role:${i}:+4`)),e instanceof HTMLAnchorElement&&e.href&&(n+=2,o.push("attr:href:+2")),e instanceof HTMLElement&&(e.isContentEditable&&(n+=5,o.push("attr:contenteditable:+5")),e.tabIndex>=0&&(n+=2,o.push("focusable:+2"))),t.cursor==="pointer"&&(n+=2,o.push("cursor:pointer:+2")),{points:n,reasons:o}}function qp(e,t){let n=0;const o=[],r=e.width*e.height;if(!Number.isFinite(r)||r<=0)return n-=6,o.push("size:invalid:-6"),{points:n,reasons:o};e.width<4||e.height<4?(n-=6,o.push("size:tiny:-6")):r<16*16?(n-=4,o.push("size:small:-4")):r<44*44&&(n-=1,o.push("size:below-tap-target:-1"));const i=t>0?r/t:0;return i>.85?(n-=8,o.push("size:huge:-8")):i>.6&&(n-=4,o.push("size:very-large:-4")),{points:n,reasons:o}}function Kp(e){return kt(e.paddingTop)>Ut||kt(e.paddingRight)>Ut||kt(e.paddingBottom)>Ut||kt(e.paddingLeft)>Ut}function Ls(e,t,n,o){if(t.display==="contents")return!0;if(o>0)return!1;const r=e.tagName.toUpperCase();return!(!jp.has(r)||e.children.length!==1||Yp(e)||n>0||Kp(t))}function Ds(e,t){return e.hitOrder!==t.hitOrder?e.hitOrder-t.hitOrder:e.depthFromHit-t.depthFromHit}function Zp(e){const t=new Oe,{isOverlayElement:n}=e;function o(f,h,d){if(!f.isConnected||n(f))return null;const b=f.tagName.toUpperCase();if(b==="HTML"||b==="BODY")return null;const m=Rs(f);if(!m)return null;let w=h.get(f);if(w||(w=window.getComputedStyle(f),h.set(f,w)),Is(w,m))return null;const I=[];let S=0;const v=Ms(f,w);S+=v.points,I.push(...v.reasons);const x=_s(f,w);S+=x.points,I.push(...x.reasons);const k=qp(m,d);S+=k.points,I.push(...k.reasons);const X=Ls(f,w,x.points,v.points);X&&(S-=8,I.push("wrapperOnly:-8")),b==="SPAN"&&v.points===0&&x.points===0&&(S-=2,I.push("inline:span:-2"));const T=m.width*m.height,E=d>0?T/d:0;return w.position==="fixed"&&E>.3&&(S-=2,I.push("position:fixed-large:-2")),{element:f,score:S,reasons:I,wrapperOnly:X}}function r(f,h){const d=Ns(f,h);if(d.length===0)return[];const b=new Map;function m(x,k){if(n(x)||b.size>=Gp&&!b.has(x))return;const X=b.get(x);(!X||Ds(k,X)<0)&&b.set(x,k)}const w=Math.min(d.length,Hp);for(let x=0;x<w;x++){const k=d[x];m(k,{hitOrder:x,depthFromHit:0});let X=k;for(let T=1;T<=zp&&(X=X?Mn(X):null,!!X);T++)m(X,{hitOrder:x,depthFromHit:T})}const I=_r(),S=new Map,v=[];for(const[x,k]of b){const X=o(x,S,I);X&&v.push({...X,...k})}return v.sort((x,k)=>k.score!==x.score?k.score-x.score:Ds(x,k)),v.map(({hitOrder:x,depthFromHit:k,...X})=>X)}function i(f){let h=Mn(f);if(!h)return null;const d=new Map;for(;h;){if(n(h))return null;const b=h.tagName.toUpperCase();if(b==="HTML"||b==="BODY")return null;const m=Rs(h);if(!m){h=Mn(h);continue}let w=d.get(h);if(w||(w=window.getComputedStyle(h),d.set(h,w)),Is(w,m)){h=Mn(h);continue}const I=Ms(h,w),S=_s(h,w);if(!Ls(h,w,S.points,I.points))return h;h=Mn(h)}return null}function s(f,h,d){var w;const m=((w=r(f,h)[0])==null?void 0:w.element)??null;return m?d.alt?i(m)??m:m:null}function l(f){try{const h=typeof f.composedPath=="function"?f.composedPath():null;if(!Array.isArray(h)||h.length===0)return[];const d=[];for(const b of h){if(!(b instanceof Element)||n(b))continue;const m=b.tagName.toUpperCase();m==="HTML"||m==="BODY"||d.push(b)}return d}catch{return[]}}function a(f){const h=f,d=typeof h.clientX=="number"?h.clientX:Number.NaN,b=typeof h.clientY=="number"?h.clientY:Number.NaN;return!Number.isFinite(d)||!Number.isFinite(b)?null:{x:d,y:b}}const c=32;function u(f){const h=_r(),d=new Map,b=Math.min(f.length,c);for(let m=0;m<b;m++){const w=f[m],I=o(w,d,h);if(I)return I.element}return null}function p(f,h){const d=l(f),b=a(f);if(h.ctrl||h.meta){const x=u(d);return x||(b?s(b.x,b.y,h):null)}const m=d[0]??(b?Ns(b.x,b.y)[0]:null);if(!m)return b?s(b.x,b.y,h):null;const w=_r(),S=o(m,new Map,w);let v;return S&&!S.wrapperOnly?v=m:v=i(m)??m,h.alt?i(v)??v:v}return{findBestTarget:s,findBestTargetFromEvent:p,getCandidatesAtPoint:r,getParentCandidate:i,dispose:()=>t.dispose()}}const Ps=new WeakMap,Fs=new WeakMap;let Jp=0,Qp=0,Mr;const em=["data-testid","data-test-id","data-test","data-qa","data-cy","name","aria-label","title","alt"],rn=48,tm=64;function zo(e){return(e!=null&&e.tagName?String(e.tagName):"").toLowerCase().trim()||"unknown"}function gt(e){return typeof e=="string"?e.trim():""}function nm(e){return String(e??"").replace(/\s+/g," ").trim()}function Bt(e,t){const n=String(e??"");return n.length<=t?n:n.slice(0,Math.max(0,t-1)).trimEnd()+"â€¦"}function om(){if(Mr!==void 0)return Mr;let e="";try{const t=window.frameElement;if(t instanceof HTMLIFrameElement){const n=zo(t),o=gt(t.id||t.getAttribute("id"));if(o)e=`${n}#${o}`;else{const r=gt(t.name||t.getAttribute("name"));if(r)e=`${n}[name="${Bt(r,rn)}"]`;else{const i=gt(t.getAttribute("src")||t.src);e=i?`${n}[src="${Bt(i,rn)}"]`:n}}}}catch{e=""}return Mr=e,e}function rm(e){const t=Fs.get(e);if(t)return t;const n=zo(e),o=gt(e.id||e.getAttribute("id")),r=o?`${n}#${o}`:`${n}_h${++Qp}`;return Fs.set(e,r),r}function Wa(e,t){var r;const n=[];let o=e;for(;;){let i;try{i=(r=o.getRootNode)==null?void 0:r.call(o)}catch{i=null}if(!(i instanceof ShadowRoot))break;const s=i.host;if(!(s instanceof Element))break;n.unshift(rm(s)),o=s}return n.length>0?n.join(">"):""}function im(e){for(const t of em){const n=gt(e.getAttribute(t));if(n)return{attr:t,value:n}}return null}function Rt(e,t){const n=Ps.get(e);if(n)return n;const o=zo(e),r=gt(e.id||e.getAttribute("id")),i=r?`${o}#${r}`:`${o}_${++Jp}`,s=[],l=om();l&&s.push(`frame:${l}`);const a=Wa(e);a&&s.push(`shadow:${a}`),s.push(i);const c=s.join("|");return Ps.set(e,c),c}function Ya(e){const t=zo(e),n=gt(e.id||e.getAttribute("id"));if(n)return`${t}#${n}`;const o=im(e);if(o)return`${t}[${o.attr}="${Bt(o.value,rn)}"]`;const r=gt(e.getAttribute("role"));if(r)return`${t}[role="${Bt(r,rn)}"]`;if(e instanceof HTMLInputElement){const s=gt(e.getAttribute("type")||e.type);if(s&&s!=="text")return`${t}[type="${Bt(s,rn)}"]`;const l=gt(e.getAttribute("placeholder")||e.placeholder);if(l)return`${t}[placeholder="${Bt(l,rn)}"]`}if(e instanceof HTMLIFrameElement){const s=gt(e.getAttribute("src")||e.src);if(s)return`${t}[src="${Bt(s,rn)}"]`}const i=nm(e.textContent??"");return i?`${t}("${Bt(i,tm)}")`:t}function qa(e,t){const n=Ya(e),o=Wa(e);return o?`${o} >> ${n}`:n}const sm=100,am=800,lm={capture:!0,passive:!1};function Xt(e){const t=e.trim();return t?t.startsWith("--")?t:t.includes("-")?t.toLowerCase():t.replace(/[A-Z]/g,n=>`-${n.toLowerCase()}`).toLowerCase():""}function $o(e){const n=e.style;return!n||typeof n.getPropertyValue!="function"||typeof n.setProperty!="function"||typeof n.removeProperty!="function"?null:n}function Co(e,t){const n=Xt(t);return n?e.getPropertyValue(n).trim():""}function $s(e,t){if(typeof window>"u"||typeof window.getComputedStyle!="function")return"";const n=Xt(t);if(!n)return"";try{return window.getComputedStyle(e).getPropertyValue(n).trim()}catch{return""}}function $n(e,t,n){const o=Xt(t);if(!o)return;const r=n.trim();r?e.setProperty(o,r):e.removeProperty(o)}function Ka(e,t){if(!t)return;const n=$o(e);if(n)for(const[o,r]of Object.entries(t))$n(n,o,r)}function Do(e){const t=[],n=new Set;for(const o of e??[]){const r=String(o??"").trim();r&&(n.has(r)||(n.add(r),t.push(r)))}return t}function Os(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function cm(e){try{const t=e.classList;if(t&&typeof t[Symbol.iterator]=="function")return Array.from(t).filter(Boolean)}catch{}try{return(e.getAttribute("class")??"").split(/\s+/).map(n=>n.trim()).filter(Boolean)}catch{return[]}}function Za(e,t){const o=Do(t).join(" ").trim();try{o?e.setAttribute("class",o):e.removeAttribute("class")}catch{}}function um(e){const t=$o(e);if(!t)return;const n={};for(let o=0;o<t.length;o++){const r=t.item(o);if(!r)continue;const i=t.getPropertyValue(r).trim();i&&(n[r]=i)}return Object.keys(n).length>0?n:void 0}function Vs(e){const t=String(e??"").trim();if(!t)return null;try{const n=document.createElement("template");n.innerHTML=t;const o=n.content.firstElementChild;return!o||n.content.childElementCount!==1?null:o}catch{return null}}function dm(e){try{e.removeAttribute("id");const t=e.querySelectorAll("[id]");for(const n of Array.from(t))n.removeAttribute("id")}catch{}}function Bs(e,t,n){if(!e.isConnected)return!1;let o=null;if(n.anchorLocator){const r=He(n.anchorLocator);r&&r.parentElement===e&&(o=n.anchorPosition==="before"?r:r.nextSibling)}if(!o){const r=Array.from(e.children),i=Math.max(0,Math.min(n.insertIndex,r.length));o=r[i]??null}try{return e.insertBefore(t,o),!0}catch{return!1}}function Ur(e,t,n){const o=e.parentElement;if(!o)return null;const r=String(t||"div").toLowerCase(),i=document.createElement(r);n&&Ka(i,n);try{return o.insertBefore(i,e),i.appendChild(e),i}catch{return null}}function Xr(e){const t=e.parentElement;if(!t||e.childElementCount!==1)return null;const n=e.firstElementChild;if(!n)return null;try{return t.insertBefore(n,e),e.remove(),n}catch{return null}}function fm(e){const t=e.parentElement;if(!t)return null;const o=Array.from(t.children).indexOf(e);return o<0?null:{parentLocator:je(t),insertIndex:o+1,anchorLocator:je(e),anchorPosition:"after"}}let Hs=0;function Jt(e){return Hs+=1,`tx_${e.toString(36)}_${Hs.toString(36)}`}function Ja(e,t,n,o,r,i,s){const l={locator:t,styles:n};return s&&Object.keys(s).length>0&&(l.computedStyles=s),{id:e,type:"style",targetLocator:t,elementKey:i,before:l,after:{locator:t,styles:o},timestamp:r,merged:!1}}function zs(e,t,n,o,r,i,s,l){const a=Xt(n),c=l&&l.trim()?{[a]:l}:void 0;return Ja(e,t,{[a]:o},{[a]:r},i,s,c)}function pm(e,t,n,o,r,i){return{id:e,type:"text",targetLocator:t,elementKey:i,before:{locator:t,text:n},after:{locator:t,text:o},timestamp:r,merged:!1}}function mm(e,t,n,o,r,i,s){return{id:e,type:"class",targetLocator:n,elementKey:s,before:{locator:t,classes:o},after:{locator:n,classes:r},timestamp:i,merged:!1}}function hm(e,t,n,o,r,i){return{id:e,type:"move",targetLocator:n,elementKey:i,before:{locator:t},after:{locator:n},moveData:o,timestamp:r,merged:!1}}function Ao(e,t,n,o,r,i,s){return{id:e,type:"structure",targetLocator:t,elementKey:s,before:{locator:n},after:{locator:o},structureData:r,timestamp:i,merged:!1}}function en(e){var n;const t=(n=e.tagName)==null?void 0:n.toUpperCase();return t==="HTML"||t==="BODY"||t==="HEAD"}function an(e){var n;const t=(n=e.tagName)==null?void 0:n.toUpperCase();return t==="HTML"||t==="HEAD"}function jr(e){var n;const t=(n=e.tagName)==null?void 0:n.toUpperCase();return t==="HTML"||t==="BODY"||t==="HEAD"}function Lr(e){const t=e.parentElement;if(!t)return null;const o=Array.from(t.children).indexOf(e);if(o<0)return null;const r=je(t),i=e.nextElementSibling;if(i)return{parentLocator:r,insertIndex:o,anchorLocator:je(i),anchorPosition:"before"};const s=e.previousElementSibling;return s?{parentLocator:r,insertIndex:o,anchorLocator:je(s),anchorPosition:"after"}:{parentLocator:r,insertIndex:o,anchorPosition:"before"}}function gm(e,t){var s,l;if(!e.isConnected||jr(e))return!1;const n=He(t.parentLocator);if(!n||!n.isConnected)return!1;const o=(s=e.getRootNode)==null?void 0:s.call(e),r=(l=n.getRootNode)==null?void 0:l.call(n);if(o&&r&&o!==r||e===n||e.contains(n))return!1;let i=null;if(t.anchorLocator){const a=He(t.anchorLocator);a&&a!==e&&a.parentElement===n&&(i=t.anchorPosition==="before"?a:a.nextSibling,i===e&&(i=e.nextSibling))}if(!i){const a=Array.from(n.children),c=a.indexOf(e);c!==-1&&a.splice(c,1);const u=Math.max(0,Math.min(t.insertIndex,a.length));i=a[u]??null}try{return n.insertBefore(e,i),!0}catch{return!1}}function Wr(e){const t=new Set;if(e.before.styles)for(const n of Object.keys(e.before.styles))t.add(n);if(e.after.styles)for(const n of Object.keys(e.after.styles))t.add(n);return t.size===1?Array.from(t)[0]:null}function bm(e,t,n){if(e.type!=="style"||t.type!=="style"||Math.abs(t.timestamp-e.timestamp)>n||Lt(e.targetLocator)!==Lt(t.targetLocator))return!1;const o=Wr(e),r=Wr(t);return!(!o||!r||o!==r)}function wm(e,t){var r;const n=Wr(e);if(!n)return!1;const o=(r=t.after.styles)==null?void 0:r[n];return o===void 0?!1:(e.after.styles||(e.after.styles={}),e.after.styles[n]=o,e.timestamp=t.timestamp,e.merged=!0,!0)}function xm(e,t){var r,i;const n=e.structureData;if(!n)return!1;const o=t==="redo";switch(n.action){case"wrap":{if(o){const a=He(e.before.locator)??He(e.targetLocator)??He(e.after.locator);if(!a||!a.isConnected||en(a))return!1;const c=a.parentElement;if(!c||!c.isConnected||an(c))return!1;const u=Ur(a,n.wrapperTag??"div",n.wrapperStyles);if(!u||!u.isConnected)return!1;const p=je(u);return e.after.locator=p,e.targetLocator=p,!0}const s=He(e.after.locator)??He(e.targetLocator);if(!s||!s.isConnected||en(s))return!1;const l=Xr(s);return!l||!l.isConnected?!1:(e.before.locator=je(l),!0)}case"unwrap":{if(o){const c=He(e.before.locator)??((r=He(e.after.locator))==null?void 0:r.parentElement)??((i=He(e.targetLocator))==null?void 0:i.parentElement);if(!c||!c.isConnected||en(c))return!1;const u=Xr(c);if(!u||!u.isConnected)return!1;const p=je(u);return e.after.locator=p,e.targetLocator=p,!0}const s=He(e.after.locator)??He(e.targetLocator);if(!s||!s.isConnected||en(s))return!1;const l=s.parentElement;if(!l||!l.isConnected||an(l))return!1;const a=Ur(s,n.wrapperTag??"div",n.wrapperStyles);return!a||!a.isConnected?!1:(e.before.locator=je(a),!0)}case"delete":{if(o){const c=He(e.before.locator)??He(e.targetLocator);return!c||!c.isConnected||en(c)?!1:(c.remove(),!0)}if(!n.position||!n.html)return!1;const s=He(n.position.parentLocator);if(!s||!s.isConnected||an(s))return!1;const l=Vs(n.html);if(!l||!Bs(s,l,n.position))return!1;const a=je(l);return e.before.locator=a,e.targetLocator=a,!0}case"duplicate":{if(o){if(!n.position||!n.html)return!1;const l=He(n.position.parentLocator);if(!l||!l.isConnected||an(l))return!1;const a=Vs(n.html);if(!a||!Bs(l,a,n.position))return!1;const c=je(a);return e.after.locator=c,e.targetLocator=c,!0}const s=He(e.after.locator)??He(e.targetLocator);return!s||!s.isConnected||en(s)?!1:(s.remove(),!0)}default:return!1}}function Gs(e,t){if(e.type==="move"){const r=e.moveData;if(!r)return!1;const i=t==="undo"?e.after.locator:e.before.locator,s=t==="undo"?e.before.locator:e.after.locator,l=He(i)??He(s)??He(e.targetLocator);if(!l)return!1;const a=t==="undo"?r.from:r.to;return gm(l,a)}if(e.type==="class"){const r=t==="undo"?e.after.locator:e.before.locator,i=t==="undo"?e.before.locator:e.after.locator,s=He(r)??He(i)??He(e.targetLocator);if(!s)return!1;const l=t==="undo"?e.before:e.after,a=Array.isArray(l.classes)?l.classes:[];return Za(s,a),!0}if(e.type==="structure")return xm(e,t);if(e.type!=="style"&&e.type!=="text")return!0;const n=He(e.targetLocator);if(!n)return!1;const o=t==="undo"?e.before:e.after;return e.type==="style"?(Ka(n,o.styles),!0):(e.type==="text"&&(n.textContent=o.text??""),!0)}function ym(e={}){const t=new Oe,n=Math.max(1,e.maxHistory??sm),o=Math.max(0,e.mergeWindowMs??am),r=e.now??(()=>Date.now()),i=[],s=[];function l(g,C){var M;(M=e.onChange)==null||M.call(e,{action:g,transaction:C,undoCount:i.length,redoCount:s.length})}function a(){i.length>n&&i.splice(0,i.length-n)}function c(g,C){const M=s.length>0;if(M&&(s.length=0),!M&&C&&i.length>0){const N=i[i.length-1];if(bm(N,g,o)&&wm(N,g)){l("merge",N);return}}i.push(g),a(),l("push",g)}function u(g,C,M,N,D){if(t.isDisposed)return null;const H=Xt(C);if(!H)return null;const y=M.trim(),_=N.trim();if(y===_)return null;const F=Jt(r()),G=zs(F,g,H,y,_,r());return c(G,(D==null?void 0:D.merge)!==!1),G}function p(g,C,M){if(t.isDisposed)return null;const N=String(C??""),D=String(M??"");if(N===D)return null;const H=je(g),y=r(),_=Jt(y),F=Rt(g,H.shadowHostChain),G=pm(_,H,N,D,y,F);return c(G,!1),G}function f(g,C,M){if(t.isDisposed||!g.isConnected)return null;const N=Do(cm(g)),D=Do(C),H=Do(M),y=Os(D,N)?D:N;if(Os(y,H))return null;const _=r(),F=Jt(_),G=je(g),$=Rt(g,G.shadowHostChain);Za(g,H);const W=je(g),J=mm(F,G,W,y,H,_,$);return c(J,!1),J}function h(g,C){if(t.isDisposed||!g.isConnected||en(g))return null;const M=C==null?void 0:C.action,N=r(),D=Jt(N);if(M==="wrap"){const H=g.parentElement;if(!H||!H.isConnected||an(H))return null;const y=je(g),_=Ur(g,C.wrapperTag??"div",C.wrapperStyles);if(!_||!_.isConnected)return null;const F=je(_),G=Rt(_,F.shadowHostChain),$={action:"wrap",wrapperTag:C.wrapperTag??"div",wrapperStyles:C.wrapperStyles},W=Ao(D,F,y,F,$,N,G);return c(W,!1),W}if(M==="unwrap"){const H=g,y=H.parentElement;if(!y||!y.isConnected||an(y)||H.childElementCount!==1)return null;const _=je(H),F=H.tagName.toLowerCase(),G=um(H),$=Xr(H);if(!$||!$.isConnected)return null;const W=je($),J=Rt($,W.shadowHostChain),L=Ao(D,W,_,W,{action:"unwrap",wrapperTag:F,wrapperStyles:G},N,J);return c(L,!1),L}if(M==="delete"){const H=Lr(g);if(!H)return null;const y=String(g.outerHTML??"").trim();if(!y)return null;const _=je(g),F=Rt(g,_.shadowHostChain),G=H.parentLocator;try{g.remove()}catch{return null}const W=Ao(D,_,_,G,{action:"delete",position:H,html:y},N,F);return c(W,!1),W}if(M==="duplicate"){const H=g.parentElement;if(!H||!H.isConnected||an(H))return null;const y=fm(g);if(!y)return null;const _=je(g),F=g.cloneNode(!0);dm(F);try{H.insertBefore(F,g.nextSibling)}catch{return null}const G=String(F.outerHTML??"").trim();if(!G)return null;const $=je(F),W=Rt(F,$.shadowHostChain),A=Ao(D,$,_,$,{action:"duplicate",position:y,html:G},N,W);return c(A,!1),A}return null}function d(g){if(t.isDisposed||!g.isConnected||jr(g))return null;const C=Lr(g);if(!C)return null;const M=r(),N=Jt(M),D=je(g);let H=!1;function y(F){if(H||t.isDisposed||(H=!0,!F.isConnected)||jr(F))return null;const G=Lr(F);if(!G)return null;const $=Lt(C.parentLocator)===Lt(G.parentLocator),W=C.insertIndex===G.insertIndex,J=C.anchorPosition===G.anchorPosition,A=!C.anchorLocator&&!G.anchorLocator||C.anchorLocator&&G.anchorLocator&&Lt(C.anchorLocator)===Lt(G.anchorLocator);if($&&W&&A&&J)return null;const L=je(F),Y=Rt(F,L.shadowHostChain),K=hm(N,D,L,{from:C,to:G},r(),Y);return c(K,!1),K}function _(){H||t.isDisposed||(H=!0)}return{id:N,beforeLocator:D,from:C,commit:y,cancel:_}}function b(g,C){if(t.isDisposed)return null;const M=$o(g);if(!M)return null;const N=M,D=Xt(C);if(!D)return null;const H=je(g),y=Co(N,D),_=$s(g,D),F=Jt(r()),G=Rt(g,H.shadowHostChain);let $=!1;function W(L){$||t.isDisposed||$n(N,D,L)}function J(L){if($||t.isDisposed)return null;$=!0;const Y=Co(N,D);if(Y===y)return null;const B=zs(F,H,D,y,Y,r(),G,_);return c(B,(L==null?void 0:L.merge)!==!1),B}function A(){$||t.isDisposed||($=!0,$n(N,D,y),l("rollback",null))}return{id:F,property:D,targetLocator:H,set:W,commit:J,rollback:A}}function m(g,C){if(t.isDisposed)return null;const M=$o(g);if(!M)return null;const N=M,D=Array.from(new Set(C.map(B=>Xt(String(B))).filter(B=>!!B)));if(D.length===0)return null;const H=new Set(D),y=je(g),_=r(),F=Jt(_),G=Rt(g,y.shadowHostChain),$={},W={};for(const B of D)$[B]=Co(N,B),W[B]=$s(g,B);let J=!1;function A(B){if(!(J||t.isDisposed))for(const[K,ge]of Object.entries(B)){const we=Xt(K);!we||!H.has(we)||$n(N,we,String(ge??""))}}function L(B){if(J||t.isDisposed)return null;J=!0;const K={},ge={},we={};for(const Se of D){const ie=$[Se]??"",Q=Co(N,Se);if(Q===ie)continue;K[Se]=ie,ge[Se]=Q;const P=W[Se]??"";P.trim()&&(we[Se]=P)}if(Object.keys(K).length===0)return null;const ke=Ja(F,y,K,ge,r(),G,we);return c(ke,(B==null?void 0:B.merge)===!0),ke}function Y(){if(!(J||t.isDisposed)){J=!0;for(const B of D)$n(N,B,$[B]??"");l("rollback",null)}}return{id:F,properties:D,targetLocator:y,set:A,commit:L,rollback:Y}}function w(g,C,M,N){const D=b(g,C);return D?(D.set(M),D.commit(N)):null}function I(){var M;if(t.isDisposed)return null;const g=i.pop();return g?Gs(g,"undo")?(s.push(g),l("undo",g),g):(i.push(g),(M=e.onApplyError)==null||M.call(e,new Error(`Failed to locate element for undo: ${g.id}`)),null):null}function S(){var M;if(t.isDisposed)return null;const g=s.pop();return g?Gs(g,"redo")?(i.push(g),a(),l("redo",g),g):(s.push(g),(M=e.onApplyError)==null||M.call(e,new Error(`Failed to locate element for redo: ${g.id}`)),null):null}function v(){return i.length>0}function x(){return s.length>0}function k(){return i.slice()}function X(){return s.slice()}function T(){i.length=0,s.length=0,l("clear",null)}e.enableKeyBindings&&t.listen(window,"keydown",g=>{var N;if((N=e.isEventFromEditorUi)!=null&&N.call(e,g)||!(g.metaKey||g.ctrlKey)||g.altKey)return;const M=g.key.toLowerCase();M==="z"?(g.shiftKey?S():I(),g.preventDefault(),g.stopPropagation(),g.stopImmediatePropagation()):M==="y"&&(S(),g.preventDefault(),g.stopPropagation(),g.stopImmediatePropagation())},lm);function E(){i.length=0,s.length=0,t.dispose()}return{beginStyle:b,beginMultiStyle:m,beginMove:d,applyStyle:w,recordStyle:u,recordText:p,recordClass:f,applyStructure:h,undo:I,redo:S,canUndo:v,canRedo:x,getUndoStack:k,getRedoStack:X,clear:T,dispose:E}}const Us=96,Xs=64,vm=new Set(["style","text","class"]);function Yr(e){return String(e??"").trim()}function Ln(e){return String(e??"").trim()}function js(e){return String(e??"").replace(/\s+/g," ").trim()}function Oo(e,t){const n=String(e??"");return n.length<=t?n:n.slice(0,Math.max(0,t-1)).trimEnd()+"â€¦"}function Ws(e){const t=[],n=new Set;for(const o of e??[]){const r=String(o??"").trim();r&&(n.has(r)||(n.add(r),t.push(r)))}return t}function Em(e){if(typeof document>"u")return null;try{return He(e)}catch{return null}}function Sm(e,t){let n="";const o=Yr(e.fingerprint);if(o){const a=o.split("|").map(f=>f.trim()).filter(Boolean),c=a[0]??"element",u=a.find(f=>f.startsWith("id=")),p=u?u.slice(3).trim():"";n=p?`${c}#${p}`:c}else Array.isArray(e.selectors)&&e.selectors.length>0?n=Oo(Yr(e.selectors[0]),Xs)||"element":n=Oo(t,Xs)||"element";const r=[],i=(e.frameChain??[]).join(">").trim(),s=(e.shadowHostChain??[]).join(">").trim();i&&r.push(i),s&&r.push(s);const l=r.length?`${r.join(">")} >> ${n}`:n;return{label:n,fullLabel:l}}function km(e,t){const n=Em(e);return n?{label:Ya(n),fullLabel:qa(n,e.shadowHostChain)}:Sm(e,t)}function Cm(e,t,n){return Number(e)+Number(t)+Number(n)>1?"mixed":e?"style":t?"text":n?"class":"mixed"}function Am(e){const t=new Map,n=new Map,o=new Map;for(const p of e){if(p.type!=="style")continue;const f=p.before.styles??{},h=p.before.computedStyles??{},d=p.after.styles??{},b=new Set([...Object.keys(f),...Object.keys(d)]);for(const m of b){const w=String(m??"").trim();if(!w)continue;const I=Ln(f[w]),S=Ln(h[w]),v=I||S,x=Ln(d[w]);t.has(w)||(t.set(w,I),n.set(w,v)),o.set(w,x)}}if(t.size===0&&o.size===0)return null;const r={},i={},s=new Set([...t.keys(),...o.keys()]);for(const p of s){const f=t.get(p)??"",h=o.get(p)??"";if(f===h)continue;const d=n.get(p)??f;r[p]=d,i[p]=h}const l=Array.from(new Set([...Object.keys(r),...Object.keys(i)])).sort();if(l.length===0)return null;let a=0,c=0,u=0;for(const p of l){const f=Ln(r[p]),h=Ln(i[p]);!f&&h?a+=1:f&&!h?c+=1:u+=1}return{before:r,after:i,added:a,removed:c,modified:u,details:l}}function Tm(e){let t,n;for(const i of e)i.type==="text"&&(t===void 0&&(t=String(i.before.text??"")),n=String(i.after.text??""));if(t===void 0||n===void 0||t===n)return null;const o=Oo(js(t),Us),r=Oo(js(n),Us);return{before:t,after:n,beforePreview:o,afterPreview:r}}function Nm(e){let t,n;for(const c of e)c.type==="class"&&(t||(t=Ws(c.before.classes)),n=Ws(c.after.classes));if(!t||!n)return null;const o=new Set(t),r=new Set(n),i=Array.from(r).filter(c=>!o.has(c)).sort(),s=Array.from(o).filter(c=>!r.has(c)).sort();if(i.length===0&&s.length===0)return null;const l=Array.from(o).sort(),a=Array.from(r).sort();return{before:l,after:a,added:i,removed:s}}function To(e){var r;const t=e.map((i,s)=>({tx:i,index:s}));t.sort((i,s)=>{const l=Number(i.tx.timestamp??0),a=Number(s.tx.timestamp??0);return l!==a?l-a:i.index-s.index});const n=new Map;for(const{tx:i}of t){if(!vm.has(i.type))continue;const s=Yr(i.elementKey);let l;if(s)l=s;else try{l=Lt(i.targetLocator)}catch{l=`unknown:${i.id}`}const a=n.get(l);a?a.push(i):n.set(l,[i])}const o=[];for(const[i,s]of n.entries()){if(s.length===0)continue;const l=s[s.length-1],a=((r=l.after)==null?void 0:r.locator)??l.targetLocator,c=Am(s),u=Tm(s),p=Nm(s),f=c!==null,h=u!==null,d=p!==null;if(!f&&!h&&!d)continue;const{label:b,fullLabel:m}=km(a,i),w={elementKey:i,locator:a};c&&(w.styleChanges={before:c.before,after:c.after}),u&&(w.textChange={before:u.before,after:u.after}),p&&(w.classChanges={before:p.before,after:p.after});const I={};c&&(I.style={added:c.added,removed:c.removed,modified:c.modified,details:c.details}),u&&(I.text={beforePreview:u.beforePreview,afterPreview:u.afterPreview}),p&&(I.class={added:p.added,removed:p.removed});const S=s.reduce((x,k)=>{const X=Number(k.timestamp??0);return Number.isFinite(X)?Math.max(x,X):x},0),v=Cm(f,h,d);o.push({elementKey:i,label:b,fullLabel:m,locator:a,type:v,changes:I,transactionIds:s.map(x=>x.id),netEffect:w,updatedAt:S,debugSource:a.debugSource})}return o.sort((i,s)=>s.updatedAt-i.updatedAt||i.label.localeCompare(s.label)),o}function Dr(e){return typeof e=="number"&&Number.isFinite(e)}function Rm(e){return e/(1024*1024)}function Ys(e,t){const n=Rm(e);return Number.isFinite(n)?n.toFixed(t):"N/A"}function Im(){try{const t=performance.memory;if(!t)return null;const n=t.usedJSHeapSize,o=t.jsHeapSizeLimit,r=t.totalJSHeapSize;return!Dr(n)||!Dr(o)||!Dr(r)?null:{usedJSHeapSize:n,totalJSHeapSize:r,jsHeapSizeLimit:o}}catch{return null}}function _m(e){const t=new Oe,n=e.container,o=Math.max(100,Math.floor(e.fpsUiIntervalMs)),r=Math.max(250,Math.floor(e.memorySampleIntervalMs)),i=document.createElement("div");i.className="we-perf-hud",i.hidden=!0,i.setAttribute("aria-hidden","true");const s=document.createElement("div");s.className="we-perf-hud-line",s.textContent="FPS: --";const l=document.createElement("div");l.className="we-perf-hud-line",l.textContent="Heap: --",i.append(s,l),n.append(i),t.add(()=>i.remove());let a=!1,c=null,u=0,p=0,f=0,h=s.textContent??"",d=l.textContent??"";function b(){c!==null&&(cancelAnimationFrame(c),c=null)}t.add(b);function m(T,E,g){if(g==="fps"){if(E===h)return;h=E}else{if(E===d)return;d=E}T.textContent=E}function w(){const T=Im();if(!T){m(l,"Heap: N/A","heap");return}const E=Ys(T.usedJSHeapSize,1),g=Ys(T.jsHeapSizeLimit,0);m(l,`Heap: ${E} / ${g} MB`,"heap")}function I(T){u=0,p=T,f=T-r,m(s,"FPS: --","fps"),w()}function S(){t.isDisposed||a&&c===null&&document.visibilityState==="visible"&&(c=requestAnimationFrame(v))}function v(T){if(c=null,t.isDisposed||!a||document.visibilityState!=="visible")return;u+=1;const E=T-p;if(E>=o){const g=E>0?u*1e3/E:0,C=Math.max(0,Math.round(g));m(s,`FPS: ${C}`,"fps"),u=0,p=T}T-f>=r&&(f=T,w()),S()}function x(){if(a){if(document.visibilityState!=="visible"){b();return}I(performance.now()),S()}}t.listen(document,"visibilitychange",x);function k(T){if(a!==T){if(a=T,!a){i.hidden=!0,b();return}i.hidden=!1,document.visibilityState==="visible"&&(I(performance.now()),S())}}function X(){return k(!a),a}return{isEnabled:()=>a,setEnabled:k,toggle:X,dispose:()=>{a=!1,i.hidden=!0,t.dispose()}}}const Mm=50,Lm=8;function Dm(e={}){const t=Math.max(1,Math.floor(e.maxDeclarationsPerToken??Mm)),n=Math.max(0,Math.floor(e.maxInlineDepth??Lm));function o(f){try{return f.cssRules}catch{return null}}function r(f){var h,d;if(f.disabled)return!1;try{const b=((d=(h=f.media)==null?void 0:h.mediaText)==null?void 0:d.trim())??"";return!b||b.toLowerCase()==="all"?!0:window.matchMedia(b).matches}catch{return!0}}function i(f,h){var m;const d=typeof f.href=="string"?f.href:void 0;if(d){const w=((m=d.split("/").pop())==null?void 0:m.split("?")[0])??d;return{url:d,label:w}}const b=f.ownerNode;return(b==null?void 0:b.nodeType)===Node.ELEMENT_NODE?{label:`<${b.tagName.toLowerCase()} #${h}>`}:{label:`<constructed #${h}>`}}function s(f,h){var d,b;try{const m=((b=(d=f.media)==null?void 0:d.mediaText)==null?void 0:b.trim())??"";return!m||m.toLowerCase()==="all"?!0:window.matchMedia(m).matches}catch(m){return h.push(`Failed to evaluate @media: ${String(m)}`),!1}}function l(f,h){var d;try{const b=((d=f.conditionText)==null?void 0:d.trim())??"";return!b||typeof(CSS==null?void 0:CSS.supports)!="function"?!0:CSS.supports(b)}catch(b){return h.push(`Failed to evaluate @supports: ${String(b)}`),!1}}function a(f){const h=[],d=Number((f==null?void 0:f.length)??0);for(let b=0;b<d;b++){let m="";try{m=String(f.item(b)??"").trim()}catch{continue}if(!m.startsWith("--"))continue;let w="",I=!1;try{w=String(f.getPropertyValue(m)??"").trim(),I=f.getPropertyPriority(m)==="important"}catch{}h.push({name:m,value:w,important:I})}return h}function c(f){const h=f instanceof ShadowRoot?"shadow":"document",d=[],b=new Map;let m=0,w=0,I=0;function S(T){const E=b.get(T.name)??[];E.length>=t||(E.push({...T,order:I++}),b.set(T.name,E),w++)}function v(T,E){var g,C,M;for(const N of Array.from(T)){if(m++,N.type===CSSRule.IMPORT_RULE){const H=N,y=H.styleSheet;if(y&&!E.visited.has(y)){try{const G=((C=(g=H.media)==null?void 0:g.mediaText)==null?void 0:C.trim())??"";if(G&&G.toLowerCase()!=="all"&&!window.matchMedia(G).matches)continue}catch{}if(!r(y))continue;const _=o(y),F=i(y,E.sheetIndex);if(!_){d.push(`Skipped @import (cross-origin): ${F.url??F.label}`);continue}E.visited.add(y);try{v(_,{...E,source:F})}finally{E.visited.delete(y)}}continue}if(N.type===CSSRule.MEDIA_RULE){s(N,d)&&v(N.cssRules,E);continue}if(N.type===CSSRule.SUPPORTS_RULE){l(N,d)&&v(N.cssRules,E);continue}if(N.type===CSSRule.STYLE_RULE){const H=N,y=String(H.selectorText??"").trim()||void 0,_=a(H.style);for(const F of _)S({name:F.name,value:F.value,important:F.important,origin:"rule",rootType:h,styleSheet:E.source,selectorText:y});continue}const D=N;if((M=D.cssRules)!=null&&M.length)try{v(D.cssRules,E)}catch{}}}const x=f,k=[];try{for(const T of Array.from(x.styleSheets??[]))T instanceof CSSStyleSheet&&k.push(T)}catch{}try{const T=Array.from(x.adoptedStyleSheets??[]);for(const E of T)E instanceof CSSStyleSheet&&k.push(E)}catch{}for(let T=0;T<k.length;T++){const E=k[T];if(!r(E))continue;const g=i(E,T),C=o(E);if(!C){d.push(`Skipped stylesheet (cross-origin): ${g.url??g.label}`);continue}v(C,{sheetIndex:T,source:g,visited:new Set([E])})}const X={styleSheets:k.length,rulesScanned:m,tokens:b.size,declarations:w};return{rootType:h,tokens:b,warnings:[...new Set(d)],stats:X}}function u(f){var h;if(f.parentElement)return f.parentElement;try{const d=(h=f.getRootNode)==null?void 0:h.call(f);if(d instanceof ShadowRoot)return d.host}catch{}return null}function p(f,h){const d=Math.max(0,Math.floor((h==null?void 0:h.maxDepth)??n)),b=new Set;let m=f,w=0;for(;m&&w<=d;){w++;try{const I=m.style;if(I){const S=Number(I.length??0);for(let v=0;v<S;v++){const x=String(I.item(v)??"").trim();x.startsWith("--")&&b.add(x)}}}catch{}m=u(m)}return b}return{collectRootIndex:c,collectInlineTokenNames:p}}function Pm(e={}){const t=!!e.enableProbe;function n(a,c){const u=typeof c=="string"?c.trim():"";return u?`var(${a}, ${u})`:`var(${a})`}function o(a){const c=String(a??"").trim();if(!c.toLowerCase().startsWith("var("))return null;let u=0,p=-1;for(let w=0;w<c.length;w++){const I=c[w];if(I==="(")u++;else if(I===")"&&(u--,u===0)){p=w;break}}if(p<0||p!==c.length-1)return null;const f=c.slice(4,p).trim();if(!f)return null;let h=-1;u=0;for(let w=0;w<f.length;w++){const I=f[w];if(I==="(")u++;else if(I===")")u=Math.max(0,u-1);else if(I===","&&u===0){h=w;break}}const d=(h>=0?f.slice(0,h):f).trim(),b=h>=0?f.slice(h+1).trim():"";if(!d.startsWith("--"))return null;const m=d;return b?{name:m,fallback:b}:{name:m}}function r(a){var h;const c=[],u=String(a??""),p=/var\(\s*(--[\w-]+)/g;let f;for(;f=p.exec(u);){const d=(h=f[1])==null?void 0:h.trim();d!=null&&d.startsWith("--")&&c.push(d)}return c}function i(a,c){try{return window.getComputedStyle(a).getPropertyValue(c).trim()}catch{return""}}function s(a,c){const u=i(a,c);return{token:c,computedValue:u,availability:u?"available":"unset"}}function l(a,c,u,p={}){const f=n(c,p.fallback),h=t&&p.preview?"probe":"computed";let d;return h==="computed"&&p.preview&&(d=i(a,c)||void 0),{token:c,cssProperty:u,cssValue:f,resolvedValue:d,method:h}}return{formatCssVar:n,parseCssVar:o,extractCssVarNames:r,readComputedValue:i,resolveToken:s,resolveTokenForProperty:l}}function Fm(e={}){const t=new Oe,n=e.now??(()=>performance.now()),o=Math.max(0,Math.floor(e.cacheMaxAgeMs??0)),r=e.observeHead!==!1,i=!!e.observeShadowRoots,s=Math.max(0,Math.floor(e.maxInlineDepth??8)),l=e.detector??Dm(e.detectorOptions),a=e.resolver??Pm(e.resolverOptions),c=new WeakMap,u=new WeakSet,p=new Set;function f(N){return N instanceof ShadowRoot?"shadow":"document"}function h(N,D){const H={root:N,rootType:f(N),reason:D,timestamp:n()};for(const y of p)try{y(H)}catch{}}function d(N){var D;try{const H=(D=N.getRootNode)==null?void 0:D.call(N);return H instanceof ShadowRoot?H:N.ownerDocument??document}catch{return N.ownerDocument??document}}function b(N){if(u.has(N))return;if(u.add(N),N instanceof ShadowRoot){if(!i)return;t.observeMutation(N,()=>w(N,"shadow_mutation"),{childList:!0,subtree:!0,characterData:!0,attributes:!0});return}if(!r)return;const D=N.head;D&&t.observeMutation(D,()=>w(N,"head_mutation"),{childList:!0,subtree:!0,characterData:!0,attributes:!0})}function m(N){const D=c.get(N);if(D)if(o>0)if(n()-D.collectedAt>=o)w(N,"ttl");else return D.index;else return D.index;const H=l.collectRootIndex(N);return c.set(N,{index:H,collectedAt:n()}),H}function w(N,D="manual"){c.delete(N),h(N,D)}function I(N,D){const H=[...D].sort((y,_)=>y.order-_.order);return{name:N,kind:"unknown",declarations:H}}function S(N,D={}){b(N);const H=m(N),y=[];for(const[_,F]of H.tokens)y.push(I(_,F));return D.sortByName!==!1&&y.sort((_,F)=>_.name.localeCompare(F.name)),{tokens:y,warnings:H.warnings,stats:H.stats}}function v(N,D={}){const H=d(N);b(H);const y=m(H),_=new Set;for(const W of y.tokens.keys())_.add(W);if(D.includeInlineAncestors!==!1){const W=D.inlineMaxDepth??s,J=l.collectInlineTokenNames(N,{maxDepth:W});for(const A of J)_.add(A)}const G=[];let $=null;try{$=window.getComputedStyle(N)}catch{}if($)for(const W of _){let J="";try{J=$.getPropertyValue(W).trim()}catch{}if(!J)continue;const A=y.tokens.get(W)??[];G.push({token:I(W,A),computedValue:J})}return D.sortByName!==!1&&G.sort((W,J)=>W.token.name.localeCompare(J.token.name)),{tokens:G,warnings:y.warnings,stats:y.stats}}function x(N,D){return a.resolveToken(N,D)}function k(N,D,H,y){return a.resolveTokenForProperty(N,D,H,y)}function X(N,D){return a.formatCssVar(N,D)}function T(N){return a.parseCssVar(N)}function E(N){return a.extractCssVarNames(N)}function g(N,D,H,y,_){const F=X(y,_==null?void 0:_.fallback);return N.applyStyle(D,H,F,{merge:_==null?void 0:_.merge})}function C(N){return p.add(N),()=>p.delete(N)}function M(){p.clear(),t.dispose()}return{getRootTokens:S,getContextTokens:v,resolveToken:x,resolveTokenForProperty:k,formatCssVar:X,parseCssVar:T,extractCssVarNames:E,invalidateRoot:w,onInvalidation:C,applyTokenToStyle:g,dispose:M}}function $m(e={}){const t={toolbar:!0,breadcrumbs:!0,propertyPanel:!0,...e.ui??{}},n={active:!1,shadowHost:null,canvasOverlay:null,handlesController:null,eventController:null,positionTracker:null,selectionEngine:null,dragReorderController:null,transactionManager:null,executionTracker:null,hmrConsistencyVerifier:null,toolbar:null,breadcrumbs:null,propertyPanel:null,propsBridge:null,tokensService:null,perfMonitor:null,perfHotkeyCleanup:null,hoveredElement:null,pendingHoverTransition:!1,selectedElement:null,applyingSnapshot:null,toolbarPosition:null,propertyPanelPosition:null,uiResizeCleanup:null},o={alt:!1,shift:!1,ctrl:!1,meta:!1};let r=null;function i(z){return!(!(z instanceof HTMLElement)||z instanceof HTMLInputElement||z instanceof HTMLTextAreaElement||z.childElementCount>0)}function s(z){const{element:le,beforeContentEditable:se,beforeSpellcheck:fe}=z;se===null?le.removeAttribute("contenteditable"):le.setAttribute("contenteditable",se),le.spellcheck=fe,le.style.outline=z.beforeOutline,le.style.outlineOffset=z.beforeOutlineOffset,le.style.boxShadow=z.beforeBoxShadow,le.removeEventListener("keydown",z.keydownHandler,!0),le.removeEventListener("blur",z.blurHandler,!0)}function l(){var fe,re,O;const z=r;if(!z)return;r=null;const le=z.element,se=le.textContent??"";le.textContent=se,s(z),z.beforeText!==se&&((fe=n.transactionManager)==null||fe.recordText(le,z.beforeText,se)),(re=n.positionTracker)==null||re.forceUpdate(!0),n.selectedElement===le&&((O=n.breadcrumbs)==null||O.setTarget(le)),console.log(`${ze} Text edit committed`)}function a(){var le,se;const z=r;z&&(r=null,z.element.textContent=z.beforeText,s(z),(le=n.positionTracker)==null||le.forceUpdate(!0),n.selectedElement===z.element&&((se=n.breadcrumbs)==null||se.setTarget(z.element)),console.log(`${ze} Text edit cancelled`))}function c(z,le){var ue,Z;if(!i(z)||!z.isConnected)return!1;if(n.selectedElement!==z&&p(z,le),(r==null?void 0:r.element)===z)return!0;r&&l();const se=z.textContent??"",fe=z.getAttribute("contenteditable"),re=z.spellcheck,O=z.style.outline,R=z.style.outlineOffset,V=z.style.boxShadow,j=be=>{var oe;be.key==="Escape"&&(be.preventDefault(),be.stopPropagation(),be.stopImmediatePropagation(),a(),(oe=n.eventController)==null||oe.setMode("selecting"))},te=()=>{var oe;const be=r;be&&((oe=n.eventController)==null||oe.setMode("selecting"),queueMicrotask(()=>{r===be&&l()}))};z.addEventListener("keydown",j,!0),z.addEventListener("blur",te,!0),z.setAttribute("contenteditable","true"),z.spellcheck=!1,z.style.outline="none",z.style.outlineOffset="0px",z.style.boxShadow="none";const q=()=>{if(document.activeElement!==z)try{z.focus({preventScroll:!0})}catch{try{z.focus()}catch{}}},ne=()=>{const be=window.getSelection();if(be)try{const oe=document.createRange();oe.selectNodeContents(z),oe.collapse(!1),be.removeAllRanges(),be.addRange(oe)}catch{}};return q(),queueMicrotask(()=>{q(),ne()}),r={element:z,beforeText:se,beforeContentEditable:fe,beforeSpellcheck:re,beforeOutline:O,beforeOutlineOffset:R,beforeBoxShadow:V,keydownHandler:j,blurHandler:te},(ue=n.positionTracker)==null||ue.forceUpdate(!0),(Z=n.breadcrumbs)==null||Z.setTarget(null),console.log(`${ze} Text edit started`),!0}function u(z){const le=n.hoveredElement;n.hoveredElement=z;const se=le!==null&&z!==null&&le!==z;n.pendingHoverTransition=se,n.positionTracker&&(n.positionTracker.setHoverElement(z),n.positionTracker.forceUpdate())}function p(z,le){var fe,re,O,R;if(r&&r.element!==z)return;n.selectedElement=z,n.hoveredElement=null,n.positionTracker&&(n.positionTracker.setHoverElement(null),n.positionTracker.setSelectionElement(z),n.positionTracker.forceUpdate()),(fe=n.breadcrumbs)==null||fe.setTarget(z),(re=n.propertyPanel)==null||re.setTarget(z),(O=n.handlesController)==null||O.setTarget(z),(R=n.hmrConsistencyVerifier)==null||R.onSelectionChange(z);const se=le.alt?" (Alt: drill-up)":"";console.log(`${ze} Selected${se}:`,z.tagName,z)}function f(){var z,le,se,fe;n.selectedElement=null,n.positionTracker&&(n.positionTracker.setSelectionElement(null),n.positionTracker.forceUpdate()),(z=n.breadcrumbs)==null||z.setTarget(null),(le=n.propertyPanel)==null||le.setTarget(null),(se=n.handlesController)==null||se.setTarget(null),(fe=n.hmrConsistencyVerifier)==null||fe.onSelectionChange(null),console.log(`${ze} Deselected`)}function h(z){var R,V;(R=n.breadcrumbs)==null||R.setAnchorRect(z.selection);const le=n.pendingHoverTransition;if(n.pendingHoverTransition=!1,!n.canvasOverlay)return;const se=!!r,fe=!!n.selectedElement&&n.hoveredElement===n.selectedElement,re=se||fe?null:z.hover,O=se?null:z.selection;n.canvasOverlay.setHoverRect(re,{animate:le}),n.canvasOverlay.setSelectionRect(O),(V=n.handlesController)==null||V.setSelectionRect(O),n.canvasOverlay.render()}function d(z){var re,O,R,V;const{action:le,undoCount:se,redoCount:fe}=z;console.log(`${ze} Transaction: ${le} (undo: ${se}, redo: ${fe})`),(re=n.toolbar)==null||re.setHistory(se,fe),(O=n.propertyPanel)==null||O.setHistory(se,fe),(le==="undo"||le==="redo")&&((R=n.propertyPanel)==null||R.refresh()),(V=n.hmrConsistencyVerifier)==null||V.onTransactionChange(z),g()}async function b(){throw new Error("å½“å‰æ¨¡å¼ä¸æ”¯æŒåº”ç”¨ä¿®æ”¹")}const m=1,w="web-editor-v2-cache:";let I=null,S=!1;function v(){if(typeof window>"u")return null;const z=window.location.pathname.match(/\/(elements|pages)\/([^/]+)/);return z?`${z[1]}/${z[2]}`:null}function x(){if(typeof window>"u")return null;const z=v()??window.location.pathname??"",le=String(z??"").trim();return le?`${w}${le}`:null}function k(){if(typeof window>"u")return null;const z=x();if(!z)return null;try{const le=window.localStorage.getItem(z);if(!le)return null;const se=JSON.parse(le);return!se||se.version!==m||!Array.isArray(se.entries)?null:se}catch{return null}}function X(z){if(typeof window>"u")return;const le=x();if(le)try{if(!z||z.length===0){window.localStorage.removeItem(le);return}const se={version:m,path:v()??window.location.pathname??"",updatedAt:Date.now(),entries:z};window.localStorage.setItem(le,JSON.stringify(se))}catch{}}function T(){var O;const z=n.transactionManager;if(!z)return[];const se=z.getUndoStack().slice().map((R,V)=>({tx:R,index:V}));se.sort((R,V)=>{const j=Number(R.tx.timestamp??0),te=Number(V.tx.timestamp??0);return j!==te?j-te:R.index-V.index});const fe=new Map;for(const{tx:R}of se){if(R.type!=="style"&&R.type!=="text")continue;const V=R.elementKey?String(R.elementKey):Lt(R.targetLocator),j=fe.get(V),te=((O=R.after)==null?void 0:O.locator)??R.targetLocator,q=j??{locator:te,styleBefore:{},styleAfter:{},textBefore:void 0,textAfter:void 0};if(q.locator=te,R.type==="style"){const ne=R.before.styles??{},ue=R.after.styles??{},Z=new Set([...Object.keys(ne),...Object.keys(ue)]);for(const be of Z){const oe=String(be??"").trim();oe&&(oe in q.styleBefore||(q.styleBefore[oe]=String(ne[oe]??"").trim()),q.styleAfter[oe]=String(ue[oe]??"").trim())}}R.type==="text"&&(q.textBefore===void 0&&(q.textBefore=String(R.before.text??"")),q.textAfter=String(R.after.text??"")),j||fe.set(V,q)}const re=[];for(const R of fe.values()){const V={locator:R.locator},j={},te={},q=new Set([...Object.keys(R.styleBefore),...Object.keys(R.styleAfter)]);for(const ne of q){const ue=String(R.styleBefore[ne]??"").trim(),Z=String(R.styleAfter[ne]??"").trim();ue!==Z&&(j[ne]=ue,te[ne]=Z)}(Object.keys(j).length>0||Object.keys(te).length>0)&&(V.styleChanges={before:j,after:te}),R.textBefore!==void 0&&R.textAfter!==void 0&&R.textBefore!==R.textAfter&&(V.textChange={before:R.textBefore,after:R.textAfter}),!(!V.textChange&&!V.styleChanges)&&re.push(V)}return re}function E(){if(S)return;const z=T();X(z)}function g(){S||(I!==null&&window.clearTimeout(I),I=window.setTimeout(()=>{I=null,E()},120))}function C(z){const le=n.transactionManager;if(le)for(const se of z){const fe=He(se.locator);if(!(!fe||!fe.isConnected)){if(se.styleChanges){const re=se.styleChanges.after??{},O=se.styleChanges.before??{};for(const R of Object.keys(re)){const V=String(re[R]??""),j=String(O[R]??""),q=fe.style;q&&(V.trim()?q.setProperty(R,V.trim()):q.removeProperty(R)),le.recordStyle(se.locator,R,j,V,{merge:!1})}}if(se.textChange){const re=String(se.textChange.before??""),O=String(se.textChange.after??"");re!==O&&fe instanceof HTMLElement&&(fe.textContent=O,le.recordText(fe,re,O))}}}}function M(){if(typeof window>"u")return;const z=k();if(!(!z||z.entries.length===0)){S=!0;try{C(z.entries)}finally{S=!1}E()}}function N(z){var fe;const le=T();if(le.length===0){X([]);return}const se=[];for(const re of le){const O={locator:re.locator};z==="text"?re.styleChanges&&(O.styleChanges=re.styleChanges):re.textChange&&(O.textChange=re.textChange),!(!O.textChange&&!O.styleChanges)&&se.push(O)}S=!0;try{(fe=n.transactionManager)==null||fe.clear(),C(se)}finally{S=!1}X(se)}function D(){const z=n.transactionManager;if(!z)return[];const le=To(z.getUndoStack()),se=[],fe=new Set;for(const re of le){const O=re.netEffect.textChange;if(!O)continue;const R=String(O.before??"").trim(),V=String(O.after??"").trim();if(!R||!V||R===V)continue;const j=`${R}=>${V}`;fe.has(j)||(fe.add(j),se.push({before:R,after:V}))}return se}function H(){var fe,re;const z=n.transactionManager;if(!z)return"";const le=To(z.getUndoStack()),se=[];for(const O of le){const R=O.netEffect.styleChanges;if(!R)continue;const V=((re=(fe=O.netEffect.locator.selectors)==null?void 0:fe.find(te=>String(te??"").trim()))==null?void 0:re.trim())??"";if(!V)continue;const j=Object.entries(R.after??{}).filter(([,te])=>String(te??"").trim()!=="").map(([te,q])=>`  ${te}: ${String(q)};`);j.length!==0&&se.push(`${V} {
${j.join(`
`)}
}`)}return se.join(`

`)}function y(z){var se;const le=(se=n.shadowHost)==null?void 0:se.getElements().uiRoot;return le?new Promise(fe=>{const re=document.createElement("div");re.className="we-dialog-overlay";const O=document.createElement("div");O.className="we-dialog";const R=document.createElement("div");R.className="we-dialog-header";const V=document.createElement("div");V.textContent=z.title;const j=document.createElement("button");j.type="button",j.className="we-dialog-close",j.setAttribute("aria-label","å…³é—­"),j.textContent="Ã—",R.append(V,j);const te=document.createElement("div");te.className="we-dialog-content",te.textContent=z.content??"";const q=document.createElement("div");q.className="we-dialog-actions";const ne=document.createElement("button");ne.type="button",ne.className="we-dialog-action",z.confirmTone==="primary"&&ne.classList.add("we-dialog-action--primary"),ne.textContent=z.confirmText;const ue=document.createElement("button");ue.type="button",ue.className="we-dialog-action",ue.textContent=z.cancelText??"",q.append(ne),z.cancelText&&q.append(ue),z.content?O.append(R,te,q):O.append(R,q),re.append(O),le.append(re);const Z=oe=>{re.remove(),window.removeEventListener("keydown",be,!0),fe(oe)},be=oe=>{oe.key==="Escape"&&(oe.preventDefault(),Z(!1))};window.addEventListener("keydown",be,!0),j.addEventListener("click",oe=>{oe.preventDefault(),Z(!1)}),z.cancelText&&ue.addEventListener("click",oe=>{oe.preventDefault(),Z(!1)}),ne.addEventListener("click",oe=>{oe.preventDefault(),Z(!0)}),re.addEventListener("click",oe=>{oe.target===re&&Z(!1)})}):z.cancelText?Promise.resolve(window.confirm(z.content??z.title)):(window.alert(z.content??z.title),Promise.resolve(!0))}function _(z,le){if(!(typeof window>"u"))try{Vt[z](le)}catch{}}async function F(){const z=D();if(z.length===0){await y({title:"ä¿å­˜æ–‡æœ¬",content:"æ²¡æœ‰æ–‡æœ¬æ›´æ”¹ã€‚",confirmText:"çŸ¥é“äº†"});return}const le=v();if(!le){await y({title:"ä¿å­˜æ–‡æœ¬",content:"æ— æ³•è¯†åˆ«å½“å‰é¡µé¢è·¯å¾„ã€‚",confirmText:"çŸ¥é“äº†"});return}const fe=(await Promise.all(z.map(async O=>{try{const V=await(await fetch("/api/text-replace/count",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:le,searchText:O.before})})).json();return Number((V==null?void 0:V.count)??0)}catch{return 0}}))).reduce((O,R)=>O+R,0);if(await y({title:"ä¿å­˜æ–‡æœ¬",confirmText:`æ›¿æ¢æ–‡æœ¬ï¼ˆå…± ${fe} å¤„ï¼‰`,cancelText:"æš‚ä¸æ›¿æ¢",confirmTone:"primary"}))try{const O=await Promise.all(z.map(async j=>{const te=await fetch("/api/text-replace/replace",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:le,searchText:j.before,replaceText:j.after})}),q=await te.json().catch(()=>({}));return{ok:te.ok,json:q}})),R=O.filter(j=>j.ok&&j.json.success!==!1).length,V=O.reduce((j,te)=>{const q=Number(te.json.changedFiles??0);return j+(Number.isFinite(q)?q:0)},0);R===O.length?(await y({title:"ä¿å­˜æ–‡æœ¬",content:`æ›¿æ¢æˆåŠŸï¼å…±ä¿®æ”¹äº† ${V} ä¸ªæ–‡ä»¶ã€‚`,confirmText:"çŸ¥é“äº†"}),N("text")):await y({title:"ä¿å­˜æ–‡æœ¬",content:`éƒ¨åˆ†æ›¿æ¢å¤±è´¥ï¼ŒæˆåŠŸ ${R}/${O.length}ã€‚`,confirmText:"çŸ¥é“äº†"})}catch(O){const R=O instanceof Error?O.message:String(O);await y({title:"ä¿å­˜æ–‡æœ¬",content:`è¯·æ±‚å¤±è´¥ï¼š${R}`,confirmText:"çŸ¥é“äº†"})}}async function G(){const z=H();if(!z){await y({title:"ä¿å­˜æ ·å¼",content:"æ²¡æœ‰æ ·å¼æ›´æ”¹ã€‚",confirmText:"çŸ¥é“äº†"});return}const le=v();if(!le){await y({title:"ä¿å­˜æ ·å¼",content:"æ— æ³•è¯†åˆ«å½“å‰é¡µé¢è·¯å¾„ã€‚",confirmText:"çŸ¥é“äº†"});return}if(await y({title:"æ›´æ–°å¼ºåˆ¶æ ·å¼",content:`ç¡®å®šè¦æ›´æ–°å¼ºåˆ¶æ ·å¼å—ï¼Ÿ

æ­¤æ“ä½œä¼šå°†å½“å‰çš„ CSS ä¿®æ”¹ä¿å­˜åˆ° hack.css æ–‡ä»¶ï¼Œ
é¡µé¢å°†è‡ªåŠ¨çƒ­æ›´æ–°åˆ·æ–°ä»¥åº”ç”¨æ›´æ”¹ã€‚`,confirmText:"æ›´æ–°",cancelText:"å–æ¶ˆ",confirmTone:"primary"}))try{const fe=await fetch("/api/hack-css/save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:le,content:z})}),re=await fe.json().catch(()=>({}));if(fe.ok)await y({title:"ä¿å­˜æ ·å¼",content:"å·²æ›´æ–°å¼ºåˆ¶æ ·å¼ã€‚",confirmText:"çŸ¥é“äº†"}),N("style");else{const O=re.error;await y({title:"ä¿å­˜æ ·å¼",content:`ä¿å­˜å¤±è´¥ï¼š${String(O??fe.statusText)}`,confirmText:"çŸ¥é“äº†"})}}catch(fe){const re=fe instanceof Error?fe.message:String(fe);await y({title:"ä¿å­˜æ ·å¼",content:`è¯·æ±‚å¤±è´¥ï¼š${re}`,confirmText:"çŸ¥é“äº†"})}}async function $(){var se;const z=n.transactionManager;if(!(!z||!await y({title:"æ¸…ç©ºç¼–è¾‘",content:`ç¡®å®šè¦æ¸…ç©ºå½“å‰ç¼–è¾‘å†…å®¹å—ï¼Ÿ

æ­¤æ“ä½œä¼šæ’¤é”€æœªä¿å­˜çš„æ–‡æœ¬å’Œæ ·å¼æ›´æ”¹ï¼Œå¹¶æ¸…ç©ºç¼“å­˜ã€‚`,confirmText:"æ¸…ç©º",cancelText:"å–æ¶ˆ",confirmTone:"primary"}))){r&&a(),S=!0;try{for(;z.canUndo();)z.undo();z.clear()}finally{S=!1}X([]),(se=n.propertyPanel)==null||se.refresh()}}async function W(){const z=v();if(!z){await y({title:"æ¸…ç©ºå¼ºåˆ¶æ ·å¼",content:"æ— æ³•è¯†åˆ«å½“å‰é¡µé¢è·¯å¾„ã€‚",confirmText:"çŸ¥é“äº†"});return}if(await y({title:"æ¸…ç©ºå¼ºåˆ¶æ ·å¼",content:`ç¡®å®šè¦æ¸…ç©ºå¼ºåˆ¶æ ·å¼å—ï¼Ÿ

æ­¤æ“ä½œä¼šåˆ é™¤ hack.css æ–‡ä»¶å¹¶æ¸…ç©ºæ‰€æœ‰å¼ºåˆ¶æ ·å¼ï¼Œ
é¡µé¢å°†è‡ªåŠ¨çƒ­æ›´æ–°åˆ·æ–°ä»¥åº”ç”¨æ›´æ”¹ã€‚`,confirmText:"æ¸…ç©º",cancelText:"å–æ¶ˆ",confirmTone:"primary"}))try{const se=await fetch("/api/hack-css/clear",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:z})}),fe=await se.json().catch(()=>({}));if(se.ok)await y({title:"æ¸…ç©ºå¼ºåˆ¶æ ·å¼",content:"å·²æ¸…ç©ºå¼ºåˆ¶æ ·å¼ã€‚",confirmText:"çŸ¥é“äº†"}),N("style");else{const re=fe.error;await y({title:"æ¸…ç©ºå¼ºåˆ¶æ ·å¼",content:`æ¸…ç©ºå¤±è´¥ï¼š${String(re??se.statusText)}`,confirmText:"çŸ¥é“äº†"})}}catch(se){const fe=se instanceof Error?se.message:String(se);await y({title:"æ¸…ç©ºå¼ºåˆ¶æ ·å¼",content:`è¯·æ±‚å¤±è´¥ï¼š${fe}`,confirmText:"çŸ¥é“äº†"})}}function J(z){var se;if(!z)return"";const le=(z.selectors??[]).map(fe=>String(fe??"").trim()).filter(Boolean);return le.length>0?le.join(" | "):(se=z.path)!=null&&se.length?z.path.join(">"):""}function A(z){const le=He(z);if(le)return qa(le,z.shadowHostChain);const se=J(z);return se||"element"}function L(z){const le=J(z.parentLocator)||"unknown-parent",se=z.anchorLocator?J(z.anchorLocator):"",fe=z.anchorLocator&&se?`, anchor: ${se} (${z.anchorPosition??"after"})`:"";return`${le} @index ${z.insertIndex}${fe}`}function Y(z){var re;const le=z.map((O,R)=>({tx:O,index:R}));le.sort((O,R)=>{const V=Number(O.tx.timestamp??0),j=Number(R.tx.timestamp??0);return V!==j?V-j:O.index-R.index});const se=new Map;for(const{tx:O}of le){if(O.type!=="move"||!O.moveData)continue;const R=O.elementKey?String(O.elementKey):Lt(O.targetLocator),V=((re=O.after)==null?void 0:re.locator)??O.targetLocator,j=se.get(R);j?(j.locator=V,j.to=O.moveData.to,j.updatedAt=Number(O.timestamp??0)):se.set(R,{locator:V,from:O.moveData.from,to:O.moveData.to,updatedAt:Number(O.timestamp??0)})}const fe=Array.from(se.values()).map(O=>({label:A(O.locator),selectorPath:J(O.locator),from:O.from,to:O.to,updatedAt:O.updatedAt}));return fe.sort((O,R)=>R.updatedAt-O.updatedAt||O.label.localeCompare(R.label)),fe}function B(){const z=n.transactionManager;if(!z)return"";const le=z.getUndoStack(),se=To(le),fe=Y(le);if(se.length===0&&fe.length===0)return"";const re=[];if(re.push("è¯·æ ¹æ®ä»¥ä¸‹æ‰€è§å³æ‰€å¾—ä¿®æ”¹ï¼Œåœ¨ä»£ç ä¸­å®ç°åŒæ ·çš„æ”¹åŠ¨ã€‚"),re.push(`é¡µé¢: ${window.location.href}`),re.push(""),se.length>0){re.push("ä¿®æ”¹åˆ—è¡¨:");for(const O of se){re.push(`- ${O.fullLabel||O.label}`);const R=O.debugSource;if(R!=null&&R.file){const ne=[R.file,R.line,R.column].filter(Boolean).join(":"),ue=R.componentName?` (${R.componentName})`:"";re.push(`  - å¯èƒ½ç›¸å…³æ–‡ä»¶: ${ne}${ue}`)}const V=J(O.netEffect.locator);V&&re.push(`  - selector path: ${V}`);const j=O.netEffect.textChange;j&&re.push(`  - æ–‡æœ¬: "${j.before}" -> "${j.after}"`);const te=O.netEffect.classChanges;if(te){const ne=(te.before??[]).join(" "),ue=(te.after??[]).join(" ");re.push(`  - class: "${ne}" -> "${ue}"`)}const q=O.netEffect.styleChanges;if(q){const ne=new Set([...Object.keys(q.before??{}),...Object.keys(q.after??{})]),ue=Array.from(ne).sort();for(const Z of ue){const be=String((q.before??{})[Z]??"").trim(),oe=String((q.after??{})[Z]??"").trim();if(be===oe)continue;const Ce=oe||"(unset)";re.push(`  - ${Z}: "${be}" -> "${Ce}"`)}}}}if(fe.length>0){re.push(""),re.push("ç§»åŠ¨åˆ—è¡¨:");for(const O of fe)re.push(`- ${O.label}`),O.selectorPath&&re.push(`  - selector path: ${O.selectorPath}`),re.push(`  - ä»: ${L(O.from)}`),re.push(`  - åˆ°: ${L(O.to)}`)}return re.push(""),re.push("è¾“å‡ºè¦æ±‚:"),re.push("- ç»™å‡ºéœ€è¦ä¿®æ”¹çš„æ–‡ä»¶åˆ—è¡¨ä¸å…·ä½“ä»£ç æ”¹åŠ¨ã€‚"),re.push("- å¦‚æœæ— æ³•å®šä½æ–‡ä»¶ï¼Œè¯·è¯´æ˜éœ€è¦æˆ‘æä¾›ä»€ä¹ˆä¿¡æ¯ã€‚"),re.join(`
`)}async function K(){var le;const z=B();if(!z){_("info","æ²¡æœ‰å¯ç”Ÿæˆ prompt çš„æ›´æ”¹ã€‚");return}try{(le=navigator.clipboard)!=null&&le.writeText?await navigator.clipboard.writeText(z):window.prompt("è¯·æ‰‹åŠ¨å¤åˆ¶ä»¥ä¸‹å†…å®¹:",z),_("success","å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ã€‚")}catch{window.prompt("è¯·æ‰‹åŠ¨å¤åˆ¶ä»¥ä¸‹å†…å®¹:",z),_("error","è‡ªåŠ¨å¤åˆ¶å¤±è´¥ï¼ˆå·²æä¾›æ‰‹åŠ¨å¤åˆ¶ï¼‰ã€‚")}}function ge(){const z=n.transactionManager;if(!z)return;const le=z.getUndoStack();if(le.length!==0)for(const se of le){if(se.type==="structure")return"æš‚ä¸æ”¯æŒåº”ç”¨ç»“æ„æ“ä½œ";if(se.type!=="style"&&se.type!=="text"&&se.type!=="class"&&se.type!=="move")return`æš‚ä¸æ”¯æŒåº”ç”¨ "${se.type}" äº‹åŠ¡`}}function we(){if(!v())return"æ— æ³•è¯†åˆ«é¡µé¢è·¯å¾„";if(D().length===0)return"æ²¡æœ‰æ–‡æœ¬æ›´æ”¹"}function ke(){if(!v())return"æ— æ³•è¯†åˆ«é¡µé¢è·¯å¾„";if(!H())return"æ²¡æœ‰æ ·å¼æ›´æ”¹"}async function Se(z){var fe;const le=String(z??"").trim();if(!le)return{success:!1,error:"elementKey is required"};const se=n.transactionManager;if(!se)return{success:!1,error:"Transaction manager not ready"};if(n.applyingSnapshot)return{success:!1,error:"åº”ç”¨è¿›è¡Œä¸­ï¼Œæ— æ³•å›é€€"};try{const re=se.getUndoStack(),R=To(re).find(Z=>Z.elementKey===le);if(!R)return{success:!1,error:"Element not found in current changes"};const V=He(R.locator);if(!V||!V.isConnected)return{success:!1,error:"Failed to locate element for revert"};const j={};let te=!1;const q=R.netEffect.classChanges;if(q){const Z=Array.isArray(q.before)?q.before:[],be=(()=>{try{const Te=V.classList;if(Te&&typeof Te[Symbol.iterator]=="function")return Array.from(Te).filter(Boolean)}catch{}return(V.getAttribute("class")??"").split(/\s+/).map(Te=>Te.trim()).filter(Boolean)})();se.recordClass(V,be,Z)&&(j.class=!0,te=!0)}const ne=R.netEffect.textChange;if(ne){const Z=String(ne.before??""),be=V.textContent??"";be!==Z&&(V.textContent=Z,se.recordText(V,be,Z)&&(j.text=!0,te=!0))}const ue=R.netEffect.styleChanges;if(ue){const Z=ue.before??{},be=ue.after??{},oe=Array.from(new Set([...Object.keys(Z),...Object.keys(be)])).map(Ce=>String(Ce??"").trim()).filter(Boolean);if(oe.length>0){const Ce=se.beginMultiStyle(V,oe);Ce&&(Ce.set(Z),Ce.commit({merge:!1})&&(j.style=!0,te=!0))}}return te?((fe=n.propertyPanel)==null||fe.refresh(),{success:!0,reverted:j}):{success:!1,error:"No changes were reverted"}}catch(re){return console.error(`${ze} Revert element failed:`,re),{success:!1,error:re instanceof Error?re.message:String(re)}}}function ie(){n.selectedElement&&(n.eventController?(n.eventController.setMode("hover"),n.selectedElement&&f()):f(),console.log(`${ze} Selection cleared (from sidepanel)`))}function Q(z){console.error(`${ze} Transaction apply error:`,z)}function P(){var z,le,se,fe,re,O,R,V,j,te,q,ne,ue,Z,be,oe;if(n.active){console.log(`${ze} Already active`);return}try{n.shadowHost=zl({});const Ce=n.shadowHost.getElements();if(!(Ce!=null&&Ce.overlayRoot))throw new Error("Shadow host overlayRoot not available");n.canvasOverlay=cp({container:Ce.overlayRoot}),n.perfMonitor=_m({container:Ce.overlayRoot,fpsUiIntervalMs:500,memorySampleIntervalMs:1e3});const Te=Ee=>{if(Ee.repeat||!(Ee.metaKey||Ee.ctrlKey)||!Ee.shiftKey||Ee.altKey||(Ee.key||"").toLowerCase()!=="p")return;const pe=n.perfMonitor;pe&&(pe.toggle(),Ee.preventDefault(),Ee.stopPropagation(),Ee.stopImmediatePropagation())},et={capture:!0,passive:!1};if(window.addEventListener("keydown",Te,et),n.perfHotkeyCleanup=()=>{window.removeEventListener("keydown",Te,et)},n.selectionEngine=Zp({isOverlayElement:n.shadowHost.isOverlayElement}),n.positionTracker=Bp({onPositionUpdate:h}),n.transactionManager=ym({enableKeyBindings:!0,isEventFromEditorUi:Ee=>{var ce;if((ce=n.shadowHost)!=null&&ce.isEventFromUi(Ee))return!0;const Pe=r;if(Pe!=null&&Pe.element)try{const pe=typeof Ee.composedPath=="function"?Ee.composedPath():null;if(pe!=null&&pe.some(de=>de===Pe.element))return!0}catch{const pe=Ee.target;if(pe instanceof Node&&Pe.element.contains(pe))return!0}return!1},onChange:d,onApplyError:Q}),M(),n.handlesController=Cp({container:Ce.overlayRoot,canvasOverlay:n.canvasOverlay,transactionManager:n.transactionManager,positionTracker:n.positionTracker}),n.dragReorderController=_p({isOverlayElement:n.shadowHost.isOverlayElement,uiRoot:Ce.uiRoot,canvasOverlay:n.canvasOverlay,positionTracker:n.positionTracker,transactionManager:n.transactionManager}),n.eventController=Fp({isOverlayElement:n.shadowHost.isOverlayElement,onHover:u,onSelect:p,onDeselect:f,onStartEdit:c,findTargetForSelect:(Ee,Pe,ce,pe)=>{var de;return((de=n.selectionEngine)==null?void 0:de.findBestTargetFromEvent(pe,ce))??null},getSelectedElement:()=>n.selectedElement,onStartDrag:Ee=>{var Pe;return((Pe=n.dragReorderController)==null?void 0:Pe.onDragStart(Ee))??!1},onDragMove:Ee=>{var Pe;return(Pe=n.dragReorderController)==null?void 0:Pe.onDragMove(Ee)},onDragEnd:Ee=>{var Pe;return(Pe=n.dragReorderController)==null?void 0:Pe.onDragEnd(Ee)},onDragCancel:Ee=>{var Pe;return(Pe=n.dragReorderController)==null?void 0:Pe.onDragCancel(Ee)}}),n.executionTracker=null,n.hmrConsistencyVerifier=null,t.toolbar?(n.toolbar=oc({container:Ce.uiRoot,dock:"top",initialPosition:n.toolbarPosition,onPositionChange:Ee=>{n.toolbarPosition=Ee},getApplyBlockReason:ge,getSelectedElement:()=>n.selectedElement,onStructure:Ee=>{const Pe=n.selectedElement;if(!Pe)return;const ce=n.transactionManager;if(!ce)return;const pe=ce.applyStructure(Pe,Ee);if(pe)if(Ee.action==="delete")f();else{const de=He(pe.targetLocator);de&&de.isConnected&&p(de,o)}},onApply:b,onSaveText:F,onSaveStyle:G,onUndo:()=>{var Ee;return(Ee=n.transactionManager)==null?void 0:Ee.undo()},onRedo:()=>{var Ee;return(Ee=n.transactionManager)==null?void 0:Ee.redo()},getSaveTextBlockReason:we,getSaveStyleBlockReason:ke,onRequestClose:()=>ae()}),n.toolbar.setHistory(n.transactionManager.getUndoStack().length,n.transactionManager.getRedoStack().length)):n.toolbar=null,t.breadcrumbs?n.breadcrumbs=pc({container:Ce.uiRoot,dock:"top",onSelect:Ee=>{Ee.isConnected&&p(Ee,o)}}):n.breadcrumbs=null,t.propertyPanel?(n.propsBridge=sp({}),n.tokensService=Fm(),n.propertyPanel=Zf({container:Ce.uiRoot,transactionManager:n.transactionManager,propsBridge:n.propsBridge,tokensService:n.tokensService,initialPosition:n.propertyPanelPosition,onPositionChange:Ee=>{n.propertyPanelPosition=Ee},defaultTab:"design",showPropsTab:!1,showDomTab:!1,onUndo:()=>{var Ee;return(Ee=n.transactionManager)==null?void 0:Ee.undo()},onRedo:()=>{var Ee;return(Ee=n.transactionManager)==null?void 0:Ee.redo()},onCopyPrompt:K,onSaveText:F,onSaveStyle:G,onClearEdits:$,onClearForcedStyles:W,onToggleSelectionMode:Ee=>{var Pe,ce;Ee?(Pe=n.eventController)==null||Pe.setMode("hover"):(r&&l(),f(),(ce=n.eventController)==null||ce.setMode("interaction"))},getCopyPromptBlockReason:ge,getSaveTextBlockReason:we,getSaveStyleBlockReason:ke,onSelectElement:Ee=>{Ee.isConnected&&p(Ee,o)},onRequestClose:()=>ae()}),n.propertyPanel.setHistory(n.transactionManager.getUndoStack().length,n.transactionManager.getRedoStack().length)):(n.propsBridge=null,n.tokensService=null,n.propertyPanel=null),n.toolbar||n.propertyPanel){let Ee=null;const Pe=()=>{const pe=n.toolbarPosition,de=n.propertyPanelPosition;n.toolbar&&pe&&n.toolbar.setPosition(pe),n.propertyPanel&&de&&n.propertyPanel.setPosition(de)},ce=()=>{n.active&&Ee===null&&(Ee=window.requestAnimationFrame(()=>{Ee=null,Pe()}))};window.addEventListener("resize",ce,{passive:!0}),n.uiResizeCleanup=()=>{window.removeEventListener("resize",ce),Ee!==null&&(window.cancelAnimationFrame(Ee),Ee=null)},Pe()}else n.uiResizeCleanup=null;n.active=!0,console.log(`${ze} Started`)}catch(Ce){(z=n.uiResizeCleanup)==null||z.call(n),n.uiResizeCleanup=null,(le=n.propertyPanel)==null||le.dispose(),n.propertyPanel=null,(se=n.tokensService)==null||se.dispose(),n.tokensService=null,(fe=n.propsBridge)==null||fe.dispose(),n.propsBridge=null,(re=n.breadcrumbs)==null||re.dispose(),n.breadcrumbs=null,(O=n.toolbar)==null||O.dispose(),n.toolbar=null,(R=n.eventController)==null||R.dispose(),n.eventController=null,(V=n.dragReorderController)==null||V.dispose(),n.dragReorderController=null,(j=n.handlesController)==null||j.dispose(),n.handlesController=null,(te=n.transactionManager)==null||te.dispose(),n.transactionManager=null,(q=n.positionTracker)==null||q.dispose(),n.positionTracker=null,(ne=n.selectionEngine)==null||ne.dispose(),n.selectionEngine=null,(ue=n.perfHotkeyCleanup)==null||ue.call(n),n.perfHotkeyCleanup=null,(Z=n.perfMonitor)==null||Z.dispose(),n.perfMonitor=null,(be=n.canvasOverlay)==null||be.dispose(),n.canvasOverlay=null,(oe=n.shadowHost)==null||oe.dispose(),n.shadowHost=null,n.hoveredElement=null,n.selectedElement=null,n.applyingSnapshot=null,n.active=!1,console.error(`${ze} Failed to start:`,Ce)}}function ae(){var z,le,se,fe,re,O,R,V,j,te,q,ne,ue,Z,be,oe,Ce,Te;if(n.active){n.active=!1;try{I!==null&&(window.clearTimeout(I),I=null),r&&l(),(z=n.uiResizeCleanup)==null||z.call(n),n.uiResizeCleanup=null,(le=n.propertyPanel)==null||le.dispose(),n.propertyPanel=null,(se=n.tokensService)==null||se.dispose(),n.tokensService=null,(fe=n.propsBridge)==null||fe.cleanup(),n.propsBridge=null,(re=n.breadcrumbs)==null||re.dispose(),n.breadcrumbs=null,(O=n.toolbar)==null||O.dispose(),n.toolbar=null,(R=n.eventController)==null||R.dispose(),n.eventController=null,(V=n.dragReorderController)==null||V.dispose(),n.dragReorderController=null,(j=n.handlesController)==null||j.dispose(),n.handlesController=null,(te=n.executionTracker)==null||te.dispose(),n.executionTracker=null,(q=n.hmrConsistencyVerifier)==null||q.dispose(),n.hmrConsistencyVerifier=null,(ne=n.transactionManager)==null||ne.dispose(),n.transactionManager=null,(ue=n.positionTracker)==null||ue.dispose(),n.positionTracker=null,(Z=n.selectionEngine)==null||Z.dispose(),n.selectionEngine=null,(be=n.perfHotkeyCleanup)==null||be.call(n),n.perfHotkeyCleanup=null,(oe=n.perfMonitor)==null||oe.dispose(),n.perfMonitor=null,(Ce=n.canvasOverlay)==null||Ce.dispose(),n.canvasOverlay=null,(Te=n.shadowHost)==null||Te.dispose(),n.shadowHost=null,n.hoveredElement=null,n.selectedElement=null,n.applyingSnapshot=null,console.log(`${ze} Stopped`)}catch(et){console.error(`${ze} Error during cleanup:`,et),n.propertyPanel=null,n.propsBridge=null,n.breadcrumbs=null,n.toolbar=null,n.eventController=null,n.dragReorderController=null,n.handlesController=null,n.transactionManager=null,n.positionTracker=null,n.selectionEngine=null,n.perfHotkeyCleanup=null,n.perfMonitor=null,n.canvasOverlay=null,n.shadowHost=null,n.hoveredElement=null,n.selectedElement=null,n.applyingSnapshot=null}finally{}}}function xe(){return n.active?ae():P(),n.active}function ve(){return{active:n.active,version:kl}}function Ae(){const z=n.transactionManager;return{undoCount:(z==null?void 0:z.getUndoStack().length)??0,redoCount:(z==null?void 0:z.getRedoStack().length)??0}}return{start:P,stop:ae,toggle:xe,getState:ve,getHistoryCounts:Ae,revertElement:Se,clearSelection:ie}}const Om=(e={})=>{let t=null;const n=()=>{if(!t){const r={toolbar:!1,breadcrumbs:!0,propertyPanel:!0,...e.ui??{}};t=$m({...e,ui:r})}return t},o=()=>{var i;const r=(i=t==null?void 0:t.getHistoryCounts)==null?void 0:i.call(t);return{undoCount:(r==null?void 0:r.undoCount)??0,redoCount:(r==null?void 0:r.redoCount)??0}};return{enable:()=>{typeof window>"u"||n().start()},disable:()=>{t==null||t.stop()},isEnabled:()=>(t==null?void 0:t.getState().active)??!1,getStatus:()=>({active:(t==null?void 0:t.getState().active)??!1,...o()})}},Vm=e=>{if(!e)return"none";const t=new URLSearchParams(e),n=t.get("editor");return n==="inspecta"||n==="textEdit"||n==="webEditorV2"||n==="none"?n:t.get("inspecta")==="true"?"inspecta":"none"},Bm=e=>{const t=e??(typeof window<"u"?Vm(window.location.search):"none"),n=dl(),o=Sl(),r=Om(),i={inspecta:n,textEdit:o,webEditorV2:r};let s="none",l=!1;const a=()=>{if(typeof window>"u")return;const f=window.DevTemplateBootstrap;f&&(f.inspectaMode=s==="inspecta")},c=async f=>{if(f===s)return;const h=s;s="none",h!=="none"&&await Promise.resolve(i[h].disable()),f!=="none"&&(await Promise.resolve(i[f].enable()),s=f),a()};return{api:{getMode:()=>s,enable:f=>c(f),disable:()=>c("none"),toggle:f=>c(s===f?"none":f),getStatus:()=>({mode:s,webEditor:r.getStatus(),textEdit:o.getStatus(),inspecta:n.getStatus()})},applyInitialMode:()=>{l||(l=!0,s==="none"&&t!=="none"&&c(t))},getMode:()=>s,getInitialMode:()=>t}},{Text:Dn,Paragraph:No}=nl;let Qt=null;function Hm(){const{message:e}=qr.useApp(),[t,n]=Ko.useState(!1),[o,r]=Ko.useState([]);Ko.useEffect(()=>{if(Qt={addError:c=>{const u={...c,timestamp:Date.now()};r(p=>[...p,u]),n(!0)}},window.showErrorDialog=(c,u)=>{Qt==null||Qt.addError({message:c,stack:u})},window.__ERROR_SYSTEM__){window.__ERROR_SYSTEM__.markReactReady();const c=window.__ERROR_SYSTEM__.getErrorQueue();c&&c.length>0&&(console.log(`[Error Dialog] åŠ è½½å¯åŠ¨é˜¶æ®µçš„ ${c.length} ä¸ªé”™è¯¯`),c.forEach(u=>{Qt==null||Qt.addError({message:u.message,stack:u.stack})}))}},[]);const i=()=>{n(!1)},s=()=>{r([]),n(!1)},l=()=>{if(o.length===0)return;const c=o.map((u,p)=>{const f=new Date(u.timestamp).toLocaleTimeString();return`[${p+1}] ${f}
é”™è¯¯ä¿¡æ¯ï¼š${u.message}
å †æ ˆä¿¡æ¯ï¼š
${u.stack||"æ— å †æ ˆä¿¡æ¯"}`}).join(`

`+"=".repeat(80)+`

`);navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(c).then(()=>{e.success("æ‰€æœ‰é”™è¯¯ä¿¡æ¯å·²å¤åˆ¶åˆ°å‰ªè´´æ¿")}).catch(()=>{a(c)}):a(c)},a=c=>{const u=document.createElement("textarea");u.value=c,u.style.position="fixed",u.style.opacity="0",document.body.appendChild(u),u.select();try{document.execCommand("copy"),e.success("é”™è¯¯ä¿¡æ¯å·²å¤åˆ¶åˆ°å‰ªè´´æ¿")}catch{e.error("å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶é”™è¯¯ä¿¡æ¯")}document.body.removeChild(u)};return qe.jsx(Js,{title:qe.jsxs(Zo,{children:[qe.jsx(il,{style:{color:"#ff4d4f"}}),qe.jsxs("span",{children:["è¿è¡Œæ—¶é”™è¯¯ (",o.length,")"]})]}),open:t,onCancel:i,footer:qe.jsxs(Zo,{children:[qe.jsx(Jo,{onClick:s,children:"æ¸…ç©ºå¹¶å…³é—­"}),qe.jsx(Jo,{onClick:i,children:"å…³é—­"}),qe.jsx(Jo,{type:"primary",icon:qe.jsx(rl,{}),onClick:l,children:"å¤åˆ¶æ‰€æœ‰é”™è¯¯"})]}),width:700,style:{top:50},children:o.length>0&&qe.jsx("div",{style:{maxHeight:"60vh",overflow:"auto"},children:qe.jsx(ol,{defaultActiveKey:[o.length-1],accordion:!0,items:o.map((c,u)=>({key:u,label:qe.jsxs(Zo,{children:[qe.jsx(Dn,{type:"secondary",children:new Date(c.timestamp).toLocaleTimeString()}),qe.jsx(Dn,{ellipsis:!0,style:{maxWidth:500},children:c.message})]}),children:qe.jsxs("div",{children:[qe.jsx(No,{children:qe.jsx(Dn,{strong:!0,children:"é”™è¯¯ä¿¡æ¯ï¼š"})}),qe.jsx(No,{style:{marginBottom:16},children:qe.jsx(Dn,{children:c.message})}),c.stack&&qe.jsxs(qe.Fragment,{children:[qe.jsx(No,{children:qe.jsx(Dn,{strong:!0,children:"å †æ ˆä¿¡æ¯ï¼š"})}),qe.jsx(No,{children:qe.jsx("pre",{style:{background:"#f5f5f5",border:"1px solid #e0e0e0",borderRadius:4,padding:12,fontSize:12,fontFamily:"Monaco, Menlo, Consolas, monospace",color:"#666",overflow:"auto",maxHeight:300,whiteSpace:"pre-wrap",wordBreak:"break-all",margin:0},children:c.stack})})]})]})}))})})})}function qs(e){let t=2166136261;for(let n=0;n<e.length;n++)t^=e.charCodeAt(n),t=Math.imul(t,16777619);return Math.abs(t).toString(36)}function zm(){if(typeof window.__PAGE_FULL_PATH__<"u"){const e=window.__PAGE_FULL_PATH__,t=qs(e);return`${e.split("/").slice(-2).join("-").replace(/\.(tsx|jsx|ts|js)$/,"").replace(/[^a-zA-Z0-9-]/g,"-").slice(0,32)}-${t}`}if(typeof window.__PAGE_ID__<"u")return window.__PAGE_ID__;if(typeof window<"u"){const e=window.location.pathname+window.location.search,t=qs(e);return`${e.replace(/[^a-zA-Z0-9]/g,"-").replace(/^-+|-+$/g,"").slice(0,32)}-${t}`}return null}function Gm(e,t){e&&t&&e.setAttribute("data-page-id",t)}function Um(){if(typeof window<"u"){const e=document.getElementById("root");if(e){const t=zm();t&&(Gm(e,t),console.log("[Stable ID] Root å…ƒç´ å·²æ³¨å…¥ ID:",t))}}}let vn=null;function Xm(e,t){const n=document.getElementById("root");if(!n){console.error("[Dev Template] æ‰¾ä¸åˆ° #root å…ƒç´ ");return}const r=t||{container:n,config:{},data:{},events:{}};try{Pr(n).render(Ht.createElement(e,r)),console.log("[Dev Template] ç»„ä»¶å·²æ¸²æŸ“");const s=document.createElement("div");s.id="error-dialog-container",document.body.appendChild(s),Pr(s).render(Ht.createElement(qr,null,Ht.createElement(Hm))),setTimeout(()=>{Um(),vn==null||vn.applyInitialMode()},0)}catch(i){console.error("[Dev Template] æ¸²æŸ“å¤±è´¥:",i)}}const jm={...al,...sl};if(typeof window<"u"){const e=new URLSearchParams(window.location.search),t=e.get("scale"),n=e.get("width"),o=e.get("height"),r=document.getElementById("root");let i=null;const s=(c,u)=>{r&&(i||(i={width:r.style.width,height:r.style.height}),c&&Number.isFinite(c)?r.style.width=`${Math.round(c)}px`:i&&(r.style.width=i.width),u&&Number.isFinite(u)?r.style.height=`${Math.round(u)}px`:i&&(r.style.height=i.height))},l=()=>{!r||!i||(r.style.width=i.width,r.style.height=i.height,i=null)};if(r){if(t){const c=parseFloat(t);!isNaN(c)&&c>0&&(r.style.transform=`scale(${c})`,r.style.transformOrigin="top left",console.log(`[Dev Template] åº”ç”¨ç¼©æ”¾æ¯”ä¾‹: ${c}`))}if(n||o){if(n){const c=parseInt(n);!isNaN(c)&&c>0&&(r.style.width=`${c}px`,console.log(`[Dev Template] è®¾ç½®å®½åº¦: ${c}px`))}if(o){const c=parseInt(o);!isNaN(c)&&c>0&&(r.style.height=`${c}px`,console.log(`[Dev Template] è®¾ç½®é«˜åº¦: ${c}px`))}}}vn=Bm();const a=vn.getInitialMode();window.DevTemplateBootstrap={renderComponent:Xm,React:Ht,ReactDOM:jm,inspectaMode:a==="inspecta",editors:vn.api},console.log("[Dev Template Bootstrap] å·²æŒ‚è½½åˆ°å…¨å±€"),window.addEventListener("message",async c=>{var u,p,f,h;if(c.data&&c.data.type==="CAPTURE_SCREENSHOT"){console.log("[Dev Template] æ”¶åˆ°æˆªå›¾è¯·æ±‚",c.data);const d=window.__ERROR_SYSTEM__,b=((u=d==null?void 0:d.isErrorCaptureEnabled)==null?void 0:u.call(d))??!0;d!=null&&d.setErrorCaptureEnabled&&d.setErrorCaptureEnabled(!1);try{const m=await li(()=>import("./chunks/vendor.js").then(I=>I.aS),__vite__mapDeps([0,1])),w=document.getElementById("root");if(w){const I=w.style.marginLeft,S=w.style.marginRight,v=w.style.width,x=w.style.height;w.style.marginLeft="0",w.style.marginRight="0",c.data.targetWidth&&c.data.targetHeight&&(w.style.width=`${c.data.targetWidth}px`,w.style.height=`${c.data.targetHeight}px`,await new Promise(E=>setTimeout(E,100)));const k=w.scrollWidth,X=w.scrollHeight,T=await m.toPng(w,{width:k,height:X,pixelRatio:2,skipAutoScale:!0,backgroundColor:"#fff",skipFonts:!1,cacheBust:!0});w.style.marginLeft=I,w.style.marginRight=S,w.style.width=v,w.style.height=x,window.parent.postMessage({type:"SCREENSHOT_CAPTURED",dataUrl:T,width:k,height:X},"*"),console.log("[Dev Template] æˆªå›¾æˆåŠŸå¹¶å‘é€")}}catch(m){console.error("[Dev Template] æˆªå›¾å¤±è´¥:",m),window.parent.postMessage({type:"SCREENSHOT_FAILED",error:String(m)},"*")}finally{d!=null&&d.setErrorCaptureEnabled&&b&&d.setErrorCaptureEnabled(!0)}}if(c.data&&c.data.type==="RESET_SCREENSHOT_STYLES"){console.log("[Dev Template] æ”¶åˆ°è¿˜åŸæ ·å¼è¯·æ±‚");const d=document.getElementById("root");d&&(d.style.width="",d.style.height="",d.style.marginLeft="",d.style.marginRight="",console.log("[Dev Template] æ ·å¼å·²è¿˜åŸ"))}if(c.data&&c.data.type==="WEB_EDITOR_SET_ROOT_SIZE"){const d=Number(c.data.width),b=c.data.height?Number(c.data.height):void 0;Number.isFinite(d)&&(s(d,b),console.log("[Dev Template] WebEditor è®¾ç½® root å°ºå¯¸",{width:d,height:b}))}if(c.data&&c.data.type==="WEB_EDITOR_RESET_ROOT_SIZE"&&(l(),console.log("[Dev Template] WebEditor æ¢å¤ root å°ºå¯¸")),c.data&&c.data.type==="EXPORT_FIGMA_JSON"){console.log("[Dev Template] æ”¶åˆ° Figma å¯¼å‡ºè¯·æ±‚",c.data);try{const d=await li(()=>import("./chunks/index2.js"),__vite__mapDeps([2,0,1])),{htmlToFigma:b}=d,m=document.getElementById("root"),w=m==null?void 0:m.getAttribute("data-page-id"),I=m==null?void 0:m.getAttribute("data-component-id"),S=w||I||((p=c.data)==null?void 0:p.widgetId),v=((f=c.data)==null?void 0:f.enableAutoLayout)!==!1,x=await b("#root",{rootName:((h=c.data)==null?void 0:h.rootName)||document.title||"FRAME",widgetId:S,enableAutoLayout:v});window.parent.postMessage({type:"FIGMA_JSON_READY",success:!0,json:x,...w?{pageId:w}:{},...I?{widgetId:I}:S?{widgetId:S}:{}},"*")}catch(d){console.error("[Dev Template] Figma å¯¼å‡ºå¤±è´¥:",d),window.parent.postMessage({type:"FIGMA_JSON_READY",success:!1,error:String(d)},"*")}}})}
