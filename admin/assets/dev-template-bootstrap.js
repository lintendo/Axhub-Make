const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/chunks/vendor.js","assets/vendor.css","assets/chunks/index2.js"])))=>i.map(i=>d[i]);
var el=Object.defineProperty;var tl=(e,t,n)=>t in e?el(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Jn=(e,t,n)=>tl(e,typeof t!="symbol"?t+"":t,n);import{s as Bt,aQ as Pr,h as Ht,G as qr,M as Js,T as nl,r as Ko,j as Ze,aR as ol,S as Zo,b as Jo,am as rl,aS as il,aT as sl,aU as al,aV as li}from"./chunks/vendor.js";import{c as ll}from"./chunks/bridge.js";import{e as cl}from"./chunks/execute.js";const ul={Settings:"è®¾ç½®",Cancel:"å–æ¶ˆ","Show changes":"æ˜¾ç¤ºæ›´æ”¹",Overview:"æ¦‚è§ˆ",Properties:"å±æ€§","Open Projects":"æ‰“å¼€é¡¹ç›®","User Account & Settings":"ç”¨æˆ·è´¦æˆ·å’Œè®¾ç½®","Click any element to edit it's properties":"ç‚¹å‡»ä»»æ„å…ƒç´ ä»¥ç¼–è¾‘å…¶å±æ€§",Colors:"é¢œè‰²","Validate implemented colors":"éªŒè¯å·²å®ç°çš„é¢œè‰²","Open the Figma to inspecta plugin and click 'Copy page colors'":"æ‰“å¼€ Figma åˆ° inspecta æ’ä»¶å¹¶ç‚¹å‡»ã€Œå¤åˆ¶é¡µé¢é¢œè‰²ã€","Once styles are copied, click 'Paste & compare Figma colors'":"æ ·å¼å¤åˆ¶åï¼Œç‚¹å‡»ã€Œç²˜è´´å¹¶æ¯”è¾ƒ Figma é¢œè‰²ã€","Paste & compare Figma colors":"ç²˜è´´å¹¶æ¯”è¾ƒ Figma é¢œè‰²","Page colors":"é¡µé¢é¢œè‰²","Grid view":"ç½‘æ ¼è§†å›¾","List view":"åˆ—è¡¨è§†å›¾","Background colors":"èƒŒæ™¯é¢œè‰²","Text colors":"æ–‡æœ¬é¢œè‰²","Border colors":"è¾¹æ¡†é¢œè‰²",Fonts:"å­—ä½“","Validate implemented fonts":"éªŒè¯å·²å®ç°çš„å­—ä½“","Open the Figma to inspecta plugin and click 'Copy page fonts'":"æ‰“å¼€ Figma åˆ° inspecta æ’ä»¶å¹¶ç‚¹å‡»ã€Œå¤åˆ¶é¡µé¢å­—ä½“ã€","Once styles are copied, click 'Paste & compare Figma fonts'":"æ ·å¼å¤åˆ¶åï¼Œç‚¹å‡»ã€Œç²˜è´´å¹¶æ¯”è¾ƒ Figma å­—ä½“ã€","Paste & compare Figma fonts":"ç²˜è´´å¹¶æ¯”è¾ƒ Figma å­—ä½“","Text content":"æ–‡æœ¬å†…å®¹","Copy to AI":"å¤åˆ¶åˆ° AI","Send to Cursor":"å‘é€åˆ° Cursor","Reset text content":"é‡ç½®æ–‡æœ¬å†…å®¹",IMG:"å›¾ç‰‡","Placeholder image":"å ä½å›¾ç‰‡",Upload:"ä¸Šä¼ ",Download:"ä¸‹è½½","Auto (Webpage Default)":"è‡ªåŠ¨ï¼ˆç½‘é¡µé»˜è®¤ï¼‰",Fill:"å¡«å……",Cover:"è¦†ç›–",Contain:"åŒ…å«",None:"æ— ","Scale Down":"ç¼©å°",SVG:"SVG","SVG code will appear here...":"SVG ä»£ç å°†æ˜¾ç¤ºåœ¨è¿™é‡Œ...","Upload SVG file":"ä¸Šä¼  SVG æ–‡ä»¶","Paste inline SVG code":"ç²˜è´´å†…è” SVG ä»£ç ","Download SVG as HTML":"ä¸‹è½½ SVG ä¸º HTML","Copy SVG code":"å¤åˆ¶ SVG ä»£ç ","Reset SVG to original":"é‡ç½® SVG ä¸ºåŸå§‹çŠ¶æ€",Layout:"å¸ƒå±€",Display:"æ˜¾ç¤º","Flex-setings":"Flex è®¾ç½®",Direction:"æ–¹å‘",Align:"å¯¹é½",Justify:"å¯¹é½æ–¹å¼",Wrap:"æ¢è¡Œ",Gap:"é—´è·",Size:"å°ºå¯¸",Min:"æœ€å°",Max:"æœ€å¤§",W:"å®½",H:"é«˜","Min-W":"æœ€å°å®½","Min-H":"æœ€å°é«˜","Max-W":"æœ€å¤§å®½","Max-H":"æœ€å¤§é«˜",Background:"èƒŒæ™¯","Background Color":"èƒŒæ™¯é¢œè‰²",Typography:"æ’ç‰ˆ","Font Family":"å­—ä½“æ—","Font Weight":"å­—é‡","Thin : 100":"ç»†ä½“ : 100","Extra Light : 200":"è¶…ç»† : 200","Light : 300":"è½» : 300","Regular : 400":"å¸¸è§„ : 400","Medium : 500":"ä¸­ç­‰ : 500","Semi Bold : 600":"åŠç²— : 600","Bold : 700":"ç²—ä½“ : 700","Extra Bold : 800":"è¶…ç²— : 800","Black : 900":"é»‘ä½“ : 900","Font Size":"å­—ä½“å¤§å°","Font Color":"å­—ä½“é¢œè‰²","Line Height":"è¡Œé«˜","Letter Spacing":"å­—é—´è·","Text Align":"æ–‡æœ¬å¯¹é½","Text Decoration":"æ–‡æœ¬è£…é¥°",Spacing:"é—´è·",MARGIN:"å¤–è¾¹è·",PADDING:"å†…è¾¹è·",Margin:"å¤–è¾¹è·",Padding:"å†…è¾¹è·",Border:"è¾¹æ¡†","Border Type":"è¾¹æ¡†ç±»å‹","Border Color":"è¾¹æ¡†é¢œè‰²","Border Width":"è¾¹æ¡†å®½åº¦",Mixed:"æ··åˆ","Border-radius (Corners)":"è¾¹æ¡†åœ†è§’ï¼ˆè§’ï¼‰",Position:"ä½ç½®","Position type":"ä½ç½®ç±»å‹",Static:"é™æ€",Absolute:"ç»å¯¹",Fixed:"å›ºå®š",Relative:"ç›¸å¯¹",Sticky:"ç²˜æ€§","Z-Index":"å±‚çº§","Relative to:":"ç›¸å¯¹äºï¼š",Parent:"çˆ¶å…ƒç´ ",Body:"ä¸»ä½“","Box shadow":"ç›’å­é˜´å½±",Opacity:"é€æ˜åº¦","No changes":"æ— æ›´æ”¹","1 change":"1 ä¸ªæ›´æ”¹",changes:"ä¸ªæ›´æ”¹","Export to File":"å¯¼å‡ºåˆ°æ–‡ä»¶","Copy All Changes":"å¤åˆ¶æ‰€æœ‰æ›´æ”¹","Copy All Changes to AI":"å¤åˆ¶æ‰€æœ‰æ›´æ”¹åˆ° AI","Delete All Changes":"åˆ é™¤æ‰€æœ‰æ›´æ”¹",Share:"åˆ†äº«","Share Changes":"åˆ†äº«æ›´æ”¹","AI agent bridge":"AI ä»£ç†æ¡¥æ¥",Disconnected:"å·²æ–­å¼€è¿æ¥",Connected:"å·²è¿æ¥","Connecting...":"è¿æ¥ä¸­...","AI agent:":"AI ä»£ç†ï¼š","Cursor IDE":"Cursor IDE","GitHub Copilot":"GitHub Copilot","Setup guide":"è®¾ç½®æŒ‡å—","No CSS changes":"æ—  CSS æ›´æ”¹","Send CSS changes to Cursor (Localhost)":"å‘é€ CSS æ›´æ”¹åˆ° Cursorï¼ˆæœ¬åœ°ä¸»æœºï¼‰","Download the Cursor extension":"ä¸‹è½½ Cursor æ‰©å±•","Install the extension on Cursor IDE:":"åœ¨ Cursor IDE ä¸Šå®‰è£…æ‰©å±•ï¼š","Press Cmd + Shift + P (on Mac) or Ctrl + Shift + P (on Windows/Linux).":"æŒ‰ Cmd + Shift + Pï¼ˆMacï¼‰æˆ– Ctrl + Shift + Pï¼ˆWindows/Linuxï¼‰ã€‚",'Type "Install from VSIX..." and select the':"è¾“å…¥ã€Œä» VSIX å®‰è£…...ã€å¹¶é€‰æ‹©","Once installed, click to open inspecta server on your IDE bottom toolbar":"å®‰è£…åï¼Œç‚¹å‡» IDE åº•éƒ¨å·¥å…·æ ä¸Šçš„ inspecta æœåŠ¡å™¨ä»¥æ‰“å¼€","Inspecta: Closed (click to Open)":"Inspecta: å·²å…³é—­ï¼ˆç‚¹å‡»æ‰“å¼€ï¼‰",'On inspecta, make CSS changes and click "Send to Cursor" from the element toolbar or from css changes panel.':"åœ¨ inspecta ä¸­ï¼Œè¿›è¡Œ CSS æ›´æ”¹ï¼Œç„¶åä»å…ƒç´ å·¥å…·æ æˆ– CSS æ›´æ”¹é¢æ¿ç‚¹å‡»ã€Œå‘é€åˆ° Cursorã€ã€‚",properties:"å±æ€§",Overlay:"å åŠ å±‚",Changes:"æ›´æ”¹","Image overlay":"å›¾ç‰‡å åŠ å±‚","No image":"æ— å›¾ç‰‡","Paste Image from clipboard":"ä»å‰ªè´´æ¿ç²˜è´´å›¾ç‰‡","Upload Image":"ä¸Šä¼ å›¾ç‰‡","Upload image or paste from clipboard":"ä¸Šä¼ å›¾ç‰‡æˆ–ä»å‰ªè´´æ¿ç²˜è´´",Navigator:"å¯¼èˆªå™¨","Collapse All":"å…¨éƒ¨æŠ˜å ","Close Inspecta":"å…³é—­ Inspecta","Clear inspecta changes":"æ¸…é™¤ inspecta æ›´æ”¹","Show spacing overlays":"æ˜¾ç¤ºé—´è·å åŠ å±‚","Download inspecta Figma plugin":"ä¸‹è½½ inspecta Figma æ’ä»¶",Theme:"ä¸»é¢˜","Give us a feedback":"ç»™æˆ‘ä»¬åé¦ˆ","Toggle Distances":"åˆ‡æ¢è·ç¦»","Toggle Info Popover":"åˆ‡æ¢ä¿¡æ¯å¼¹å‡ºæ¡†","Toggle Rulers":"åˆ‡æ¢æ ‡å°º","Toggle Outlines":"åˆ‡æ¢è½®å»“","Sample Color":"é‡‡æ ·é¢œè‰²","Toggle Image Overlay":"åˆ‡æ¢å›¾ç‰‡å åŠ å±‚","Toggle Navigator":"åˆ‡æ¢å¯¼èˆªå™¨","Toggle Changes Panel":"åˆ‡æ¢æ›´æ”¹é¢æ¿","Toggle Properties Panel":"åˆ‡æ¢å±æ€§é¢æ¿","Switch to Light Theme":"åˆ‡æ¢åˆ°æµ…è‰²ä¸»é¢˜","Switch to Dark Theme":"åˆ‡æ¢åˆ°æ·±è‰²ä¸»é¢˜","Reset Panel Position":"é‡ç½®é¢æ¿ä½ç½®","Toggle Inspect Mode Off":"å…³é—­æ£€æŸ¥æ¨¡å¼","Toggle Inspect Mode On":"æ‰“å¼€æ£€æŸ¥æ¨¡å¼","Collapse Panel":"æŠ˜å é¢æ¿","Expand Panel":"å±•å¼€é¢æ¿","Collapse All ":"å…¨éƒ¨æŠ˜å  ","Expand All":"å…¨éƒ¨å±•å¼€","Isolate element":"éš”ç¦»å…ƒç´ ","Paste Figma Style":"ç²˜è´´ Figma æ ·å¼","Paste from clipboard":"ä»å‰ªè´´æ¿ç²˜è´´",Copied:"å·²å¤åˆ¶","Apply styles to":"åº”ç”¨æ ·å¼åˆ°","Selected element":"é€‰ä¸­çš„å…ƒç´ ",Class:"ç±»","Pasted Styles":"ç²˜è´´çš„æ ·å¼",Preview:"é¢„è§ˆ","New or updated":"æ–°å»ºæˆ–å·²æ›´æ–°","Reset (to be removed in production)":"é‡ç½®ï¼ˆå°†åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ç§»é™¤ï¼‰","Similar (unchanged)":"ç›¸ä¼¼ï¼ˆæœªæ›´æ”¹ï¼‰",Apply:"åº”ç”¨",Delete:"åˆ é™¤","Global color change":"å…¨å±€é¢œè‰²æ›´æ”¹","Global font change":"å…¨å±€å­—ä½“æ›´æ”¹","Original:":"åŸå§‹ï¼š","New:":"æ–°å»ºï¼š","No fonts found":"æœªæ‰¾åˆ°å­—ä½“","Center element":"å±…ä¸­å…ƒç´ ","Reset Position":"é‡ç½®ä½ç½®","Auto fix colors":"è‡ªåŠ¨ä¿®å¤é¢œè‰²","Auto fix fonts":"è‡ªåŠ¨ä¿®å¤å­—ä½“","Send to IDE only works on localhost":"å‘é€åˆ° IDE ä»…åœ¨æœ¬åœ°ä¸»æœºä¸Šå·¥ä½œ","Send to Cursor IDE":"å‘é€åˆ° Cursor IDE","Send to GitHub Copilot":"å‘é€åˆ° GitHub Copilot","Copy for AI":"å¤åˆ¶åˆ° AI","Icon & SVG colors":"å›¾æ ‡å’Œ SVG é¢œè‰²",Unknown:"æœªçŸ¥",Normal:"æ­£å¸¸",Color:"é¢œè‰²","Solid Color":"çº¯è‰²",Solid:"çº¯è‰²",Gradient:"æ¸å˜","Background Image":"èƒŒæ™¯å›¾ç‰‡",Custom:"è‡ªå®šä¹‰",Figma:"Figma",Variables:"å˜é‡","No Figma colors available. Paste Figma colors from the overview panel first.":"æ²¡æœ‰å¯ç”¨çš„ Figma é¢œè‰²ã€‚è¯·å…ˆä»æ¦‚è§ˆé¢æ¿ç²˜è´´ Figma é¢œè‰²ã€‚","No CSS variables available.":"æ²¡æœ‰å¯ç”¨çš„ CSS å˜é‡ã€‚",Hover:"æ‚¬åœ",Outline:"è½®å»“","Select font...":"é€‰æ‹©å­—ä½“...","inspecta-ide-integration-1.0.0.vsix":"inspecta-ide-integration-1.0.0.vsix",Feedback:"åé¦ˆ","Changes sent to Cursor":"æ›´æ”¹å·²å‘é€è‡³ Cursor","Implementing changes on your codebase":"æ­£åœ¨æ‚¨çš„ä»£ç åº“ä¸Šå®æ–½æ›´æ”¹","Successfully Implemented":"å®æ–½æˆåŠŸ","Changes cleared from panel":"é¢æ¿ä¸­çš„æ›´æ”¹å·²æ¸…é™¤",State:"çŠ¶æ€",Default:"é»˜è®¤","Apply to":"åº”ç”¨åˆ°","Open the Figma to inspecta plugin and click 'Copy page colors' or 'Copy page fonts'":"æ‰“å¼€ Figma to Inspecta æ’ä»¶ï¼Œå¹¶ç‚¹å‡»ã€Œå¤åˆ¶é¡µé¢é¢œè‰²ã€æˆ–ã€Œå¤åˆ¶é¡µé¢å­—ä½“ã€","Once styles are copied, click 'Paste & Compare'":"æ ·å¼å¤åˆ¶åï¼Œç‚¹å‡»ã€Œç²˜è´´å¹¶æ¯”è¾ƒã€","Fetching page styles...":"æ­£åœ¨è·å–é¡µé¢æ ·å¼...","Authentication cancelled":"èº«ä»½éªŒè¯å·²å–æ¶ˆ","Failed to open settings":"æ‰“å¼€è®¾ç½®å¤±è´¥","Settings menu not found":"æœªæ‰¾åˆ°è®¾ç½®èœå•","Signed in successfully":"ç™»å½•æˆåŠŸ","Authentication not available":"èº«ä»½éªŒè¯ä¸å¯ç”¨","Sign-in failed":"ç™»å½•å¤±è´¥","Signed out successfully":"ç™»å‡ºæˆåŠŸ","Sign-out failed":"ç™»å‡ºå¤±è´¥","âœ… Text reset to original!":"âœ… æ–‡æœ¬å·²é‡ç½®ä¸ºåŸå§‹çŠ¶æ€ï¼","â„¹ï¸ No text changes found to clear":"â„¹ï¸ æœªå‘ç°å¯æ¸…é™¤çš„æ–‡æœ¬æ›´æ”¹","âŒ Failed to clear text changes":"âŒ æ¸…é™¤æ–‡æœ¬æ›´æ”¹å¤±è´¥","No text element selected":"æœªé€‰ä¸­ä»»ä½•æ–‡æœ¬å…ƒç´ ","No text changes to generate prompt for":"æ²¡æœ‰å¯ç”Ÿæˆæç¤ºè¯çš„æ–‡æœ¬æ›´æ”¹","ğŸ“‹ Text prompt copied to clipboard":"ğŸ“‹ æ–‡æœ¬æç¤ºè¯å·²å¤åˆ¶åˆ°å‰ªè´´æ¿","âŒ Failed to copy prompt":"âŒ å¤åˆ¶æç¤ºè¯å¤±è´¥","Unable to determine hostname":"æ— æ³•ç¡®å®šä¸»æœºå","âŒ Send to IDE only works on localhost":"âŒ å‘é€åˆ° IDE ä»…åœ¨ localhost ä¸Šå¯ç”¨","âŒ Send to IDE not available":"âŒ å‘é€åˆ° IDE ä¸å¯ç”¨","âŒ Error sending to IDE":"âŒ å‘é€åˆ° IDE æ—¶å‡ºé”™","Share link copied to clipboard!":"åˆ†äº«é“¾æ¥å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼","Access denied. This share may be private or you may not have permission to view it.":"è®¿é—®è¢«æ‹’ç»ã€‚è¯¥åˆ†äº«å¯èƒ½ä¸ºç§æœ‰ï¼Œæˆ–è€…æ‚¨æ²¡æœ‰æŸ¥çœ‹æƒé™ã€‚","Please sign in to share changes":"è¯·ç™»å½•ä»¥åˆ†äº«æ›´æ”¹","Preparing share...":"æ­£åœ¨å‡†å¤‡åˆ†äº«...","No changes to share":"æ²¡æœ‰å¯åˆ†äº«çš„æ›´æ”¹","Share link copied":"åˆ†äº«é“¾æ¥å·²å¤åˆ¶","Access denied. Please check your permissions.":"è®¿é—®è¢«æ‹’ç»ã€‚è¯·æ£€æŸ¥æ‚¨çš„æƒé™ã€‚","Network error. Please check your connection.":"ç½‘ç»œé”™è¯¯ã€‚è¯·æ£€æŸ¥æ‚¨çš„è¿æ¥ã€‚","Failed to share changes":"åˆ†äº«æ›´æ”¹å¤±è´¥","Authentication expired. Please sign in again.":"èº«ä»½éªŒè¯å·²è¿‡æœŸã€‚è¯·é‡æ–°ç™»å½•ã€‚","Login required to share changes":"éœ€è¦ç™»å½•æ‰èƒ½åˆ†äº«æ›´æ”¹","Authentication failed. Please try again.":"èº«ä»½éªŒè¯å¤±è´¥ã€‚è¯·é‡è¯•ã€‚","Shared changes applied successfully!":"å·²æˆåŠŸåº”ç”¨åˆ†äº«çš„æ›´æ”¹ï¼","Failed to apply shared changes":"åº”ç”¨åˆ†äº«çš„æ›´æ”¹å¤±è´¥","All Inspecta changes cleared successfully":"æ‰€æœ‰ Inspecta æ›´æ”¹å·²æˆåŠŸæ¸…é™¤","Failed to clear changes":"æ¸…é™¤æ›´æ”¹å¤±è´¥","Spacing overlays visible":"é—´è·å åŠ å±‚å·²æ˜¾ç¤º","Spacing overlays hidden":"é—´è·å åŠ å±‚å·²éšè—","Breadcrumb visible":"é¢åŒ…å±‘å·²æ˜¾ç¤º","Breadcrumb hidden":"é¢åŒ…å±‘å·²éšè—","Opening Figma plugin page...":"æ­£åœ¨æ‰“å¼€ Figma æ’ä»¶é¡µé¢...","Onboarding not available":"æ–°æ‰‹å¼•å¯¼ä¸å¯ç”¨","Invalid SVG file!":"æ— æ•ˆçš„ SVG æ–‡ä»¶ï¼","SVG applied!":"SVG å·²åº”ç”¨ï¼","No inline SVG element selected in DOM to replace.":"DOM ä¸­æœªé€‰ä¸­å¯æ›¿æ¢çš„å†…è” SVG å…ƒç´ ã€‚","Please upload a valid SVG file!":"è¯·ä¸Šä¼ æœ‰æ•ˆçš„ SVG æ–‡ä»¶ï¼","No valid SVG code to download.":"æ²¡æœ‰å¯ä¸‹è½½çš„æœ‰æ•ˆ SVG ä»£ç ã€‚","SVG downloaded!":"SVG å·²ä¸‹è½½ï¼","SVG code copied to clipboard!":"SVG ä»£ç å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼","No SVG element selected to reset.":"æœªé€‰ä¸­å¯é‡ç½®çš„ SVG å…ƒç´ ã€‚","No original SVG found to restore.":"æœªæ‰¾åˆ°å¯æ¢å¤çš„åŸå§‹ SVGã€‚","Failed to parse original SVG.":"è§£æåŸå§‹ SVG å¤±è´¥ã€‚","Invalid original SVG.":"æ— æ•ˆçš„åŸå§‹ SVGã€‚","SVG reset to original!":"SVG å·²é‡ç½®ä¸ºåŸå§‹çŠ¶æ€ï¼","Failed to reset SVG.":"é‡ç½® SVG å¤±è´¥ã€‚","No element selected":"æœªé€‰ä¸­ä»»ä½•å…ƒç´ ","No changes found":"æœªå‘ç°ä»»ä½•æ›´æ”¹","No changes found for selected element":"æœªå‘ç°æ‰€é€‰å…ƒç´ çš„æ›´æ”¹","Changes were already deleted":"æ›´æ”¹å·²è¢«åˆ é™¤","Deletion function not available":"åˆ é™¤åŠŸèƒ½ä¸å¯ç”¨","âœ“ Deleted all changes for selected element":"âœ“ å·²åˆ é™¤æ‰€é€‰å…ƒç´ çš„æ‰€æœ‰æ›´æ”¹","Error deleting changes":"åˆ é™¤æ›´æ”¹æ—¶å‡ºé”™","No element selected.":"æœªé€‰ä¸­ä»»ä½•å…ƒç´ ã€‚","Paste CSS feature not loaded. Please refresh the page.":"ç²˜è´´ CSS åŠŸèƒ½æœªåŠ è½½ã€‚è¯·åˆ·æ–°é¡µé¢ã€‚","CSS from Figma applied!":"æ¥è‡ª Figma çš„ CSS å·²åº”ç”¨ï¼",'Nothing to paste. Copy element style from the <a href="https://www.figma.com/community/plugin/1397609843224212500/figma-to-inspecta-compare-design-to-web" target="_blank" class="toast-link">inspecta Figma plugin</a> first.':'æ²¡æœ‰å¯ç²˜è´´çš„å†…å®¹ã€‚è¯·å…ˆä» <a href="https://www.figma.com/community/plugin/1397609843224212500/figma-to-inspecta-compare-design-to-web" target="_blank" class="toast-link">inspecta Figma æ’ä»¶</a> å¤åˆ¶å…ƒç´ æ ·å¼ã€‚',"Failed to apply CSS from clipboard: ":"ä»å‰ªè´´æ¿åº”ç”¨ CSS å¤±è´¥: ","Clipboard CSS applied!":"å‰ªè´´æ¿ CSS å·²åº”ç”¨ï¼","No changes applied.":"æœªåº”ç”¨ä»»ä½•æ›´æ”¹ã€‚","Failed to apply clipboard CSS.":"åº”ç”¨å‰ªè´´æ¿ CSS å¤±è´¥ã€‚","SVG uploaded and displayed!":"SVG å·²ä¸Šä¼ å¹¶æ˜¾ç¤ºï¼","No SVG element found to replace!":"æœªæ‰¾åˆ°å¯æ›¿æ¢çš„ SVG å…ƒç´ ï¼","No Figma colors available. Please paste Figma colors first.":"æ²¡æœ‰å¯ç”¨çš„ Figma é¢œè‰²ã€‚è¯·å…ˆç²˜è´´ Figma é¢œè‰²ã€‚","No colors with close suggestions found. All mismatched colors don't have close matches in Figma colors.":"æœªæ‰¾åˆ°ç›¸è¿‘çš„é¢œè‰²å»ºè®®ã€‚æ‰€æœ‰ä¸åŒ¹é…çš„é¢œè‰²åœ¨ Figma ä¸­éƒ½æ²¡æœ‰ç›¸è¿‘åŒ¹é…ã€‚","No Figma fonts available. Please paste Figma fonts first.":"æ²¡æœ‰å¯ç”¨çš„ Figma å­—ä½“ã€‚è¯·å…ˆç²˜è´´ Figma å­—ä½“ã€‚","No fonts with close suggestions found. All mismatched fonts don't have close matches in Figma fonts.":"æœªæ‰¾åˆ°ç›¸è¿‘çš„å­—ä½“å»ºè®®ã€‚æ‰€æœ‰ä¸åŒ¹é…çš„å­—ä½“åœ¨ Figma ä¸­éƒ½æ²¡æœ‰ç›¸è¿‘åŒ¹é…ã€‚","Preview mode":"é¢„è§ˆæ¨¡å¼","No image or SVG found in clipboard!":"å‰ªè´´æ¿ä¸­æœªæ‰¾åˆ°å›¾ç‰‡æˆ– SVGï¼","Failed to read image or SVG from clipboard.":"ä»å‰ªè´´æ¿è¯»å–å›¾ç‰‡æˆ– SVG å¤±è´¥ã€‚","Failed to read clipboard. Please check extension permissions.":"è¯»å–å‰ªè´´æ¿å¤±è´¥ã€‚è¯·æ£€æŸ¥æ‰©å±•æƒé™ã€‚","Failed to read clipboard: ":"è¯»å–å‰ªè´´æ¿å¤±è´¥: ","Clipboard is empty. Copy styles from Inspecta Figma plugin first.":"å‰ªè´´æ¿ä¸ºç©ºã€‚è¯·å…ˆä» Inspecta Figma æ’ä»¶å¤åˆ¶æ ·å¼ã€‚",'Nothing to paste. Copy styles from the <a href="https://www.figma.com/community/plugin/1397609843224212500/figma-to-inspecta-compare-design-to-web" target="_blank" class="toast-link">inspecta Figma plugin</a> first.':'æ²¡æœ‰å¯ç²˜è´´çš„å†…å®¹ã€‚è¯·å…ˆä» <a href="https://www.figma.com/community/plugin/1397609843224212500/figma-to-inspecta-compare-design-to-web" target="_blank" class="toast-link">inspecta Figma æ’ä»¶</a> å¤åˆ¶æ ·å¼ã€‚','Clipboard does not contain colors or fonts. Copy styles from the <a href="https://www.figma.com/community/plugin/1397609843224212500/figma-to-inspecta-compare-design-to-web" target="_blank" class="toast-link">inspecta Figma plugin</a> first.':'å‰ªè´´æ¿ä¸åŒ…å«é¢œè‰²æˆ–å­—ä½“ã€‚è¯·å…ˆä» <a href="https://www.figma.com/community/plugin/1397609843224212500/figma-to-inspecta-compare-design-to-web" target="_blank" class="toast-link">inspecta Figma æ’ä»¶</a> å¤åˆ¶æ ·å¼ã€‚','Nothing to paste. Copy colors style from the <a href="https://www.figma.com/community/plugin/1397609843224212500/figma-to-inspecta-compare-design-to-web" target="_blank" class="toast-link">inspecta Figma plugin</a> first.':'æ²¡æœ‰å¯ç²˜è´´çš„å†…å®¹ã€‚è¯·å…ˆä» <a href="https://www.figma.com/community/plugin/1397609843224212500/figma-to-inspecta-compare-design-to-web" target="_blank" class="toast-link">inspecta Figma æ’ä»¶</a> å¤åˆ¶é¢œè‰²æ ·å¼ã€‚',"Comparing colors...":"æ­£åœ¨æ¯”è¾ƒé¢œè‰²...","All colors are matching!":"æ‰€æœ‰é¢œè‰²éƒ½åŒ¹é…ï¼","Auto Fix":"è‡ªåŠ¨ä¿®å¤","Unlock Image":"è§£é”å›¾ç‰‡","Lock Image":"é”å®šå›¾ç‰‡","Figma suggested colors":"Figma å»ºè®®é¢œè‰²","Figma suggested fonts":"Figma å»ºè®®å­—ä½“","Search...":"æœç´¢...","Reset style":"é‡ç½®æ ·å¼","Apply (":"åº”ç”¨ (",elements:"ä¸ªå…ƒç´ "},ci=e=>{if(typeof window>"u")return Promise.resolve(!0);const t=e.getContainer??document.body,n=document.createElement("div");t.appendChild(n);const o=Pr(n);return new Promise(r=>{const i=l=>{r(l),setTimeout(()=>{o.unmount(),n.remove()},0)},s=()=>Ht.createElement(qr,null,Ht.createElement(Js,{open:!0,title:e.title??"æ“ä½œç¡®è®¤",okText:e.okText??"ç¡®å®š",cancelText:e.cancelText??"å–æ¶ˆ",maskClosable:!1,centered:!0,onOk:()=>i(!0),onCancel:()=>i(!1),destroyOnClose:!0,zIndex:2147483648},Ht.createElement("div",{style:{whiteSpace:"pre-line"}},e.content)));o.render(Ht.createElement(s))})};let jn=null;const ui=e=>{if(!e)return e;let t=e.replace(/body\s*>\s*#root\s*>\s*div\.css-[\w-]+\s*\.ant-app\s*>?/gi,"");return t=t.replace(/div\.css-[\w-]+\s*\.ant-app\s*>?/gi,""),t=t.replace(/>\s*/g,">").replace(/\s{2,}/g," ").trim(),t.startsWith(">")&&(t=t.slice(1).trim()),t},dl=()=>{if(jn||typeof document>"u")return;const e=document.createElement("div");e.id="inspecta-start-overlay",e.style.cssText=`
    position: fixed;
    inset: 0;
    z-index: 2147483646;
    background: rgba(0,0,0,0.85);
    color: #fff;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 40px 24px;
    gap: 14px;
    box-sizing: border-box;
    font-family: -apple-system,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Arial,sans-serif;
    text-align: center;
  `;const t=document.createElement("div");t.style.cssText=`
    max-width: 640px;
    width: 100%;
    padding: 0;
    margin: 0 auto;
    text-align: left;
  `;const n=document.createElement("div");n.textContent="Inspecta æ¨¡å¼å¯åŠ¨æŒ‡å¼•",n.style.cssText=`
    font-size: 22px;
    font-weight: 600;
    letter-spacing: 0.2px;
    margin-bottom: 24px;
  `;const o=document.createElement("ul");o.style.cssText=`
    list-style: none;
    margin: 0;
    display: grid;
    gap: 10px;
    font-size: 15px;
    line-height: 1.6;
    text-align: left;
    max-width: 560px;
  `,[()=>{const i=document.createElement("li");i.style.cssText="display: flex; gap: 6px; flex-wrap: wrap;",i.append("1. å®‰è£… Inspecta æ‰©å±• ");const s=document.createElement("a");return s.href="https://inspecta.design/",s.target="_blank",s.rel="noreferrer",s.textContent="https://inspecta.design/",s.style.cssText="color: #8ec7ff; text-decoration: underline; font-weight: 600;",i.appendChild(s),i},()=>{const i=document.createElement("li");return i.textContent="2. ç‚¹å‡» Inspecta æ‰©å±•æŒ‰é’®å¼€å¯é¡µé¢ç¼–è¾‘",i},()=>{const i=document.createElement("li");return i.textContent="3. ä¿®æ”¹æ ·å¼åå¯ä»¥è®© AI ä¿®æ”¹æˆ–è€…ä¿å­˜åˆ°å¼ºåˆ¶æ ·å¼",i},()=>{const i=document.createElement("li");return i.textContent="4. ä¿®æ”¹æ–‡æœ¬åå¯ä»¥è®© AI ä¿®æ”¹æˆ–è€…ç›´æ¥æ‰¹é‡æ›´æ–°åˆ°æ–‡ä»¶",i}].forEach(i=>{o.appendChild(i())}),t.appendChild(n),t.appendChild(o),e.appendChild(t),document.body.appendChild(e),jn=e},Qn=()=>{jn&&(jn.remove(),jn=null)},fl=e=>{if(typeof window>"u")return;console.log("[Dev Template] Inspecta æ¨¡å¼å·²å¯ç”¨"),console.log("[Inspecta-Translator] å¯åŠ¨ç¿»è¯‘è„šæœ¬..."),dl();let t=!0,n=null,o=null,r=null,i=null,s=null;const l=new WeakSet,a=E=>{const y=E.trim();return ul[y]||null},c=E=>{if(l.has(E))return!1;let y=!1;if(E.nodeType===Node.TEXT_NODE&&E.textContent){const k=a(E.textContent);k&&k!==E.textContent&&(E.textContent=k,y=!0)}if(E.nodeType===Node.ELEMENT_NODE){const k=E;Array.from(k.attributes).forEach(j=>{const L=a(j.value);L&&L!==j.value&&(k.setAttribute(j.name,L),y=!0)})}return y&&l.add(E),y},u=E=>{const y=document.createTreeWalker(E,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT);let k;for(;k=y.nextNode();)c(k)},p=E=>{if(!t)return;o&&(o.disconnect(),o=null),console.log("[Inspecta-Translator] å¼€å§‹åˆå§‹ç¿»è¯‘"),u(E),console.log("[Inspecta-Translator] åˆå§‹ç¿»è¯‘å®Œæˆ");const y=new Set,k=new MutationObserver(j=>{t&&(j.forEach(L=>{L.type==="childList"?L.addedNodes.forEach(S=>{(S.nodeType===Node.ELEMENT_NODE||S.nodeType===Node.TEXT_NODE)&&y.add(S)}):L.type==="characterData"&&y.add(L.target)}),r!==null&&clearTimeout(r),r=window.setTimeout(()=>{t&&(y.size>0&&(y.forEach(L=>{L.nodeType===Node.ELEMENT_NODE?u(L):c(L)}),y.clear()),r=null)},50))});k.observe(E,{childList:!0,subtree:!0,characterData:!0,attributes:!1}),o=k,i=E,console.log("[Inspecta-Translator] ç¿»è¯‘è§‚å¯Ÿå™¨å·²å¯åŠ¨")},f=E=>{console.log("[Axhub] å¼€å§‹è·å– CSS å†…å®¹");const y=E.querySelector("#btn_toggle_changes");return y?(y.click(),console.log("[Axhub] å·²ç‚¹å‡»æ‰“å¼€ CSS å˜åŒ–é¢æ¿"),setTimeout(()=>{const k=E.querySelector("#full_css_content");if(!k){console.error("[Axhub] æœªæ‰¾åˆ° #full_css_content å…ƒç´ ");return}console.log("[Axhub] æ‰¾åˆ° CSS å†…å®¹å®¹å™¨:",k);const j=k.querySelectorAll(".change_item");console.log(`[Axhub] æ‰¾åˆ° ${j.length} ä¸ª change_item`);const L=[];j.forEach((g,T)=>{const F=g.querySelector(".inspecta_tag_input");if(!F){console.warn(`[Axhub] change_item ${T} æœªæ‰¾åˆ° .inspecta_tag_input`);return}const _=F.getAttribute("rule"),D=ui(_||"");if(!D){console.warn(`[Axhub] change_item ${T} çš„ rule å±æ€§ä¸ºç©º`);return}console.log(`[Axhub] change_item ${T} - rule: ${D}`);const H=g.querySelectorAll(".css_change_property");console.log(`[Axhub] change_item ${T} - æ‰¾åˆ° ${H.length} ä¸ªå±æ€§`);const v=[];if(H.forEach((R,V)=>{const B=R.querySelector("input[type='checkbox']");if(!B){console.warn(`[Axhub] change_item ${T} - å±æ€§ ${V} æœªæ‰¾åˆ° checkbox`);return}const $=B.getAttribute("key"),q=B.getAttribute("cssvalue");$&&q?(v.push(`  ${$}: ${q};`),console.log(`[Axhub] change_item ${T} - å±æ€§ ${V}: ${$}: ${q}`)):console.warn(`[Axhub] change_item ${T} - å±æ€§ ${V} ç¼ºå°‘ key æˆ– cssvalue`)}),v.length>0){const R=`${D} {
${v.join(`
`)}
}`;L.push(R),console.log(`[Axhub] change_item ${T} - ç”Ÿæˆ CSS è§„åˆ™:
${R}`)}});const S=L.join(`

`);return console.log(`[Axhub] æœ€ç»ˆç”Ÿæˆçš„ CSS (${L.length} æ¡è§„åˆ™):
${S}`),S},300),""):(console.error("[Axhub] æœªæ‰¾åˆ° #btn_toggle_changes æŒ‰é’®"),"")},h=async E=>{console.log("[Axhub] å¼€å§‹ä¿å­˜ hack.css"),f(E),setTimeout(async()=>{const y=E.querySelector("#full_css_content");if(!y){console.warn("[Axhub] æœªæ‰¾åˆ° CSS å†…å®¹");return}const k=y.querySelectorAll(".change_item"),j=[];k.forEach(D=>{const H=D.querySelector(".inspecta_tag_input"),v=ui((H==null?void 0:H.getAttribute("rule"))||"");if(!v)return;const R=D.querySelectorAll(".css_change_property"),V=[];R.forEach(B=>{const $=B.querySelector("input[type='checkbox']"),q=$==null?void 0:$.getAttribute("key"),ne=$==null?void 0:$.getAttribute("cssvalue");q&&ne&&V.push(`  ${q}: ${ne};`)}),V.length>0&&j.push(`${v} {
${V.join(`
`)}
}`)});const L=j.join(`

`);if(!L){console.warn("[Axhub] æ²¡æœ‰å¯ä¿å­˜çš„ CSS å†…å®¹"),Bt.warning("å½“å‰æ²¡æœ‰å¯ä¿å­˜çš„ CSS æ›´æ”¹");return}console.log(`[Axhub] å‡†å¤‡ä¿å­˜çš„ CSS å†…å®¹:
`,L);const S=window.location.pathname.match(/\/(elements|pages)\/([^\/]+)/);if(!S){console.error("[Axhub] æ— æ³•è¯†åˆ«å½“å‰é¡µé¢è·¯å¾„");return}const[,g,T]=S,F=`${g}/${T}`;if(console.log("[Axhub] ç›®æ ‡è·¯å¾„:",F),!await ci({title:"æ›´æ–°å¼ºåˆ¶æ ·å¼",content:`ç¡®å®šè¦æ›´æ–°å¼ºåˆ¶æ ·å¼å—ï¼Ÿ

æ­¤æ“ä½œä¼šå°†å½“å‰çš„ CSS ä¿®æ”¹ä¿å­˜åˆ° hack.css æ–‡ä»¶ï¼Œ
é¡µé¢å°†è‡ªåŠ¨çƒ­æ›´æ–°åˆ·æ–°ä»¥åº”ç”¨æ›´æ”¹ã€‚`,okText:"æ›´æ–°",cancelText:"å–æ¶ˆ"})){console.log("[Axhub] ç”¨æˆ·å–æ¶ˆäº†ä¿å­˜æ“ä½œ");return}try{const D=await fetch("/api/hack-css/save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:F,content:L})}),H=await D.json();D.ok?console.log("[Axhub] âœ… ä¿å­˜æˆåŠŸ:",H):console.error("[Axhub] âŒ ä¿å­˜å¤±è´¥:",H)}catch(D){console.error("[Axhub] âŒ è¯·æ±‚å¤±è´¥:",D)}},500)},d=async E=>{console.log("[Axhub] ========== å¼€å§‹æ¸…ç©º hack.css =========="),console.log("[Axhub] å½“å‰ URL:",window.location.href),console.log("[Axhub] å½“å‰ pathname:",window.location.pathname);const y=window.location.pathname.match(/\/(elements|pages)\/([^\/]+)/);if(console.log("[Axhub] è·¯å¾„åŒ¹é…ç»“æœ:",y),!y){console.error("[Axhub] âŒ æ— æ³•è¯†åˆ«å½“å‰é¡µé¢è·¯å¾„:",window.location.pathname);return}const[,k,j]=y,L=`${k}/${j}`;if(console.log("[Axhub] è§£æç»“æœ - type:",k,"name:",j),console.log("[Axhub] ç›®æ ‡è·¯å¾„:",L),!await ci({title:"æ¸…ç©ºå¼ºåˆ¶æ ·å¼",content:`ç¡®å®šè¦æ¸…ç©ºå¼ºåˆ¶æ ·å¼å—ï¼Ÿ

æ­¤æ“ä½œä¼šåˆ é™¤ hack.css æ–‡ä»¶å¹¶æ¸…ç©ºæ‰€æœ‰ Inspecta ä¿®æ”¹ï¼Œ
é¡µé¢å°†è‡ªåŠ¨çƒ­æ›´æ–°åˆ·æ–°ä»¥åº”ç”¨æ›´æ”¹ã€‚`,okText:"æ¸…ç©º",cancelText:"å–æ¶ˆ"})){console.log("[Axhub] ç”¨æˆ·å–æ¶ˆäº†æ¸…ç©ºæ“ä½œ");return}const g={path:L};console.log("[Axhub] è¯·æ±‚ä½“:",JSON.stringify(g)),console.log("[Axhub] å‡†å¤‡å‘é€ POST è¯·æ±‚åˆ°: /api/hack-css/clear");try{const T=await fetch("/api/hack-css/clear",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)});console.log("[Axhub] âœ… æ”¶åˆ°å“åº”"),console.log("[Axhub] å“åº”çŠ¶æ€:",T.status,T.statusText),console.log("[Axhub] å“åº”å¤´:",Object.fromEntries(T.headers.entries()));const F=await T.json();if(console.log("[Axhub] å“åº”å†…å®¹:",F),T.ok){console.log("[Axhub] âœ… æ¸…ç©ºæˆåŠŸ:",F);const _=E.querySelector("#btn_clear_inspecta_changes");_?(console.log("[Axhub] æ‰¾åˆ°æ¸…ç©º inspecta æŒ‰é’®ï¼Œå‡†å¤‡ç‚¹å‡»"),_.click(),console.log("[Axhub] å·²ç‚¹å‡»æ¸…ç©º inspecta æŒ‰é’®")):console.warn("[Axhub] æœªæ‰¾åˆ° #btn_clear_inspecta_changes æŒ‰é’®"),console.log("[Axhub] ç­‰å¾…é¡µé¢è‡ªåŠ¨çƒ­æ›´æ–°...")}else console.error("[Axhub] âŒ æ¸…ç©ºå¤±è´¥:",F)}catch(T){console.error("[Axhub] âŒ è¯·æ±‚å¼‚å¸¸:",T),console.error("[Axhub] é”™è¯¯å †æ ˆ:",T instanceof Error?T.stack:"æ— å †æ ˆä¿¡æ¯")}console.log("[Axhub] ========== æ¸…ç©ºæµç¨‹ç»“æŸ ==========")},b=async E=>{console.log("[Axhub] å¼€å§‹ä¿å­˜æ–‡æœ¬æ–‡ä»¶");const y=document.querySelectorAll('.text-node-selected[contenteditable="true"][data-original-text]'),k=[];if(y.forEach($=>{var A;const q=$.getAttribute("data-original-text"),ne=((A=$.textContent)==null?void 0:A.trim())||"";q&&ne&&q!==ne&&k.push({original:q,current:ne,element:$})}),k.length===0){Bt.info("æ²¡æœ‰å‘ç°æ–‡æœ¬æ›´æ”¹");return}const j=window.location.pathname.match(/\/(elements|pages)\/([^\/]+)/);if(!j){console.error("[Axhub] æ— æ³•è¯†åˆ«å½“å‰é¡µé¢è·¯å¾„"),Bt.error("æ— æ³•è¯†åˆ«å½“å‰é¡µé¢è·¯å¾„");return}const[,L,S]=j,g=`${L}/${S}`,T=k.map(async({original:$})=>{try{const ne=await(await fetch("/api/text-replace/count",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:g,searchText:$})})).json();return{original:$,count:ne.count||0}}catch(q){return console.error(`[Axhub] ç»Ÿè®¡æ–‡æœ¬ "${$}" å¤±è´¥:`,q),{original:$,count:0}}}),_=(await Promise.all(T)).reduce(($,{count:q})=>$+q,0),D=document.createElement("div");D.id="text_replace_overlay",D.style.cssText=`
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.5);
      z-index: 2147483646;
      display: flex;
      align-items: center;
      justify-content: center;
    `;const H=document.createElement("div");H.className="popup",H.style.cssText=`
      width: 280px;
      z-index: 2147483647;
    `,H.innerHTML=`
      <div class="popup-header">
        <div class="popup-title">Axhub åŠŸèƒ½</div>
        <div class="popup-elements-count"></div>
        <div class="action_icon" id="text_replace_close">
          <svg class="icon-16 icon-fill"><use href="#ic_close"></use></svg>
        </div>
      </div>
      <div class="settings-menu-container">
        <div class="settings-menu-item" id="text_replace_confirm">
          <div class="settings-menu-text">æ›¿æ¢æ–‡æœ¬ï¼ˆå…± ${_} å¤„ï¼‰</div>
        </div>
        <div class="settings-menu-item" id="text_replace_cancel">
          <div class="settings-menu-text">æš‚ä¸æ›¿æ¢</div>
        </div>
      </div>
    `,D.appendChild(H),E.appendChild(D);const v=()=>{D.remove()},R=H.querySelector("#text_replace_close");R==null||R.addEventListener("click",$=>{$.stopPropagation(),v(),console.log("[Axhub] ç”¨æˆ·å–æ¶ˆäº†æ–‡æœ¬æ›¿æ¢æ“ä½œ")});const V=H.querySelector("#text_replace_cancel");V==null||V.addEventListener("click",$=>{$.stopPropagation(),v(),console.log("[Axhub] ç”¨æˆ·å–æ¶ˆäº†æ–‡æœ¬æ›¿æ¢æ“ä½œ")});const B=H.querySelector("#text_replace_confirm");B==null||B.addEventListener("click",async $=>{$.stopPropagation(),v();try{const q=k.map(async({original:Y,current:z})=>await(await fetch("/api/text-replace/replace",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:g,searchText:Y,replaceText:z})})).json()),ne=await Promise.all(q),A=ne.filter(Y=>Y.success).length,P=ne.reduce((Y,z)=>Y+(z.changedFiles||0),0);A===ne.length?(k.forEach(({current:Y,element:z})=>{z.setAttribute("data-original-text",Y),z.textContent!==Y&&(z.textContent=Y),console.log(`[Axhub] å·²æ›´æ–°é¡µé¢èŠ‚ç‚¹: "${z.getAttribute("data-original-text")}" -> "${Y}"`)}),Bt.success(`æ›¿æ¢æˆåŠŸï¼å…±ä¿®æ”¹äº† ${P} ä¸ªæ–‡ä»¶`),console.log("[Axhub] âœ… æ–‡æœ¬æ›¿æ¢æˆåŠŸï¼Œé¡µé¢èŠ‚ç‚¹å·²æ›´æ–°")):(Bt.warning(`éƒ¨åˆ†æ›¿æ¢å¤±è´¥ï¼ŒæˆåŠŸ ${A}/${ne.length}`),console.warn("[Axhub] âš ï¸ éƒ¨åˆ†æ–‡æœ¬æ›¿æ¢å¤±è´¥"))}catch(q){console.error("[Axhub] âŒ æ–‡æœ¬æ›¿æ¢å¤±è´¥:",q),Bt.error("æ–‡æœ¬æ›¿æ¢å¤±è´¥")}}),D.addEventListener("click",$=>{$.target===D&&(v(),console.log("[Axhub] ç”¨æˆ·å–æ¶ˆäº†æ–‡æœ¬æ›¿æ¢æ“ä½œ"))})},m=E=>{console.log("[Axhub] å¼€å§‹æ³¨å…¥ä¿å­˜æ–‡æœ¬æŒ‰é’®");const y=()=>{var L;if(!t)return;const k=E.querySelector("#text_edit_copy_prompt");if(!k){console.log("[Axhub] text_edit_copy_prompt æŒ‰é’®æœªæ‰¾åˆ°ï¼Œç»§ç»­ç­‰å¾…..."),setTimeout(y,100);return}if(console.log("[Axhub] æ‰¾åˆ° text_edit_copy_prompt æŒ‰é’®:",k),E.querySelector("#save_text_files_btn")){console.log("[Axhub] ä¿å­˜æ–‡æœ¬æŒ‰é’®å·²å­˜åœ¨ï¼Œè·³è¿‡æ³¨å…¥");return}const j=document.createElement("div");j.id="save_text_files_btn",j.className="action_icon",j.innerHTML=`
        <svg class="icon-16 icon-fill" viewBox="0 0 16 16" style="pointer-events: none;">
          <text x="8" y="15" text-anchor="middle" font-size="16" fill="currentColor">A</text>
        </svg>
      `,(L=k.parentNode)==null||L.insertBefore(j,k),j.addEventListener("click",async S=>{S.stopPropagation(),console.log("[Axhub] ä¿å­˜æ–‡æœ¬æ–‡ä»¶æŒ‰é’®è¢«ç‚¹å‡»");const g=document.querySelector("#inspecta_app_container");g!=null&&g.shadowRoot?await b(g.shadowRoot):(console.error("[Axhub] æ— æ³•æ‰¾åˆ° shadowRoot"),Bt.error("æ— æ³•æ˜¾ç¤ºå¯¹è¯æ¡†"))}),console.log("[Axhub] ä¿å­˜æ–‡æœ¬æŒ‰é’®æ³¨å…¥æˆåŠŸ")};y()},w=E=>{console.log("[Inspecta-Custom] å¼€å§‹æ³¨å…¥è‡ªå®šä¹‰æŒ‰é’®");const y=()=>{var H;if(!t)return;const k=E.querySelector("#changes_action_export_to_file");if(!k){console.log("[Inspecta-Custom] changes_action_export_to_file æŒ‰é’®æœªæ‰¾åˆ°ï¼Œç»§ç»­ç­‰å¾…..."),setTimeout(y,100);return}if(console.log("[Inspecta-Custom] æ‰¾åˆ° changes_action_export_to_file æŒ‰é’®:",k),E.querySelector("#btn_axhub_action")){console.log("[Inspecta-Custom] è‡ªå®šä¹‰æŒ‰é’®å·²å­˜åœ¨ï¼Œè·³è¿‡æ³¨å…¥");return}const j=document.createElement("div");j.className="action_icon",j.id="btn_axhub_action",j.style.cssText="position: relative;",j.innerHTML=`
        <svg class="icon-16 icon-fill" viewBox="0 0 16 16" style="pointer-events: none;">
          <text x="8" y="15" text-anchor="middle" font-size="16" fill="currentColor">A</text>
        </svg>
        <div class="tooltip tooltip-bottom" style="opacity: 0;">Axhub åŠŸèƒ½</div>
      `;const L=document.createElement("div");L.id="axhub_menu",L.className="popup",L.innerHTML=`
        <div class="popup-header">
          <div class="popup-title">Axhub åŠŸèƒ½</div>
          <div class="popup-elements-count"></div>
          <div class="action_icon" id="btn_axhub_close">
            <svg class="icon-16 icon-fill"><use href="#ic_close"></use></svg>
          </div>
        </div>
        <div class="settings-menu-container">
          <div class="settings-menu-item" id="btn_axhub_save">
            <div class="settings-menu-text">ä¿å­˜åˆ°å¼ºåˆ¶æ ·å¼</div>
          </div>
          <div class="settings-menu-item" id="btn_axhub_clear">
            <div class="settings-menu-text">æ¸…ç©ºå¼ºåˆ¶æ ·å¼</div>
          </div>
        </div>
      `;const S=document.createElement("style");S.id="axhub_menu_style",S.textContent=`
        #axhub_menu_overlay {
          position: fixed;
          inset: 0;
          background: rgba(0, 0, 0, 0.5);
          z-index: 2147483646;
          display: none;
        }
        #axhub_menu_overlay.show {
          display: block;
        }
        #axhub_menu {
          position: fixed;
          z-index: 2147483647;
          top: 50%;
          left: 50%;
          transform: translate(-50%, -50%);
          opacity: 0;
          transition: opacity 0.2s ease-in-out;
          pointer-events: none;
          width: 280px;
          display: none;
        }
        #axhub_menu.show {
          opacity: 1;
          pointer-events: auto;
          display: block;
        }
      `,E.appendChild(S),(H=k.parentNode)==null||H.insertBefore(j,k);const g=document.createElement("div");g.id="axhub_menu_overlay",E.appendChild(g),E.appendChild(L),console.log("[Inspecta-Custom] Axhub èœå•å·²æ·»åŠ åˆ° shadowRoot"),j.addEventListener("click",v=>{v.stopPropagation(),L.classList.contains("show")?(L.classList.remove("show"),g.classList.remove("show"),console.log("[Inspecta-Custom] Axhub èœå•å…³é—­")):(L.classList.add("show"),g.classList.add("show"),console.log("[Inspecta-Custom] Axhub èœå•æ‰“å¼€"))});const T=L.querySelector("#btn_axhub_close");T==null||T.addEventListener("click",v=>{v.stopPropagation(),L.classList.remove("show"),g.classList.remove("show"),console.log("[Inspecta-Custom] Axhub èœå•å…³é—­ï¼ˆé€šè¿‡å…³é—­æŒ‰é’®ï¼‰")});const F=L.querySelector("#btn_axhub_save");F==null||F.addEventListener("click",async v=>{v.stopPropagation(),console.log("[Axhub] ä¿å­˜æŒ‰é’®è¢«ç‚¹å‡»"),L.classList.remove("show"),g.classList.remove("show"),await h(E)});const _=L.querySelector("#btn_axhub_clear");_==null||_.addEventListener("click",async v=>{v.stopPropagation(),console.log("[Axhub] æ¸…ç©ºæŒ‰é’®è¢«ç‚¹å‡»"),L.classList.remove("show"),g.classList.remove("show"),await d(E)}),g.addEventListener("click",v=>{v.target===g&&(L.classList.remove("show"),g.classList.remove("show"))});const D=v=>{const R=v.target;!j.contains(R)&&!L.contains(R)&&!g.contains(R)&&(L.classList.remove("show"),g.classList.remove("show"))};E.addEventListener("click",D),s=D,console.log("[Inspecta-Custom] è‡ªå®šä¹‰æŒ‰é’®æ³¨å…¥æˆåŠŸ")};y()},M=()=>{if(!t)return;const E=document.querySelector("#inspecta_app_container");if(!E){console.log("[Inspecta-Translator] å®¹å™¨ä¸å­˜åœ¨ï¼Œç­‰å¾…æ³¨å…¥...");return}if(console.log("[Inspecta-Translator] æ‰¾åˆ°å®¹å™¨:",E),!E.shadowRoot){console.log("[Inspecta-Translator] shadowRoot ä¸å­˜åœ¨ï¼Œç­‰å¾…åˆ›å»º...");return}console.log("[Inspecta-Translator] æ‰¾åˆ° shadowRootï¼Œå¼€å§‹ç¿»è¯‘"),p(E.shadowRoot),w(E.shadowRoot),m(E.shadowRoot),Qn()};return(()=>{t&&(console.log("[Inspecta-Translator] å¼€å§‹ç›‘å¬ Inspecta å®¹å™¨æ³¨å…¥"),M(),n=new MutationObserver(E=>{if(t)for(const y of E)y.type==="childList"&&y.addedNodes.forEach(k=>{if(k instanceof Element){if(k.id==="inspecta_app_container"){console.log("[Inspecta-Translator] æ£€æµ‹åˆ° Inspecta å®¹å™¨æ³¨å…¥");const L=()=>{if(!t)return;const S=k;S.shadowRoot?(console.log("[Inspecta-Translator] shadowRoot å·²åˆ›å»º"),n==null||n.disconnect(),p(S.shadowRoot),w(S.shadowRoot),m(S.shadowRoot),Qn()):(console.log("[Inspecta-Translator] shadowRoot å°šæœªåˆ›å»ºï¼Œç»§ç»­ç­‰å¾…..."),setTimeout(L,100))};L()}const j=k.querySelector("#inspecta_app_container");if(j){console.log("[Inspecta-Translator] åœ¨å­èŠ‚ç‚¹ä¸­æ£€æµ‹åˆ° Inspecta å®¹å™¨");const L=()=>{if(!t)return;const S=j;S.shadowRoot?(console.log("[Inspecta-Translator] shadowRoot å·²åˆ›å»º"),n==null||n.disconnect(),p(S.shadowRoot),w(S.shadowRoot),m(S.shadowRoot),Qn()):(console.log("[Inspecta-Translator] shadowRoot å°šæœªåˆ›å»ºï¼Œç»§ç»­ç­‰å¾…..."),setTimeout(L,100))};L()}}})}),n.observe(document.body,{childList:!0,subtree:!0}),console.log("[Inspecta-Translator] ç›‘å¬å™¨å·²å¯åŠ¨"))})(),()=>{t=!1,n&&(n.disconnect(),n=null),o&&(o.disconnect(),o=null),r!==null&&(clearTimeout(r),r=null),i&&(s&&(i.removeEventListener("click",s),s=null),i.querySelectorAll("#axhub_menu_overlay, #axhub_menu, #btn_axhub_action, #save_text_files_btn, #axhub_menu_style, #text_replace_overlay").forEach(E=>E.remove())),Qn()}},pl=()=>{let e=!1,t;return{enable:()=>{e||(e=!0,t=fl())},disable:()=>{e&&(t==null||t(),t=void 0,e=!1)},isEnabled:()=>e,getStatus:()=>({enabled:e})}};let di=!1,Yt=!1;const An=new Set,Un=new Set,Fr="axhub-text-edit-style";let Sn=null,tn=null;const ln=e=>{typeof window>"u"||window.parent&&window.parent!==window&&window.parent.postMessage(e,"*")},Qs=()=>document.getElementById("root"),Wo=e=>{var t;return((t=e.textContent)==null?void 0:t.trim())??""},ml=()=>{if(document.getElementById(Fr))return;const e=document.createElement("style");e.id=Fr,e.textContent=`
    .text-node-edited {
      background-color: rgba(250, 173, 20, 0.12);
    }
  `,document.head.appendChild(e)},hl=()=>{var e;(e=document.getElementById(Fr))==null||e.remove()},vt=()=>{ln({type:"TEXT_EDIT_STATUS",enabled:Yt,editedCount:An.size})},gl=()=>({enabled:Yt,editedCount:An.size}),ut=(e,t)=>{ln({type:"TEXT_EDIT_NOTICE",level:e,message:t})},ea=e=>{const t=e.target;if(!t||!t.hasAttribute("data-axhub-text-edit"))return;const n=t.getAttribute("data-original-text")??"",o=Wo(t);n!==o?(An.add(t),t.classList.add("text-node-edited")):(An.delete(t),t.classList.remove("text-node-edited")),vt()},ta=e=>{const t=e.tagName.toLowerCase();return!(["script","style","input","textarea","select","option"].includes(t)||e.getAttribute("contenteditable")==="false"||!Wo(e)||e.childElementCount>0&&!Array.from(e.childNodes).some(r=>{var i;return r.nodeType===Node.TEXT_NODE&&((i=r.textContent)==null?void 0:i.trim())}))},bl=()=>{const e=Qs();if(!e)return[];const t=["p","span","div","h1","h2","h3","h4","h5","h6","li","td","th","label","a","button","strong","b","em","i"].join(",");return Array.from(e.querySelectorAll(t)).filter(ta)},na=e=>{e.length!==0&&(e.forEach(t=>{t.hasAttribute("data-original-text")||t.setAttribute("data-original-text",Wo(t));const n=t.getAttribute("contenteditable");n!==null&&t.setAttribute("data-axhub-original-contenteditable",n),t.setAttribute("data-axhub-text-edit","true"),t.setAttribute("contenteditable","true"),t.addEventListener("input",ea)}),e.forEach(t=>Un.add(t)))},wl=()=>{if(Sn)return;const e=Qs();e&&(Sn=new MutationObserver(t=>{if(!Yt)return;const n=[];if(t.forEach(i=>{i.addedNodes.forEach(s=>{var c;if(s.nodeType!==Node.ELEMENT_NODE)return;const l=s;l.matches&&l.matches("p,span,div,h1,h2,h3,h4,h5,h6,li,td,th,label,a,button,strong,b,em,i")&&n.push(l);const a=Array.from(((c=l.querySelectorAll)==null?void 0:c.call(l,"p,span,div,h1,h2,h3,h4,h5,h6,li,td,th,label,a,button,strong,b,em,i"))||[]);n.push(...a)})}),n.length===0)return;const r=n.filter(i=>!Un.has(i)).filter(ta);na(r),vt()}),Sn.observe(e,{childList:!0,subtree:!0}))},xl=()=>{Sn&&(Sn.disconnect(),Sn=null)},oa=()=>{if(Yt){vt();return}const e=bl();if(e.length===0){ut("info","æ²¡æœ‰å‘ç°å¯ç¼–è¾‘æ–‡æœ¬"),vt();return}ml(),na(e),wl(),Yt=!0,vt(),ut("success","æ–‡æœ¬ç¼–è¾‘æ¨¡å¼å·²å¼€å¯ï¼Œç‚¹å‡»é¡µé¢æ–‡æœ¬å³å¯ç¼–è¾‘")},$r=e=>{if(!Yt){vt();return}Un.forEach(t=>{if(t.removeEventListener("input",ea),t.classList.remove("text-node-edited"),e){const o=t.getAttribute("data-original-text");o!==null&&(t.textContent=o)}const n=t.getAttribute("data-axhub-original-contenteditable");n!==null?(t.setAttribute("contenteditable",n),t.removeAttribute("data-axhub-original-contenteditable")):t.getAttribute("data-axhub-text-edit")==="true"&&t.removeAttribute("contenteditable"),t.getAttribute("data-axhub-text-edit")==="true"&&t.removeAttribute("data-axhub-text-edit")}),An.clear(),Un.clear(),hl(),xl(),Yt=!1,vt(),ut("info","å·²é€€å‡ºæ–‡æœ¬ç¼–è¾‘æ¨¡å¼")},yl=()=>{const e=[];return Un.forEach(t=>{const n=t.getAttribute("data-original-text"),o=Wo(t);n&&o&&n!==o&&e.push({original:n,current:o,element:t})}),e},vl=e=>{const t=new Map;e.forEach(r=>{const i=t.get(r.original)||{currents:new Set,elements:[]};i.currents.add(r.current),i.elements.push(r.element),t.set(r.original,i)});const n=[],o=[];return t.forEach((r,i)=>{if(r.currents.size>1){n.push({original:i,currents:Array.from(r.currents)});return}const[s]=Array.from(r.currents);o.push({original:i,current:s,elements:r.elements})}),{conflicts:n,groups:o}},El=async e=>{if(tn){ut("warning","å·²æœ‰ä¿å­˜ç¡®è®¤åœ¨å¤„ç†ä¸­");return}const t=yl();if(t.length===0){ut("info","æ²¡æœ‰å‘ç°æ–‡æœ¬æ›´æ”¹"),vt();return}const{conflicts:n,groups:o}=vl(t);if(n.length>0){ln({type:"TEXT_EDIT_CONFLICT",conflicts:n}),ut("warning","å­˜åœ¨ç›¸åŒåŸæ–‡ä½†ä¸åŒä¿®æ”¹çš„å†…å®¹ï¼Œæ— æ³•æ‰¹é‡ä¿å­˜");return}const r=window.location.pathname.match(/\/(elements|pages)\/([^\/]+)/);if(!r){ut("error","æ— æ³•è¯†åˆ«å½“å‰é¡µé¢è·¯å¾„");return}const[,i,s]=r,l=`${i}/${s}`;let a=0;try{const c=await fetch("/api/text-replace/count",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:l,replacements:o.map(({original:p})=>({searchText:p}))})}),u=await c.json();a=Number((u==null?void 0:u.totalCount)||0),c.ok||(console.error("[Axhub] ç»Ÿè®¡æ–‡æœ¬å¤±è´¥:",(u==null?void 0:u.error)||u),a=0)}catch(c){console.error("[Axhub] ç»Ÿè®¡æ–‡æœ¬å¤±è´¥:",c),a=0}tn={groups:o,totalCount:a,changedCount:t.length,exitAfterSave:e},ln({type:"TEXT_EDIT_SAVE_CONFIRM_REQUEST",totalCount:a,changedCount:t.length,exitAfterSave:e})},Sl=async e=>{const t=e.data;if(!(!t||typeof t.type!="string"))switch(t.type){case"TEXT_EDIT_ENABLE":oa();break;case"TEXT_EDIT_SAVE":await El(!!t.exitAfterSave);break;case"TEXT_EDIT_SAVE_CONFIRM":if(!tn){ut("info","æ²¡æœ‰å¾…ç¡®è®¤çš„ä¿å­˜æ“ä½œ");break}if(!t.confirmed){tn=null,ut("info","å·²å–æ¶ˆä¿å­˜");break}{const{exitAfterSave:n,totalCount:o}=tn,r=tn.groups;tn=null;const i=window.location.pathname.match(/\/(elements|pages)\/([^\/]+)/);if(!i){ut("error","æ— æ³•è¯†åˆ«å½“å‰é¡µé¢è·¯å¾„");break}const[,s,l]=i,a=`${s}/${l}`;try{const c=await fetch("/api/text-replace/replace",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:a,replacements:r.map(({original:h,current:d})=>({searchText:h,replaceText:d}))})}),u=await c.json(),p=!!(u!=null&&u.success),f=Number((u==null?void 0:u.changedFiles)||0);if(c.ok&&p){if(r.forEach(({current:h,elements:d})=>{d.forEach(b=>{b.setAttribute("data-original-text",h),b.textContent!==h&&(b.textContent=h),b.classList.remove("text-node-edited"),An.delete(b)})}),ut("success",`æ›¿æ¢æˆåŠŸï¼å…±æ›¿æ¢ ${o} å¤„ï¼Œä¿®æ”¹äº† ${f} ä¸ªæ–‡ä»¶`),ln({type:"TEXT_EDIT_SAVE_RESULT",success:!0,totalFiles:f,totalCount:o}),n){$r(!1);break}}else ut("warning","æ–‡æœ¬æ›¿æ¢å¤±è´¥"),ln({type:"TEXT_EDIT_SAVE_RESULT",success:!1,totalFiles:f,totalCount:o})}catch(c){console.error("[Axhub] æ–‡æœ¬æ›¿æ¢å¤±è´¥:",c),ut("error","æ–‡æœ¬æ›¿æ¢å¤±è´¥"),ln({type:"TEXT_EDIT_SAVE_RESULT",success:!1,totalFiles:0,totalCount:o})}vt()}break;case"TEXT_EDIT_EXIT":$r(!!t.discardChanges);break;case"TEXT_EDIT_STATUS_REQUEST":vt();break}},kl=()=>{typeof window>"u"||di||(di=!0,window.addEventListener("message",Sl),vt())},Cl=()=>(kl(),{enable:()=>oa(),disable:(e=!1)=>$r(e),isEnabled:()=>Yt,getStatus:()=>gl()}),Al=2,Xe="[WebEditorV2]",fi="__mcp_web_editor_v2_host__",ra="__mcp_web_editor_v2_overlay__",ia="__mcp_web_editor_v2_ui__",Tl=2147483647,ct={hover:"#008F5D",selected:"#008F5D",selectionBorder:"#008F5D",dragGhost:"rgba(0, 143, 93, 0.3)",insertionLine:"#f59e0b",guideLine:"#ec4899",distanceLabelBg:"rgba(15, 23, 42, 0.92)",distanceLabelBorder:"rgba(51, 65, 85, 0.5)",distanceLabelText:"rgba(255, 255, 255, 0.98)"},Nl=5,pi=6,Rl=8,Il=3,_l=6,Ml=2,Ll=30,mi=300,Dl=1,Pl=1,Fl=1,$l=4,Ol='600 11px system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif',Vl=6,Bl=3,zl=4,Hl=8;class ze{constructor(){Jn(this,"disposed",!1);Jn(this,"disposers",[])}get isDisposed(){return this.disposed}add(t){if(this.disposed){try{t()}catch{}return}this.disposers.push(t)}listen(t,n,o,r){t.addEventListener(n,o,r),this.add(()=>t.removeEventListener(n,o,r))}observeResize(t,n,o){const r=new ResizeObserver(n);return r.observe(t,o),this.add(()=>r.disconnect()),r}observeMutation(t,n,o){const r=new MutationObserver(n);return r.observe(t,o),this.add(()=>r.disconnect()),r}requestAnimationFrame(t){const n=requestAnimationFrame(t);let o=!1;const r=()=>{o||(o=!0,cancelAnimationFrame(n))};return this.add(r),r}dispose(){if(!this.disposed){this.disposed=!0;for(let t=this.disposers.length-1;t>=0;t--)try{this.disposers[t]()}catch{}this.disposers.length=0}}}const Gl=`
  :host {
    all: initial;

    /* Design tokens aligned with attr-ui.html design spec */
    /* Surface colors */
    --we-surface-bg: #ffffff;
    --we-surface-secondary: #fafafa;

    /* Control colors - input containers use gray bg */
    --we-control-bg: #f3f3f3;
    --we-control-bg-hover: #e8e8e8;
    --we-control-border-hover: #e0e0e0;
    --we-control-bg-focus: #ffffff;
    --we-control-border-focus: #008F5D;

    /* Border colors */
    --we-border-subtle: #e5e5e5;
    --we-border-strong: #d4d4d4;
    --we-border-section: #f3f3f3;

    /* Text colors */
    --we-text-primary: #333333;
    --we-text-secondary: #737373;
    --we-text-muted: #a3a3a3;

    /* Accent surfaces (used by CSS/Props panels) */
    --we-accent-info-bg: rgba(0, 143, 93, 0.08);
    --we-accent-brand-bg: rgba(0, 143, 93, 0.12);
    --we-accent-brand-border: rgba(0, 143, 93, 0.25);
    --we-accent-warning-bg: rgba(251, 191, 36, 0.14);
    --we-accent-warning-border: rgba(251, 191, 36, 0.25);
    --we-accent-danger-bg: rgba(248, 113, 113, 0.12);
    --we-accent-danger-border: rgba(248, 113, 113, 0.25);

    /* Shadows - Tailwind-like shadow-xl */
    --we-shadow-subtle: 0 1px 2px rgba(0, 0, 0, 0.05);
    --we-shadow-panel: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1);
    --we-shadow-tab: 0 1px 2px rgba(0, 0, 0, 0.05);

    /* Radii */
    --we-radius-panel: 8px;
    --we-radius-control: 8px;
    --we-radius-tab: 4px;

    /* Sizes */
    --we-icon-btn-size: 24px;

    /* Focus ring - blue inset border style */
    --we-focus-ring: #008F5D;

    /* Motion - bounce easing for toolbar animations */
    --we-ease-bounce: cubic-bezier(0.68, -0.55, 0.265, 1.55);
  }

  *,
  *::before,
  *::after {
    box-sizing: border-box;
  }

  /* Overlay container - for Canvas and visual feedback */
  #${ra} {
    position: fixed;
    inset: 0;
    pointer-events: none;
    contain: layout style;
  }

  /* ==========================================================================
   * Resize Handles (Phase 4.9)
   * ========================================================================== */

  /* Handles layer - covers viewport, pass-through by default */
  .we-handles-layer {
    position: absolute;
    inset: 0;
    pointer-events: none;
    contain: layout style paint;
  }

  /* Selection frame - positioned by selection rect */
  .we-selection-frame {
    position: absolute;
    top: 0;
    left: 0;
    width: 0;
    height: 0;
    transform: translate3d(0, 0, 0);
    pointer-events: none;
    will-change: transform, width, height;
  }

  /* Individual resize handle */
  .we-resize-handle {
    position: absolute;
    width: 8px;
    height: 8px;
    border-radius: 2px;
    background: rgba(255, 255, 255, 0.98);
    border: 1px solid ${ct.selectionBorder};
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
    pointer-events: auto;
    touch-action: none;
    user-select: none;
    transition: background-color 0.1s ease, border-color 0.1s ease, transform 0.1s ease;
  }

  .we-resize-handle:hover {
    background: ${ct.selectionBorder};
    border-color: ${ct.selectionBorder};
    transform: translate(-50%, -50%) scale(1.15);
  }

  .we-resize-handle:active {
    transform: translate(-50%, -50%) scale(1.0);
  }

  /* Handle positions - all use translate(-50%, -50%) as base */
  .we-resize-handle[data-dir="n"]  { left: 50%; top: 0; transform: translate(-50%, -50%); cursor: ns-resize; }
  .we-resize-handle[data-dir="s"]  { left: 50%; top: 100%; transform: translate(-50%, -50%); cursor: ns-resize; }
  .we-resize-handle[data-dir="e"]  { left: 100%; top: 50%; transform: translate(-50%, -50%); cursor: ew-resize; }
  .we-resize-handle[data-dir="w"]  { left: 0; top: 50%; transform: translate(-50%, -50%); cursor: ew-resize; }
  .we-resize-handle[data-dir="nw"] { left: 0; top: 0; transform: translate(-50%, -50%); cursor: nwse-resize; }
  .we-resize-handle[data-dir="ne"] { left: 100%; top: 0; transform: translate(-50%, -50%); cursor: nesw-resize; }
  .we-resize-handle[data-dir="sw"] { left: 0; top: 100%; transform: translate(-50%, -50%); cursor: nesw-resize; }
  .we-resize-handle[data-dir="se"] { left: 100%; top: 100%; transform: translate(-50%, -50%); cursor: nwse-resize; }

  /* Size HUD - shows WÃ—H while resizing */
  .we-size-hud {
    position: absolute;
    left: 50%;
    top: 0;
    transform: translate(-50%, calc(-100% - 8px));
    padding: 3px 8px;
    font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    font-size: 11px;
    font-weight: 600;
    line-height: 1.2;
    color: rgba(255, 255, 255, 0.98);
    background: rgba(15, 23, 42, 0.92);
    border: 1px solid rgba(51, 65, 85, 0.5);
    border-radius: 4px;
    pointer-events: none;
    user-select: none;
    white-space: nowrap;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
    backdrop-filter: blur(4px);
    -webkit-backdrop-filter: blur(4px);
  }

  /* ==========================================================================
   * Performance HUD (Phase 5.3)
   * ========================================================================== */

  .we-perf-hud {
    position: fixed;
    left: 12px;
    bottom: 12px;
    padding: 8px 10px;
    border-radius: 10px;
    background: rgba(15, 23, 42, 0.78);
    border: 1px solid rgba(51, 65, 85, 0.45);
    color: rgba(255, 255, 255, 0.96);
    font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    font-size: 12px;
    line-height: 1.25;
    pointer-events: none;
    user-select: none;
    white-space: nowrap;
    z-index: 10;
    box-shadow: 0 4px 14px rgba(0, 0, 0, 0.18);
    backdrop-filter: blur(6px);
    -webkit-backdrop-filter: blur(6px);
    font-variant-numeric: tabular-nums;
  }

  .we-perf-hud-line + .we-perf-hud-line {
    margin-top: 4px;
  }

  /* UI container - for panels and controls */
  /* Position below toolbar: 16px (toolbar top) + 40px (toolbar height) + 8px (gap) = 64px */
  #${ia} {
    position: fixed;
    top: 32px;
    right: 16px;
    pointer-events: auto;
    /* Inter font with system fallbacks (aligned with design spec) */
    font-family: "Inter", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    font-size: 11px;
    line-height: 1.4;
    color: var(--we-text-primary);
    -webkit-font-smoothing: antialiased;
  }

  /* Panel styles */
  /* max-height: 100vh - 64px (top offset) - 16px (bottom margin) = 100vh - 80px */
  .we-panel {
    width: 280px;
    max-width: calc(100vw - 32px);
    max-height: calc(100vh - 48px);
    background: var(--we-surface-bg);
    border: 1px solid var(--we-border-subtle);
    border-radius: var(--we-radius-panel);
    box-shadow: var(--we-shadow-panel);
    overflow: hidden;
    contain: layout style paint;
  }

  .we-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 8px;
    padding: 8px 12px;
    background: var(--we-surface-bg);
    border-bottom: 1px solid var(--we-border-subtle);
    user-select: none;
  }

  .we-title {
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 11px;
    font-weight: 600;
    color: var(--we-text-primary);
  }

  .we-badge {
    font-size: 10px;
    font-weight: 500;
    padding: 2px 6px;
    background: linear-gradient(135deg, #008F5D, #007A4F);
    color: white;
    border-radius: 4px;
  }

  .we-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    padding: 6px 12px;
    font-size: 12px;
    font-weight: 500;
    color: #475569;
    background: white;
    border: 1px solid rgba(148, 163, 184, 0.5);
    border-radius: 6px;
    cursor: pointer;
    transition: all 0.15s ease;
  }

  .we-btn:hover {
    background: #f8fafc;
    border-color: rgba(148, 163, 184, 0.7);
  }

  .we-btn:active {
    background: #f1f5f9;
  }

  .we-btn:focus-visible {
    outline: none;
    box-shadow: 0 0 0 2px var(--we-focus-ring);
  }

  .we-btn:disabled {
    opacity: 0.55;
    cursor: not-allowed;
  }

  .we-btn--primary {
    background: linear-gradient(135deg, #0f172a, #1e293b);
    color: #ffffff;
    border-color: rgba(15, 23, 42, 0.5);
  }

  .we-btn--primary:hover:not(:disabled) {
    background: linear-gradient(135deg, #1e293b, #334155);
    border-color: rgba(15, 23, 42, 0.65);
  }

  .we-btn--danger {
    color: #b91c1c;
    border-color: rgba(248, 113, 113, 0.45);
  }

  .we-btn--danger:hover:not(:disabled) {
    background: rgba(248, 113, 113, 0.08);
    border-color: rgba(248, 113, 113, 0.6);
  }

  /* Icon button (28x28) - used for window controls (close/minimize, etc.) */
  .we-icon-btn {
    width: var(--we-icon-btn-size);
    height: var(--we-icon-btn-size);
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 0;
    background: var(--we-control-bg);
    border: 0;
    border-radius: var(--we-radius-control);
    color: var(--we-text-secondary);
    cursor: pointer;
    transition: background 0.15s ease, box-shadow 0.15s ease;
  }

  .we-icon-btn:hover {
    background: var(--we-control-bg-hover);
    color: var(--we-text-primary);
  }

  .we-icon-btn:active {
    background: var(--we-control-bg-hover);
  }

  .we-icon-btn:focus-visible {
    outline: none;
    box-shadow: 0 0 0 2px var(--we-focus-ring);
  }

  .we-icon-btn svg {
    width: 16px;
    height: 16px;
    display: block;
  }

  /* Drag handle (grip) - used for repositioning floating UI */
  .we-drag-handle {
    width: var(--we-icon-btn-size);
    height: var(--we-icon-btn-size);
    display: inline-flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    padding: 0;
    background: transparent;
    border: 0;
    border-radius: var(--we-radius-control);
    color: var(--we-text-muted);
    cursor: grab;
    touch-action: none;
    user-select: none;
    transition: background 0.15s ease, color 0.15s ease, box-shadow 0.15s ease;
  }

  .we-drag-handle:hover {
    background: var(--we-control-bg);
    color: var(--we-text-secondary);
  }

  .we-drag-handle:focus-visible {
    outline: none;
    box-shadow: 0 0 0 2px var(--we-focus-ring);
  }

  .we-drag-handle:active,
  .we-drag-handle[data-dragging="true"] {
    cursor: grabbing;
    background: var(--we-control-bg-hover);
    color: var(--we-text-primary);
  }

  .we-drag-handle svg {
    width: 14px;
    height: 14px;
    display: block;
  }

  /* ==========================================================================
   * Toolbar (Redesigned per toolbar-ui.html design spec)
   * - Bounce easing animations
   * - Collapsible pill (580x40 <-> 40x40)
   * - Grip icon rotation on collapse
   * ========================================================================== */

  .we-toolbar {
    position: fixed;
    left: 50%;
    top: 16px;
    transform: translateX(-50%);
    width: 580px;
    height: 40px;
    max-width: calc(100vw - 32px);
    display: flex;
    align-items: center;
    background: #ffffff;
    border-radius: 999px;
    box-shadow: 0 -4px 10px -6px rgba(15, 23, 42, 0.18),
      0 10px 15px -3px rgba(203, 213, 225, 0.5),
      0 4px 6px -4px rgba(203, 213, 225, 0.5);
    pointer-events: auto;
    user-select: none;
    font-family: 'Inter', system-ui, -apple-system, sans-serif;
    font-size: 11px;
    color: #475569;
    transition: width 500ms var(--we-ease-bounce), height 500ms var(--we-ease-bounce);
    overflow: visible;
    will-change: width, height;
  }

  .we-toolbar[data-position="bottom"] {
    top: auto;
    bottom: 16px;
  }

  /* Dragged toolbar: use left/top (inline styles) instead of docked centering */
  .we-toolbar[data-dragged="true"] {
    left: auto;
    right: auto;
    top: auto;
    bottom: auto;
    transform: none;
  }

  /* Collapsed toolbar - 40x40 circle */
  .we-toolbar[data-minimized="true"] {
    width: 40px;
    height: 40px;
  }

  /* Toolbar content row (collapses with toolbar) */
  .we-toolbar-content {
    display: flex;
    align-items: center;
    flex: 1;
    min-width: 0;
    gap: 10px;
    white-space: nowrap;
    padding-right: 8px;
    transition: opacity 350ms ease, transform 400ms var(--we-ease-bounce);
    will-change: opacity, transform;
  }

  .we-toolbar[data-minimized="true"] .we-toolbar-content {
    opacity: 0;
    transform: translateX(-16px) scale(0.95);
    pointer-events: none;
  }

  .we-toolbar[data-minimized="false"] .we-toolbar-content {
    opacity: 1;
    transform: translateX(0) scale(1);
    pointer-events: auto;
  }

  /* Grip toggle button (40x40, hover slate-50, active scale-90) */
  .we-toolbar .we-drag-handle {
    width: 40px;
    height: 40px;
    flex-shrink: 0;
    border-radius: 999px;
    cursor: pointer;
    transition: background-color 150ms ease, transform 150ms ease;
  }

  .we-toolbar .we-drag-handle:hover {
    background: #f8fafc;
  }

  .we-toolbar .we-drag-handle:active {
    transform: scale(0.9);
  }

  /* Grip icon rotation (collapsed 90deg -> expanded 0deg) */
  .we-toolbar .we-drag-handle svg {
    width: 16px;
    height: 16px;
    color: #94a3b8;
    transition: transform 500ms var(--we-ease-bounce);
    transform: rotate(0deg);
  }

  .we-toolbar[data-minimized="true"] .we-drag-handle svg {
    transform: rotate(90deg);
  }

  /* Status indicator: green dot + "Editor" label */
  /* Undo/Redo counts */
  .we-toolbar-history {
    display: flex;
    gap: 10px;
    font-size: 10px;
    font-weight: 500;
    color: #94a3b8;
    font-variant-numeric: tabular-nums;
  }

  .we-toolbar-history-value {
    color: #475569;
    font-weight: 700;
  }

  /* Divider */
  .we-toolbar-divider {
    width: 1px;
    height: 16px;
    background: #e2e8f0;
  }

  /* Structure group (Structure button + divider + Undo/Redo icons) */
  .we-toolbar-structure-group {
    display: inline-flex;
    align-items: center;
    background: #f1f5f9;
    border-radius: 999px;
    padding: 2px;
  }

  .we-toolbar-structure-btn {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    padding: 4px 10px;
    font-size: 11px;
    font-weight: 500;
    color: #64748b;
    background: transparent;
    border: 0;
    border-radius: 999px;
    cursor: pointer;
    transition: color 150ms ease, background-color 150ms ease;
  }

  .we-toolbar-structure-btn:hover:not(:disabled) {
    color: #1e293b;
    background: #ffffff;
  }

  .we-toolbar-structure-btn:disabled {
    opacity: 0.55;
    cursor: not-allowed;
  }

  .we-toolbar-structure-btn svg {
    width: 10px;
    height: 10px;
    opacity: 0.5;
    display: block;
  }

  .we-toolbar-structure-separator {
    width: 1px;
    height: 12px;
    background: #e2e8f0;
  }

  .we-toolbar-group-icon-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 4px;
    padding: 4px 8px;
    background: transparent;
    border: 0;
    border-radius: 999px;
    color: #94a3b8;
    cursor: pointer;
    transition: color 150ms ease, background-color 150ms ease;
  }

  .we-toolbar-group-icon-btn:hover:not(:disabled) {
    color: #334155;
    background: #ffffff;
  }

  .we-toolbar-group-icon-btn:disabled {
    opacity: 0.45;
    cursor: not-allowed;
  }

  .we-toolbar-group-icon-btn svg {
    width: 14px;
    height: 14px;
    display: block;
  }

  .we-toolbar-count {
    min-width: 12px;
    font-size: 10px;
    font-weight: 600;
    color: #64748b;
    font-variant-numeric: tabular-nums;
  }

  .we-toolbar-icon-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 28px;
    height: 28px;
    border: 0;
    border-radius: 999px;
    background: #f1f5f9;
    color: #475569;
    cursor: pointer;
    transition: background-color 150ms ease, color 150ms ease;
  }

  .we-toolbar-icon-btn:hover:not(:disabled) {
    background: #e2e8f0;
    color: #334155;
  }

  .we-toolbar-icon-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  .we-toolbar-icon-text {
    font-size: 11px;
    font-weight: 700;
    line-height: 1;
  }

  /* End actions container: pushes apply + close to far right */
  .we-toolbar-end-actions {
    margin-left: auto;
    display: inline-flex;
    align-items: center;
    gap: 10px;
  }

  /* Apply button (green) */
  .we-toolbar-apply-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 6px 16px;
    font-size: 11px;
    font-weight: 700;
    color: #ffffff;
    background: #008F5D;
    border: 0;
    border-radius: 999px;
    cursor: pointer;
    transition: background-color 150ms ease, transform 150ms ease, box-shadow 150ms ease;
    box-shadow: 0 4px 6px -1px rgba(0, 143, 93, 0.25),
      0 2px 4px -2px rgba(0, 143, 93, 0.25);
  }

  .we-toolbar-apply-btn:hover:not(:disabled) {
    background: #007A4F;
  }

  .we-toolbar-apply-btn:active:not(:disabled) {
    transform: scale(0.95);
  }

  .we-toolbar-apply-btn:disabled {
    opacity: 0.55;
    cursor: not-allowed;
    box-shadow: none;
  }

  /* Close button (red hover) */
  .we-toolbar-close-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 6px;
    background: transparent;
    border: 0;
    border-radius: 999px;
    color: #94a3b8;
    cursor: pointer;
    transition: color 150ms ease, background-color 150ms ease;
  }

  .we-toolbar-close-btn:hover:not(:disabled) {
    color: #ef4444;
    background: #fef2f2;
  }

  .we-toolbar-close-btn:disabled {
    opacity: 0.45;
    cursor: not-allowed;
  }

  .we-toolbar-close-btn svg {
    width: 14px;
    height: 14px;
    display: block;
  }

  /* Simple confirm dialog */
  .we-dialog-overlay {
    position: fixed;
    inset: 0;
    background: rgba(15, 23, 42, 0.45);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10002;
  }

  .we-dialog {
    width: 300px;
    background: var(--we-surface-bg);
    border: 1px solid var(--we-border-subtle);
    border-radius: 12px;
    box-shadow: 0 12px 30px rgba(15, 23, 42, 0.2);
    overflow: hidden;
  }

  .we-dialog-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 8px;
    padding: 10px 12px;
    border-bottom: 1px solid var(--we-border-subtle);
    font-size: 12px;
    font-weight: 600;
    color: var(--we-text-primary);
  }

  .we-dialog-close {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 24px;
    height: 24px;
    border: 0;
    background: transparent;
    color: #94a3b8;
    border-radius: 999px;
    cursor: pointer;
  }

  .we-dialog-close:hover {
    color: #ef4444;
    background: #fef2f2;
  }

  .we-dialog-content {
    padding: 12px;
    font-size: 11px;
    line-height: 1.45;
    color: #475569;
    white-space: pre-line;
  }

  .we-dialog-actions {
    display: grid;
    gap: 8px;
    padding: 12px;
  }

  .we-dialog-action {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    padding: 8px 12px;
    border-radius: 8px;
    border: 1px solid #e2e8f0;
    background: #ffffff;
    color: #334155;
    font-size: 12px;
    font-weight: 600;
    cursor: pointer;
    transition: background-color 150ms ease, border-color 150ms ease;
  }

  .we-dialog-action:hover {
    background: #f8fafc;
    border-color: #cbd5f5;
  }

  .we-dialog-action--primary {
    background: #008F5D;
    border-color: #008F5D;
    color: #ffffff;
  }

  .we-dialog-action--primary:hover {
    background: #007A4F;
    border-color: #007A4F;
  }

  /* Screen-reader-only utility */
  .we-sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
  }

  /* Respect reduced motion preference */
  @media (prefers-reduced-motion: reduce) {
    .we-toolbar,
    .we-toolbar-content,
    .we-toolbar .we-drag-handle,
    .we-toolbar .we-drag-handle svg,
    .we-toolbar-structure-btn,
    .we-toolbar-group-icon-btn,
    .we-toolbar-apply-btn,
    .we-toolbar-close-btn {
      transition: none;
    }
  }

  /* ==========================================================================
     Breadcrumbs (Phase 2.2) - Anchored to selection element
     ========================================================================== */
  .we-breadcrumbs {
    position: fixed;
    /* left/top set dynamically via JS based on selection rect */
    left: 16px;
    top: 72px;
    width: auto;
    max-width: min(600px, calc(100vw - 400px));
    display: flex;
    align-items: center;
    gap: 2px;
    padding: 4px 6px;
    background: var(--we-surface-bg);
    border: 1px solid var(--we-border-subtle);
    border-radius: var(--we-radius-panel);
    box-shadow: var(--we-shadow-panel);
    pointer-events: auto;
    user-select: none;
    overflow-x: auto;
    white-space: nowrap;
    scrollbar-width: none;
    z-index: 5;
    color: var(--we-text-primary);
  }

  .we-breadcrumbs[data-hidden="true"] {
    display: none;
  }

  .we-breadcrumbs[data-position="bottom"] {
    top: auto;
    bottom: 72px;
  }

  .we-breadcrumbs::-webkit-scrollbar {
    display: none;
  }

  .we-crumb {
    display: inline-flex;
    align-items: center;
    max-width: 220px;
    padding: 4px 8px;
    border-radius: var(--we-radius-control);
    border: none;
    background: transparent;
    color: var(--we-text-secondary);
    font-size: 12px;
    font-weight: 500;
    line-height: 1.2;
    cursor: pointer;
    overflow: hidden;
    text-overflow: ellipsis;
    transition: all 0.15s ease;
  }

  .we-crumb-send-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 24px;
    height: 24px;
    border: none;
    border-radius: var(--we-radius-control);
    background: rgba(0, 143, 93, 0.1);
    color: #008F5D;
    cursor: pointer;
    transition: background 0.15s ease, transform 0.15s ease;
    flex: 0 0 auto;
  }

  .we-crumb-send-btn svg {
    width: 14px;
    height: 14px;
    display: block;
  }

  .we-crumb-send-btn:hover {
    background: rgba(0, 143, 93, 0.16);
    transform: translateY(-1px);
  }

  .we-crumb-send-btn:focus-visible {
    outline: none;
    box-shadow: 0 0 0 2px var(--we-focus-ring);
  }

  .we-crumb:hover {
    background: rgba(0, 143, 93, 0.08);
    color: var(--we-text-primary);
  }

  .we-crumb:active {
    background: rgba(0, 143, 93, 0.12);
  }

  .we-crumb:focus-visible {
    outline: none;
    box-shadow: 0 0 0 2px var(--we-focus-ring);
  }

  .we-crumb--current {
    background: rgba(0, 143, 93, 0.1);
    color: #008F5D;
    font-weight: 600;
  }

  .we-crumb-sep {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 14px;
    flex: 0 0 auto;
    color: var(--we-text-muted);
    font-size: 12px;
  }

  .we-crumb-sep--shadow {
    color: var(--we-text-secondary);
  }

  .we-body {
    padding: 14px;
    color: #475569;
    font-size: 12px;
  }

  .we-status {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px 12px;
    background: rgba(34, 197, 94, 0.1);
    border-radius: 6px;
    color: #15803d;
    font-size: 12px;
  }

  .we-status-dot {
    width: 8px;
    height: 8px;
    background: #22c55e;
    border-radius: 50%;
    animation: pulse 2s ease-in-out infinite;
  }

  @keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.5; }
  }

  /* ==========================================================================
     Property Panel (Phase 3)
     ========================================================================== */

  .we-prop-panel {
    display: flex;
    flex-direction: column;
    max-height: calc(100vh - 48px);
  }

  /* Dragged property panel: becomes a floating fixed panel positioned via left/top (inline styles) */
  .we-prop-panel[data-dragged="true"][data-minimized="false"] {
    position: fixed;
    left: auto;
    right: auto;
    top: auto;
    bottom: auto;
  }

  /* Minimized property panel - becomes a small icon button fixed at top-right */
  .we-prop-panel[data-minimized="true"] {
    position: fixed;
    top: 16px;
    right: 16px;
    width: auto;
    max-height: none;
    background: transparent;
    border: 0;
    box-shadow: none;
    overflow: visible;
    z-index: 10;
  }

  .we-prop-panel[data-minimized="true"] .we-header {
    padding: 0;
    background: transparent;
    border-bottom: 0;
  }

  /* Symmetric header layout: drag (left) | tabs (center) | minimize (right) */
  .we-prop-panel .we-header {
    padding: 8px 10px;
    gap: 8px;
  }

  .we-prop-header-left,
  .we-prop-header-right {
    display: inline-flex;
    align-items: center;
    gap: 6px;
  }

  .we-prop-header-right {
    margin-left: auto;
  }

  .we-prop-undo-redo {
    display: inline-flex;
    align-items: center;
    gap: 2px;
    padding: 2px;
    background: var(--we-control-bg);
    border-radius: var(--we-radius-control);
  }

  .we-prop-action-btn {
    height: calc(var(--we-icon-btn-size) - 4px);
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 4px;
    padding: 0 8px;
    border: 0;
    border-radius: var(--we-radius-control);
    background: transparent;
    color: var(--we-text-secondary);
    cursor: pointer;
    transition: background 0.15s ease, color 0.15s ease;
  }

  .we-prop-action-btn:hover:not(:disabled) {
    background: var(--we-control-bg-hover);
    color: var(--we-text-primary);
  }

  .we-prop-action-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  .we-prop-action-btn svg {
    width: 14px;
    height: 14px;
    display: block;
  }

  .we-prop-count {
    min-width: 10px;
    font-size: 10px;
    font-weight: 700;
    line-height: 1;
    color: var(--we-text-secondary);
    font-variant-numeric: tabular-nums;
  }

  .we-prop-menu-wrap {
    position: relative;
  }

  .we-prop-menu-btn svg {
    width: 16px;
    height: 16px;
    display: block;
  }

  .we-prop-menu {
    position: absolute;
    top: calc(100% + 6px);
    right: 0;
    min-width: 160px;
    padding: 6px;
    background: rgba(255, 255, 255, 0.98);
    border: 1px solid rgba(148, 163, 184, 0.45);
    border-radius: 10px;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.08), 0 10px 20px -5px rgba(0, 0, 0, 0.12);
    backdrop-filter: blur(8px);
    display: none;
    flex-direction: column;
    gap: 4px;
    z-index: 10001;
  }

  .we-prop-menu-wrap[data-open="true"] .we-prop-menu {
    display: flex;
  }

  /* Allow dropdown to overflow outside the panel */
  .we-prop-panel[data-menu-open="true"] {
    overflow: visible;
    contain: layout style;
  }

  .we-prop-menu-item {
    display: inline-flex;
    align-items: center;
    justify-content: flex-start;
    gap: 6px;
    padding: 6px 10px;
    font-size: 12px;
    font-weight: 500;
    color: #334155;
    background: transparent;
    border: 0;
    border-radius: 8px;
    cursor: pointer;
    transition: background-color 150ms ease, color 150ms ease;
  }

  .we-prop-menu-item:hover:not(:disabled) {
    background: #f8fafc;
  }

  .we-prop-menu-item:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  .we-prop-submenu-wrap {
    position: relative;
  }

  .we-prop-submenu {
    position: absolute;
    top: 0;
    left: calc(100% + 6px);
    min-width: 140px;
    padding: 6px;
    background: rgba(255, 255, 255, 0.98);
    border: 1px solid rgba(148, 163, 184, 0.45);
    border-radius: 10px;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.08), 0 10px 20px -5px rgba(0, 0, 0, 0.12);
    backdrop-filter: blur(8px);
    display: none;
    flex-direction: column;
    gap: 4px;
    z-index: 10002;
  }

  .we-prop-submenu-wrap[data-open="true"] .we-prop-submenu {
    display: flex;
  }

  .we-prop-submenu-trigger {
    justify-content: space-between;
    width: 100%;
  }

  .we-prop-submenu-arrow {
    margin-left: 8px;
    color: #64748b;
    font-size: 11px;
  }

  /* Minimize button chevron rotation */
  .we-minimize-btn svg {
    transition: transform 200ms ease;
  }

  .we-prop-panel[data-minimized="true"] .we-minimize-btn svg {
    transform: rotate(180deg);
  }

  /* Header tooltips: show below to avoid being clipped by panel overflow */
  .we-prop-panel .we-header [data-tooltip]::after {
    bottom: auto;
    top: calc(100% + 6px);
  }

  .we-prop-panel .we-header [data-tooltip]::before {
    bottom: auto;
    top: calc(100% + 2px);
    border-top-color: transparent;
    border-bottom-color: var(--we-text-primary);
  }

  /* Tab container with pill/segmented style (aligned with design spec) */
  .we-prop-tabs {
    display: inline-flex;
    align-items: center;
    gap: 2px;
    padding: 2px;
    background: var(--we-control-bg);
    border-radius: var(--we-radius-tab);
  }

  .we-tab {
    border: 0;
    background: transparent;
    color: var(--we-text-secondary);
    padding: 4px 10px;
    border-radius: var(--we-radius-tab);
    cursor: pointer;
    font-size: 12px;
    font-weight: 500;
    transition: all 0.1s ease;
  }

  .we-tab:hover {
    color: var(--we-text-primary);
  }

  .we-tab:focus-visible {
    outline: none;
    box-shadow: inset 0 0 0 2px var(--we-focus-ring);
  }

  /* Active tab: white background with subtle shadow */
  .we-tab[aria-selected="true"] {
    background: var(--we-surface-bg);
    color: var(--we-text-primary);
    box-shadow: var(--we-shadow-tab);
  }

  .we-prop-body {
    flex: 1;
    overflow-y: auto;
    overflow-x: hidden;
    padding: 12px;
    padding-bottom: 80px; /* Extra space for scrolling (design spec: pb-20) */
    display: flex;
    flex-direction: column;
    gap: 12px;
    scrollbar-width: none; /* Firefox */
    -ms-overflow-style: none; /* IE 10+ */
  }

  /* Hide scrollbar for webkit browsers */
  .we-prop-body::-webkit-scrollbar {
    width: 0;
    height: 0;
  }

  /* Force hidden state for property panel sections during minimization */
  .we-prop-body[hidden],
  .we-prop-tabs[hidden] {
    display: none;
  }

  .we-prop-tab-content {
    display: flex;
    flex-direction: column;
    gap: 10px;
  }

  .we-prop-tab-content[hidden] {
    display: none;
  }

  .we-prop-empty {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 24px 12px;
    color: #64748b;
    font-size: 12px;
    text-align: center;
  }

  .we-prop-empty[hidden] {
    display: none;
  }

  .we-prop-panel[data-empty="true"] .we-prop-tab-content {
    display: none;
  }

  /* ==========================================================================
     Components Tree (Phase 3.2)
     ========================================================================== */

  .we-tree {
    font-size: 12px;
    line-height: 1.4;
  }

  .we-tree-empty {
    padding: 24px 12px;
    color: #64748b;
    text-align: center;
  }

  .we-tree-empty[hidden] {
    display: none;
  }

  .we-tree-list {
    display: flex;
    flex-direction: column;
  }

  .we-tree-list[hidden] {
    display: none;
  }

  .we-tree-item {
    display: flex;
    align-items: center;
    gap: 4px;
    padding: 6px 8px;
    cursor: pointer;
    border-radius: 4px;
    transition: background 0.12s;
    color: #475569;
  }

  .we-tree-item:hover {
    background: rgba(0, 143, 93, 0.08);
  }

  .we-tree-item--selected {
    background: rgba(0, 143, 93, 0.12);
    color: #007A4F;
    font-weight: 500;
  }

  .we-tree-item--selected:hover {
    background: rgba(0, 143, 93, 0.16);
  }

  .we-tree-item--ancestor {
    color: #64748b;
  }

  .we-tree-item--child {
    color: #64748b;
    font-size: 11px;
  }

  .we-tree-indent {
    color: #94a3b8;
    font-family: monospace;
    user-select: none;
  }

  .we-tree-icon {
    flex-shrink: 0;
    color: #94a3b8;
    font-size: 10px;
  }

  .we-tree-item--selected .we-tree-icon {
    color: #008F5D;
  }

  .we-tree-label {
    flex: 1;
    min-width: 0;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    font-family: ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, monospace;
  }

  /* ==========================================================================
     Control Groups (Section style - aligned with design spec)
     Uses separator lines instead of card borders
     ========================================================================== */

  .we-group {
    /* No card-style border, use separator lines between sections */
    border: 0;
    border-radius: 0;
    overflow: visible;
    background: transparent;
  }

  /* Section separator - top border for non-first groups */
  .we-group + .we-group {
    border-top: 1px solid var(--we-border-section);
    padding-top: 12px;
    margin-top: 4px;
  }

  .we-group-header {
    width: 100%;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 6px;
    padding: 0 0 8px 0;
    background: transparent;
  }

  .we-group-toggle {
    flex: 1;
    min-width: 0;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 6px;
    padding: 0;
    background: transparent;
    border: 0;
    cursor: pointer;
    color: #333333;
    font-size: 11px;
    font-weight: 600;
    text-align: left;
    transition: color 0.1s ease;
  }

  .we-group-toggle:hover {
    color: var(--we-text-primary);
  }

  .we-group-toggle:focus-visible {
    outline: none;
    box-shadow: inset 0 0 0 2px var(--we-focus-ring);
    border-radius: 2px;
  }

  .we-group-toggle--static {
    cursor: default;
    pointer-events: none;
  }

  .we-group-header-actions {
    display: flex;
    align-items: center;
    gap: 2px;
    flex: 0 0 auto;
  }

  .we-group-body {
    padding: 0;
    background: transparent;
    border-top: 0;
  }

  .we-group[data-collapsed="true"] .we-group-body {
    display: none;
  }

  /* Reduce gap when collapsed: remove header bottom padding and negate next group's top margin */
  .we-group[data-collapsed="true"] .we-group-header {
    padding-bottom: 0;
  }

  .we-group[data-collapsed="true"] {
    margin-bottom: -4px;
  }

  .we-chevron {
    width: 14px;
    height: 14px;
    flex: 0 0 auto;
    color: var(--we-text-secondary);
    transition: transform 0.1s ease;
  }

  .we-group[data-collapsed="true"] .we-chevron {
    transform: rotate(-90deg);
  }

  /* ==========================================================================
     Form Controls (for Design controls)
     ========================================================================== */

  /* Field row: vertical stack (label on top, control below) */
  .we-field {
    display: flex;
    flex-direction: column;
    align-items: stretch;
    gap: 4px;
  }

  /* Horizontal field variant (label left, control right) */
  .we-field--horizontal {
    flex-direction: row;
    align-items: center;
    gap: 8px;
  }

  .we-field-label {
    flex: 0 0 auto;
    width: auto;
    font-size: 10px;
    font-weight: 500;
    color: var(--we-text-secondary);
  }

  /* Fixed width label for horizontal layout */
  .we-field--horizontal .we-field-label {
    width: 48px;
  }

  .we-field-label--short {
    width: 20px;
  }

  /* Hint text (small label above icon groups for H/V distinction) */
  .we-field-hint {
    font-size: 9px;
    color: var(--we-text-muted);
    text-align: center;
    line-height: 1;
  }

  /* Content container for complex controls (icon groups, grids, etc.) */
  .we-field-content {
    width: 100%;
    min-width: 0;
  }

  /* Input styling aligned with design spec:
   * - Gray background by default
   * - Inset border on hover
   * - White background + blue inset border on focus
   */
  .we-input {
    flex: 1 1 auto;
    flex-shrink: 0; /* Prevent height shrinking in column flex containers */
    min-width: 0;
    height: 28px; /* Design spec: h-[28px] */
    padding: 0 8px;
    font-size: 11px;
    line-height: 26px; /* Ensure vertical centering: 28px - 2px border */
    font-family: inherit;
    color: var(--we-text-primary);
    background: var(--we-control-bg);
    border: 1px solid transparent;
    border-radius: var(--we-radius-control);
    outline: none;
    transition: background 0.1s ease, border-color 0.1s ease, box-shadow 0.1s ease;
  }

  .we-input::placeholder {
    color: var(--we-text-muted);
  }

  .we-input:hover:not(:focus) {
    border-color: var(--we-control-border-hover);
  }

  .we-input:focus {
    background: var(--we-control-bg-focus);
    border-color: var(--we-control-border-focus);
  }

  /* ==========================================================================
   * Input Container (Phase 2.1)
   *
   * A wrapper for inputs with prefix/suffix support.
   * Container handles hover/focus-within styling instead of input itself.
   * ========================================================================== */
  .we-input-container {
    min-width: 0;
    display: flex;
    align-items: center;
    height: 28px; /* Design spec: h-[28px] - must be explicit, not flex-controlled */
    flex-shrink: 0; /* Prevent height shrinking in column flex containers */
    padding: 0 8px;
    gap: 4px;
    background: var(--we-control-bg);
    border: 1px solid transparent;
    border-radius: var(--we-radius-control);
    transition: background 0.1s ease, border-color 0.1s ease, box-shadow 0.1s ease;
  }

  /* In row flex containers, allow input-container to grow horizontally */
  .we-field-row > .we-input-container,
  .we-radius-control .we-field-row > .we-input-container {
    flex: 1 1 0;
  }

  .we-input-container:hover:not(:focus-within) {
    border-color: var(--we-control-border-hover);
  }

  .we-input-container:focus-within {
    background: var(--we-control-bg-focus);
    border-color: var(--we-control-border-focus);
  }

  .we-input-container__input {
    flex: 1;
    min-width: 0;
    height: 100%;
    padding: 0;
    font-size: 11px;
    line-height: 26px; /* Ensure vertical centering within 28px container */
    font-family: inherit;
    color: var(--we-text-primary);
    background: transparent;
    border: none;
    outline: none;
  }

  .we-input-container__input::placeholder {
    color: var(--we-text-muted);
  }

  /* Number inputs: right-aligned text in containers */
  .we-input-container__input[inputmode="decimal"],
  .we-input-container__input[inputmode="numeric"] {
    text-align: right;
  }

  /* Prefix and suffix elements */
  .we-input-container__prefix,
  .we-input-container__suffix {
    flex: 0 0 auto;
    font-size: 10px;
    color: var(--we-text-muted);
    user-select: none;
    pointer-events: none;
  }

  .we-input-container__prefix {
    margin-right: 2px;
  }

  .we-input-container__suffix {
    margin-left: 2px;
  }

  /* Icon in prefix/suffix */
  .we-input-container__prefix svg,
  .we-input-container__suffix svg {
    width: 12px;
    height: 12px;
    display: block;
  }

  /* ==========================================================================
   * Slider Input (Opacity and other numeric ranges)
   * ========================================================================== */
  .we-slider-input {
    display: flex;
    align-items: center;
    gap: 8px;
    width: 100%;
    min-width: 0;
  }

  .we-slider-input__slider {
    flex: 1 1 auto;
    min-width: 0;
    height: 28px;
    margin: 0;
    padding: 0;
    background: transparent;
    -webkit-appearance: none;
    appearance: none;
    cursor: pointer;
  }

  .we-slider-input__slider:disabled {
    opacity: 0.55;
    cursor: not-allowed;
  }

  .we-slider-input__slider::-webkit-slider-runnable-track {
    height: 4px;
    background: linear-gradient(
      to right,
      var(--we-control-border-focus) 0%,
      var(--we-control-border-focus) var(--progress, 0%),
      var(--we-control-bg) var(--progress, 0%),
      var(--we-control-bg) 100%
    );
    border: 1px solid var(--we-control-border-hover);
    border-radius: 999px;
  }

  .we-slider-input__slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 12px;
    height: 12px;
    margin-top: -5px; /* (12px thumb - 4px track) / 2 + border */
    border-radius: 999px;
    background: var(--we-control-bg-focus);
    border: 1px solid var(--we-border-strong);
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.15);
  }

  .we-slider-input__slider:focus-visible {
    outline: none;
  }

  .we-slider-input__slider:focus-visible::-webkit-slider-thumb {
    border-color: var(--we-control-border-focus);
    box-shadow: 0 0 0 2px rgba(0, 143, 93, 0.25);
  }

  .we-slider-input__slider::-moz-range-track {
    height: 4px;
    background: linear-gradient(
      to right,
      var(--we-control-border-focus) 0%,
      var(--we-control-border-focus) var(--progress, 0%),
      var(--we-control-bg) var(--progress, 0%),
      var(--we-control-bg) 100%
    );
    border: 1px solid var(--we-control-border-hover);
    border-radius: 999px;
  }

  .we-slider-input__slider::-moz-range-thumb {
    width: 12px;
    height: 12px;
    border-radius: 999px;
    background: var(--we-control-bg-focus);
    border: 1px solid var(--we-border-strong);
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.15);
  }

  .we-slider-input__slider:focus-visible::-moz-range-thumb {
    border-color: var(--we-control-border-focus);
    box-shadow: 0 0 0 2px rgba(0, 143, 93, 0.25);
  }

  .we-slider-input__number {
    flex: 0 0 auto;
  }

  /* ==========================================================================
   * Icon Button Group (Phase 4.1)
   *
   * A single-select grid of icon buttons (e.g. flex-direction control).
   * ========================================================================== */
  .we-icon-button-group {
    display: grid;
    gap: 4px;
  }

  .we-icon-button-group__btn {
    display: flex;
    align-items: center;
    justify-content: center;
    height: 28px; /* Design spec: h-[28px] */
    padding: 4px;
    background: var(--we-control-bg);
    border: 1px solid transparent;
    border-radius: var(--we-radius-control);
    cursor: pointer;
    transition: background-color 0.1s ease, border-color 0.1s ease;
  }

  .we-icon-button-group__btn:hover:not(:disabled) {
    background: var(--we-control-bg-hover);
  }

  .we-icon-button-group__btn:focus-visible {
    outline: none;
    border-color: var(--we-control-border-focus);
    box-shadow: inset 0 0 0 2px var(--we-control-border-focus); /* Design spec: 2px inset */
  }

  .we-icon-button-group__btn[data-selected="true"] {
    background: var(--we-control-bg-focus);
    border-color: var(--we-control-border-focus);
  }

  .we-icon-button-group__btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  .we-icon-button-group__btn svg {
    width: 14px;
    height: 14px;
    color: var(--we-text-secondary);
  }

  .we-icon-button-group__btn[data-selected="true"] svg {
    color: var(--we-control-border-focus);
  }

  /* ==========================================================================
   * Toggle Button
   *
   * A pressable toggle button (e.g. flip X/Y controls).
   * ========================================================================== */
  .we-toggle-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 28px;
    height: 28px;
    padding: 4px;
    background: var(--we-control-bg);
    border: 1px solid transparent;
    border-radius: var(--we-radius-control);
    cursor: pointer;
    transition: background-color 0.1s ease, border-color 0.1s ease;
  }

  .we-toggle-btn:hover:not(:disabled) {
    background: var(--we-control-bg-hover);
  }

  .we-toggle-btn[aria-pressed="true"] {
    background: var(--we-control-bg-focus);
    border-color: var(--we-control-border-focus);
  }

  .we-toggle-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  .we-toggle-btn svg {
    width: 14px;
    height: 14px;
    color: var(--we-text-secondary);
  }

  .we-toggle-btn[aria-pressed="true"] svg {
    color: var(--we-control-border-focus);
  }

  /* ==========================================================================
   * Alignment Grid (Phase 4.2)
   *
   * 3Ã—3 single-select grid for justify-content + align-items.
   * ========================================================================== */
  .we-alignment-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 12px;
    padding: 8px;
    min-height: 90px;
    background: #f9f9f9;
    border: 1px solid #f0f0f0;
    border-radius: var(--we-radius-control);
    place-items: center;
  }

  .we-alignment-grid__cell {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 20px;
    height: 20px;
    padding: 0;
    background: transparent;
    border: none;
    border-radius: 2px;
    cursor: pointer;
    transition: background-color 0.1s ease;
  }

  .we-alignment-grid__cell:hover:not(:disabled) {
    background: rgba(0, 0, 0, 0.05);
  }

  .we-alignment-grid__cell:focus-visible {
    outline: 2px solid var(--we-control-border-focus);
    outline-offset: 1px;
  }

  .we-alignment-grid__cell:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  /* Inactive dot */
  .we-alignment-grid__dot {
    width: 2px;
    height: 2px;
    background: var(--we-text-muted);
    border-radius: 50%;
  }

  /* Active marker (3 bars showing alignment) */
  .we-alignment-grid__marker {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: space-between;
    width: 12px;
    height: 12px;
  }

  .we-alignment-grid__bar {
    height: 2px;
    background: var(--we-control-border-focus);
    border-radius: 1px;
  }

  .we-alignment-grid__bar--1 { width: 8px; }
  .we-alignment-grid__bar--2 { width: 12px; }
  .we-alignment-grid__bar--3 { width: 4px; }

  /* ==========================================================================
   * Grid + Gap Two Column Layout (Layout Control)
   * ========================================================================== */

  .we-grid-gap-row {
    display: flex;
    gap: 8px;
  }

  .we-grid-gap-col {
    flex: 1;
    min-width: 0;
  }

  /* Keep Grid label space for alignment; hide text only when both columns are visible (grid mode) */
  .we-grid-gap-col--grid:not([hidden]):has(+ .we-grid-gap-col--gap:not([hidden])) .we-field-label {
    visibility: hidden;
  }

  .we-grid-gap-col .we-field-content {
    width: 100%;
    overflow: visible;
  }

  /* Gap inputs vertical layout */
  .we-grid-gap-inputs {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }

  /* ==========================================================================
   * Grid Dimensions Picker (Layout Control)
   * ========================================================================== */

  .we-grid-dimensions-preview {
    width: 100%;
    height: 64px; /* Match two rows of gap inputs: 28px + 8px gap + 28px */
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 4px;
    font-size: 12px;
    font-family: inherit;
    color: var(--we-text-primary);
    background: var(--we-control-bg);
    border: 1px solid transparent;
    border-radius: var(--we-radius-control);
    cursor: pointer;
    transition: background-color 0.1s ease, border-color 0.1s ease;
  }

  .we-grid-dimensions-preview:hover:not(:disabled) {
    background: var(--we-control-bg-hover);
  }

  .we-grid-dimensions-preview:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  .we-grid-dimensions-popover {
    position: absolute;
    top: calc(100% + 4px);
    left: 0;
    min-width: 220px;
    padding: 10px;
    background: var(--we-surface-bg);
    border: 1px solid var(--we-border-subtle);
    border-radius: 8px;
    box-shadow: 0 8px 24px rgba(15, 23, 42, 0.12);
    z-index: 60;
  }

  .we-grid-dimensions-popover[hidden] {
    display: none;
  }

  .we-grid-dimensions-inputs {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    margin-bottom: 10px;
  }

  .we-grid-dimensions-times {
    font-size: 12px;
    color: var(--we-text-muted);
    user-select: none;
  }

  .we-grid-dimensions-matrix {
    display: grid;
    grid-template-columns: repeat(12, 1fr);
    gap: 3px;
    padding: 6px;
    background: var(--we-surface-secondary);
    border: 1px solid var(--we-border-subtle);
    border-radius: var(--we-radius-control);
  }

  .we-grid-dimensions-cell {
    width: 100%;
    aspect-ratio: 1 / 1;
    background: transparent;
    border: 1px solid rgba(0, 0, 0, 0.10);
    border-radius: 2px;
    padding: 0;
    cursor: pointer;
    transition: background-color 0.08s ease, border-color 0.08s ease;
  }

  .we-grid-dimensions-cell[data-active="true"] {
    border-color: rgba(0, 143, 93, 0.65);
    background: rgba(0, 143, 93, 0.10);
  }

  .we-grid-dimensions-cell[data-selected="true"] {
    border-color: rgba(0, 143, 93, 0.9);
    background: rgba(0, 143, 93, 0.16);
  }

  .we-grid-dimensions-tooltip {
    margin-top: 8px;
    text-align: center;
    font-size: 11px;
    color: var(--we-text-secondary);
  }

  .we-grid-dimensions-tooltip[hidden] {
    display: none;
  }

  .we-input--short {
    width: 56px;
    flex: 0 0 auto;
  }

  /* Number inputs: right-aligned text */
  .we-input[type="text"][inputmode="decimal"],
  .we-input[type="number"] {
    text-align: right;
  }

  .we-select {
    flex: 1 1 auto;
    flex-shrink: 0; /* Prevent height shrinking in column flex containers */
    min-width: 0;
    height: 28px; /* Design spec: h-[28px] */
    padding: 0 24px 0 8px;
    font-size: 11px;
    line-height: 26px; /* Ensure vertical centering: 28px - 2px border */
    font-family: inherit;
    color: var(--we-text-primary);
    background: var(--we-control-bg) url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='10' height='10' viewBox='0 0 10 10'%3E%3Cpath fill='%23737373' d='M2.5 3.5l2.5 3 2.5-3'/%3E%3C/svg%3E") no-repeat right 8px center;
    border: 1px solid transparent;
    border-radius: var(--we-radius-control);
    outline: none;
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    cursor: pointer;
    transition: background-color 0.1s ease, border-color 0.1s ease, box-shadow 0.1s ease;
  }

  .we-select:hover:not(:focus) {
    border-color: var(--we-control-border-hover);
  }

  .we-select:focus {
    background-color: var(--we-control-bg-focus);
    border-color: var(--we-control-border-focus);
  }

  /* Field row for multiple inputs side by side */
  .we-field-row {
    display: flex;
    align-items: stretch;
    gap: 8px;
  }

  /* Size field with mode select + input stacked vertically */
  .we-size-field {
    display: flex;
    flex-direction: column;
    gap: 4px;
    flex: 1;
    min-width: 0;
  }

  .we-size-mode-select {
    width: 100%;
  }

  .we-field-group {
    display: flex;
    flex-direction: column;
    gap: 6px;
  }

  /* ==========================================================================
     Effects (Box Shadow List)
     ========================================================================== */

  .we-effects-toolbar {
    display: flex;
    justify-content: flex-end;
    margin-bottom: 6px;
  }

  .we-effects-list {
    display: flex;
    flex-direction: column;
    gap: 6px;
  }

  .we-effects-item-wrap {
    position: relative;
  }

  .we-effects-item {
    height: 28px;
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 0 6px;
    background: var(--we-control-bg);
    border: 1px solid transparent;
    border-radius: var(--we-radius-control);
    transition: background-color 0.1s ease, border-color 0.1s ease, opacity 0.1s ease;
  }

  .we-effects-item:hover {
    background: var(--we-control-bg-hover);
  }

  .we-effects-item[data-open="true"] {
    background: var(--we-control-bg-focus);
    border-color: var(--we-control-border-focus);
  }

  .we-effects-item[data-enabled="false"] {
    opacity: 0.55;
  }

  .we-effects-name {
    flex: 1;
    min-width: 0;
    padding: 0;
    border: 0;
    background: transparent;
    text-align: left;
    font-size: 11px;
    color: var(--we-text-primary);
    cursor: pointer;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }

  .we-effects-name:focus-visible {
    outline: none;
    box-shadow: inset 0 0 0 2px var(--we-focus-ring);
    border-radius: 4px;
  }

  .we-effects-icon-btn {
    width: 24px;
    height: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: transparent;
    border: 0;
    border-radius: var(--we-radius-control);
    color: var(--we-text-secondary);
    cursor: pointer;
    padding: 0;
    transition: background-color 0.1s ease, color 0.1s ease;
  }

  .we-effects-icon-btn:hover:not(:disabled) {
    background: rgba(0, 0, 0, 0.06);
    color: var(--we-text-primary);
  }

  .we-effects-icon-btn:focus-visible {
    outline: none;
    box-shadow: 0 0 0 2px var(--we-focus-ring);
  }

  .we-effects-icon-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  .we-effects-icon-btn svg {
    width: 14px;
    height: 14px;
  }

  .we-effects-popover {
    position: absolute;
    top: calc(100% + 6px);
    left: 0;
    width: 220px;
    max-width: 220px;
    padding: 10px;
    background: var(--we-surface-bg);
    border: 1px solid var(--we-border-subtle);
    border-radius: 8px;
    box-shadow: 0 8px 24px rgba(15, 23, 42, 0.12);
    z-index: 60;
  }

  .we-effects-popover[hidden] {
    display: none;
  }

  .we-effects-popover-content {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }

  /* ==========================================================================
     Gradient Preview Bar (Phase 4B)
     ========================================================================== */

  .we-gradient-bar-row {
    width: 100%;
    padding: 4px 0 8px;
  }

  .we-gradient-bar {
    position: relative;
    width: 100%;
    height: 60px;
    border-radius: 14px;
    border: 1px solid var(--we-border-subtle);
    background-color: var(--we-control-bg);
    background-image: none; /* set inline by GradientControl */
    box-shadow:
      inset 0 1px 2px rgba(0, 0, 0, 0.08),
      inset 0 0 0 1px rgba(255, 255, 255, 0.5);
    overflow: hidden;
  }

  /* Gradient thumbs container */
  .we-gradient-bar-thumbs {
    position: absolute;
    inset: 0;
    pointer-events: none; /* thumbs enable pointer events individually */
  }

  /* Gradient thumb (color stop marker) */
  .we-gradient-thumb {
    pointer-events: auto;
    position: absolute;
    top: 50%;
    left: 0;
    transform: translate(-50%, -50%);
    z-index: 1;
    width: 32px;
    height: 32px;
    border-radius: 6px;
    border: 2px solid rgba(255, 255, 255, 0.98);
    background-color: transparent; /* set inline */
    cursor: pointer;
    padding: 0;
    box-sizing: border-box;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
    touch-action: none;
    user-select: none;
    transition: box-shadow 0.15s ease, z-index 0s;
  }

  .we-gradient-thumb:hover {
    box-shadow:
      0 0 0 2px rgba(0, 143, 93, 0.25),
      0 1px 3px rgba(0, 0, 0, 0.2);
  }

  .we-gradient-thumb:focus-visible {
    outline: none;
    box-shadow:
      0 0 0 3px rgba(0, 143, 93, 0.4),
      0 1px 3px rgba(0, 0, 0, 0.2);
  }

  /* Selected thumb state - raise above unselected thumbs */
  .we-gradient-thumb--active {
    z-index: 2;
    box-shadow:
      0 0 0 3px rgba(0, 143, 93, 0.4),
      0 1px 3px rgba(0, 0, 0, 0.2);
  }

  /* Dragging thumb - always on top when overlapping at same position */
  .we-gradient-thumb--dragging {
    z-index: 3;
  }

  /* Dragging state - cursor feedback on entire bar */
  .we-gradient-bar--dragging {
    cursor: grabbing;
  }

  .we-gradient-bar--dragging .we-gradient-thumb {
    cursor: grabbing;
  }

  /* ==========================================================================
     Gradient Stops List (Phase 4D)
     ========================================================================== */

  .we-gradient-stops-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 6px 0 4px;
  }

  .we-gradient-stops-title {
    font-size: 10px;
    font-weight: 600;
    color: var(--we-text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  .we-gradient-stops-add,
  .we-gradient-stop-remove {
    font-size: 14px;
    font-weight: 500;
    line-height: 1;
  }

  .we-gradient-stops-add:disabled,
  .we-gradient-stop-remove:disabled {
    opacity: 0.4;
    cursor: not-allowed;
  }

  .we-gradient-stops-list {
    border: 1px solid var(--we-border-subtle);
    border-radius: 12px;
    background: rgba(255, 255, 255, 0.6);
    padding: 6px;
    display: flex;
    flex-direction: column;
    gap: 4px;
    max-height: 180px;
    overflow-y: auto;
    overscroll-behavior: contain;
  }

  .we-gradient-stop-row {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 5px 6px;
    border-radius: 8px;
    border: 1px solid transparent;
    background: rgba(255, 255, 255, 0.85);
    cursor: pointer;
    user-select: none;
    transition: border-color 0.15s ease, background 0.15s ease;
  }

  .we-gradient-stop-row:hover {
    background: rgba(0, 143, 93, 0.06);
  }

  .we-gradient-stop-row:focus-visible {
    outline: none;
    box-shadow: 0 0 0 2px rgba(0, 143, 93, 0.35);
  }

  .we-gradient-stop-row--active {
    border-color: rgba(0, 143, 93, 0.6);
    box-shadow: 0 0 0 1px rgba(0, 143, 93, 0.2);
  }

  .we-gradient-stop-pos {
    flex: 0 0 auto;
    min-width: 44px;
    display: flex;
    align-items: center;
    justify-content: flex-end;
    text-align: right;
    font-variant-numeric: tabular-nums;
    font-family: ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, monospace;
    font-size: 11px;
    color: var(--we-text-secondary);
    padding: 3px 6px;
    border-radius: 6px;
    background: var(--we-control-bg);
    cursor: pointer;
    transition: box-shadow 0.15s ease;
  }

  .we-gradient-stop-pos:hover {
    background: var(--we-control-bg-hover, var(--we-control-bg));
  }

  .we-gradient-stop-pos:focus-within {
    box-shadow: 0 0 0 2px rgba(0, 143, 93, 0.25);
  }

  /* Static position display (visible when row is not selected) */
  .we-gradient-stop-pos-static {
    display: block;
    width: 100%;
    text-align: right;
  }

  /* Position editor slot (visible when row is selected) */
  .we-gradient-stop-pos-editor {
    display: none;
    width: 100%;
  }

  /* Show editor and hide static in active row */
  .we-gradient-stop-row--active .we-gradient-stop-pos-static {
    display: none;
  }

  .we-gradient-stop-row--active .we-gradient-stop-pos-editor {
    display: block;
  }

  /* Position input styling */
  .we-gradient-stop-pos-input {
    width: 100%;
    border: 0;
    padding: 0;
    margin: 0;
    background: transparent;
    color: inherit;
    font: inherit;
    text-align: right;
    outline: none;
    cursor: text;
  }

  .we-gradient-stop-pos-input::placeholder {
    color: var(--we-text-muted);
  }

  .we-gradient-stop-color {
    flex: 1;
    min-width: 0;
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 3px 8px;
    border-radius: 6px;
    background: var(--we-control-bg);
  }

  /* Static color display (visible when row is not selected) */
  .we-gradient-stop-color-static {
    flex: 1;
    min-width: 0;
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 0;
    border: 0;
    background: transparent;
    color: inherit;
    cursor: pointer;
    text-align: left;
    font-family: inherit;
  }

  .we-gradient-stop-color-static:focus-visible {
    outline: none;
    box-shadow: 0 0 0 2px rgba(0, 143, 93, 0.25);
    border-radius: 4px;
  }

  /* Color editor slot (visible when row is selected) */
  .we-gradient-stop-color-editor {
    flex: 1;
    min-width: 0;
    display: none;
  }

  /* When row is active: hide static, show editor */
  .we-gradient-stop-row--active .we-gradient-stop-color {
    padding: 0;
    background: transparent;
  }

  .we-gradient-stop-row--active .we-gradient-stop-color-static {
    display: none;
  }

  .we-gradient-stop-row--active .we-gradient-stop-color-editor {
    display: block;
  }

  .we-gradient-stop-swatch {
    flex: 0 0 auto;
    width: 14px;
    height: 14px;
    border-radius: 3px;
    border: 1px solid rgba(0, 0, 0, 0.12);
    box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.2);
    background: transparent;
  }

  .we-gradient-stop-color-text {
    flex: 1;
    min-width: 0;
    font-family: ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, monospace;
    font-size: 11px;
    color: var(--we-text-primary);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  /* Spacing section (Padding / Margin) */
  .we-spacing-section {
    display: flex;
    flex-direction: column;
    gap: 6px;
  }

  .we-spacing-section + .we-spacing-section {
    margin-top: 10px;
  }

  .we-spacing-header {
    font-size: 10px;
    font-weight: 600;
    color: #6b7280;
  }

  /* Spacing 2x2 grid layout */
  .we-spacing-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 8px;
  }

  /* ==========================================================================
   * Border Radius Control
   * ========================================================================== */

  .we-radius-control {
    flex: 1;
    min-width: 0;
    display: flex;
    flex-direction: column;
    gap: 8px;
  }

  .we-radius-corners-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 8px;
  }

  /* ==========================================================================
     CSS Panel (Phase 4.6)
     ========================================================================== */

  .we-css-panel {
    font-size: 11px;
    line-height: 1.5;
  }

  /* Code-semantic elements use monospace font */
  .we-css-rule-selector,
  .we-css-decl-name,
  .we-css-decl-value,
  .we-css-decl-colon,
  .we-css-decl-semi,
  .we-css-decl-important,
  .we-css-rule-source,
  .we-css-rule-spec {
    font-family: ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, monospace;
  }

  /* ==========================================================================
     Class Editor (Phase 4.7)
     ========================================================================== */

  .we-css-class-editor-mount {
    margin-bottom: 12px;
  }

  .we-class-editor {
    position: relative;
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    gap: 6px;
    padding: 8px 10px;
    border: 1px solid var(--we-border-subtle);
    border-radius: var(--we-radius-panel);
    background: var(--we-surface-bg);
    font-family: system-ui, -apple-system, sans-serif;
  }

  .we-class-chips {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
    flex: 0 1 auto;
  }

  .we-class-chip {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    padding: 3px 8px;
    border-radius: 999px;
    background: var(--we-accent-brand-bg);
    border: 1px solid var(--we-accent-brand-border);
    color: #007A4F;
    font-size: 11px;
    line-height: 1.2;
  }

  .we-class-chip-text {
    word-break: break-all;
  }

  .we-class-chip-remove {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 16px;
    height: 16px;
    padding: 0;
    border: none;
    border-radius: 999px;
    background: transparent;
    color: rgba(0, 122, 79, 0.8);
    cursor: pointer;
    font-size: 14px;
    line-height: 1;
    transition: background-color 0.15s ease;
  }

  .we-class-chip-remove:hover {
    background: rgba(0, 143, 93, 0.15);
    color: #007A4F;
  }

  .we-class-input {
    flex: 1 1 100px;
    min-width: 80px;
    padding: 5px 8px;
    font-size: 12px;
    border: 1px solid var(--we-border-subtle);
    border-radius: var(--we-radius-control);
    background: var(--we-control-bg-focus);
    outline: none;
    transition: border-color 0.15s ease, box-shadow 0.15s ease;
  }

  .we-class-input:focus {
    border-color: var(--we-control-border-focus);
    box-shadow: 0 0 0 2px var(--we-focus-ring);
  }

  .we-class-input:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  .we-class-input::placeholder {
    color: #94a3b8;
  }

  .we-class-suggestions {
    position: absolute;
    top: calc(100% + 4px);
    left: 0;
    right: 0;
    background: var(--we-surface-bg);
    border: 1px solid var(--we-border-subtle);
    border-radius: var(--we-radius-panel);
    box-shadow: 0 8px 24px rgba(15, 23, 42, 0.12);
    overflow: hidden;
    z-index: 20;
  }

  .we-class-suggestions[hidden] {
    display: none;
  }

  .we-class-suggestion {
    display: block;
    width: 100%;
    text-align: left;
    padding: 8px 10px;
    border: none;
    background: transparent;
    cursor: pointer;
    font-family: ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, monospace;
    font-size: 11px;
    color: #0f172a;
    transition: background-color 0.1s ease;
  }

  .we-class-suggestion:hover {
    background: rgba(0, 143, 93, 0.08);
  }

  .we-class-suggestion:focus {
    outline: none;
    background: rgba(0, 143, 93, 0.12);
  }

  .we-css-info {
    padding: 8px 10px;
    background: var(--we-accent-info-bg);
    border-radius: var(--we-radius-control);
    color: var(--we-text-secondary);
    font-size: 10px;
    margin-bottom: 8px;
  }

  .we-css-info[hidden] {
    display: none;
  }

  .we-css-warnings {
    margin-bottom: 8px;
  }

  .we-css-warnings[hidden] {
    display: none;
  }

  .we-css-warning {
    padding: 6px 10px;
    background: var(--we-accent-warning-bg);
    border: 1px solid var(--we-accent-warning-border);
    border-radius: var(--we-radius-control);
    color: #92400e;
    font-size: 10px;
    margin-bottom: 4px;
  }

  .we-css-warning-more {
    padding: 4px 10px;
    color: #92400e;
    font-size: 10px;
    font-style: italic;
  }

  .we-css-empty {
    padding: 24px 12px;
    color: #64748b;
    text-align: center;
    font-family: system-ui, sans-serif;
    font-size: 12px;
  }

  .we-css-empty[hidden] {
    display: none;
  }

  .we-css-sections {
    display: flex;
    flex-direction: column;
    gap: 0;
  }

  .we-css-section {
    border: 0;
    border-radius: 0;
    overflow: visible;
    background: transparent;
  }

  .we-css-section + .we-css-section {
    border-top: 1px solid var(--we-border-section);
    padding-top: 12px;
    margin-top: 4px;
  }

  .we-css-section[data-kind="inherited"] {
    background: transparent;
  }

  .we-css-section-header {
    padding: 0 0 8px 0;
    background: transparent;
    border-bottom: 0;
    font-weight: 600;
    color: var(--we-text-primary);
    font-size: 11px;
    text-transform: none;
    letter-spacing: normal;
  }

  .we-css-section-rules {
    padding: 0;
  }

  /* Flat list style (computed-like view) */
  .we-css-rule {
    margin: 0;
    padding: 0;
    background: transparent;
    border: 0;
    border-radius: 0;
  }

  .we-css-rule + .we-css-rule {
    border-top: 1px solid var(--we-border-section);
    padding-top: 10px;
    margin-top: 10px;
  }

  .we-css-rule[data-origin="inline"] {
    background: transparent;
  }

  .we-css-rule-header {
    display: flex;
    align-items: baseline;
    gap: 8px;
    flex-wrap: nowrap;
    margin-bottom: 8px;
    padding-bottom: 0;
    border-bottom: 0;
  }

  .we-css-rule-selector {
    flex: 1 1 auto;
    min-width: 0;
    font-weight: 500;
    color: var(--we-text-secondary);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  .we-css-rule[data-origin="inline"] .we-css-rule-selector {
    color: #92400e;
    font-style: italic;
  }

  .we-css-rule-source {
    flex-shrink: 0;
    color: var(--we-text-muted);
    font-size: 10px;
    margin-left: auto;
    max-width: 45%;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  .we-css-rule-spec {
    flex-shrink: 0;
    color: var(--we-text-muted);
    font-size: 9px;
    padding: 1px 4px;
    background: var(--we-control-bg);
    border-radius: 3px;
  }

  .we-css-decls {
    padding-left: 0;
  }

  /* Two-column grid layout for declarations */
  .we-css-decl {
    display: grid;
    grid-template-columns: minmax(0, 1fr) minmax(0, 1.4fr);
    column-gap: 12px;
    align-items: baseline;
    padding: 5px 0;
    color: var(--we-text-primary);
  }


  .we-css-decl[data-status="overridden"] {
    text-decoration: line-through;
    color: var(--we-text-muted);
  }

  .we-css-decl-name {
    color: var(--we-text-secondary);
    overflow-wrap: anywhere;
  }

  /* Hide punctuation for computed-like view */
  .we-css-decl-colon,
  .we-css-decl-semi {
    display: none;
  }

  /* Value container for flex layout with !important */
  .we-css-decl-value-container {
    display: flex;
    align-items: baseline;
    gap: 4px;
    min-width: 0;
  }

  .we-css-decl-value {
    color: var(--we-text-primary);
    margin-left: 0;
    min-width: 0;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  .we-css-decl[data-status="overridden"] .we-css-decl-name,
  .we-css-decl[data-status="overridden"] .we-css-decl-value {
    color: var(--we-text-muted);
  }

  .we-css-decl-important {
    flex-shrink: 0;
    color: #dc2626;
    font-weight: 600;
    font-size: 10px;
  }

  .we-css-decl[data-status="overridden"] .we-css-decl-important {
    color: #b8c4d0;
  }

  /* ==========================================================================
   * Token Picker (Phase 5.4)
   * ========================================================================== */

  .we-token-picker {
    position: absolute;
    top: calc(100% + 4px);
    left: 0;
    right: 0;
    background: white;
    border: 1px solid rgba(226, 232, 240, 0.95);
    border-radius: 8px;
    box-shadow: 0 8px 24px rgba(15, 23, 42, 0.12);
    overflow: hidden;
    z-index: 30;
  }

  .we-token-picker[hidden] {
    display: none;
  }

  .we-token-filter {
    width: 100%;
    padding: 8px 10px;
    border: none;
    border-bottom: 1px solid rgba(226, 232, 240, 0.8);
    background: transparent;
    font-family: inherit;
    font-size: 11px;
    color: #0f172a;
    outline: none;
  }

  .we-token-filter::placeholder {
    color: #94a3b8;
  }

  .we-token-toggle-row {
    padding: 6px 10px;
    border-bottom: 1px solid rgba(226, 232, 240, 0.6);
    background: rgba(248, 250, 252, 0.5);
  }

  .we-token-toggle-label {
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 10px;
    color: #64748b;
    cursor: pointer;
  }

  .we-token-toggle-checkbox {
    width: 12px;
    height: 12px;
    margin: 0;
    cursor: pointer;
  }

  .we-token-list {
    overflow-y: auto;
    overscroll-behavior: contain;
  }

  .we-token-list[hidden] {
    display: none;
  }

  .we-token-item {
    display: flex;
    align-items: center;
    gap: 8px;
    width: 100%;
    text-align: left;
    padding: 8px 10px;
    border: none;
    background: transparent;
    cursor: pointer;
    transition: background-color 0.1s ease;
  }

  .we-token-item:hover {
    background: rgba(0, 143, 93, 0.06);
  }

  .we-token-item--selected,
  .we-token-item:focus {
    outline: none;
    background: rgba(0, 143, 93, 0.1);
  }

  .we-token-swatch {
    flex-shrink: 0;
    width: 14px;
    height: 14px;
    border-radius: 3px;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.2);
  }

  .we-token-name {
    flex: 1;
    font-family: ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, monospace;
    font-size: 11px;
    color: #0f172a;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  .we-token-value {
    flex-shrink: 0;
    max-width: 80px;
    font-family: ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, monospace;
    font-size: 10px;
    color: #64748b;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  .we-token-empty {
    padding: 16px 10px;
    text-align: center;
    color: #94a3b8;
    font-size: 11px;
  }

  .we-token-empty[hidden] {
    display: none;
  }

  /* Token button for input fields */
  .we-token-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 20px;
    height: 20px;
    padding: 0;
    border: none;
    border-radius: 4px;
    background: rgba(0, 143, 93, 0.08);
    color: #008F5D;
    cursor: pointer;
    transition: background-color 0.15s ease;
  }

  .we-token-btn:hover {
    background: rgba(0, 143, 93, 0.15);
  }

  .we-token-btn:focus {
    outline: none;
    box-shadow: 0 0 0 2px rgba(0, 143, 93, 0.3);
  }

  .we-token-btn-icon {
    width: 12px;
    height: 12px;
  }

  /* ==========================================================================
   * Token Pill (Phase 5.3)
   *
   * Compact pill UI for displaying a CSS var() reference in input fields.
   * Used when ColorField value is a standalone var(--token) expression.
   * ========================================================================== */

  .we-token-pill {
    flex: 1;
    min-width: 0;
    height: 28px;
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 0 6px 0 4px;
    background: var(--we-control-bg);
    border: 1px solid transparent;
    border-radius: var(--we-radius-control);
    transition: background 0.1s ease, border-color 0.1s ease;
  }

  .we-token-pill:hover:not([data-disabled="true"]) {
    border-color: var(--we-control-border-hover);
  }

  .we-token-pill:focus-within {
    background: var(--we-control-bg-focus);
    border-color: var(--we-control-border-focus);
  }

  .we-token-pill[data-disabled="true"] {
    opacity: 0.5;
    pointer-events: none;
  }

  .we-token-pill[hidden] {
    display: none;
  }

  /* Leading slot: holds external element (ColorField swatch) or internal swatch */
  .we-token-pill__leading {
    display: flex;
    align-items: center;
    flex: 0 0 auto;
  }

  /* Internal swatch (used when no external leading element provided) */
  .we-token-pill__swatch {
    width: 16px;
    height: 16px;
    border-radius: 4px;
    border: 1px solid rgba(0, 0, 0, 0.1);
    background: transparent;
  }

  /* Main clickable area */
  .we-token-pill__main {
    flex: 1;
    min-width: 0;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 8px;
    padding: 0;
    border: none;
    background: transparent;
    color: var(--we-text-primary);
    cursor: pointer;
    font-size: 11px;
    text-align: left;
  }

  .we-token-pill__main:focus {
    outline: none;
  }

  .we-token-pill__main:disabled {
    cursor: default;
  }

  /* Token name with ellipsis */
  .we-token-pill__name {
    min-width: 0;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    font-family: ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, monospace;
    font-size: 11px;
  }

  /* Link icon (rotated 45Â° to indicate variable binding) */
  .we-token-pill__icon {
    width: 14px;
    height: 14px;
    flex: 0 0 auto;
    color: var(--we-text-muted);
    transform: rotate(45deg);
  }

  /* Clear button (hover to reveal) */
  .we-token-pill__clear {
    width: 18px;
    height: 18px;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0;
    border: none;
    border-radius: 4px;
    background: transparent;
    color: var(--we-text-muted);
    font-size: 14px;
    line-height: 1;
    cursor: pointer;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.12s ease, background 0.12s ease, color 0.12s ease;
  }

  .we-token-pill:hover .we-token-pill__clear {
    opacity: 1;
    pointer-events: auto;
  }

  .we-token-pill__clear:hover {
    background: rgba(15, 23, 42, 0.06);
    color: var(--we-text-primary);
  }

  .we-token-pill__clear:focus {
    outline: none;
    opacity: 1;
    pointer-events: auto;
  }

  .we-token-pill__clear:disabled {
    cursor: default;
  }

  /* ==========================================================================
     Props Panel (Phase 7.3)
     ========================================================================== */

  .we-props-panel {
    display: flex;
    flex-direction: column;
    gap: 10px;
  }

  .we-props-meta {
    padding: 0 0 8px 0;
    display: flex;
    flex-direction: column;
    gap: 6px;
  }

  .we-props-meta-title {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 10px;
    color: var(--we-text-primary);
    font-size: 11px;
    font-weight: 600;
  }

  .we-props-component {
    min-width: 0;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }

  .we-props-badge {
    flex: 0 0 auto;
    font-size: 10px;
    font-weight: 600;
    padding: 2px 6px;
    border-radius: 999px;
    background: var(--we-accent-brand-bg);
    color: #1d4ed8;
  }

  .we-props-status {
    font-size: 11px;
    color: #64748b;
    font-family: ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, monospace;
  }

  .we-props-warning {
    font-size: 11px;
    color: #92400e;
    background: var(--we-accent-warning-bg);
    border: 1px solid var(--we-accent-warning-border);
    border-radius: var(--we-radius-control);
    padding: 6px 8px;
  }

  .we-props-error {
    font-size: 11px;
    color: #b91c1c;
    background: var(--we-accent-danger-bg);
    border: 1px solid var(--we-accent-danger-border);
    border-radius: var(--we-radius-control);
    padding: 6px 8px;
  }

  .we-props-source {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 11px;
    padding: 4px 0;
  }

  .we-props-source[hidden] {
    display: none;
  }

  .we-props-source-label {
    flex: 0 0 auto;
    color: #64748b;
    font-weight: 500;
  }

  .we-props-source-path {
    flex: 1 1 auto;
    min-width: 0;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    color: var(--we-text-primary);
    font-family: ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, monospace;
  }

  .we-btn-small {
    padding: 2px 8px;
    font-size: 11px;
  }

  /* Source open button - minimal link style */
  .we-props-source-btn {
    flex: 0 0 auto;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 2px;
    margin-left: 2px;
    border: none;
    background: none;
    color: #64748b;
    cursor: pointer;
    transition: color 0.12s ease;
  }

  .we-props-source-btn:hover:not(:disabled) {
    color: #008F5D;
  }

  .we-props-source-btn:disabled {
    opacity: 0.35;
    cursor: not-allowed;
  }

  .we-props-source-btn svg {
    display: block;
  }

  /* Tooltip - fixed position, mounted at shadow root level */
  .we-tooltip {
    position: fixed;
    transform: translateX(-50%);
    padding: 4px 8px;
    font-size: 11px;
    font-weight: 500;
    line-height: 1.2;
    color: #fff;
    background: rgba(15, 23, 42, 0.92);
    border-radius: 4px;
    white-space: nowrap;
    pointer-events: none;
    z-index: 10000;
  }

  .we-tooltip[hidden] {
    display: none;
  }

  .we-props-title-left {
    display: flex;
    align-items: center;
    gap: 6px;
    min-width: 0;
  }

  .we-props-title-actions {
    display: flex;
    align-items: center;
    gap: 2px;
    margin-left: auto;
  }

  /* Action button - minimal icon style for title bar */
  .we-props-action-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 4px;
    border: none;
    background: none;
    color: var(--we-text-secondary);
    cursor: pointer;
    transition: color 0.12s ease;
  }

  .we-props-action-btn:hover:not(:disabled) {
    color: var(--we-text-primary);
  }

  .we-props-action-btn:disabled {
    opacity: 0.35;
    cursor: not-allowed;
  }

  .we-props-action-btn svg {
    display: block;
  }

  .we-props-list {
    overflow: hidden;
  }

  .we-props-empty {
    padding: 16px 12px;
    color: #64748b;
    font-size: 12px;
    text-align: center;
  }

  .we-props-empty[hidden] {
    display: none;
  }

  /* Loading animations */
  @keyframes we-shimmer {
    to {
      background-position: 200% center;
    }
  }

  @keyframes we-spin {
    to {
      transform: rotate(360deg);
    }
  }

  .we-props-empty.we-loading {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
  }

  .we-props-empty.we-loading svg {
    flex-shrink: 0;
    color: #94a3b8;
  }

  .we-props-empty.we-loading span {
    background: linear-gradient(
      90deg,
      #64748b 0%,
      #94a3b8 50%,
      #64748b 100%
    );
    background-size: 200% auto;
    color: transparent;
    -webkit-background-clip: text;
    background-clip: text;
    animation: we-shimmer 2s linear infinite;
  }

  .we-props-group {
    padding: 0 0 8px 0;
    margin-top: 4px;
    color: var(--we-text-primary);
    font-size: 11px;
    font-weight: 600;
    border-top: 1px solid var(--we-border-section);
    padding-top: 12px;
  }

  .we-props-group:first-child {
    border-top: 0;
    margin-top: 0;
    padding-top: 0;
  }

  .we-props-group + .we-props-row {
    border-top: 0;
  }

  .we-props-rows {
    display: flex;
    flex-direction: column;
  }

  .we-props-row {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 8px 0;
    border-top: 1px solid var(--we-border-section);
  }

  .we-props-row:first-child {
    border-top: 0;
  }

  .we-props-key {
    flex: 0 0 110px;
    min-width: 0;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    font-family: ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, monospace;
    font-size: 11px;
    color: #334155;
  }

  .we-props-value {
    flex: 1;
    min-width: 0;
    display: flex;
    align-items: center;
    justify-content: flex-end;
    gap: 8px;
  }

  .we-props-value--readonly {
    justify-content: flex-start;
    color: #475569;
    font-family: ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, monospace;
    font-size: 11px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  .we-props-input {
    width: 140px;
    max-width: 100%;
  }

  .we-props-input--invalid {
    border-color: rgba(248, 113, 113, 0.85);
  }

  .we-props-bool {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    font-size: 11px;
    color: #475569;
    cursor: pointer;
  }

  .we-props-checkbox {
    width: 14px;
    height: 14px;
    accent-color: #008F5D;
    cursor: pointer;
  }

  .we-props-checkbox:disabled {
    cursor: not-allowed;
    opacity: 0.5;
  }

  /* ==========================================================================
   * Color Field (Phase 4.4)
   * ========================================================================== */

  .we-color-field {
    flex: 1;
    display: flex;
    align-items: center;
    gap: 6px;
    min-width: 0;
  }

  .we-color-swatch {
    flex: 0 0 auto;
    width: 24px;
    height: 24px;
    padding: 0;
    position: relative;
    border: 1px solid var(--we-border-subtle);
    border-radius: var(--we-radius-control);
    background: var(--we-control-bg);
    cursor: pointer;
    transition: border-color 0.15s ease, box-shadow 0.15s ease;
    overflow: hidden;
  }

  .we-color-swatch:hover {
    border-color: var(--we-border-strong);
  }

  .we-color-swatch:focus-visible,
  .we-color-swatch:focus-within {
    outline: none;
    box-shadow: 0 0 0 2px var(--we-focus-ring);
  }

  .we-color-swatch:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  /* Native color input overlays the swatch for direct click interaction */
  .we-color-native-input {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    opacity: 0;
    cursor: pointer;
    border: none;
    padding: 0;
    margin: 0;
  }

  .we-color-text {
    flex: 1;
    min-width: 0;
  }

  /* ==========================================================================
   * Tooltip (data-tooltip)
   *
   * CSS-only tooltips using the data-tooltip attribute.
   * Shows on hover/focus with minimal delay.
   * ========================================================================== */

  [data-tooltip] {
    position: relative;
  }

  [data-tooltip]::after {
    content: attr(data-tooltip);
    position: absolute;
    bottom: calc(100% + 6px);
    left: 50%;
    transform: translateX(-50%);
    padding: 4px 8px;
    font-size: 11px;
    font-family: inherit;
    font-weight: 400;
    line-height: 1.3;
    white-space: nowrap;
    color: var(--we-surface-bg);
    background-color: var(--we-text-primary);
    border-radius: var(--we-radius-control);
    opacity: 0;
    visibility: hidden;
    transition:
      opacity 100ms ease,
      visibility 100ms ease;
    pointer-events: none;
    z-index: 99999;
  }

  [data-tooltip]::before {
    content: '';
    position: absolute;
    bottom: calc(100% + 2px);
    left: 50%;
    transform: translateX(-50%);
    border: 4px solid transparent;
    border-top-color: var(--we-text-primary);
    opacity: 0;
    visibility: hidden;
    transition:
      opacity 100ms ease,
      visibility 100ms ease;
    pointer-events: none;
    z-index: 99999;
  }

  [data-tooltip]:hover::after,
  [data-tooltip]:focus-visible::after,
  [data-tooltip]:focus-within::after {
    opacity: 1;
    visibility: visible;
  }

  [data-tooltip]:hover::before,
  [data-tooltip]:focus-visible::before,
  [data-tooltip]:focus-within::before {
    opacity: 1;
    visibility: visible;
  }

  /* ==========================================================================
   * Global Hidden Rule
   * Ensures [hidden] attribute always hides elements, even when they have
   * explicit display values (flex, inline-flex, etc.)
   * ========================================================================== */
  [hidden] {
    display: none !important;
  }
`;function hn(e,t,n){e.style.setProperty(t,n,"important")}function Wl(e={}){const t=new ze;let n=null;const o=document.getElementById(fi);if(o)try{o.remove()}catch{}const r=document.createElement("div");r.id=fi,r.setAttribute("data-mcp-web-editor","v2"),hn(r,"position","fixed"),hn(r,"inset","0"),hn(r,"z-index",String(Tl)),hn(r,"pointer-events","none"),hn(r,"contain","layout style paint"),hn(r,"isolation","isolate");const i=r.attachShadow({mode:"open"}),s=document.createElement("style");s.textContent=Gl,i.append(s);const l=document.createElement("div");l.id=ra;const a=document.createElement("div");a.id=ia,i.append(l,a),(document.documentElement??document.body).append(r),t.add(()=>r.remove()),n={host:r,shadowRoot:i,overlayRoot:l,uiRoot:a};const u=["pointerdown","pointerup","pointermove","pointerenter","pointerleave","mousedown","mouseup","mousemove","mouseenter","mouseleave","click","dblclick","contextmenu","keydown","keyup","keypress","wheel","touchstart","touchmove","touchend","touchcancel","focus","blur","input","change"],p=d=>{d.stopPropagation()};for(const d of u)t.listen(a,d,p),t.listen(l,d,p);const f=d=>{if(!(d instanceof Node))return!1;if(d===r)return!0;const b=typeof d.getRootNode=="function"?d.getRootNode():null;return b instanceof ShadowRoot&&b.host===r};return{getElements:()=>n,isOverlayElement:f,isEventFromUi:d=>{try{if(typeof d.composedPath=="function")return d.composedPath().some(b=>f(b))}catch{}return f(d.target)},dispose:()=>{n=null,t.dispose()}}}const Et={capture:!0,passive:!1};function In(e){e.cancelable&&e.preventDefault(),e.stopImmediatePropagation(),e.stopPropagation()}function hi(e,t,n){if(!Number.isFinite(e))return t;const o=Math.min(t,n),r=Math.max(t,n);return Math.min(r,Math.max(o,e))}function jl(e,t,n,o){const r=Number.isFinite(n)?Math.max(0,n):0,i=Math.max(r,o.width-r-t.width),s=Math.max(r,o.height-r-t.height);return{left:hi(e.left,r,i),top:hi(e.top,r,s)}}function gi(e){return{left:Math.round(e.left),top:Math.round(e.top)}}function sa(e){const{handleEl:t,targetEl:n,onPositionChange:o,clampMargin:r}=e,i=Math.max(0,e.clickThresholdMs??0),s=Math.max(0,e.moveThresholdPx??0),l=i>0,a=s*s;let c=null,u=!1,p=null;function f(){window.removeEventListener("pointermove",C,Et),window.removeEventListener("pointerup",E,Et),window.removeEventListener("pointercancel",y,Et),window.removeEventListener("keydown",k,Et),window.removeEventListener("blur",j,Et),document.removeEventListener("visibilitychange",L)}function h(){p!==null&&(window.clearTimeout(p),p=null)}function d(g){const T=c;if(T&&T.pointerId===g){h();try{t.releasePointerCapture(g)}catch{}f(),c=null,t.dataset.dragging="false"}}function b(g){const T=c,F={width:window.innerWidth,height:window.innerHeight},_=T?{width:T.targetWidth,height:T.targetHeight}:(()=>{const H=n.getBoundingClientRect();return{width:H.width,height:H.height}})(),D=jl(g,_,r,F);o(gi(D))}function m(){const g=c;g&&(b(g.startPosition),d(g.pointerId))}function w(){const g=T=>{In(T)};t.addEventListener("click",g,{capture:!0,once:!0}),window.setTimeout(()=>{t.removeEventListener("click",g,{capture:!0})},300)}function M(g){const T=c;if(!(!T||T.pointerId!==g||T.activated)){T.activated=!0,t.dataset.dragging="true",h();try{t.setPointerCapture(g)}catch{}}}function C(g){const T=c;if(T&&g.pointerId===T.pointerId){if(!T.activated){if(!l||a<=0)return;const F=g.clientX-T.startClientX,_=g.clientY-T.startClientY;if(F*F+_*_<a)return;M(g.pointerId)}In(g),b({left:g.clientX-T.offsetX,top:g.clientY-T.offsetY})}}function E(g){const T=c;T&&g.pointerId===T.pointerId&&(T.activated&&(In(g),w()),d(g.pointerId))}function y(g){const T=c;T&&g.pointerId===T.pointerId&&(T.activated?(In(g),m()):d(g.pointerId))}function k(g){if(g.key!=="Escape")return;const T=c;T&&(T.activated?(g.preventDefault(),g.stopImmediatePropagation(),g.stopPropagation(),m()):d(T.pointerId))}function j(){const g=c;g&&(g.activated?m():d(g.pointerId))}function L(){const g=c;g&&document.visibilityState==="hidden"&&(g.activated?m():d(g.pointerId))}function S(g){if(u||!n.isConnected||c||g.button!==0||!g.isPrimary)return;l||In(g);const T=n.getBoundingClientRect(),F=gi({left:T.left,top:T.top});c={pointerId:g.pointerId,startPosition:F,offsetX:g.clientX-T.left,offsetY:g.clientY-T.top,targetWidth:T.width,targetHeight:T.height,startClientX:g.clientX,startClientY:g.clientY,activated:!l},t.dataset.dragging=c.activated?"true":"false";try{t.setPointerCapture(g.pointerId)}catch{}if(l){h();const _=g.pointerId;p=window.setTimeout(()=>{M(_)},i)}window.addEventListener("pointermove",C,Et),window.addEventListener("pointerup",E,Et),window.addEventListener("pointercancel",y,Et),window.addEventListener("keydown",k,Et),window.addEventListener("blur",j,Et),document.addEventListener("visibilitychange",L)}return t.dataset.dragging="false",t.addEventListener("pointerdown",S),()=>{if(u=!0,t.removeEventListener("pointerdown",S),c)try{c.activated?m():d(c.pointerId)}catch{}f(),h(),c=null,t.dataset.dragging="false"}}function jo(){const e=document.createElementNS("http://www.w3.org/2000/svg","svg");return e.setAttribute("viewBox","0 0 20 20"),e.setAttribute("fill","none"),e.setAttribute("aria-hidden","true"),e}function Tn(){const e=document.createElementNS("http://www.w3.org/2000/svg","svg");return e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.setAttribute("aria-hidden","true"),e}function Nt(e){const t=document.createElementNS("http://www.w3.org/2000/svg","path");return t.setAttribute("d",e),t.setAttribute("stroke","currentColor"),t.setAttribute("stroke-width","2"),t.setAttribute("stroke-linecap","round"),t.setAttribute("stroke-linejoin","round"),t}function Ul(){const e=jo();return e.append(Nt("M6 6l8 8M14 6l-8 8")),e}function aa(){const e=jo(),t=[[7,6],[13,6],[7,10],[13,10],[7,14],[13,14]];for(const[n,o]of t){const r=document.createElementNS("http://www.w3.org/2000/svg","circle");r.setAttribute("cx",String(n)),r.setAttribute("cy",String(o)),r.setAttribute("r","1.4"),r.setAttribute("fill","currentColor"),e.append(r)}return e}function Xl(){const e=jo();return e.classList.add("we-chevron"),e.append(Nt("M5 7l5 5 5-5")),e}function la(){const e=Tn();return e.append(Nt("M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6")),e}function ca(){const e=Tn();return e.append(Nt("M21 10h-10a8 8 0 00-8 8v2M21 10l-6 6m6-6l-6-6")),e}function Yl(){const e=jo();return e.append(Nt("M6 12l4-4 4 4")),e}function ql(){const e=Tn();return e.append(Nt("M5 3h10l4 4v10a2 2 0 01-2 2H5a2 2 0 01-2-2V5a2 2 0 012-2Z")),e.append(Nt("M7 3v6h6V3")),e.append(Nt("M7 21v-6h10v6")),e}function Kl(){const e=Tn(),t=(n,o)=>{const r=document.createElementNS("http://www.w3.org/2000/svg","circle");return r.setAttribute("cx",String(n)),r.setAttribute("cy",String(o)),r.setAttribute("r","1.6"),r.setAttribute("fill","currentColor"),r};return e.append(t(12,6),t(12,12),t(12,18)),e}function Zl(){const e=Tn();return e.append(Nt("M5.5 3.5l4.5 13.5l3.5-4l5.5 5.5l1.5-1.5l-5.5-5.5l4-3.5L5.5 3.5z")),e}function Jl(){const e=Tn();return e.append(Nt("M12 3l1.8 5.2L19 10l-5.2 1.8L12 17l-1.8-5.2L5 10l5.2-1.8L12 3z")),e}function Ql(e){return!!e&&(typeof e=="object"||typeof e=="function")&&typeof e.then=="function"}function ec(e){if(!e||typeof e!="object")return!1;const t=e.requestId;return t===void 0||typeof t=="string"}function tc(e,t){const n=t!=null&&t.requestId?`requestId=${t.requestId}`:"";return n?`${e} (${n})`:e}const nc=2400,oc=["success","completed","verified"],rc=["error","failed","timeout","cancelled","mismatch","lost","uncertain"],ic=["applying","running","starting","locating","verifying"];function bi(e){return oc.includes(e)?"success":rc.includes(e)?"error":ic.includes(e)?"progress":"idle"}function sc(e){const t=new ze,n=e.dock??"top";let o=0,r=0,i="idle",s="",l=!1,a=null,c=!1,u=e.initialPosition??null;const p=document.createElement("div");p.className="we-toolbar",p.dataset.position=n,p.dataset.status=i,p.dataset.minimized="false",p.dataset.dragged=u?"true":"false",p.dataset.structureOpen="false",p.setAttribute("role","toolbar"),p.setAttribute("aria-label","ç¼–è¾‘å·¥å…·æ ");const f=document.createElement("button");f.type="button",f.className="we-drag-handle",f.setAttribute("aria-label","æ”¶èµ·å·¥å…·æ "),f.dataset.tooltip="æ”¶èµ·",f.append(aa());const h=document.createElement("div");h.className="we-toolbar-content";const d=document.createElement("div");d.className="we-toolbar-structure-group";const b=document.createElement("div");b.className="we-toolbar-structure-separator";const m=document.createElement("button");m.type="button",m.className="we-toolbar-apply-btn",m.textContent="å¤åˆ¶ prompt",m.setAttribute("aria-label","å¤åˆ¶ prompt");const w=document.createElement("button");w.type="button",w.className="we-toolbar-icon-btn",w.setAttribute("aria-label","ä¿å­˜æ–‡æœ¬"),w.dataset.tooltip="ä¿å­˜æ–‡æœ¬";const M=document.createElement("span");M.className="we-toolbar-icon-text",M.textContent="æ–‡",w.append(M);const C=document.createElement("button");C.type="button",C.className="we-toolbar-icon-btn",C.setAttribute("aria-label","ä¿å­˜æ ·å¼"),C.dataset.tooltip="ä¿å­˜æ ·å¼";const E=document.createElement("span");E.className="we-toolbar-icon-text",E.textContent="æ ·",C.append(E);const y=document.createElement("button");y.type="button",y.className="we-toolbar-group-icon-btn",y.setAttribute("aria-label","æ’¤é”€"),y.dataset.tooltip="æ’¤é”€";const k=document.createElement("span");k.className="we-toolbar-count",y.append(la(),k);const j=document.createElement("button");j.type="button",j.className="we-toolbar-group-icon-btn",j.setAttribute("aria-label","é‡åš"),j.dataset.tooltip="é‡åš";const L=document.createElement("span");L.className="we-toolbar-count",j.append(ca(),L);const S=document.createElement("button");S.type="button",S.className="we-toolbar-close-btn",S.setAttribute("aria-label","é€€å‡ºç¼–è¾‘"),S.dataset.tooltip="é€€å‡ºç¼–è¾‘",S.append(Ul());const g=document.createElement("span");g.className="we-sr-only",g.setAttribute("aria-live","polite"),d.append(y,j);const T=document.createElement("div");T.className="we-toolbar-end-actions",T.append(w,C,m,S),h.append(d,T),p.append(f,h,g),e.container.append(p),t.add(()=>p.remove());const F=16;function _(z){const J=p.getBoundingClientRect(),pe=window.innerWidth,he=window.innerHeight,Se=F,xe=Math.max(Se,pe-Se-J.width),ae=Math.max(Se,he-Se-J.height),ee=Number.isFinite(z.left)?z.left:0,O=Number.isFinite(z.top)?z.top:0;return{left:Math.round(Math.min(xe,Math.max(Se,ee))),top:Math.round(Math.min(ae,Math.max(Se,O)))}}function D(){if(p.dataset.dragged=u?"true":"false",!u){p.style.left="",p.style.top="",p.style.right="",p.style.bottom="",p.style.transform="";return}p.style.left=`${u.left}px`,p.style.top=`${u.top}px`,p.style.right="auto",p.style.bottom="auto",p.style.transform="none"}function H(z){var J;u=z?_(z):null,D(),(J=e.onPositionChange)==null||J.call(e,u)}function v(){return u}t.add(sa({handleEl:f,targetEl:p,clampMargin:F,onPositionChange:z=>H(z),clickThresholdMs:200,moveThresholdPx:5})),u!==null?H(u):D();function R(){a!==null&&(window.clearTimeout(a),a=null)}t.add(R);function V(z){const J=c;c=z,p.dataset.minimized=c?"true":"false",J&&!c&&u&&(H(u),p.addEventListener("transitionend",pe=>{pe.target===p&&(pe.propertyName!=="width"&&pe.propertyName!=="height"||!c&&u&&H(u))},{once:!0})),f.setAttribute("aria-label",c?"å±•å¼€å·¥å…·æ ":"æ”¶èµ·å·¥å…·æ "),f.dataset.tooltip=c?"å±•å¼€":"æ”¶èµ·"}function B(){k.textContent=String(o),L.textContent=String(r)}function $(){var ae,ee,O;y.disabled=l||o<=0,j.disabled=l||r<=0,y.dataset.tooltip=y.disabled?"æ’¤é”€":`æ’¤é”€ (${o})`,j.dataset.tooltip=j.disabled?"é‡åš":`é‡åš (${r})`;const z=(ae=e.getApplyBlockReason)==null?void 0:ae.call(e),J=!!z;m.disabled=l||o<=0||!e.onApply||J,m.textContent=l?"å¤åˆ¶ä¸­â€¦":"å¤åˆ¶ prompt",m.title=J?z:"";const pe=(ee=e.getSaveTextBlockReason)==null?void 0:ee.call(e),he=(O=e.getSaveStyleBlockReason)==null?void 0:O.call(e),Se=!!pe,xe=!!he;w.disabled=l||!e.onSaveText||Se,C.disabled=l||!e.onSaveStyle||xe,w.title=Se?pe??"":"",C.title=xe?he??"":"",w.dataset.tooltip=Se?pe??"ä¿å­˜æ–‡æœ¬":"ä¿å­˜æ–‡æœ¬",C.dataset.tooltip=xe?he??"ä¿å­˜æ ·å¼":"ä¿å­˜æ ·å¼"}function q(){const z=bi(i);p.dataset.status=z,p.dataset.statusDetail=i,g.textContent=i==="idle"?"":s}function ne(){R(),a=window.setTimeout(()=>P("idle"),nc)}function A(z,J){o=Math.max(0,Math.floor(z)),r=Math.max(0,Math.floor(J)),B(),$()}function P(z,J){i=z,s=(J??"").trim(),q();const pe=bi(i);pe==="success"||pe==="error"?ne():R()}async function Y(){if(!m.disabled&&e.onApply){l=!0,$(),P("applying","å¤åˆ¶ä¸­â€¦");try{const z=e.onApply(),J=Ql(z)?await z:z,pe=ec(J)?J:void 0;P("success",tc("å·²å¤åˆ¶",pe))}catch(z){const J=z instanceof Error?z.message:String(z);P("error",J||"å¤±è´¥")}finally{l=!1,$()}}}return t.listen(m,"click",z=>{z.preventDefault(),Y()}),t.listen(w,"click",z=>{var J;z.preventDefault(),!w.disabled&&((J=e.onSaveText)==null||J.call(e))}),t.listen(C,"click",z=>{var J;z.preventDefault(),!C.disabled&&((J=e.onSaveStyle)==null||J.call(e))}),t.listen(f,"click",z=>{z.preventDefault(),V(!c)}),t.listen(y,"click",z=>{var J;z.preventDefault(),!y.disabled&&((J=e.onUndo)==null||J.call(e))}),t.listen(j,"click",z=>{var J;z.preventDefault(),!j.disabled&&((J=e.onRedo)==null||J.call(e))}),t.listen(S,"click",z=>{var J;z.preventDefault(),(J=e.onRequestClose)==null||J.call(e)}),B(),$(),q(),{setHistory:A,setStatus:P,getPosition:v,setPosition:H,dispose:()=>t.dispose()}}const ac=64,lc=36,cc=2,uc="â€º",dc="â¬¡",wi=10,_n=8,fc=320;function pc(e,t){const n=e.trim();return n.length<=t?n:`${n.slice(0,Math.max(0,t-1)).trimEnd()}â€¦`}function mc(e){var i;const t=e.tagName.toLowerCase(),n=(i=e.id)==null?void 0:i.trim();let o="";if(n)o=`#${n}`;else{const s=Array.from(e.classList??[]).map(l=>l.trim()).filter(Boolean).slice(0,cc);s.length>0&&(o=`.${s.join(".")}`)}const r=`${t}${o}`;return{fullLabel:r,label:pc(r,lc)}}function hc(e){var o;const t=[];let n=e;for(let r=0;n&&r<ac;r++){const i=n.tagName.toUpperCase();if(i==="HTML"||i==="BODY")break;const s=n.parentElement;if(s){t.push({element:n,crossToParent:!1}),n=s;continue}const l=(o=n.getRootNode)==null?void 0:o.call(n);if(l instanceof ShadowRoot&&l.host instanceof Element){t.push({element:n,crossToParent:!0}),n=l.host;continue}t.push({element:n,crossToParent:!1});break}return t.reverse().map(({element:r,crossToParent:i})=>{const{label:s,fullLabel:l}=mc(r);return{element:r,label:s,fullLabel:l,boundaryBefore:i}})}function gc(e){const t=new ze,n=e.dock??"top";let o=null,r=[],i=null,s=0,l=0;const a=document.createElement("nav");a.className="we-breadcrumbs",a.dataset.position=n,a.dataset.hidden="true",a.setAttribute("aria-label","é€‰æ‹©è·¯å¾„"),e.container.append(a),t.add(()=>a.remove());function c(m,w,M){return M<w?w:Math.min(M,Math.max(w,m))}function u(m){const w=16+fc+16;return m-w}function p(){const m=a.getBoundingClientRect();s=m.width,l=m.height}function f(){if(!o||!i||!(s>0&&l>0))return;const m=window.innerWidth,w=window.innerHeight,M=u(m),C=Math.min(m-_n-s,M-s),E=c(i.left,_n,C),y=i.top-wi-l,k=i.top+i.height+wi,j=y>=_n?y:k,L=c(j,_n,w-_n-l);a.style.left=`${Math.round(E)}px`,a.style.top=`${Math.round(L)}px`}function h(){if(a.textContent="",!o){a.dataset.hidden="true";return}a.dataset.hidden="false";const m=document.createDocumentFragment();if(o&&e.onSendToGenie){const w=document.createElement("button");w.type="button",w.className="we-crumb-send-btn",w.append(Jl()),w.setAttribute("aria-label","å‘é€åˆ° Genie å¯¹è¯"),w.dataset.action="send-to-genie",w.title="å‘é€åˆ° Genie å¯¹è¯",m.append(w)}for(let w=0;w<r.length;w++){const M=r[w];if(w>0){const E=document.createElement("span"),y=M.boundaryBefore;E.className=y?"we-crumb-sep we-crumb-sep--shadow":"we-crumb-sep",E.textContent=y?dc:uc,E.setAttribute("aria-hidden","true"),m.append(E)}const C=document.createElement("button");C.type="button",C.className="we-crumb",C.dataset.index=String(w),C.textContent=M.label,C.title=M.fullLabel,w===r.length-1&&(C.classList.add("we-crumb--current"),C.setAttribute("aria-current","page")),m.append(C)}a.append(m),p(),f()}t.listen(a,"click",m=>{var j;const w=m.target;if(!(w instanceof Element))return;if(w.closest("button.we-crumb-send-btn")instanceof HTMLButtonElement){m.preventDefault(),o!=null&&o.isConnected&&((j=e.onSendToGenie)==null||j.call(e,o));return}const C=w.closest("button.we-crumb");if(!(C instanceof HTMLButtonElement))return;m.preventDefault();const E=C.dataset.index??"",y=Number(E);if(!Number.isInteger(y)||y<0)return;const k=r[y];k&&k.element.isConnected&&e.onSelect(k.element)});function d(m){t.isDisposed||(o=m,r=m?hc(m):[],h())}function b(m){t.isDisposed||(i=m,f())}return{setTarget:d,setAnchorRect:b,dispose:()=>t.dispose()}}function bc(e){return typeof e=="string"&&e.trim().length>0}function Qo(e){return e==null?!1:typeof e=="string"?e.trim().length>0:!0}function xi(...e){return e.filter(bc).join(" ")}function qe(e){const{ariaLabel:t,type:n="text",inputMode:o,prefix:r,suffix:i,rootClassName:s,inputClassName:l,autocomplete:a="off",spellcheck:c=!1,placeholder:u}=e,p=document.createElement("div");p.className=xi("we-input-container",s);let f=null;const h=document.createElement("input");h.type=n,h.className=xi("we-input-container__input",l),h.setAttribute("autocomplete",a),h.spellcheck=c,h.setAttribute("aria-label",t),o&&(h.inputMode=o),u!==void 0&&(h.placeholder=u);let d=null;function b(m,w,M){if(!Qo(w))return M&&M.remove(),null;const C=M??document.createElement("span");return C.className=`we-input-container__${m}`,C.textContent="",typeof w=="string"?C.textContent=w:C.append(w),C}return Qo(r)&&(f=b("prefix",r,null),f&&p.append(f)),p.append(h),Qo(i)&&(d=b("suffix",i,null),d&&p.append(d)),{root:p,input:h,setPrefix(m){const w=b("prefix",m,f);w&&!f&&p.insertBefore(w,h),f=w},setSuffix(m){const w=b("suffix",m,d);w&&!d&&p.append(w),d=w},getSuffixText(){var w;return d&&((w=d.textContent)==null?void 0:w.trim())||null}}}const ua=new Set(["auto","inherit","initial","unset","none","fit-content","min-content","max-content","revert","revert-layer"]),da=/\b(?:calc|var|clamp|min|max|fit-content)\s*\(/i,fa=/^(-?(?:\d+|\d*\.\d+|\.\d+))\s*([a-zA-Z%]+)$/,pa=/^-?(?:\d+|\d*\.\d+|\.\d+)$/,ma=/^-?\d+\.$/;function wc(e){const t=e.trim();if(!t)return!1;const n=t.split(/\s+/)[0]??"";return/^-?(?:\d+|\d*\.\d+)([a-zA-Z%]+)$/.test(n)}function pt(e){const t=e.trim();if(!t)return{value:"",suffix:"px"};const n=t.toLowerCase();if(ua.has(n))return{value:t,suffix:null};if(da.test(t))return{value:t,suffix:null};const o=t.match(fa);if(o){const r=o[1]??"",i=o[2]??"";return{value:r,suffix:i||null}}return pa.test(t)?{value:t,suffix:"px"}:ma.test(t)?{value:t.slice(0,-1),suffix:"px"}:{value:t,suffix:null}}function mt(e,t){const n=e.trim();if(!n)return"";const o=n.toLowerCase();if(ua.has(o)||da.test(n)||fa.test(n))return n;if(ma.test(n)){const r=n.slice(0,-1);return t?`${r}${t}`:`${r}px`}return pa.test(n)?t?`${n}${t}`:`${n}px`:n}const xc=1,yc=10,vc=.1,Ec=["","px","%","rem","em","vh","vw","vmin","vmax"],Sc=10;function Kr(e){const t=e.indexOf(".");return t<0?0:Math.max(0,e.length-t-1)}function kc(e){if(!Number.isFinite(e))return 0;const t=String(e);return t.includes("e")||t.includes("E")?0:Kr(t)}function Cc(e){return Number.isFinite(e)?Math.max(0,Math.min(Sc,Math.trunc(e))):0}function Ac(e,t){const n=Cc(t),o=e.toFixed(n);return n===0?o:o.replace(/(\.\d*?)0+$/,"$1").replace(/\.$/,"")}const Tc=/^(-?(?:(?:\d+\.\d+)|(?:\d+\.)|(?:\d+)|(?:\.\d+)))$/;function Nc(e){const t=e.trim();if(!t)return null;const n=t.match(Tc);if(!n)return null;const o=n[1]??"",r=o.endsWith(".")?o.slice(0,-1):o,i=Number(r);return Number.isFinite(i)?{value:i,digits:Kr(r)}:null}const Rc=/^(-?(?:(?:\d+\.\d+)|(?:\d+\.)|(?:\d+)|(?:\.\d+)))\s*([a-zA-Z%]*)$/;function Ic(e,t){const n=e.trim();if(!n)return null;const o=n.match(Rc);if(!o)return null;const r=o[1]??"",i=(o[2]??"").toLowerCase();if(!t.includes(i))return null;const s=r.endsWith(".")?r.slice(0,-1):r,l=Number(s);return Number.isFinite(l)?{value:l,digits:Kr(s),unit:i}:null}function Ke(e,t,n){const{mode:o,step:r=xc,shiftStep:i=yc,altStep:s=vc,min:l,max:a,integer:c=!1,allowedUnits:u=Ec}=n;e.listen(t,"keydown",p=>{if(p.key!=="ArrowUp"&&p.key!=="ArrowDown"||p.metaKey||p.ctrlKey||t.disabled||t.readOnly)return;const f=p.key==="ArrowUp"?1:-1;let h;if(p.altKey?h=s:p.shiftKey?h=i:h=r,!Number.isFinite(h)||h===0)return;const d=(t.value||t.placeholder||"").trim();let b=null,m="";if(o==="number")b=Nc(d),!b&&!d&&(b={value:0,digits:0});else{const y=Ic(d,u);y?(b=y,m=y.unit):d||(b={value:0,digits:0},m="")}if(!b)return;const w=c?0:Math.max(b.digits,kc(h));let M=b.value+f*h;typeof l=="number"&&(M=Math.max(l,M)),typeof a=="number"&&(M=Math.min(a,M)),c&&(M=Math.round(M));const C=Ac(M,w),E=o==="css-length"?`${C}${m}`:C;p.preventDefault(),t.value=E;try{t.dispatchEvent(new Event("input",{bubbles:!0}))}catch{}})}const _c=[{value:"fixed",label:"å›ºå®š"},{value:"fit",label:"è‡ªé€‚åº”"},{value:"fill",label:"å¡«å……"}],ha=["auto","fit-content","max-content","min-content"];function yi(e){try{const t=e.getRootNode();return t instanceof ShadowRoot?t.activeElement===e:document.activeElement===e}catch{return!1}}function er(e,t){try{const n=e.style;return!n||typeof n.getPropertyValue!="function"?"":n.getPropertyValue(t).trim()}catch{return""}}function eo(e,t){try{return window.getComputedStyle(e).getPropertyValue(t).trim()}catch{return""}}function Mc(e,t){try{const n=e.getBoundingClientRect(),o=t==="width"?n.width:n.height;return Number.isFinite(o)?`${Math.round(o*100)/100}px`:"0px"}catch{return"0px"}}function Mn(e){const t=e.trim().toLowerCase();if(!t)return"fixed";if(t==="100%")return"fill";for(const n of ha)if(t===n||t.startsWith(`${n}(`))return"fit";return"fixed"}function Lc(e,t){var o;const n=t.trim().toLowerCase();for(const r of ha)if(n===r||n.startsWith(`${r}(`))return t.trim();try{if(typeof CSS<"u"&&((o=CSS.supports)!=null&&o.call(CSS,e,"fit-content")))return"fit-content"}catch{}return"auto"}function Dc(e){const t=document.createElement("select");t.className="we-select we-size-mode-select",t.setAttribute("aria-label",e);for(const{value:n,label:o}of _c){const r=document.createElement("option");r.value=n,r.textContent=o,t.appendChild(r)}return t}function Pc(e){const{container:t,transactionManager:n}=e,o=new ze;let r=null;const i=document.createElement("div");i.className="we-field-group";function s(L,S){const g=document.createElement("div");g.className="we-size-field";const T=Dc(`${L==="width"?"å®½åº¦":"é«˜åº¦"}æ¨¡å¼`),F=qe({ariaLabel:L==="width"?"å®½åº¦":"é«˜åº¦",inputMode:"decimal",prefix:S,suffix:"px"});return Ke(o,F.input,{mode:"css-length"}),g.append(T,F.root),{property:L,column:g,modeSelect:T,input:F.input,container:F,lastFixedValue:"",handle:null}}const l=s("width","W"),a=s("height","H"),c=document.createElement("div");c.className="we-field-row",c.append(l.column,a.column),i.append(c),t.append(i),o.add(()=>i.remove());const u={width:l,height:a};function p(L){if(o.isDisposed)return null;const S=r;if(!S||!S.isConnected)return null;const g=u[L];if(g.handle)return g.handle;const T=n.beginStyle(S,L);return g.handle=T,T}function f(L){const S=u[L],g=S.handle;S.handle=null,g&&g.commit({merge:!0})}function h(L){const S=u[L],g=S.handle;S.handle=null,g&&g.rollback()}function d(){f("width"),f("height")}function b(L,S){L.container.root.hidden=S!=="fixed"}function m(L,S){const g=L.lastFixedValue.trim();if(g&&Mn(g)==="fixed")return g;const T=eo(S,L.property);return T&&Mn(T)==="fixed"?T:Mc(S,L.property)}function w(L,S=!1){const g=u[L],T=r;if(!T||!T.isConnected){g.modeSelect.value="fixed",g.modeSelect.disabled=!0,b(g,"fixed"),g.input.value="",g.input.placeholder="",g.input.disabled=!0,g.container.setSuffix("px");return}if(g.modeSelect.disabled=!1,g.input.disabled=!1,!S&&(g.handle!==null||yi(g.input)||yi(g.modeSelect)))return;const F=er(T,L),_=F||eo(T,L),D=Mn(F||_);if(g.modeSelect.value=D,b(g,D),D==="fixed"){const H=F||_;H&&Mn(H)==="fixed"&&(g.lastFixedValue=H)}if(D==="fixed"){const H=pt(_);g.input.value=H.value,g.input.placeholder="",g.container.setSuffix(H.suffix)}}function M(){w("width"),w("height")}function C(L){const S=u[L],g=S.modeSelect,T=()=>{const F=r;if(!F||!F.isConnected)return;const _=g.value;if(Mn(er(F,L)||eo(F,L))==="fixed"&&_!=="fixed"){const v=S.container.getSuffixText(),R=mt(S.input.value,v);R&&(S.lastFixedValue=R)}b(S,_);const H=p(L);if(H)switch(_){case"fit":{const v=er(F,L)||eo(F,L);H.set(Lc(L,v));break}case"fill":H.set("100%");break;case"fixed":{const v=m(S,F);S.lastFixedValue=v,H.set(v);const R=pt(v);S.input.value=R.value,S.container.setSuffix(R.suffix);break}}};o.listen(g,"input",T),o.listen(g,"change",T),o.listen(g,"blur",()=>{f(L),M()}),o.listen(g,"keydown",F=>{F.key==="Enter"?(F.preventDefault(),f(L),M(),g.blur()):F.key==="Escape"&&(F.preventDefault(),h(L),w(L,!0))})}function E(L){const S=u[L],g=S.input;o.listen(g,"input",()=>{const T=p(L);if(!T)return;const F=S.container.getSuffixText(),_=mt(g.value,F);T.set(_)}),o.listen(g,"blur",()=>{f(L),M()}),o.listen(g,"keydown",T=>{T.key==="Enter"?(T.preventDefault(),f(L),M(),g.blur()):T.key==="Escape"&&(T.preventDefault(),h(L),w(L,!0))})}C("width"),C("height"),E("width"),E("height");function y(L){o.isDisposed||(L!==r&&(d(),u.width.lastFixedValue="",u.height.lastFixedValue=""),r=L,M())}function k(){o.isDisposed||M()}function j(){d(),r=null,o.dispose()}return M(),{setTarget:y,refresh:k,dispose:j}}const vi="http://www.w3.org/2000/svg",to=["padding-top","padding-right","padding-bottom","padding-left","margin-top","margin-right","margin-bottom","margin-left"],Fc={"padding-top":"M2 4h11M7.5 4v3.5","padding-right":"M4 2v11M4 7.5h3.5","padding-bottom":"M2 11h11M7.5 11v-3.5","padding-left":"M11 2v11M11 7.5h-3.5","margin-top":"M2 4h11M7.5 4v-3","margin-right":"M11 2v11M11 7.5h3","margin-bottom":"M2 11h11M7.5 11v3","margin-left":"M4 2v11M4 7.5h-3"};function $c(e){const[t,n]=e.split("-");return`${t==="padding"?"å†…è¾¹è·":"å¤–è¾¹è·"}${{top:"ä¸Š",right:"å³",bottom:"ä¸‹",left:"å·¦"}[n]}`}function Oc(e){try{const t=e.getRootNode();return t instanceof ShadowRoot?t.activeElement===e:document.activeElement===e}catch{return!1}}function Vc(e,t){try{const n=e.style;return!n||typeof n.getPropertyValue!="function"?"":n.getPropertyValue(t).trim()}catch{return""}}function Bc(e,t){try{return window.getComputedStyle(e).getPropertyValue(t).trim()}catch{return""}}function zc(e){const t=document.createElementNS(vi,"svg");t.setAttribute("viewBox","0 0 15 15"),t.setAttribute("fill","none"),t.setAttribute("aria-hidden","true"),t.setAttribute("focusable","false");const n=document.createElementNS(vi,"path");return n.setAttribute("d",e),n.setAttribute("stroke","currentColor"),t.append(n),t}function Hc(e){const{container:t,transactionManager:n}=e,o=new ze;let r=null;function i(C){const E=qe({ariaLabel:$c(C),inputMode:"decimal",prefix:zc(Fc[C]),suffix:"px"});return Ke(o,E.input,{mode:"css-length"}),{property:C,input:E.input,container:E,handle:null}}const s=Object.create(null);for(const C of to)s[C]=i(C);function l(C,E){const y=document.createElement("div");y.className="we-spacing-section";const k=document.createElement("div");k.className="we-spacing-header",k.textContent=C,y.append(k);const j=document.createElement("div");return j.className="we-spacing-grid",j.append(s[E[0]].container.root),j.append(s[E[1]].container.root),j.append(s[E[2]].container.root),j.append(s[E[3]].container.root),y.append(j),y}const a=document.createElement("div");a.className="we-field-group",a.append(l("å†…è¾¹è·",["padding-top","padding-right","padding-bottom","padding-left"]),l("å¤–è¾¹è·",["margin-top","margin-right","margin-bottom","margin-left"])),t.append(a),o.add(()=>a.remove());function c(C){if(o.isDisposed)return null;const E=r;if(!E||!E.isConnected)return null;const y=s[C];if(y.handle)return y.handle;const k=n.beginStyle(E,C);return y.handle=k,k}function u(C){const E=s[C],y=E.handle;E.handle=null,y&&y.commit({merge:!0})}function p(C){const E=s[C],y=E.handle;E.handle=null,y&&y.rollback()}function f(){for(const C of to)u(C)}function h(C,E=!1){const y=s[C],k=r;if(!k||!k.isConnected){y.input.value="",y.input.placeholder="",y.input.disabled=!0,y.container.setSuffix("px");return}if(y.input.disabled=!1,(y.handle!==null||Oc(y.input))&&!E)return;const S=Vc(k,C)||Bc(k,C),g=pt(S);y.input.value=g.value,y.input.placeholder="",y.container.setSuffix(g.suffix)}function d(){for(const C of to)h(C)}function b(C){const E=s[C],y=E.input;o.listen(y,"input",()=>{const k=c(C);if(!k)return;const j=E.container.getSuffixText();k.set(mt(y.value,j))}),o.listen(y,"blur",()=>{u(C),d()}),o.listen(y,"keydown",k=>{k.key==="Enter"?(k.preventDefault(),u(C),d(),y.blur()):k.key==="Escape"&&(k.preventDefault(),p(C),h(C,!0))})}for(const C of to)b(C);function m(C){o.isDisposed||(C!==r&&f(),r=C,d())}function w(){o.isDisposed||d()}function M(){f(),r=null,o.dispose()}return d(),{setTarget:m,refresh:w,dispose:M}}function Gc(e){try{return e.cloneNode(!0)}catch{return e}}function tr(e,t){if(t===null)return-1;for(let n=0;n<e.length;n++)if(e[n].value===t)return n;return-1}function nr(e){for(let t=0;t<e.length;t++)if(!e[t].disabled)return t;return-1}function Wc(e){for(let t=e.length-1;t>=0;t--)if(!e[t].disabled)return t;return-1}function Gt(e){var C;const{container:t,ariaLabel:n,items:o,onChange:r}=e,i=new ze;let s=!!e.disabled,l=null;const a=document.createElement("div");a.className="we-icon-button-group",a.setAttribute("role","radiogroup"),a.setAttribute("aria-label",n);const c=Math.max(1,e.columns??o.length);a.style.gridTemplateColumns=`repeat(${c}, 1fr)`,t.append(a),i.add(()=>a.remove());const u=[];function p(){a.setAttribute("aria-disabled",String(s));for(let E=0;E<u.length;E++){const y=u[E],k=o[E];y.disabled=s||!!k.disabled}}function f(){const E=tr(o,l),y=E>=0&&!u[E].disabled?E:nr(u);for(let k=0;k<u.length;k++){const j=u[k],L=o[k],S=l!==null&&L.value===l;j.setAttribute("aria-checked",S?"true":"false"),j.dataset.selected=S?"true":"false",j.tabIndex=k===y?0:-1}}function h(E,y){const k=tr(o,E);E!==null&&k<0&&(E=null);const j=E!==l;l=E,f(),y&&j&&l!==null&&(r==null||r(l))}function d(){const E=a.getRootNode(),y=E instanceof ShadowRoot?E.activeElement:document.activeElement,k=u.findIndex(S=>S===y);if(k>=0)return k;const j=tr(o,l);if(j>=0)return j;const L=nr(u);return L>=0?L:0}function b(E,y){if(y===0)return-1;for(let k=E;k>=0&&k<u.length;k+=y)if(!u[k].disabled)return k;return-1}function m(E,y){if(E<0||E>=o.length)return;const k=u[E];k.disabled||(h(o[E].value,y),k.focus())}function w(E){if(s||u.length===0)return;const y=d();let k=null;switch(E.key){case"ArrowLeft":k=b(y-1,-1);break;case"ArrowRight":k=b(y+1,1);break;case"ArrowUp":k=b(y-c,-c);break;case"ArrowDown":k=b(y+c,c);break;case"Home":k=nr(u);break;case"End":k=Wc(u);break;case"Enter":case" ":E.preventDefault(),m(y,!0);return;default:return}k!==null&&k>=0&&(E.preventDefault(),m(k,!0))}for(let E=0;E<o.length;E++){const y=o[E],k=document.createElement("button");k.type="button",k.className="we-icon-button-group__btn",k.setAttribute("role","radio"),k.setAttribute("aria-label",y.ariaLabel),y.title&&(k.dataset.tooltip=y.title),k.dataset.value=y.value,k.append(Gc(y.icon)),i.listen(k,"click",j=>{j.preventDefault(),!(s||k.disabled)&&(h(y.value,!0),k.focus())}),i.listen(k,"keydown",w),u.push(k),a.append(k)}p();const M=e.value??((C=o[0])==null?void 0:C.value)??null;return h(M,!1),{root:a,getValue(){return l},setValue(E){h(E,!1)},setDisabled(E){s=E,p(),f()},dispose(){i.dispose()}}}const rt="http://www.w3.org/2000/svg",ga=["static","relative","absolute","fixed","sticky"];function Zr(){const e=document.createElementNS(rt,"svg");return e.setAttribute("viewBox","0 0 15 15"),e.setAttribute("fill","none"),e.setAttribute("aria-hidden","true"),e.setAttribute("focusable","false"),e}function Jr(e){const t=document.createElementNS(rt,"rect");t.setAttribute("x","2"),t.setAttribute("y","2"),t.setAttribute("width","11"),t.setAttribute("height","11"),t.setAttribute("rx","1.5"),t.setAttribute("stroke","currentColor"),t.setAttribute("stroke-width","1"),t.setAttribute("stroke-dasharray","2 1"),t.setAttribute("fill","none"),t.setAttribute("opacity","0.5"),e.prepend(t)}function jc(e){const t=[];if(!e||e==="none")return t;const n=e.trim();let o=0;for(;o<n.length;){for(;o<n.length&&/\s/.test(n[o]);)o++;if(o>=n.length)break;const r=o;for(;o<n.length&&/[\w-]/.test(n[o]);)o++;const i=n.slice(r,o);for(;o<n.length&&/\s/.test(n[o]);)o++;if(n[o]!=="("){o++;continue}const s=o+1;let l=1;for(o++;o<n.length&&l>0;)n[o]==="("?l++:n[o]===")"&&l--,o++;const a=o-1,c=n.slice(s,a).trim(),u=n.slice(r,o);t.push({original:u,name:i.toLowerCase(),args:c})}return t}function Ei(e){const t=jc(e);let n=-1,o=-1,r=-1;for(let i=0;i<t.length;i++)switch(t[i].name){case"rotate":n===-1&&(n=i);break;case"scalex":o===-1&&(o=i);break;case"scaley":r===-1&&(r=i);break}return{functions:t,rotateIndex:n,scaleXIndex:o,scaleYIndex:r}}function Uc(e){return e.rotateIndex<0?"":e.functions[e.rotateIndex].args}function ba(e){if(e.scaleXIndex<0)return 1;const t=parseFloat(e.functions[e.scaleXIndex].args);return isNaN(t)?1:t}function wa(e){if(e.scaleYIndex<0)return 1;const t=parseFloat(e.functions[e.scaleYIndex].args);return isNaN(t)?1:t}function Xc(e){return ba(e)===-1}function Yc(e){return wa(e)===-1}function qc(e,t){const n=t.trim();e.rotateIndex>=0?n?e.functions[e.rotateIndex]={original:`rotate(${n})`,name:"rotate",args:n}:(e.functions.splice(e.rotateIndex,1),e.scaleXIndex>e.rotateIndex&&e.scaleXIndex--,e.scaleYIndex>e.rotateIndex&&e.scaleYIndex--,e.rotateIndex=-1):n&&(e.rotateIndex=e.functions.length,e.functions.push({original:`rotate(${n})`,name:"rotate",args:n}))}function Kc(e){ba(e)===-1?e.scaleXIndex>=0&&(e.functions.splice(e.scaleXIndex,1),e.rotateIndex>e.scaleXIndex&&e.rotateIndex--,e.scaleYIndex>e.scaleXIndex&&e.scaleYIndex--,e.scaleXIndex=-1):e.scaleXIndex>=0?e.functions[e.scaleXIndex]={original:"scaleX(-1)",name:"scalex",args:"-1"}:(e.scaleXIndex=e.functions.length,e.functions.push({original:"scaleX(-1)",name:"scalex",args:"-1"}))}function Zc(e){wa(e)===-1?e.scaleYIndex>=0&&(e.functions.splice(e.scaleYIndex,1),e.rotateIndex>e.scaleYIndex&&e.rotateIndex--,e.scaleXIndex>e.scaleYIndex&&e.scaleXIndex--,e.scaleYIndex=-1):e.scaleYIndex>=0?e.functions[e.scaleYIndex]={original:"scaleY(-1)",name:"scaley",args:"-1"}:(e.scaleYIndex=e.functions.length,e.functions.push({original:"scaleY(-1)",name:"scaley",args:"-1"}))}function or(e){return e.functions.map(t=>t.original).join(" ").trim()}function Jc(e){if(!e)return"";const t=e.match(/^(-?[\d.]+)/);return t?t[1]:""}function Qc(e){if(!e)return"deg";const t=e.match(/[\d.]+(.*)$/);return t&&t[1]?t[1]:"deg"}function eu(e){const t=Zr(),n=(i,s,l,a,c=1)=>{const u=document.createElementNS(rt,"rect");u.setAttribute("x",String(i)),u.setAttribute("y",String(s)),u.setAttribute("width",String(l)),u.setAttribute("height",String(a)),u.setAttribute("rx","0.5"),u.setAttribute("fill","currentColor"),c<1&&u.setAttribute("opacity",String(c)),t.append(u)},o=(i,s,l)=>{const a=document.createElementNS(rt,"rect");a.setAttribute("x",String(i)),a.setAttribute("y",String(s)),a.setAttribute("width",String(l)),a.setAttribute("height","1"),a.setAttribute("rx","0.5"),a.setAttribute("fill","currentColor"),t.append(a)},r=(i,s="1")=>{const l=document.createElementNS(rt,"path");l.setAttribute("d",i),l.setAttribute("stroke","currentColor"),l.setAttribute("stroke-width",s),l.setAttribute("stroke-linecap","round"),l.setAttribute("fill","none"),t.append(l)};switch(e){case"static":o(3.5,4.5,8),o(3.5,7.5,8),o(3.5,10.5,8);break;case"relative":{const i=document.createElementNS(rt,"rect");i.setAttribute("x","3.5"),i.setAttribute("y","3.5"),i.setAttribute("width","4"),i.setAttribute("height","4"),i.setAttribute("rx","0.5"),i.setAttribute("stroke","currentColor"),i.setAttribute("stroke-width","1"),i.setAttribute("stroke-dasharray","1.5 1"),i.setAttribute("fill","none"),i.setAttribute("opacity","0.5"),t.append(i),n(7.5,7.5,4,4),r("M5.5 7.5L7.5 9.5");break}case"absolute":r("M3 5.5H6M8 3V6","0.8"),n(6,6,5,5);break;case"fixed":{const i=document.createElementNS(rt,"circle");i.setAttribute("cx","7.5"),i.setAttribute("cy","4"),i.setAttribute("r","1.5"),i.setAttribute("fill","currentColor"),t.append(i),r("M7.5 5.5V8"),n(4.5,8,6,4);break}case"sticky":{const i=document.createElementNS(rt,"rect");i.setAttribute("x","3"),i.setAttribute("y","3"),i.setAttribute("width","9"),i.setAttribute("height","1.5"),i.setAttribute("rx","0.5"),i.setAttribute("fill","currentColor"),i.setAttribute("opacity","0.4"),t.append(i),n(4.5,5,6,6);break}}return Jr(t),t}function tu(){const e=document.createElementNS(rt,"svg");e.setAttribute("viewBox","0 0 15 15"),e.setAttribute("fill","none"),e.setAttribute("aria-hidden","true"),e.setAttribute("focusable","false");const t=document.createElementNS(rt,"path");return t.setAttribute("stroke","currentColor"),t.setAttribute("stroke-width","1.2"),t.setAttribute("stroke-linecap","round"),t.setAttribute("stroke-linejoin","round"),t.setAttribute("d","M12 7.5a4.5 4.5 0 1 1-1.5-3.4M12 3v3h-3"),e.append(t),e}function nu(){const e=Zr(),t=document.createElementNS(rt,"rect");t.setAttribute("x","3.5"),t.setAttribute("y","5"),t.setAttribute("width","3"),t.setAttribute("height","5"),t.setAttribute("rx","0.5"),t.setAttribute("fill","currentColor"),t.setAttribute("opacity","0.4");const n=document.createElementNS(rt,"rect");n.setAttribute("x","8.5"),n.setAttribute("y","5"),n.setAttribute("width","3"),n.setAttribute("height","5"),n.setAttribute("rx","0.5"),n.setAttribute("fill","currentColor");const o=document.createElementNS(rt,"path");return o.setAttribute("d","M7.5 3V12"),o.setAttribute("stroke","currentColor"),o.setAttribute("stroke-width","1"),o.setAttribute("stroke-dasharray","1.5 1"),o.setAttribute("opacity","0.6"),e.append(t,n,o),Jr(e),e}function ou(){const e=Zr(),t=document.createElementNS(rt,"rect");t.setAttribute("x","5"),t.setAttribute("y","3.5"),t.setAttribute("width","5"),t.setAttribute("height","3"),t.setAttribute("rx","0.5"),t.setAttribute("fill","currentColor"),t.setAttribute("opacity","0.4");const n=document.createElementNS(rt,"rect");n.setAttribute("x","5"),n.setAttribute("y","8.5"),n.setAttribute("width","5"),n.setAttribute("height","3"),n.setAttribute("rx","0.5"),n.setAttribute("fill","currentColor");const o=document.createElementNS(rt,"path");return o.setAttribute("d","M3 7.5H12"),o.setAttribute("stroke","currentColor"),o.setAttribute("stroke-width","1"),o.setAttribute("stroke-dasharray","1.5 1"),o.setAttribute("opacity","0.6"),e.append(t,n,o),Jr(e),e}function Si(e){try{const t=e.getRootNode();return t instanceof ShadowRoot?t.activeElement===e:document.activeElement===e}catch{return!1}}function no(e,t){try{const n=e.style;return!n||typeof n.getPropertyValue!="function"?"":n.getPropertyValue(t).trim()}catch{return""}}function oo(e,t){try{return window.getComputedStyle(e).getPropertyValue(t).trim()}catch{return""}}function ru(e){const t=e.trim();return t?/^-?\d+\.$/.test(t)?t.slice(0,-1):t:""}function iu(e){return ga.includes(e)}function su(e){const{container:t,transactionManager:n}=e,o=new ze;let r=null;const i=document.createElement("div");i.className="we-field-group";const s=document.createElement("div");s.className="we-field";const l=document.createElement("span");l.className="we-field-label",l.textContent="å®šä½";const a=document.createElement("div");a.className="we-field-content",s.append(l,a);const c=Gt({container:a,ariaLabel:"å®šä½ç±»å‹",columns:5,items:ga.map(A=>({value:A,ariaLabel:{static:"é™æ€",relative:"ç›¸å¯¹",absolute:"ç»å¯¹",fixed:"å›ºå®š",sticky:"ç²˜æ€§"}[A],title:{static:"é™æ€",relative:"ç›¸å¯¹",absolute:"ç»å¯¹",fixed:"å›ºå®š",sticky:"ç²˜æ€§"}[A],icon:eu(A)})),onChange:A=>{const P=S("position");P&&P.set(A),g("position"),R()}});o.add(()=>c.dispose());const u=document.createElement("div");u.className="we-field-row";const p=qe({ariaLabel:"X åæ ‡ (å·¦)",inputMode:"decimal",prefix:"X",suffix:"px"}),f=qe({ariaLabel:"Y åæ ‡ (ä¸Š)",inputMode:"decimal",prefix:"Y",suffix:"px"});u.append(p.root,f.root),Ke(o,p.input,{mode:"css-length"}),Ke(o,f.input,{mode:"css-length"});const h=document.createElement("div");h.className="we-field";const d=document.createElement("span");d.className="we-field-label",d.textContent="å±‚çº§";const b=qe({ariaLabel:"å±‚çº§ (z-index)",inputMode:"numeric",prefix:"Z",suffix:null});h.append(d,b.root),Ke(o,b.input,{mode:"number",integer:!0});const m=document.createElement("div");m.className="we-field";const w=document.createElement("span");w.className="we-field-label",w.textContent="æ—‹è½¬";const M=document.createElement("div");M.className="we-field-content",M.style.display="flex",M.style.gap="4px",M.style.alignItems="center";const C=qe({ariaLabel:"æ—‹è½¬",inputMode:"decimal",prefix:tu(),suffix:"deg"});C.root.style.flex="1",Ke(o,C.input,{mode:"number",step:1,shiftStep:15});const E=document.createElement("button");E.type="button",E.className="we-toggle-btn",E.setAttribute("aria-label","æ°´å¹³ç¿»è½¬"),E.setAttribute("aria-pressed","false"),E.dataset.tooltip="æ°´å¹³ç¿»è½¬",E.append(nu());const y=document.createElement("button");y.type="button",y.className="we-toggle-btn",y.setAttribute("aria-label","å‚ç›´ç¿»è½¬"),y.setAttribute("aria-pressed","false"),y.dataset.tooltip="å‚ç›´ç¿»è½¬",y.append(ou()),M.append(C.root,E,y),m.append(w,M),i.append(s,u,h,m),t.append(i),o.add(()=>i.remove());const k={position:{kind:"icon-button-group",property:"position",group:c,handle:null},left:{kind:"input",property:"left",input:p.input,container:p,handle:null},top:{kind:"input",property:"top",input:f.input,container:f,handle:null},"z-index":{kind:"input",property:"z-index",input:b.input,container:b,handle:null},transform:{kind:"transform",rotateInput:C.input,rotateContainer:C,flipXBtn:E,flipYBtn:y,handle:null,cached:{functions:[],rotateIndex:-1,scaleXIndex:-1,scaleYIndex:-1}}},j=["position","left","top","z-index"],L=["position","left","top","z-index","transform"];function S(A){if(o.isDisposed)return null;const P=r;if(!P||!P.isConnected)return null;const Y=k[A];if(Y.kind==="transform")return null;if(Y.handle)return Y.handle;const z=n.beginStyle(P,A);return Y.handle=z,z}function g(A){const P=k[A];if(P.kind==="transform")return;const Y=P.handle;P.handle=null,Y&&Y.commit({merge:!0})}function T(A){const P=k[A];if(P.kind==="transform")return;const Y=P.handle;P.handle=null,Y&&Y.rollback()}function F(){if(o.isDisposed)return null;const A=r;if(!A||!A.isConnected)return null;const P=k.transform;if(P.handle)return P.handle;const Y=n.beginStyle(A,"transform");P.handle=Y;const z=no(A,"transform")||oo(A,"transform");return P.cached=Ei(z),Y}function _(){const A=k.transform,P=A.handle;A.handle=null,P&&P.commit({merge:!0})}function D(){const A=k.transform,P=A.handle;A.handle=null,P&&P.rollback()}function H(){for(const A of j)g(A);_()}function v(A,P=!1){const Y=k[A],z=r;if(Y.kind==="icon-button-group"){const J=Y.group;if(!z||!z.isConnected){J.setDisabled(!0),J.setValue(null);return}if(J.setDisabled(!1),Y.handle!==null&&!P)return;const he=no(z,"position"),Se=oo(z,"position"),xe=(he||Se).trim();J.setValue(iu(xe)?xe:"static");return}if(Y.kind==="input"){const J=Y.input;if(!z||!z.isConnected){J.disabled=!0,J.value="",J.placeholder="",Y.property==="z-index"?Y.container.setSuffix(null):Y.container.setSuffix("px");return}if(J.disabled=!1,(Y.handle!==null||Si(J))&&!P)return;const Se=no(z,Y.property)||oo(z,Y.property);if(Y.property==="z-index")J.value=Se,Y.container.setSuffix(null);else{const xe=pt(Se);J.value=xe.value,Y.container.setSuffix(xe.suffix)}J.placeholder="";return}if(Y.kind==="transform"){const{rotateInput:J,rotateContainer:pe,flipXBtn:he,flipYBtn:Se}=Y;if(!z||!z.isConnected){J.disabled=!0,J.value="",J.placeholder="",pe.setSuffix("deg"),he.disabled=!0,Se.disabled=!0,he.setAttribute("aria-pressed","false"),Se.setAttribute("aria-pressed","false");return}if(J.disabled=!1,he.disabled=!1,Se.disabled=!1,(Y.handle!==null||Si(J))&&!P)return;const ae=no(z,"transform")||oo(z,"transform"),ee=Ei(ae),O=Uc(ee),ie=Jc(O),ye=Qc(O);J.value=ie,pe.setSuffix(ye||"deg"),he.setAttribute("aria-pressed",Xc(ee)?"true":"false"),Se.setAttribute("aria-pressed",Yc(ee)?"true":"false")}}function R(){for(const A of L)v(A)}function V(A){const P=k[A],Y=P.input;o.listen(Y,"input",()=>{const z=S(A);if(z)if(A==="z-index")z.set(ru(Y.value));else{const J=P.container.getSuffixText();z.set(mt(Y.value,J))}}),o.listen(Y,"blur",()=>{g(A),R()}),o.listen(Y,"keydown",z=>{z.key==="Enter"?(z.preventDefault(),g(A),R(),Y.blur()):z.key==="Escape"&&(z.preventDefault(),T(A),v(A,!0))})}V("left"),V("top"),V("z-index");const B=k.transform;o.listen(B.rotateInput,"input",()=>{const A=F();if(!A)return;const P=B.rotateInput.value.trim(),Y=B.rotateContainer.getSuffixText()||"deg",z=P?`${P}${Y}`:"";qc(B.cached,z),A.set(or(B.cached))}),o.listen(B.rotateInput,"blur",()=>{_(),R()}),o.listen(B.rotateInput,"keydown",A=>{A.key==="Enter"?(A.preventDefault(),_(),R(),B.rotateInput.blur()):A.key==="Escape"&&(A.preventDefault(),D(),v("transform",!0))}),o.listen(B.flipXBtn,"click",A=>{A.preventDefault();const P=F();P&&(Kc(B.cached),P.set(or(B.cached)),_(),R())}),o.listen(B.flipYBtn,"click",A=>{A.preventDefault();const P=F();P&&(Zc(B.cached),P.set(or(B.cached)),_(),R())});function $(A){o.isDisposed||(A!==r&&H(),r=A,R())}function q(){o.isDisposed||R()}function ne(){H(),r=null,o.dispose()}return R(),{setTarget:$,refresh:q,dispose:ne}}const it="http://www.w3.org/2000/svg",xa=["block","inline","inline-block","flex","grid","none"],ya=["row","column","row-reverse","column-reverse"],au=["nowrap","wrap","wrap-reverse"],Or=["flex-start","center","flex-end"],Qe=12;function ro(e){try{const t=e.getRootNode();return t instanceof ShadowRoot?t.activeElement===e:document.activeElement===e}catch{return!1}}function Rt(e,t){var n,o;try{const r=e.style;return((o=(n=r==null?void 0:r.getPropertyValue)==null?void 0:n.call(r,t))==null?void 0:o.trim())??""}catch{return""}}function It(e,t){try{return window.getComputedStyle(e).getPropertyValue(t).trim()}catch{return""}}function lu(e){return xa.includes(e)}function cu(e){return ya.includes(e)}function ki(e){return Or.includes(e)}function Ci(e){const t=e.trim();return t==="inline-flex"?"flex":t==="inline-grid"?"grid":t}function lt(e,t,n){return Number.isFinite(e)?Math.min(n,Math.max(t,Math.trunc(e))):t}function uu(e){const t=[];let n=0,o="";for(let i=0;i<e.length;i++){const s=e[i];if(s==="("&&n++,s===")"&&n>0&&n--,n===0&&/\s/.test(s)){const l=o.trim();l&&t.push(l),o="";continue}o+=s}const r=o.trim();return r&&t.push(r),t}function du(e){const t=e.match(/^repeat\(\s*(\d+)\s*,/i);if(!t)return null;const n=parseInt(t[1],10);return Number.isFinite(n)&&n>0?n:null}function Ai(e){const t=e.trim();if(!t||t==="none")return null;const n=uu(t);let o=0;for(const r of n)/^\[.*\]$/.test(r)||(o+=du(r)??1);return o>0?o:null}function Ti(e){const t=lt(e,1,Qe);return t===1?"1fr":`repeat(${t}, 1fr)`}function Nn(){const e=document.createElementNS(it,"svg");return e.setAttribute("viewBox","0 0 15 15"),e.setAttribute("fill","none"),e.setAttribute("aria-hidden","true"),e.setAttribute("focusable","false"),e}function Xn(e,t="1.2"){e.setAttribute("stroke","currentColor"),e.setAttribute("stroke-width",t),e.setAttribute("stroke-linecap","round"),e.setAttribute("stroke-linejoin","round")}function fu(e){const t=Nn(),n=document.createElementNS(it,"rect");n.setAttribute("x","2"),n.setAttribute("y","2"),n.setAttribute("width","11"),n.setAttribute("height","11"),n.setAttribute("rx","1.5"),n.setAttribute("stroke","currentColor"),n.setAttribute("stroke-width","1"),n.setAttribute("stroke-dasharray","2 1"),n.setAttribute("fill","none"),n.setAttribute("opacity","0.5");const o=(i,s,l,a)=>{const c=document.createElementNS(it,"rect");c.setAttribute("x",String(i)),c.setAttribute("y",String(s)),c.setAttribute("width",String(l)),c.setAttribute("height",String(a)),c.setAttribute("rx","0.5"),c.setAttribute("fill","currentColor"),t.append(c)},r=(i,s,l)=>{const a=document.createElementNS(it,"rect");a.setAttribute("x",String(i)),a.setAttribute("y",String(s)),a.setAttribute("width",String(l)),a.setAttribute("height","1"),a.setAttribute("rx","0.5"),a.setAttribute("fill","currentColor"),t.append(a)};switch(e){case"block":o(3.5,3.5,8,3),o(3.5,8.5,8,3);break;case"inline":r(3.5,4.5,8),r(3.5,7.5,5),r(3.5,10.5,6.5);break;case"inline-block":o(3.5,4.5,3.5,6),r(8,5.5,4),r(8,8.5,3);break;case"flex":o(3.5,4.5,2.5,6),o(6.5,4.5,2.5,6),o(9.5,4.5,2.5,6);break;case"grid":o(3.5,3.5,3.5,3.5),o(8,3.5,3.5,3.5),o(3.5,8,3.5,3.5),o(8,8,3.5,3.5);break;case"none":{const i=document.createElementNS(it,"path");i.setAttribute("d","M4 11L11 4"),i.setAttribute("stroke","currentColor"),i.setAttribute("stroke-width","1.5"),i.setAttribute("stroke-linecap","round"),t.append(i);break}}return t.prepend(n),t}function pu(e){const t=Nn(),n=document.createElementNS(it,"path");Xn(n,"1.5");const o={row:"M2 7.5H13M10 4.5L13 7.5L10 10.5","row-reverse":"M13 7.5H2M5 4.5L2 7.5L5 10.5",column:"M7.5 2V13M4.5 10L7.5 13L10.5 10","column-reverse":"M7.5 13V2M4.5 5L7.5 2L10.5 5"};return n.setAttribute("d",o[e]),t.append(n),t}function mu(e){const t=Nn(),n=document.createElementNS(it,"rect");n.setAttribute("x","2"),n.setAttribute("y","2"),n.setAttribute("width","11"),n.setAttribute("height","11"),n.setAttribute("rx","1.5"),n.setAttribute("stroke","currentColor"),n.setAttribute("stroke-width","1"),n.setAttribute("stroke-dasharray","2 1"),n.setAttribute("fill","none"),n.setAttribute("opacity","0.5");const o={"flex-start":3.5,center:5.5,"flex-end":7.5},r=document.createElementNS(it,"rect");r.setAttribute("x",String(o[e])),r.setAttribute("y","4"),r.setAttribute("width","4"),r.setAttribute("height","3"),r.setAttribute("rx","0.5"),r.setAttribute("fill","currentColor");const i=document.createElementNS(it,"rect");return i.setAttribute("x",String(o[e])),i.setAttribute("y","8"),i.setAttribute("width","4"),i.setAttribute("height","3"),i.setAttribute("rx","0.5"),i.setAttribute("fill","currentColor"),t.append(n,r,i),t}function hu(e){const t=Nn(),n=document.createElementNS(it,"rect");n.setAttribute("x","2"),n.setAttribute("y","2"),n.setAttribute("width","11"),n.setAttribute("height","11"),n.setAttribute("rx","1.5"),n.setAttribute("stroke","currentColor"),n.setAttribute("stroke-width","1"),n.setAttribute("stroke-dasharray","2 1"),n.setAttribute("fill","none"),n.setAttribute("opacity","0.5");const o={"flex-start":3.5,center:5.5,"flex-end":7.5},r=document.createElementNS(it,"rect");r.setAttribute("x","4"),r.setAttribute("y",String(o[e])),r.setAttribute("width","3"),r.setAttribute("height","4"),r.setAttribute("rx","0.5"),r.setAttribute("fill","currentColor");const i=document.createElementNS(it,"rect");return i.setAttribute("x","8"),i.setAttribute("y",String(o[e])),i.setAttribute("width","3"),i.setAttribute("height","4"),i.setAttribute("rx","0.5"),i.setAttribute("fill","currentColor"),t.append(n,r,i),t}function Ni(){const e=Nn(),t=document.createElementNS(it,"rect");t.setAttribute("x","3"),t.setAttribute("y","4"),t.setAttribute("width","3.5"),t.setAttribute("height","7"),t.setAttribute("rx","1"),Xn(t);const n=document.createElementNS(it,"rect");return n.setAttribute("x","8.5"),n.setAttribute("y","4"),n.setAttribute("width","3.5"),n.setAttribute("height","7"),n.setAttribute("rx","1"),Xn(n),e.append(t,n),e}function Ri(){const e=Nn(),t=document.createElementNS(it,"rect");t.setAttribute("x","4"),t.setAttribute("y","3"),t.setAttribute("width","7"),t.setAttribute("height","3.5"),t.setAttribute("rx","1"),Xn(t);const n=document.createElementNS(it,"rect");return n.setAttribute("x","4"),n.setAttribute("y","8.5"),n.setAttribute("width","7"),n.setAttribute("height","3.5"),n.setAttribute("rx","1"),Xn(n),e.append(t,n),e}function gu(e){const{container:t,transactionManager:n}=e,o=new ze;let r=null;const i=document.createElement("div");i.className="we-field-group";const s=document.createElement("div");s.className="we-field";const l=document.createElement("span");l.className="we-field-label",l.textContent="æ˜¾ç¤º";const a=document.createElement("div");a.className="we-field-content",s.append(l,a);const c=Gt({container:a,ariaLabel:"æ˜¾ç¤ºæ¨¡å¼",columns:6,items:xa.map(Q=>({value:Q,ariaLabel:{block:"å—çº§",inline:"å†…è”","inline-block":"å†…è”å—",flex:"å¼¹æ€§",grid:"ç½‘æ ¼",none:"æ— "}[Q],title:{block:"å—çº§",inline:"å†…è”","inline-block":"å†…è”å—",flex:"å¼¹æ€§",grid:"ç½‘æ ¼",none:"æ— "}[Q],icon:fu(Q)})),onChange:Q=>{const ce=ve("display");ce&&ce.set(Q),Ae("display"),K()}});o.add(()=>c.dispose());const u=document.createElement("div");u.className="we-field";const p=document.createElement("span");p.className="we-field-label",p.textContent="å¸ƒå±€";const f=document.createElement("div");f.className="we-field-content",u.append(p,f);const h=Gt({container:f,ariaLabel:"å¸ƒå±€æ–¹å‘",columns:4,items:ya.map(Q=>({value:Q,ariaLabel:{row:"æ°´å¹³",column:"å‚ç›´","row-reverse":"æ°´å¹³åå‘","column-reverse":"å‚ç›´åå‘"}[Q],title:{row:"æ°´å¹³",column:"å‚ç›´","row-reverse":"æ°´å¹³åå‘","column-reverse":"å‚ç›´åå‘"}[Q],icon:pu(Q)})),onChange:Q=>{const ce=ve("flex-direction");ce&&ce.set(Q),Ae("flex-direction"),K()}});o.add(()=>h.dispose()),h.setValue(null);const d=document.createElement("div");d.className="we-field";const b=document.createElement("span");b.className="we-field-label",b.textContent="æ¢è¡Œ";const m=document.createElement("select");m.className="we-select",m.setAttribute("aria-label","æ¢è¡Œ");for(const Q of au){const ce=document.createElement("option");ce.value=Q,ce.textContent={nowrap:"ä¸æ¢è¡Œ",wrap:"æ¢è¡Œ","wrap-reverse":"æ¢è¡Œåå‘"}[Q],m.append(ce)}d.append(b,m);const w=document.createElement("div");w.className="we-field";const M=document.createElement("span");M.className="we-field-label",M.textContent="å¯¹é½";const C=document.createElement("div");C.className="we-field-content",C.style.display="flex",C.style.gap="4px",w.append(M,C);const E=document.createElement("div");E.style.flex="1",E.style.minWidth="0",E.style.display="flex",E.style.flexDirection="column",E.style.gap="2px";const y=document.createElement("span");y.className="we-field-hint",y.textContent="æ¨ª";const k=document.createElement("div");E.append(y,k);const j=document.createElement("div");j.style.flex="1",j.style.minWidth="0",j.style.display="flex",j.style.flexDirection="column",j.style.gap="2px";const L=document.createElement("span");L.className="we-field-hint",L.textContent="çºµ";const S=document.createElement("div");j.append(L,S),C.append(E,j);const g=Gt({container:k,ariaLabel:"ä¸»è½´å¯¹é½",columns:3,items:Or.map(Q=>({value:Q,ariaLabel:{"flex-start":"èµ·ç‚¹å¯¹é½",center:"å±…ä¸­å¯¹é½","flex-end":"ç»ˆç‚¹å¯¹é½"}[Q],title:{"flex-start":"èµ·ç‚¹å¯¹é½",center:"å±…ä¸­å¯¹é½","flex-end":"ç»ˆç‚¹å¯¹é½"}[Q],icon:mu(Q)})),onChange:Q=>{const ce=Oe();if(!ce)return;const ue=T.getValue()??"center";ce.set({"justify-content":Q,"align-items":ue}),We(),K()}}),T=Gt({container:S,ariaLabel:"ä¾§è½´å¯¹é½",columns:3,items:Or.map(Q=>({value:Q,ariaLabel:{"flex-start":"èµ·ç‚¹å¯¹é½",center:"å±…ä¸­å¯¹é½","flex-end":"ç»ˆç‚¹å¯¹é½"}[Q],title:{"flex-start":"èµ·ç‚¹å¯¹é½",center:"å±…ä¸­å¯¹é½","flex-end":"ç»ˆç‚¹å¯¹é½"}[Q],icon:hu(Q)})),onChange:Q=>{const ce=Oe();if(!ce)return;const ue=g.getValue()??"center";ce.set({"justify-content":ue,"align-items":Q}),We(),K()}});o.add(()=>g.dispose()),o.add(()=>T.dispose()),g.setValue(null),T.setValue(null);const F=document.createElement("div");F.className="we-field";const _=document.createElement("span");_.className="we-field-label",_.textContent="ç½‘æ ¼";const D=document.createElement("div");D.className="we-field-content",D.style.position="relative",F.append(_,D);const H=document.createElement("button");H.type="button",H.className="we-grid-dimensions-preview",H.setAttribute("aria-label","ç½‘æ ¼å°ºå¯¸"),H.setAttribute("aria-expanded","false"),H.setAttribute("aria-haspopup","dialog");const v=document.createElement("span");v.textContent="1";const R=document.createElement("span");R.textContent=" Ã— ";const V=document.createElement("span");V.textContent="1",H.append(v,R,V);const B=document.createElement("div");B.className="we-grid-dimensions-popover",B.hidden=!0;const $=document.createElement("div");$.className="we-grid-dimensions-inputs";const q=qe({ariaLabel:"ç½‘æ ¼åˆ—æ•°",inputMode:"numeric",prefix:Ni(),suffix:null});q.root.style.width="72px",q.root.style.flex="0 0 auto";const ne=document.createElement("span");ne.className="we-grid-dimensions-times",ne.textContent="Ã—";const A=qe({ariaLabel:"ç½‘æ ¼è¡Œæ•°",inputMode:"numeric",prefix:Ri(),suffix:null});A.root.style.width="72px",A.root.style.flex="0 0 auto",$.append(q.root,ne,A.root);const P=document.createElement("div");P.className="we-grid-dimensions-matrix",P.setAttribute("role","grid");const Y=[];for(let Q=1;Q<=Qe;Q++)for(let ce=1;ce<=Qe;ce++){const ue=document.createElement("button");ue.type="button",ue.className="we-grid-dimensions-cell",ue.dataset.row=String(Q),ue.dataset.col=String(ce),ue.setAttribute("role","gridcell"),ue.setAttribute("aria-label",`${ce} Ã— ${Q}`),Y.push(ue),P.append(ue)}const z=document.createElement("div");z.className="we-grid-dimensions-tooltip",z.hidden=!0,B.append($,P,z),D.append(H,B),Ke(o,q.input,{mode:"number",integer:!0,min:1,max:Qe}),Ke(o,A.input,{mode:"number",integer:!0,min:1,max:Qe});const J=document.createElement("div");J.className="we-field";const pe=document.createElement("span");pe.className="we-field-label",pe.textContent="é—´è·";const he=document.createElement("div");he.className="we-field-content";const Se=document.createElement("div");Se.className="we-grid-gap-inputs";const xe=qe({ariaLabel:"è¡Œé—´è·",inputMode:"decimal",prefix:Ri(),suffix:"px"}),ae=qe({ariaLabel:"åˆ—é—´è·",inputMode:"decimal",prefix:Ni(),suffix:"px"});Se.append(xe.root,ae.root),he.append(Se),J.append(pe,he),Ke(o,xe.input,{mode:"css-length"}),Ke(o,ae.input,{mode:"css-length"});const ee=document.createElement("div");ee.className="we-grid-gap-row",ee.hidden=!0,F.classList.add("we-grid-gap-col","we-grid-gap-col--grid"),J.classList.add("we-grid-gap-col","we-grid-gap-col--gap"),ee.append(F,J),i.append(s,u,d,w,ee),t.append(i),o.add(()=>i.remove());const O={display:{kind:"display-group",property:"display",group:c,handle:null,row:s},"flex-direction":{kind:"flex-direction-group",property:"flex-direction",group:h,handle:null,row:u},"flex-wrap":{kind:"select",property:"flex-wrap",element:m,handle:null,row:d},alignment:{kind:"flex-alignment",properties:["justify-content","align-items"],justifyGroup:g,alignGroup:T,handle:null,row:w},"grid-dimensions":{kind:"grid-dimensions",properties:["grid-template-columns","grid-template-rows"],previewButton:H,previewColsValue:v,previewRowsValue:V,popover:B,colsContainer:q,rowsContainer:A,matrix:P,tooltip:z,cells:Y,handle:null,row:F},"row-gap":{kind:"input",property:"row-gap",element:xe.input,container:xe,handle:null,row:J},"column-gap":{kind:"input",property:"column-gap",element:ae.input,container:ae,handle:null,row:J}},ie=["display","flex-direction","flex-wrap","row-gap","column-gap"],ye=["display","flex-direction","flex-wrap","alignment","grid-dimensions","row-gap","column-gap"];function ve(Q){if(o.isDisposed)return null;const ce=r;if(!ce||!ce.isConnected)return null;const ue=O[Q];if(ue.kind==="flex-alignment"||ue.kind==="grid-dimensions")return null;if(ue.handle)return ue.handle;const Ne=n.beginStyle(ce,Q);return ue.handle=Ne,Ne}function Ae(Q){const ce=O[Q];if(ce.kind==="flex-alignment"||ce.kind==="grid-dimensions")return;const ue=ce.handle;ce.handle=null,ue&&ue.commit({merge:!0})}function De(Q){const ce=O[Q];if(ce.kind==="flex-alignment"||ce.kind==="grid-dimensions")return;const ue=ce.handle;ce.handle=null,ue&&ue.rollback()}function Oe(){if(o.isDisposed)return null;const Q=r;if(!Q||!Q.isConnected)return null;const ce=O.alignment;if(ce.kind!=="flex-alignment")return null;if(ce.handle)return ce.handle;const ue=n.beginMultiStyle(Q,[...ce.properties]);return ce.handle=ue,ue}function We(){const Q=O.alignment;if(Q.kind!=="flex-alignment")return;const ce=Q.handle;Q.handle=null,ce==null||ce.commit({merge:!0})}function Fe(){if(o.isDisposed)return null;const Q=r;if(!Q||!Q.isConnected)return null;const ce=O["grid-dimensions"];if(ce.kind!=="grid-dimensions")return null;if(ce.handle)return ce.handle;const ue=n.beginMultiStyle(Q,[...ce.properties]);return ce.handle=ue,ue}function _e(){const Q=O["grid-dimensions"];if(Q.kind!=="grid-dimensions")return;const ce=Q.handle;Q.handle=null,ce==null||ce.commit({merge:!0})}function oe(){const Q=O["grid-dimensions"];if(Q.kind!=="grid-dimensions")return;const ce=Q.handle;Q.handle=null,ce==null||ce.rollback()}function x(){for(const Q of ie)Ae(Q);We(),_e()}function N(){const Q=r,ce=Q?Rt(Q,"display")||It(Q,"display"):c.getValue()??"block",Ne=Ci(ce).trim(),me=Ne==="flex"||Ne==="inline-flex",we=Ne==="grid"||Ne==="inline-grid",Re=me||we;u.hidden=!me,d.hidden=!me,w.hidden=!me,ee.hidden=!Re,F.hidden=!we,J.hidden=!Re}function I(Q,ce=!1){var me;const ue=O[Q],Ne=r;if(ue.kind==="display-group"){const we=ue.group;if(!Ne||!Ne.isConnected){we.setDisabled(!0),we.setValue(null);return}if(we.setDisabled(!1),ue.handle!==null&&!ce)return;const Le=Rt(Ne,"display"),Ve=It(Ne,"display");let Je=(Le||Ve).trim();Je=Ci(Je),we.setValue(lu(Je)?Je:"block");return}if(ue.kind==="flex-direction-group"){const we=ue.group;if(!Ne||!Ne.isConnected){we.setDisabled(!0),we.setValue(null);return}if(we.setDisabled(!1),ue.handle!==null&&!ce)return;const Le=Rt(Ne,"flex-direction"),Ve=It(Ne,"flex-direction"),Je=(Le||Ve).trim();we.setValue(cu(Je)?Je:null);return}if(ue.kind==="flex-alignment"){if(!Ne||!Ne.isConnected){ue.justifyGroup.setDisabled(!0),ue.alignGroup.setDisabled(!0),ue.justifyGroup.setValue(null),ue.alignGroup.setValue(null);return}if(ue.justifyGroup.setDisabled(!1),ue.alignGroup.setDisabled(!1),ue.handle!==null&&!ce)return;const Re=Rt(Ne,"justify-content"),Le=It(Ne,"justify-content"),Ve=Rt(Ne,"align-items"),Je=It(Ne,"align-items"),ht=(Re||Le).trim(),gt=(Ve||Je).trim();ki(ht)&&ki(gt)?(ue.justifyGroup.setValue(ht),ue.alignGroup.setValue(gt)):(ue.justifyGroup.setValue(null),ue.alignGroup.setValue(null));return}if(ue.kind==="grid-dimensions"){const{previewButton:we,popover:Re,colsContainer:Le,rowsContainer:Ve,tooltip:Je,cells:ht}=ue;if(!Ne||!Ne.isConnected){we.disabled=!0,ue.previewColsValue.textContent="â€”",ue.previewRowsValue.textContent="â€”",we.setAttribute("aria-expanded","false"),Re.hidden=!0,Le.input.disabled=!0,Ve.input.disabled=!0,Je.hidden=!0;for(const Ee of ht)Ee.dataset.active="false",Ee.dataset.selected="false";return}if(we.disabled=!1,Le.input.disabled=!1,Ve.input.disabled=!1,(ue.handle!==null||ro(Le.input)||ro(Ve.input))&&!ce)return;const dn=Rt(Ne,"grid-template-columns")||It(Ne,"grid-template-columns"),Z=Rt(Ne,"grid-template-rows")||It(Ne,"grid-template-rows"),se=lt(Ai(dn)??1,1,Qe),ge=lt(Ai(Z)??1,1,Qe);Le.input.value=String(se),Ve.input.value=String(ge),ue.previewColsValue.textContent=String(se),ue.previewRowsValue.textContent=String(ge),we.setAttribute("aria-label",`ç½‘æ ¼: ${se} åˆ—, ${ge} è¡Œ`),Je.hidden=!0;for(const Ee of ht){const Te=parseInt(Ee.dataset.col??"0",10),Pe=parseInt(Ee.dataset.row??"0",10),te=Te>0&&Pe>0&&Te<=se&&Pe<=ge;Ee.dataset.selected=te?"true":"false",Ee.dataset.active=te?"true":"false"}return}if(ue.kind==="input"){const we=ue.element;if(!Ne||!Ne.isConnected){we.disabled=!0,we.value="",we.placeholder="",ue.container.setSuffix("px");return}if(we.disabled=!1,(ue.handle!==null||ro(we))&&!ce)return;const Ve=Rt(Ne,ue.property)||It(Ne,ue.property),Je=pt(Ve);we.value=Je.value,ue.container.setSuffix(Je.suffix),we.placeholder="";return}if(ue.kind==="select"){const we=ue.element;if(!Ne||!Ne.isConnected){we.disabled=!0;return}if(we.disabled=!1,(ue.handle!==null||ro(we))&&!ce)return;const Le=Rt(Ne,ue.property),Ve=It(Ne,ue.property),Je=Le||Ve,ht=Array.from(we.options).some(gt=>gt.value===Je);we.value=ht?Je:((me=we.options[0])==null?void 0:me.value)??""}}function K(){for(const Q of ye)I(Q);N()}function W(Q){const ce=O[Q];if(ce.kind!=="select")return;const ue=ce.element,Ne=()=>{const me=ve(Q);me&&me.set(ue.value)};o.listen(ue,"input",Ne),o.listen(ue,"change",Ne),o.listen(ue,"blur",()=>{Ae(Q),K()}),o.listen(ue,"keydown",me=>{me.key==="Enter"?(me.preventDefault(),Ae(Q),K(),ue.blur()):me.key==="Escape"&&(me.preventDefault(),De(Q),I(Q,!0))})}function G(Q){const ce=O[Q];if(ce.kind!=="input")return;const ue=ce.element;o.listen(ue,"input",()=>{const Ne=ve(Q);if(!Ne)return;const me=ce.container.getSuffixText();Ne.set(mt(ue.value,me))}),o.listen(ue,"blur",()=>{Ae(Q),K()}),o.listen(ue,"keydown",Ne=>{Ne.key==="Enter"?(Ne.preventDefault(),Ae(Q),K(),ue.blur()):Ne.key==="Escape"&&(Ne.preventDefault(),De(Q),I(Q,!0))})}W("flex-wrap"),G("row-gap"),G("column-gap");let X=null,U=null;function le(Q,ce,ue){const Ne=X??ce,me=U??ue;for(const we of Q.cells){const Re=parseInt(we.dataset.col??"0",10),Le=parseInt(we.dataset.row??"0",10),Ve=Re>0&&Le>0&&Re<=ce&&Le<=ue,Je=Re>0&&Le>0&&Re<=Ne&&Le<=me;we.dataset.selected=Ve?"true":"false",we.dataset.active=Je?"true":"false"}X!==null&&U!==null?(Q.tooltip.textContent=`${X} Ã— ${U}`,Q.tooltip.hidden=!1):Q.tooltip.hidden=!0}function re(Q,ce){Q.popover.hidden=!ce,Q.previewButton.setAttribute("aria-expanded",ce?"true":"false"),X=null,U=null;const ue=lt(parseInt(Q.colsContainer.input.value||"1",10)||1,1,Qe),Ne=lt(parseInt(Q.rowsContainer.input.value||"1",10)||1,1,Qe);le(Q,ue,Ne)}function fe(Q,ce){const ue=Fe();ue&&ue.set({"grid-template-columns":Ti(Q),"grid-template-rows":Ti(ce)})}const be=O["grid-dimensions"];if(be.kind==="grid-dimensions"){o.listen(be.previewButton,"click",me=>{me.preventDefault(),re(be,be.popover.hidden),be.popover.hidden||(be.colsContainer.input.focus(),be.colsContainer.input.select())});const Q=be.previewButton.getRootNode(),ce=Q instanceof ShadowRoot?Q:document,ue=me=>{if(be.kind!=="grid-dimensions"||be.popover.hidden)return;const we=me.target;F.contains(we)||re(be,!1)};ce.addEventListener("click",ue,!0),o.add(()=>{ce.removeEventListener("click",ue,!0)});const Ne=me=>{o.listen(me,"input",()=>{const we=lt(parseInt(be.colsContainer.input.value||"1",10)||1,1,Qe),Re=lt(parseInt(be.rowsContainer.input.value||"1",10)||1,1,Qe);le(be,we,Re),fe(we,Re)}),o.listen(me,"blur",()=>{_e(),K()}),o.listen(me,"keydown",we=>{if(we.key==="Enter"){we.preventDefault(),_e(),K();return}we.key==="Escape"&&(we.preventDefault(),oe(),re(be,!1),I("grid-dimensions",!0))})};Ne(be.colsContainer.input),Ne(be.rowsContainer.input),o.listen(be.matrix,"mouseover",me=>{const Re=me.target.closest(".we-grid-dimensions-cell");if(!Re)return;X=lt(parseInt(Re.dataset.col??"1",10)||1,1,Qe),U=lt(parseInt(Re.dataset.row??"1",10)||1,1,Qe);const Le=lt(parseInt(be.colsContainer.input.value||"1",10)||1,1,Qe),Ve=lt(parseInt(be.rowsContainer.input.value||"1",10)||1,1,Qe);le(be,Le,Ve)}),o.listen(be.matrix,"mouseleave",()=>{X=null,U=null;const me=lt(parseInt(be.colsContainer.input.value||"1",10)||1,1,Qe),we=lt(parseInt(be.rowsContainer.input.value||"1",10)||1,1,Qe);le(be,me,we)}),o.listen(be.matrix,"click",me=>{const Re=me.target.closest(".we-grid-dimensions-cell");if(!Re)return;const Le=lt(parseInt(Re.dataset.col??"1",10)||1,1,Qe),Ve=lt(parseInt(Re.dataset.row??"1",10)||1,1,Qe);be.colsContainer.input.value=String(Le),be.rowsContainer.input.value=String(Ve),fe(Le,Ve),_e(),re(be,!1),K()})}function Me(Q){o.isDisposed||(Q!==r&&x(),r=Q,K())}function Ce(){o.isDisposed||K()}function Ie(){x(),r=null,o.dispose()}return K(),{setTarget:Me,refresh:Ce,dispose:Ie}}const bu=8,wu=100;function xu(e){const{container:t,tokensService:n,onSelect:o,maxVisible:r=bu}=e,i=new ze;let s=null,l=[],a=[],c=!1,u="",p=null,f=-1;const h=document.createElement("div");h.className="we-token-picker",h.hidden=!0;const d=document.createElement("input");d.type="text",d.className="we-token-filter",d.placeholder="æœç´¢å˜é‡...",d.autocomplete="off",d.spellcheck=!1;const b=document.createElement("div");b.className="we-token-toggle-row";const m=document.createElement("label");m.className="we-token-toggle-label";const w=document.createElement("input");w.type="checkbox",w.className="we-token-toggle-checkbox";const M=document.createElement("span");M.textContent="æ˜¾ç¤ºæ‰€æœ‰å˜é‡",m.append(w,M),b.append(m);const C=document.createElement("div");C.className="we-token-list",C.style.maxHeight=`${r*36}px`;const E=document.createElement("div");E.className="we-token-empty",E.textContent="æœªæ‰¾åˆ°å˜é‡",E.hidden=!0,h.append(d,b,C,E),t.append(h),i.add(()=>h.remove());function y(){if(!s||!s.isConnected){l=[],a=[];return}if(c){const B=s.getRootNode();l=n.getRootTokens(B).tokens.map(q=>{const ne=n.resolveToken(s,q.name);return{token:q,computedValue:ne.computedValue}})}else l=[...n.getContextTokens(s).tokens];k()}function k(){const B=u.toLowerCase().trim();B?a=l.filter($=>{const q=$.token.name.toLowerCase(),ne=$.computedValue.toLowerCase();return q.includes(B)||ne.includes(B)}):a=l,f=a.length>0?0:-1,j()}function j(){if(C.innerHTML="",a.length===0){E.hidden=!1,C.hidden=!0;return}E.hidden=!0,C.hidden=!1;for(let B=0;B<a.length;B++){const $=a[B],q=L($,B);C.append(q)}S()}function L(B,$){const q=document.createElement("button");q.type="button",q.className="we-token-item",q.dataset.index=String($),q.dataset.name=B.token.name;const ne=document.createElement("span");ne.className="we-token-name",ne.textContent=B.token.name;const A=document.createElement("span");A.className="we-token-value",A.textContent=B.computedValue||"(æœªè®¾ç½®)";const P=B.computedValue.toLowerCase();if((P.startsWith("#")||P.startsWith("rgb")||P.startsWith("hsl")||/^[a-z]+$/.test(P))&&B.computedValue){const z=document.createElement("span");z.className="we-token-swatch",z.style.backgroundColor=B.computedValue,q.append(z)}return q.append(ne,A),q}function S(){const B=C.querySelectorAll(".we-token-item");B.forEach(($,q)=>{$.classList.toggle("we-token-item--selected",q===f)}),f>=0&&f<B.length&&B[f].scrollIntoView({block:"nearest"})}function g(B){if(B<0||B>=a.length)return;const $=a[B],q=n.formatCssVar($.token.name);D(),o($.token.name,q)}function T(){f>=0&&g(f)}i.listen(d,"input",()=>{u=d.value,p&&clearTimeout(p),p=setTimeout(()=>{p=null,k()},wu)}),i.listen(d,"keydown",B=>{switch(B.key){case"ArrowDown":B.preventDefault(),a.length>0&&(f=Math.min(f+1,a.length-1),S());break;case"ArrowUp":B.preventDefault(),a.length>0&&(f=Math.max(f-1,0),S());break;case"Enter":B.preventDefault(),T();break;case"Escape":B.preventDefault(),D();break}}),i.listen(w,"change",()=>{c=w.checked,y()}),i.listen(C,"click",B=>{const q=B.target.closest(".we-token-item");if(!q)return;const ne=parseInt(q.dataset.index??"-1",10);ne>=0&&g(ne)}),i.listen(h,"mousedown",B=>{B.preventDefault()});function F(B){i.isDisposed||(s=B&&B.isConnected?B:null,u="",d.value="",!h.hidden&&y())}function _(){i.isDisposed||h.hidden&&(h.hidden=!1,y(),d.focus())}function D(){i.isDisposed||(h.hidden=!0,u="",d.value="",f=-1)}function H(){return h.hidden?(_(),!0):(D(),!1)}function v(){return!h.hidden}function R(){i.isDisposed||h.hidden||y()}function V(){p&&(clearTimeout(p),p=null),s=null,l=[],a=[],i.dispose()}return{setTarget:F,show:_,hide:D,toggle:H,isVisible:v,refresh:R,dispose:V}}const Ii="http://www.w3.org/2000/svg",yu="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m0-5.656a4 4 0 015.656 0l4 4a4 4 0 11-5.656 5.656l-1.1-1.102";function vu(e){const{container:t,ariaLabel:n,tokenName:o,previewColor:r=null,leadingElement:i=null,disabled:s=!1,onClick:l,onClear:a}=e,c=new ze;let u=!!s,p=String(o),f=typeof r=="string"?r:null,h=i??null;const d=document.createElement("div");d.className="we-token-pill",d.dataset.disabled=u?"true":"false",d.setAttribute("role","group"),d.setAttribute("aria-label",n);const b=document.createElement("div");b.className="we-token-pill__leading";const m=document.createElement("div");m.className="we-token-pill__swatch",m.setAttribute("aria-hidden","true");const w=document.createElement("button");w.type="button",w.className="we-token-pill__main",w.setAttribute("aria-label",n),w.dataset.tooltip="åˆ‡æ¢å˜é‡";const M=document.createElement("span");M.className="we-token-pill__name";const C=document.createElementNS(Ii,"svg");C.setAttribute("viewBox","0 0 24 24"),C.setAttribute("fill","none"),C.setAttribute("aria-hidden","true"),C.classList.add("we-token-pill__icon");const E=document.createElementNS(Ii,"path");E.setAttribute("d",yu),E.setAttribute("stroke","currentColor"),E.setAttribute("stroke-width","2"),E.setAttribute("stroke-linecap","round"),E.setAttribute("stroke-linejoin","round"),C.append(E),w.append(M,C);const y=document.createElement("button");y.type="button",y.className="we-token-pill__clear",y.setAttribute("aria-label","æ¸…é™¤å˜é‡"),y.dataset.tooltip="æ¸…é™¤å˜é‡",y.textContent="Ã—",d.append(b,w,y),t.append(d),c.add(()=>d.remove());function k(){for(;b.firstChild;)b.removeChild(b.firstChild);h?b.append(h):(m.style.backgroundColor=f??"",b.append(m))}function j(){M.textContent=p}function L(){d.dataset.disabled=u?"true":"false",w.disabled=u,y.disabled=u,h instanceof HTMLButtonElement&&(h.disabled=u)}return c.listen(w,"click",S=>{S.preventDefault(),!u&&(l==null||l())}),c.listen(y,"click",S=>{S.preventDefault(),S.stopPropagation(),!u&&(a==null||a())}),c.listen(d,"keydown",S=>{if(!u&&(S.key==="Backspace"||S.key==="Delete")){const g=S.composedPath();(g.includes(w)||g.includes(d))&&(S.preventDefault(),a==null||a())}}),k(),j(),L(),{root:d,setTokenName(S){p=String(S??""),j()},setPreviewColor(S){f=typeof S=="string"?S:null,h||(m.style.backgroundColor=f??"")},setLeadingElement(S){h=S??null,k(),L()},setDisabled(S){u=!!S,L()},focus(){try{w.focus()}catch{}},dispose(){c.dispose()}}}const _i="#000000",Eu=`
  <svg class="we-token-btn-icon" viewBox="0 0 24 24" fill="none" aria-hidden="true">
    <path d="M12 3a9 9 0 100 18h1a2 2 0 002-2v-1a2 2 0 012-2h1a3 3 0 003-3 10 10 0 00-9-10z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    <circle cx="7.5" cy="10.5" r="1" fill="currentColor"/>
    <circle cx="10.5" cy="7.5" r="1" fill="currentColor"/>
    <circle cx="13.5" cy="10.5" r="1" fill="currentColor"/>
  </svg>
`;function Su(e){return Number.isFinite(e)?Math.max(0,Math.min(255,Math.round(e))):0}function rr(e){return Su(e).toString(16).padStart(2,"0")}function ku(e){const t=e.match(/rgba?\(\s*([0-9.]+)\s*,\s*([0-9.]+)\s*,\s*([0-9.]+)/i);if(!t)return null;const n=Number(t[1]),o=Number(t[2]),r=Number(t[3]);return!Number.isFinite(n)||!Number.isFinite(o)||!Number.isFinite(r)?null:`#${rr(n)}${rr(o)}${rr(r)}`}function Cu(e){const t=e.trim().toLowerCase();if(!t.startsWith("#"))return null;if(/^#[0-9a-f]{6}$/.test(t))return t;if(/^#[0-9a-f]{3}$/.test(t)){const n=t[1],o=t[2],r=t[3];return`#${n}${n}${o}${o}${r}${r}`}if(/^#[0-9a-f]{8}$/.test(t))return t.slice(0,7);if(/^#[0-9a-f]{4}$/.test(t)){const n=t[1],o=t[2],r=t[3];return`#${n}${n}${o}${o}${r}${r}`}return null}function Au(e){try{const t=e.getRootNode();if(t instanceof ShadowRoot)return t.activeElement}catch{}return document.activeElement}function Kn(e){const{container:t,ariaLabel:n,onInput:o,onCommit:r,onCancel:i,tokensService:s,getTokenTarget:l,tokenPickerMaxVisible:a}=e,c=new ze;let u="",p="",f=_i,h=!1,d=!1,b=null,m=null,w=null;const M=document.createElement("div");M.className="we-color-field",M.style.position="relative";const C=document.createElement("button");C.type="button",C.className="we-color-swatch",C.dataset.tooltip="é€‰æ‹©é¢œè‰²",C.setAttribute("aria-label",`é€‰æ‹©${n}`);const E=document.createElement("input");E.type="color",E.className="we-color-native-input",E.value=f,E.tabIndex=-1;const y=document.createElement("input");y.type="text",y.className="we-input we-color-text",y.autocomplete="off",y.spellcheck=!1,y.setAttribute("aria-label",n);const k=document.createElement("span");k.style.cssText="position:fixed;left:-9999px;top:0;width:1px;height:1px;pointer-events:none;opacity:0",k.setAttribute("aria-hidden","true"),C.append(E),s&&(m=document.createElement("button"),m.type="button",m.className="we-token-btn",m.setAttribute("aria-label","é€‰æ‹©è®¾è®¡å˜é‡"),m.dataset.tooltip="é€‰æ‹©è®¾è®¡å˜é‡",m.innerHTML=Eu),M.append(C,y),m&&M.append(m),M.append(k),t.append(M),c.add(()=>M.remove()),s&&(b=vu({container:M,ariaLabel:`${n} å˜é‡`,tokenName:"",disabled:!1,onClick:()=>D(),onClear:()=>v()}),b.root.hidden=!0,c.add(()=>b==null?void 0:b.dispose())),s&&(w=xu({container:M,tokensService:s,maxVisible:a,onSelect:H}),c.add(()=>w==null?void 0:w.dispose()),c.listen(document,"click",R=>{if(!(w!=null&&w.isVisible()))return;const V=R.target;M.contains(V)||w.hide()}));function j(){const R=u.trim(),V=p.trim();return R&&/\bvar\s*\(/i.test(R)&&V?V:R||V}function L(R){const V=R.trim();if(!V)return{swatch:null,hex:null};const B=Cu(V);if(B)return{swatch:B,hex:B};try{if(k.style.backgroundColor="",k.style.backgroundColor=V,!k.style.backgroundColor)return{swatch:null,hex:null};const $=getComputedStyle(k).backgroundColor,q=ku($);return{swatch:$||null,hex:q}}catch{return{swatch:null,hex:null}}}function S(){const R=j(),V=L(R);V.swatch?C.style.backgroundColor=V.swatch:C.style.backgroundColor="",V.hex&&(f=V.hex,E.value=V.hex)}function g(){if(E.disabled)return;const R=j(),V=L(R);V.hex&&(f=V.hex),E.value=f;const B=E.showPicker;if(typeof B=="function")try{B.call(E);return}catch{}try{E.click()}catch{}}function T(){if(!s)return null;const R=s.parseCssVar(u.trim());return R?R.name:null}function F(R,V){if(!(!s||!b)){if(R===h){R&&V&&b.setTokenName(V);return}if(h=R,R){const B=V??T()??"";b.setTokenName(B),b.setLeadingElement(C),b.root.hidden=!1,y.hidden=!0,m&&(m.hidden=!0)}else b.root.hidden=!0,b.setLeadingElement(null),y.hidden=!1,m&&(m.hidden=!1),(C.parentElement!==M||C.nextSibling!==y)&&M.insertBefore(C,y)}}function _(){if(!s||!b)return;const R=T();F(!!R,R??void 0)}function D(){!w||!s||d||(w.setTarget((l==null?void 0:l())??null),w.toggle())}function H(R,V){p="",y.placeholder="",u=V,y.value=u,S(),o==null||o(u.trim()),r==null||r(),F(!0,R)}function v(){if(!s||!b||d)return;w==null||w.hide();const R=f||_i;p="",y.placeholder="",u=R,y.value=u,S(),o==null||o(u),r==null||r(),F(!1)}return c.listen(C,"keydown",R=>{(R.key==="Enter"||R.key===" ")&&(R.preventDefault(),g())}),c.listen(y,"input",()=>{u=y.value,S(),o==null||o(u.trim())}),c.listen(y,"blur",()=>{r==null||r(),_()}),c.listen(y,"keydown",R=>{R.key==="Enter"?(R.preventDefault(),r==null||r(),y.blur()):R.key==="Escape"&&(R.preventDefault(),i==null||i())}),c.listen(E,"input",()=>{u=E.value,y.value=u,S(),o==null||o(u)}),c.listen(E,"change",()=>{r==null||r(),_()}),m&&c.listen(m,"click",R=>{R.preventDefault(),R.stopPropagation(),D()}),S(),_(),{setValue(R){u=String(R??""),y.value=u,S(),_()},setPlaceholder(R){p=String(R??""),y.placeholder=p,S()},setDisabled(R){d=!!R,C.disabled=d,y.disabled=d,E.disabled=d,m&&(m.disabled=d),b==null||b.setDisabled(d),d&&(w==null||w.hide())},isFocused(){const R=Au(M);return R instanceof HTMLElement?M.contains(R):!1},dispose(){c.dispose()}}}const Mi=[{value:"none",label:"æ— "},{value:"linear",label:"çº¿æ€§æ¸å˜"},{value:"radial",label:"å¾„å‘æ¸å˜"}],Tu=[{value:"ellipse",label:"æ¤­åœ†"},{value:"circle",label:"åœ†å½¢"}],Do=180,nn=50,At={color:"#000000",position:0},Vr={color:"#ffffff",position:100};let Li=0;function Yn(){try{if(typeof crypto<"u"&&typeof crypto.randomUUID=="function")return crypto.randomUUID()}catch{}return Li+=1,`stop_${Li}_${Date.now()}`}function gn(){return[{id:Yn(),color:At.color,position:At.position},{id:Yn(),color:Vr.color,position:Vr.position}]}function Nu(e){return e.map(t=>({id:Yn(),color:t.color,position:t.position,placeholderColor:t.placeholderColor}))}function Ru(e,t){return e.length===t.length?t.map((n,o)=>{var r;return{id:((r=e[o])==null?void 0:r.id)??Yn(),color:n.color,position:n.position,placeholderColor:n.placeholderColor}}):Nu(t)}function Di(e){var t;if(Hn(e.color)){const n=(t=e.placeholderColor)==null?void 0:t.trim();return n||"transparent"}return e.color}function kn(e){return Number.isFinite(e)?Math.max(0,Math.min(255,Math.round(e))):0}function ir(e){return kn(e).toString(16).padStart(2,"0")}function io(e){const t=un(e.a,0,1);if(t>=1)return`#${ir(e.r)}${ir(e.g)}${ir(e.b)}`;const n=Math.round(t*1e3)/1e3;return`rgba(${kn(e.r)}, ${kn(e.g)}, ${kn(e.b)}, ${n})`}function Iu(e){const t=e.trim().toLowerCase();if(!t.startsWith("#"))return null;if(/^#[0-9a-f]{3}$/.test(t)){const n=Number.parseInt(t[1]+t[1],16),o=Number.parseInt(t[2]+t[2],16),r=Number.parseInt(t[3]+t[3],16);return{r:n,g:o,b:r,a:1}}if(/^#[0-9a-f]{4}$/.test(t)){const n=Number.parseInt(t[1]+t[1],16),o=Number.parseInt(t[2]+t[2],16),r=Number.parseInt(t[3]+t[3],16),i=Number.parseInt(t[4]+t[4],16)/255;return{r:n,g:o,b:r,a:i}}if(/^#[0-9a-f]{6}$/.test(t)){const n=Number.parseInt(t.slice(1,3),16),o=Number.parseInt(t.slice(3,5),16),r=Number.parseInt(t.slice(5,7),16);return{r:n,g:o,b:r,a:1}}if(/^#[0-9a-f]{8}$/.test(t)){const n=Number.parseInt(t.slice(1,3),16),o=Number.parseInt(t.slice(3,5),16),r=Number.parseInt(t.slice(5,7),16),i=Number.parseInt(t.slice(7,9),16)/255;return{r:n,g:o,b:r,a:i}}return null}function sr(e){const t=e.trim();if(!t)return null;if(t.endsWith("%")){const o=Number(t.slice(0,-1));return Number.isFinite(o)?kn(o/100*255):null}const n=Number(t);return Number.isFinite(n)?kn(n):null}function _u(e){const t=e.trim();if(!t)return null;if(t.endsWith("%")){const o=Number(t.slice(0,-1));return Number.isFinite(o)?un(o/100,0,1):null}const n=Number(t);return Number.isFinite(n)?un(n,0,1):null}function Pi(e){const t=e.trim();if(!/^rgba?\(/i.test(t))return null;const n=t.indexOf("("),o=t.lastIndexOf(")");if(n<0||o<n)return null;const r=t.slice(n+1,o).trim();if(!r)return null;let i=r,s=null;const l=r.indexOf("/");l!==-1&&(i=r.slice(0,l).trim(),s=r.slice(l+1).trim());const a=i.includes(",")?i.split(",").map(h=>h.trim()).filter(Boolean):i.split(/\s+/).map(h=>h.trim()).filter(Boolean);if(a.length<3)return null;const c=sr(a[0]),u=sr(a[1]),p=sr(a[2]);if(c===null||u===null||p===null)return null;let f=1;if(!s&&a.length>=4&&(s=a[3]),s){const h=_u(s);h!==null&&(f=h)}return{r:c,g:u,b:p,a:f}}function so(e,t,n){return e+(t-e)*n}function Mu(e,t,n){const o=un(n,0,1);return{r:so(e.r,t.r,o),g:so(e.g,t.g,o),b:so(e.b,t.b,o),a:so(e.a,t.a,o)}}function bn(e){try{const t=e.getRootNode();return t instanceof ShadowRoot?t.activeElement===e:document.activeElement===e}catch{return!1}}function Lu(e,t){var n,o;try{const r=e.style;return((o=(n=r==null?void 0:r.getPropertyValue)==null?void 0:n.call(r,t))==null?void 0:o.trim())??""}catch{return""}}function Du(e,t){try{return window.getComputedStyle(e).getPropertyValue(t).trim()}catch{return""}}function ao(e){const t=e.trim();return!t||t.toLowerCase()==="none"}function un(e,t,n){return Number.isFinite(e)?Math.max(t,Math.min(n,e)):t}function lo(e){const t=e.trim();if(!t)return null;const n=Number(t);return Number.isFinite(n)?n:null}function Pu(e){const t=e.trim();if(!t)return null;const n=t.match(/^(-?(?:\d+\.?\d*|\.\d+))\s*deg$/i);if(!n)return null;const o=Number(n[1]);return Number.isFinite(o)?o:null}function Qr(e){const t=e.trim();if(!t)return null;const n=t.match(/^(-?(?:\d+\.?\d*|\.\d+))\s*%$/);if(!n)return null;const o=Number(n[1]);return Number.isFinite(o)?o:null}function ar(e){const t=e.trim().toLowerCase();if(!t)return null;const n=Qr(t);return n!==null?n:t==="center"?50:t==="left"?0:t==="right"?100:null}function lr(e){const t=e.trim().toLowerCase();if(!t)return null;const n=Qr(t);return n!==null?n:t==="center"?50:t==="top"?0:t==="bottom"?100:null}function Fu(e){const t=e.trim().toLowerCase();return t==="left"||t==="right"}function $u(e){const t=e.trim().toLowerCase();return t==="top"||t==="bottom"}function va(e){return un(e,0,360)}function et(e){return un(e,0,100)}function Ea(e,t){const n=[];let o=0,r=null,i=!1,s=0;for(let l=0;l<e.length;l++){const a=e[l];if(i){i=!1;continue}if(a==="\\"){i=!0;continue}if(r){a===r&&(r=null);continue}if(a==='"'||a==="'"){r=a;continue}if(a==="("){o++;continue}if(a===")"){o=Math.max(0,o-1);continue}o===0&&a===t&&(n.push(e.slice(s,l)),s=l+1)}return n.push(e.slice(s)),n}function Sa(e){const t=[];let n=0,o=null,r=!1,i="";const s=()=>{const l=i.trim();l&&t.push(l),i=""};for(let l=0;l<e.length;l++){const a=e[l];if(r){i+=a,r=!1;continue}if(a==="\\"){i+=a,r=!0;continue}if(o){i+=a,a===o&&(o=null);continue}if(a==='"'||a==="'"){i+=a,o=a;continue}if(a==="("){n++,i+=a;continue}if(a===")"){n=Math.max(0,n-1),i+=a;continue}if(n===0&&/\s/.test(a)){s();continue}i+=a}return s(),t}function ka(e){const t=e.trim();if(!t)return null;const n=Sa(t);if(n.length===0)return null;const o=n[0]??"";if(!o)return null;let r=null;for(let i=1;i<n.length;i++){const s=Qr(n[i]??"");if(s!==null){r=s;break}}return{color:o,position:r}}function Ca(e){if(e.length===0)return[];if(e.length===1)return[{color:e[0].color.trim()||At.color,position:et(e[0].position??0)}];const t=e.map(s=>s.color.trim()||At.color),n=e.map(s=>s.position===null?null:et(s.position));n[0]===null&&(n[0]=0);const o=n.length-1;n[o]===null&&(n[o]=100);let r=n[0]??0;for(let s=1;s<n.length;s++){const l=n[s];l!==null&&(l<r?n[s]=r:r=l)}let i=null;for(let s=0;s<n.length;s++)if(n[s]===null)i===null&&(i=s);else if(i!==null){const l=n[i-1]??0,a=n[s]??100,c=s-i+1;for(let u=i;u<s;u++){const p=(u-i+1)/c;n[u]=l+(a-l)*p}i=null}return e.map((s,l)=>({color:t[l],position:et(n[l]??0)}))}function Ou(e){const t=e.trim(),n=t.toLowerCase();let o=null,r="";if(n.startsWith("linear-gradient"))o="linear",r="linear-gradient";else if(n.startsWith("radial-gradient"))o="radial",r="radial-gradient";else return null;let i=r.length;for(;i<t.length&&/\s/.test(t[i]);)i++;if(t[i]!=="(")return null;const s=i;let l=0,a=null,c=!1;for(let u=s;u<t.length;u++){const p=t[u];if(c){c=!1;continue}if(p==="\\"){c=!0;continue}if(a){p===a&&(a=null);continue}if(p==='"'||p==="'"){a=p;continue}if(p==="("){l++;continue}if(p===")"&&(l--,l===0)){if(t.slice(u+1).trim())return null;const h=t.slice(s+1,u);return{kind:o,args:h}}}return null}function Vu(e){const t=Ea(e,",").map(c=>c.trim()).filter(Boolean);if(t.length<2)return null;const n=t[0]??"";if(n.toLowerCase().startsWith("to "))return null;const r=Pu(n);let i=Do,s=0;if(r!==null){if(t.length<3)return null;i=r,s=1}const l=t.slice(s),a=[];for(const c of l){const u=ka(c);if(!u)return null;a.push(u)}return a.length<2?null:{type:"linear",angle:va(i),stops:Ca(a)}}const Bu=new Set(["closest-side","farthest-side","closest-corner","farthest-corner"]);function zu(e){const t=Ea(e,",").map(b=>b.trim()).filter(Boolean);if(t.length<2)return null;let n="ellipse",o=null,r=0;const i=t[0]??"",s=Sa(i),l=s.map(b=>b.toLowerCase());for(const b of l)if(Bu.has(b))return null;const a=l.indexOf("at"),c=a>=0,u=l.includes("circle"),p=l.includes("ellipse");if((u||p||c)&&(r=1,u?n="circle":p&&(n="ellipse"),c)){const b=s[a+1]??"",m=s[a+2]??"";let w=null,M=null;$u(b)?(M=lr(b),w=m?ar(m):null):(Fu(b),w=ar(b),M=m?lr(m):null),o={x:et(w??nn),y:et(M??nn)}}const h=t.slice(r),d=[];for(const b of h){const m=ka(b);if(!m)return null;d.push(m)}return d.length<2?null:{type:"radial",shape:n,position:o,stops:Ca(d)}}function Fi(e){const t=Ou(e);return t?t.kind==="linear"?Vu(t.args):zu(t.args):null}function Hn(e){return/\bvar\s*\(/i.test(e)}function Hu(e,t){return e.length===0||t.length===0?[]:e.map(n=>{let o=t[0],r=Math.abs(o.position-n.position);for(let i=1;i<t.length;i++){const s=t[i],l=Math.abs(s.position-n.position);l<r&&(o=s,r=l)}return o.color})}function ei(e){var dn;const{container:t,transactionManager:n,tokensService:o,property:r="background-image",allowNone:i=!0}=e,s=new ze;let l=null,a=i?"none":"linear",c=gn(),u=((dn=c[0])==null?void 0:dn.id)??null,p=null,f=null,h=null;const d=document.createElement("div");d.className="we-field-group";function b(Z,se){const ge=document.createElement("div");ge.className="we-field";const Ee=document.createElement("span");Ee.className="we-field-label",Ee.textContent=Z;const Te=document.createElement("input");return Te.type="text",Te.className="we-input",Te.autocomplete="off",Te.spellcheck=!1,Te.inputMode="decimal",Te.setAttribute("aria-label",se),ge.append(Ee,Te),{row:ge,input:Te}}function m(Z,se,ge){const Ee=document.createElement("div");Ee.className="we-field";const Te=document.createElement("span");Te.className="we-field-label",Te.textContent=Z;const Pe=document.createElement("select");Pe.className="we-select",Pe.setAttribute("aria-label",se);for(const te of ge){const de=document.createElement("option");de.value=te.value,de.textContent=te.label,Pe.append(de)}return Ee.append(Te,Pe),{row:Ee,select:Pe}}const w=i?Mi:Mi.filter(Z=>Z.value!=="none"),{row:M,select:C}=m("ç±»å‹","æ¸å˜ç±»å‹",w),E=document.createElement("div");E.className="we-gradient-bar-row";const y=document.createElement("div");y.className="we-gradient-bar",y.setAttribute("aria-label","æ¸å˜é¢„è§ˆ");const k=document.createElement("div");k.className="we-gradient-bar-thumbs",y.append(k),E.append(y);const{row:j,input:L}=b("è§’åº¦","æ¸å˜è§’åº¦ (deg)");L.placeholder=String(Do);const{row:S,select:g}=m("å½¢çŠ¶","å¾„å‘æ¸å˜å½¢çŠ¶",Tu),{row:T,input:F}=b("ä½ç½® X","å¾„å‘ä½ç½® X (%)"),{row:_,input:D}=b("ä½ç½® Y","å¾„å‘ä½ç½® Y (%)"),H=document.createElement("div");H.className="we-gradient-stops-header";const v=document.createElement("span");v.className="we-gradient-stops-title",v.textContent="æ¸å˜èŠ‚ç‚¹";const R=document.createElement("button");R.type="button",R.className="we-icon-btn we-gradient-stops-add",R.setAttribute("aria-label","æ·»åŠ èŠ‚ç‚¹"),R.disabled=!1,R.textContent="+",H.append(v,R);const V=document.createElement("div");V.className="we-gradient-stops-list",V.setAttribute("role","list"),d.append(M,E,j,S,T,_,H,V),t.append(d),s.add(()=>d.remove()),Ke(s,L,{mode:"number",min:0,max:360,step:1,shiftStep:15,altStep:.1}),Ke(s,F,{mode:"number",min:0,max:100,step:1,shiftStep:10,altStep:.1}),Ke(s,D,{mode:"number",min:0,max:100,step:1,shiftStep:10,altStep:.1});const B=document.createElement("div"),$=document.createElement("input");$.type="text",$.className="we-gradient-stop-pos-input",$.autocomplete="off",$.spellcheck=!1,$.inputMode="decimal",$.placeholder="0",$.setAttribute("aria-label","é€‰ä¸­èŠ‚ç‚¹ä½ç½® (%)"),B.append($),Ke(s,$,{mode:"number",min:0,max:100,step:1,shiftStep:10});function q(){Oe(),h&&(we(),z()),Re()}function ne(){J(),Re(!0)}s.listen($,"input",()=>{const Z=u;if(!Z)return;const se=lo($.value);se!==null&&(pe(Z,se),we())}),s.listen($,"blur",q),s.listen($,"keydown",Z=>{Z.key==="Enter"?(Z.preventDefault(),q(),$.blur()):Z.key==="Escape"&&(Z.preventDefault(),ne())});const A=document.createElement("div"),P=Kn({container:A,ariaLabel:"é€‰ä¸­èŠ‚ç‚¹é¢œè‰²",tokensService:o,getTokenTarget:()=>l,onInput:Z=>{const se=u;if(!se)return;const ge=c.findIndex(Ee=>Ee.id===se);ge<0||(c[ge].color=Z,P.setPlaceholder(Hn(Z)?c[ge].placeholderColor??"":""),we())},onCommit:()=>{z(),Re()},onCancel:()=>{J(),Re(!0)}});s.add(()=>P.dispose());function Y(){if(s.isDisposed)return null;const Z=l;return!Z||!Z.isConnected?null:h||(h=n.beginStyle(Z,r),h)}function z(){const Z=h;h=null,Z&&Z.commit({merge:!0})}function J(){const Z=h;h=null,Z&&Z.rollback()}function pe(Z,se){const ge=c.findIndex(Te=>Te.id===Z);if(ge<0)return;const Ee=et(se);c[ge].position=Ee}function he(Z){for(const se of c){const ge=Z.get(se.id);ge!==void 0&&(se.position=ge)}}function Se(Z){const se=p;if(se){p=null,y.classList.remove("we-gradient-bar--dragging"),se.thumbElement.classList.remove("we-gradient-thumb--dragging");try{se.thumbElement.releasePointerCapture(se.pointerId)}catch{}Z?(Oe(),we(),z(),Re()):(he(se.initialPositions),J(),Re(!0))}}function xe(Z){const se=y.getBoundingClientRect();if(se.width<=0)return 0;const Ee=(Z-se.left)/se.width*100;return et(Ee)}function ae(Z,se){if(p||a==="none"||C.disabled||(f==null?void 0:f.stopId)===Z)return;f&&ee(!0);const ge=new Map;for(const Ee of c)ge.set(Ee.id,Ee.position);f={stopId:Z,initialPositions:ge,thumbElement:se},Y()}function ee(Z){const se=f;se&&(f=null,Z?(Oe(),we(),z(),Re()):(he(se.initialPositions),J(),Re(!0)))}function O(Z){if(p||a==="none"||C.disabled)return;const ge=Z.currentTarget.dataset.stopId;ge&&u!==ge&&(u=ge,I({preserveThumbs:!0}))}function ie(Z){const se=f;!se||Z.currentTarget!==se.thumbElement||ee(!0)}function ye(Z){if(Z.metaKey||Z.ctrlKey||p||a==="none"||C.disabled)return;const se=Z.currentTarget,ge=se.dataset.stopId;if(!ge)return;if(Z.key==="Escape"){const ke=f;if(!ke||ke.stopId!==ge)return;Z.preventDefault(),Z.stopPropagation(),ee(!1);return}if(!(Z.key==="ArrowLeft"||Z.key==="ArrowRight"||Z.key==="ArrowUp"||Z.key==="ArrowDown"))return;Z.preventDefault(),Z.stopPropagation();const Te=Z.key==="ArrowLeft"||Z.key==="ArrowDown"?-1:1,Pe=Z.shiftKey?10:1,te=Te*Pe;u=ge,ae(ge,se);const de=c.findIndex(ke=>ke.id===ge);de<0||(pe(ge,c[de].position+te),we())}function ve(Z,se){const ge=et(se),Ee=Math.round(ge*100)/100,Te=Object.is(Ee,-0)?0:Ee;Z.setAttribute("role","slider"),Z.setAttribute("aria-label","æ¸å˜èŠ‚ç‚¹ä½ç½®"),Z.setAttribute("aria-valuemin","0"),Z.setAttribute("aria-valuemax","100"),Z.setAttribute("aria-valuenow",String(Te)),Z.setAttribute("aria-valuetext",`${Te}%`),Z.setAttribute("aria-orientation","horizontal")}const Ae=document.createElement("div");Ae.style.cssText="position:fixed;left:-9999px;top:0;width:1px;height:1px;pointer-events:none;opacity:0",d.append(Ae),s.add(()=>Ae.remove());function De(Z){const se=Z.trim();if(!se)return null;if(se.toLowerCase()==="transparent")return{r:0,g:0,b:0,a:0};const Ee=Iu(se);if(Ee)return Ee;const Te=Pi(se);if(Te)return Te;try{if(Ae.style.color="",Ae.style.color=se,!Ae.style.color)return null;const Pe=getComputedStyle(Ae).color;return Pi(Pe)}catch{return null}}function Oe(){if(c.length<=1)return;const Z=c.map((se,ge)=>({stop:se,index:ge}));Z.sort((se,ge)=>se.stop.position-ge.stop.position||se.index-ge.index),c=Z.map(se=>se.stop)}function We(Z){const se=et(Z),ge=c.length>=2?c:gn();if(ge.length===0)return At.color;const Ee=ge.slice().sort((je,Be)=>je.position-Be.position);let Te=Ee[0],Pe=Ee[Ee.length-1];for(const je of Ee)if(je.position<=se&&(Te=je),je.position>=se){Pe=je;break}const te=De(Di(Te)),de=De(Di(Pe));if(!te&&!de)return Te.color.trim()||At.color;if(!te)return io(de);if(!de)return io(te);const ke=Pe.position-Te.position;if(!Number.isFinite(ke)||ke<=0)return io(te);const $e=un((se-Te.position)/ke,0,1);return io(Mu(te,de,$e))}function Fe(){const Z=u;if(!Z)return nn;const ge=(c.length>=2?c:gn()).slice().sort((de,ke)=>de.position-ke.position),Ee=ge.findIndex(de=>de.id===Z);if(Ee<0)return nn;const Te=ge[Ee],Pe=ge[Ee+1],te=ge[Ee-1];return Pe?et((Te.position+Pe.position)/2):te?et((te.position+Te.position)/2):nn}function _e(Z){if(c.length===0)return null;let se=c[0],ge=Math.abs(se.position-Z);for(let Ee=1;Ee<c.length;Ee++){const Te=c[Ee],Pe=Math.abs(Te.position-Z);if(Pe<ge){se=Te,ge=Pe;continue}if(Pe===ge){const te=Te.position>=Z,de=se.position>=Z;te&&!de&&(se=Te)}}return se.id}function oe(Z,se={}){if(a==="none"||C.disabled)return;const ge=et(Z),Ee={id:Yn(),position:ge,color:We(ge)};c.push(Ee),u=Ee.id,Oe(),we(),z(),se.focusColor&&queueMicrotask(()=>{const Te=A.querySelector("input.we-color-text");Te==null||Te.focus()})}function x(Z){var Ee;if(a==="none"||C.disabled||c.length<=2)return;const se=c.findIndex(Te=>Te.id===Z);if(se<0)return;const ge=c[se];c.splice(se,1),u===Z&&(u=_e(ge.position),u||(u=((Ee=c[0])==null?void 0:Ee.id)??null)),Oe(),we(),z()}function N(Z){return Z instanceof HTMLInputElement||Z instanceof HTMLTextAreaElement||Z instanceof HTMLElement&&Z.isContentEditable}function I(Z={}){var te;const se=Z.refreshStopsList??!0,ge=Z.preserveThumbs??!1;if(a==="none"){y.style.backgroundImage="none",k.textContent="",se&&re([],[],[]);return}const Ee=Ne();if(Ee.length===0){y.style.backgroundImage="none",k.textContent="",se&&re([],[],[]);return}const Te=Ee.map((de,ke)=>{var Be;const $e=c[ke];return{color:Hn(de.color)?((Be=$e==null?void 0:$e.placeholderColor)==null?void 0:Be.trim())||"transparent":de.color,position:de.position}});y.style.backgroundImage=ue(Te);const Pe=c.length>=2?c:gn();if((!u||!Pe.some(de=>de.id===u))&&(u=((te=Pe[0])==null?void 0:te.id)??null),ge){const de=k.querySelectorAll(".we-gradient-thumb");for(const ke of de){const $e=ke.dataset.stopId;if(!$e)continue;const je=Pe.findIndex(at=>at.id===$e);if(je<0)continue;const Be=Ee[je],Ue=Te[je];if(!Be||!Ue)continue;ke.style.left=`${et(Be.position)}%`,ke.style.backgroundColor=Ue.color,ve(ke,Be.position);const nt=$e===u;ke.classList.toggle("we-gradient-thumb--active",nt)}}else{k.textContent="";for(let de=0;de<Ee.length;de++){const ke=Pe[de],$e=Ee[de],je=Te[de];if(!ke||!$e||!je)continue;const Be=document.createElement("button");Be.type="button",Be.className=ke.id===u?"we-gradient-thumb we-gradient-thumb--active":"we-gradient-thumb",Be.dataset.stopId=ke.id,Be.style.left=`${et($e.position)}%`,Be.style.backgroundColor=je.color,ve(Be,$e.position),Be.addEventListener("pointerdown",K),Be.addEventListener("keydown",ye),Be.addEventListener("focus",O),Be.addEventListener("blur",ie),k.append(Be)}}se&&!ge&&re(Pe,Ee,Te)}function K(Z){if(p||a==="none"||C.disabled||Z.button!==0||!Z.isPrimary)return;const se=Z.currentTarget,ge=se.dataset.stopId;if(!ge)return;f&&(f=null),Z.preventDefault(),Z.stopPropagation(),u=ge;const Ee=new Map;for(const Te of c)Ee.set(Te.id,Te.position);p={stopId:ge,pointerId:Z.pointerId,initialPositions:Ee,thumbElement:se},y.classList.add("we-gradient-bar--dragging"),se.classList.add("we-gradient-thumb--dragging");try{se.setPointerCapture(Z.pointerId)}catch{}Y(),I({preserveThumbs:!0,refreshStopsList:!1})}function W(Z){const se=p;if(!se||Z.pointerId!==se.pointerId)return;const ge=xe(Z.clientX);pe(se.stopId,ge),we()}function G(Z){const se=p;se&&Z.pointerId===se.pointerId&&Se(!0)}function X(Z){const se=p;se&&Z.pointerId===se.pointerId&&Se(!1)}function U(Z){p&&Z.key==="Escape"&&(Z.preventDefault(),Z.stopImmediatePropagation(),Z.stopPropagation(),Se(!1))}const le={capture:!0,passive:!1};s.listen(window,"pointermove",W,le),s.listen(window,"pointerup",G,le),s.listen(window,"pointercancel",X,le),s.listen(window,"keydown",U,le);function re(Z,se,ge){if(V.textContent="",a==="none"||Z.length===0||se.length===0)return;const Ee=te=>{const de=et(te),ke=Math.round(de*100)/100;return Object.is(ke,-0)?0:ke},Te=te=>`${Ee(te)}%`,Pe=se.map((te,de)=>({index:de,stop:te,model:Z[de],preview:ge[de]})).filter(te=>!!(te.model&&te.preview)).sort((te,de)=>te.stop.position-de.stop.position||te.index-de.index);for(let te=0;te<Pe.length;te++){const de=Pe[te],ke=de.model,$e=de.stop,je=de.preview,Be=ke.id===u,Ue=document.createElement("div");Ue.className=Be?"we-gradient-stop-row we-gradient-stop-row--active":"we-gradient-stop-row",Ue.dataset.stopId=ke.id,Ue.setAttribute("role","button"),Ue.tabIndex=0,Ue.setAttribute("aria-label",`é€‰æ‹©ä½äº ${Te($e.position)} çš„èŠ‚ç‚¹`);const nt=document.createElement("div");nt.className="we-gradient-stop-pos";const at=document.createElement("span");at.className="we-gradient-stop-pos-static",at.textContent=Te($e.position),at.title="ç¼–è¾‘ä½ç½®";const tt=document.createElement("div");tt.className="we-gradient-stop-pos-editor",Be&&(tt.append(B),Ce()||($.value=String(Ee($e.position)))),nt.append(at,tt);const fn=document.createElement("div");fn.className="we-gradient-stop-color";const bt=document.createElement("button");bt.type="button",bt.className="we-gradient-stop-color-static",bt.tabIndex=-1,bt.setAttribute("aria-label","é€‰ä¸­èŠ‚ç‚¹"),bt.title="ç¼–è¾‘é¢œè‰²";const pn=document.createElement("span");pn.className="we-gradient-stop-swatch",pn.style.backgroundColor=je.color;const mn=document.createElement("span");mn.className="we-gradient-stop-color-text",mn.textContent=$e.color.trim()||At.color,bt.append(pn,mn);const Rn=document.createElement("div");Rn.className="we-gradient-stop-color-editor",Be&&(Rn.append(A),P.isFocused()||(P.setValue($e.color),P.setPlaceholder(Hn($e.color)?ke.placeholderColor??"":""))),fn.append(bt,Rn);const qt=document.createElement("button");qt.type="button",qt.className="we-icon-btn we-gradient-stop-remove",qt.setAttribute("aria-label","ç§»é™¤èŠ‚ç‚¹");const Qa=!C.disabled&&Z.length>2;qt.disabled=!Qa,qt.textContent="â€“",qt.addEventListener("click",He=>{He.preventDefault(),He.stopPropagation(),x(ke.id)});const ri=()=>{queueMicrotask(()=>{$.focus(),$.select()})},ii=()=>{queueMicrotask(()=>{const He=A.querySelector("input.we-color-text");He==null||He.focus()})},Zn=He=>{u=ke.id,I(),He!=null&&He.focusColor&&ii(),He!=null&&He.focusPosition&&ri()};Ue.addEventListener("click",He=>{ke.id!==u&&(He.preventDefault(),Zn())}),Ue.addEventListener("keydown",He=>{var si;if(!N(He.target)){if(He.key==="ArrowUp"||He.key==="ArrowDown"){He.preventDefault(),He.stopPropagation();const ai=He.key==="ArrowUp"?Math.max(0,te-1):Math.min(Pe.length-1,te+1);if(ai===te)return;const Yo=(si=Pe[ai])==null?void 0:si.model;if(!Yo)return;u=Yo.id,I(),queueMicrotask(()=>{const qo=V.querySelector(`.we-gradient-stop-row[data-stop-id="${Yo.id}"]`);qo==null||qo.focus()});return}ke.id!==u&&(He.key==="Enter"||He.key===" ")&&(He.preventDefault(),Zn())}}),at.addEventListener("click",He=>{if(He.preventDefault(),He.stopPropagation(),ke.id===u){ri();return}Zn({focusPosition:!0})}),bt.addEventListener("click",He=>{if(He.preventDefault(),He.stopPropagation(),ke.id===u){ii();return}Zn({focusColor:!0})}),Ue.append(nt,fn,qt),V.append(Ue)}}function fe(){E.hidden=a==="none",j.hidden=a!=="linear",S.hidden=a!=="radial",T.hidden=a!=="radial",_.hidden=a!=="radial",H.hidden=a==="none",V.hidden=a==="none",R.disabled=C.disabled||a==="none"}function be(Z){C.disabled=Z,L.disabled=Z,g.disabled=Z,F.disabled=Z,D.disabled=Z,R.disabled=Z,$.disabled=Z||a==="none",P.setDisabled(Z||a==="none")}function Me(Z={}){var se;L.value=String(Do),g.value="ellipse",F.value="",D.value="",c=gn(),u=((se=c[0])==null?void 0:se.id)??null,Z.skipPreview||I()}function Ce(){return bn($)}function Ie(){return h!==null||bn(C)||bn(L)||bn(g)||bn(F)||bn(D)||Ce()||P.isFocused()}function Q(Z){return Z.map(se=>{const ge=se.color.trim()||At.color,Ee=et(se.position);return`${ge} ${Ee}%`}).join(", ")}function ce(Z){if(a==="none"||Z.length===0)return"none";const se=Q(Z);if(a==="linear")return`linear-gradient(${va(lo(L.value)??Do)}deg, ${se})`;const ge=g.value||"ellipse",Ee=F.value.trim(),Te=D.value.trim();if(!!!(Ee||Te))return`radial-gradient(${ge}, ${se})`;const te=et(lo(Ee)??nn),de=et(lo(Te)??nn);return`radial-gradient(${ge} at ${te}% ${de}%, ${se})`}function ue(Z){return Z.length===0?"linear-gradient(90deg, transparent, transparent)":`linear-gradient(90deg, ${Q(Z)})`}function Ne(){return(c.length>=2?c:gn()).map(se=>({color:se.color.trim()||At.color,position:et(se.position)}))}function me(){if(a==="none")return"none";const Z=Ne();return ce(Z)}function we(){if(s.isDisposed)return;const Z=p!==null,se=f!==null,ge=P.isFocused()||Ce();I({preserveThumbs:Z||se,refreshStopsList:Z||se?!1:!ge});const Ee=l;if(!Ee||!Ee.isConnected)return;const Te=Y();Te&&Te.set(me())}function Re(Z=!1){var Be;const se=l;if(!se||!se.isConnected){be(!0);const Ue=i?"none":"linear";a=Ue,C.value=Ue,Me(),fe(),I();return}if(be(!1),Ie()&&!Z)return;const ge=Lu(se,r),Te=!ge||/\bvar\s*\(/i.test(ge)?Du(se,r):"",Pe=ao(ge)?null:Fi(ge),te=ao(Te)?null:Fi(Te);let de=null,ke="none";if(ge.trim()?ao(ge)?(de=null,ke="none"):Pe?(de=Pe,ke="inline"):(de=null,ke="none"):ao(Te)?(de=null,ke="none"):te?(de=te,ke="computed"):(de=null,ke="none"),Me({skipPreview:!0}),!de){const Ue=i?"none":"linear";a=Ue,C.value=Ue,fe(),I();return}const $e=de.stops.length>=2?de.stops.slice():[{...At},{...Vr}];if(ke==="inline"&&Hn(ge)&&te){const Ue=Hu($e,te.stops);for(let nt=0;nt<$e.length;nt++)$e[nt].placeholderColor=Ue[nt]??""}c=Ru(c,$e),(!u||!c.some(Ue=>Ue.id===u))&&(u=((Be=c[0])==null?void 0:Be.id)??null),de.type==="linear"?(a="linear",C.value="linear",L.value=String(de.angle)):(a="radial",C.value="radial",g.value=de.shape,de.position?(F.value=String(de.position.x),D.value=String(de.position.y)):(F.value="",D.value="")),fe(),I()}function Le(Z){s.listen(Z,"input",we),s.listen(Z,"blur",()=>{z(),Re()}),s.listen(Z,"keydown",se=>{se.key==="Enter"?(se.preventDefault(),z(),Re(),Z.blur()):se.key==="Escape"&&(se.preventDefault(),J(),Re(!0))})}function Ve(Z,se){const ge=()=>{se==null||se(),we()};s.listen(Z,"input",ge),s.listen(Z,"change",ge),s.listen(Z,"blur",()=>{z(),Re()}),s.listen(Z,"keydown",Ee=>{Ee.key==="Enter"?(Ee.preventDefault(),z(),Re(),Z.blur()):Ee.key==="Escape"&&(Ee.preventDefault(),J(),Re(!0))})}Ve(C,()=>{a=C.value,fe()}),Ve(g),Le(L),Le(F),Le(D),s.listen(R,"click",Z=>{Z.preventDefault(),!R.disabled&&oe(Fe(),{focusColor:!0})}),s.listen(y,"dblclick",Z=>{p||a==="none"||C.disabled||Z.composedPath().some(ge=>ge instanceof HTMLElement&&ge.classList.contains("we-gradient-thumb"))||(Z.preventDefault(),oe(xe(Z.clientX),{focusColor:!0}))}),s.listen(d,"keydown",Z=>{if(Z.key!=="Delete"&&Z.key!=="Backspace"||p||a==="none"||C.disabled)return;const se=u;if(!se||N(Z.target))return;const ge=Z.composedPath();!ge.includes(V)&&!ge.includes(y)||(Z.preventDefault(),Z.stopPropagation(),x(se))});function Je(Z){s.isDisposed||(Z!==l&&z(),l=Z,Re(!0))}function ht(){s.isDisposed||Re()}function gt(){z(),l=null,s.dispose()}return C.value=a,Me(),fe(),Re(!0),{setTarget:Je,refresh:ht,dispose:gt}}const sn="http://www.w3.org/2000/svg",Gu=["100","200","300","400","500","600","700","800","900"],Aa=["left","center","right","justify"],Ta=["baseline","middle","top","bottom"],Wu=["solid","gradient"],$i=["inherit","system-ui","sans-serif","serif","monospace"],co="custom";function Na(){const e=document.createElementNS(sn,"svg");return e.setAttribute("viewBox","0 0 15 15"),e.setAttribute("fill","none"),e.setAttribute("aria-hidden","true"),e.setAttribute("focusable","false"),e}function ju(e){const t=Na(),n=document.createElementNS(sn,"rect");n.setAttribute("x","2"),n.setAttribute("y","2"),n.setAttribute("width","11"),n.setAttribute("height","11"),n.setAttribute("rx","1.5"),n.setAttribute("stroke","currentColor"),n.setAttribute("stroke-width","1"),n.setAttribute("stroke-dasharray","2 1"),n.setAttribute("fill","none"),n.setAttribute("opacity","0.5");const o={left:[[3.5,8],[3.5,5],[3.5,6.5]],center:[[3.5,8],[5,5],[4.25,6.5]],right:[[3.5,8],[6.5,5],[5.5,6.5]],justify:[[3.5,8],[3.5,8],[3.5,8]]},r=[4.5,7.5,10.5];return o[e].forEach(([s,l],a)=>{const c=document.createElementNS(sn,"rect");c.setAttribute("x",String(s)),c.setAttribute("y",String(r[a]-.5)),c.setAttribute("width",String(l)),c.setAttribute("height","1"),c.setAttribute("rx","0.5"),c.setAttribute("fill","currentColor"),t.append(c)}),t.prepend(n),t}function Uu(e){const t=Na(),n=document.createElementNS(sn,"rect");n.setAttribute("x","2"),n.setAttribute("y","2"),n.setAttribute("width","11"),n.setAttribute("height","11"),n.setAttribute("rx","1.5"),n.setAttribute("stroke","currentColor"),n.setAttribute("stroke-width","1"),n.setAttribute("stroke-dasharray","2 1"),n.setAttribute("fill","none"),n.setAttribute("opacity","0.5");const o={top:3.5,middle:5.5,bottom:7.5,baseline:6.5},r=document.createElementNS(sn,"rect");r.setAttribute("x","4"),r.setAttribute("y",String(o[e])),r.setAttribute("width","3"),r.setAttribute("height","4"),r.setAttribute("rx","0.5"),r.setAttribute("fill","currentColor");const i=document.createElementNS(sn,"rect");if(i.setAttribute("x","8"),i.setAttribute("y",String(o[e])),i.setAttribute("width","3"),i.setAttribute("height","4"),i.setAttribute("rx","0.5"),i.setAttribute("fill","currentColor"),t.append(n,r,i),e==="baseline"){const s=document.createElementNS(sn,"path");s.setAttribute("d","M3 10H12"),s.setAttribute("stroke","currentColor"),s.setAttribute("stroke-width","1"),s.setAttribute("stroke-dasharray","1.5 1"),t.append(s)}return t}function Xu(e){return Aa.includes(e)}function Yu(e){return Ta.includes(e)}function cr(e){try{const t=e.getRootNode();return t instanceof ShadowRoot?t.activeElement===e:document.activeElement===e}catch{return!1}}function St(e,t){var n,o;try{const r=e.style;return((o=(n=r==null?void 0:r.getPropertyValue)==null?void 0:n.call(r,t))==null?void 0:o.trim())??""}catch{return""}}function kt(e,t){try{return window.getComputedStyle(e).getPropertyValue(t).trim()}catch{return""}}function Ra(e){return/\b(?:linear|radial|conic)-gradient\s*\(/i.test(e.trim())}function qu(e){const t=e.trim().toLowerCase();return t?!!(t==="transparent"||/^rgba\([^)]*,\s*0\s*\)$/.test(t)):!1}function Oi(e){const t=St(e,"background-image")||kt(e,"background-image"),n=St(e,"-webkit-background-clip")||kt(e,"-webkit-background-clip"),o=St(e,"-webkit-text-fill-color")||kt(e,"-webkit-text-fill-color"),r=t&&t.toLowerCase()!=="none"&&Ra(t),i=n.toLowerCase().includes("text"),s=qu(o);return r&&i&&s?"gradient":"solid"}function Ku(e){const{container:t,transactionManager:n,tokensService:o}=e,r=new ze;let i=null,s="solid";const l=document.createElement("div");l.className="we-field-group";const a=document.createElement("div");a.className="we-field";const c=document.createElement("span");c.className="we-field-label",c.textContent="å­—ä½“";const u=document.createElement("div");u.className="we-field-content",u.style.display="flex",u.style.flexDirection="column",u.style.gap="4px";const p=document.createElement("select");p.className="we-select",p.setAttribute("aria-label","å­—ä½“ç³»åˆ—");for(const x of $i){const N=document.createElement("option");N.value=x,N.textContent=x,p.append(N)}const f=document.createElement("option");f.value=co,f.textContent="è‡ªå®šä¹‰â€¦",p.append(f);const h=qe({ariaLabel:"è‡ªå®šä¹‰å­—ä½“ç³»åˆ—",prefix:null,suffix:null,placeholder:"ä¾‹å¦‚ Inter, system-ui"});h.root.style.display="none",h.input.disabled=!0,u.append(p,h.root),a.append(c,u);const d=document.createElement("div");d.className="we-field";const b=document.createElement("span");b.className="we-field-label",b.textContent="å­—å·";const m=qe({ariaLabel:"å­—å·",inputMode:"decimal",prefix:null,suffix:"px"});d.append(b,m.root);const w=document.createElement("div");w.className="we-field";const M=document.createElement("span");M.className="we-field-label",M.textContent="å­—é‡";const C=document.createElement("select");C.className="we-select",C.setAttribute("aria-label","å­—é‡");for(const x of Gu){const N=document.createElement("option");N.value=x,N.textContent=x,C.append(N)}w.append(M,C);const E=document.createElement("div");E.className="we-field";const y=document.createElement("span");y.className="we-field-label",y.textContent="è¡Œé«˜";const k=qe({ariaLabel:"è¡Œé«˜",inputMode:"decimal",prefix:null,suffix:null});E.append(y,k.root);const j=document.createElement("div");j.className="we-field";const L=document.createElement("span");L.className="we-field-label",L.textContent="å­—è·";const S=qe({ariaLabel:"å­—è·",inputMode:"decimal",prefix:null,suffix:"px"});j.append(L,S.root),Ke(r,m.input,{mode:"css-length"}),Ke(r,k.input,{mode:"css-length",step:.1,shiftStep:1,altStep:.01}),Ke(r,S.input,{mode:"css-length",step:.1,shiftStep:1,altStep:.01});const g=document.createElement("div");g.className="we-field";const T=document.createElement("span");T.className="we-field-label",T.textContent="æ–‡æœ¬å¯¹é½";const F=document.createElement("div");F.className="we-field-content",g.append(T,F);const _=document.createElement("div");_.className="we-field";const D=document.createElement("span");D.className="we-field-label",D.textContent="å‚ç›´å¯¹é½";const H=document.createElement("div");H.className="we-field-content",_.append(D,H);const v=document.createElement("div");v.className="we-field";const R=document.createElement("span");R.className="we-field-label",R.textContent="ç±»å‹";const V=document.createElement("select");V.className="we-select",V.setAttribute("aria-label","æ–‡æœ¬é¢œè‰²ç±»å‹");for(const x of Wu){const N=document.createElement("option");N.value=x,N.textContent=x==="solid"?"çº¯è‰²":"æ¸å˜",V.append(N)}v.append(R,V);const B=document.createElement("div");B.className="we-field";const $=document.createElement("span");$.className="we-field-label",$.textContent="é¢œè‰²";const q=document.createElement("div");q.style.minWidth="0",B.append($,q);const ne=document.createElement("div"),A=document.createElement("div");A.className="we-field-row",d.style.flex="1",d.style.minWidth="0",w.style.flex="1",w.style.minWidth="0",A.append(d,w);const P=document.createElement("div");P.className="we-field-row",E.style.flex="1",E.style.minWidth="0",j.style.flex="1",j.style.minWidth="0",P.append(E,j),l.append(a,A,P,g,_,v,B,ne),t.append(l),r.add(()=>l.remove());const Y=Gt({container:F,ariaLabel:"æ–‡æœ¬å¯¹é½",columns:4,items:Aa.map(x=>{const N={left:"å·¦å¯¹é½",center:"å±…ä¸­",right:"å³å¯¹é½",justify:"ä¸¤ç«¯å¯¹é½"}[x];return{value:x,ariaLabel:N,title:N,icon:ju(x)}}),onChange:x=>{const N=xe("text-align");N&&N.set(x),ae("text-align"),Ae()}});r.add(()=>Y.dispose());const z=Gt({container:H,ariaLabel:"å‚ç›´å¯¹é½",columns:4,items:Ta.map(x=>{const N={baseline:"åŸºçº¿",middle:"å±…ä¸­",top:"é¡¶å¯¹é½",bottom:"åº•å¯¹é½"}[x];return{value:x,ariaLabel:N,title:N,icon:Uu(x)}}),onChange:x=>{const N=xe("vertical-align");N&&N.set(x),ae("vertical-align"),Ae()}});r.add(()=>z.dispose());const J=Kn({container:q,ariaLabel:"æ–‡æœ¬é¢œè‰²",tokensService:o,getTokenTarget:()=>i,onInput:x=>{const N=xe("color");N&&N.set(x)},onCommit:()=>{ae("color"),Ae()},onCancel:()=>{ee("color"),ve("color",!0)}});r.add(()=>J.dispose());const pe=ei({container:ne,transactionManager:n,tokensService:o,property:"background-image",allowNone:!1});r.add(()=>pe.dispose());const he={"font-family":{kind:"font-family",property:"font-family",select:p,custom:h,controlsContainer:u,handle:null},"font-size":{kind:"standard",property:"font-size",element:m.input,container:m,handle:null},"font-weight":{kind:"standard",property:"font-weight",element:C,handle:null},"line-height":{kind:"standard",property:"line-height",element:k.input,container:k,handle:null},"letter-spacing":{kind:"standard",property:"letter-spacing",element:S.input,container:S,handle:null},"text-align":{kind:"text-align",property:"text-align",group:Y,handle:null},"vertical-align":{kind:"vertical-align",property:"vertical-align",group:z,handle:null},color:{kind:"color",property:"color",field:J,handle:null}},Se=["font-family","font-size","font-weight","line-height","letter-spacing","text-align","vertical-align","color"];function xe(x){if(r.isDisposed)return null;const N=i;if(!N||!N.isConnected)return null;const I=he[x];if(I.handle)return I.handle;const K=n.beginStyle(N,x);return I.handle=K,K}function ae(x){const N=he[x],I=N.handle;N.handle=null,I&&I.commit({merge:!0})}function ee(x){const N=he[x],I=N.handle;N.handle=null,I&&I.rollback()}function O(){for(const x of Se)ae(x)}function ie(){B.hidden=s!=="solid",ne.hidden=s!=="gradient"}function ye(x){const N=i;if(s=x,V.value=x,ie(),!N||!N.isConnected)return;ae("color");const I=n.beginMultiStyle(N,["background-image","-webkit-background-clip","-webkit-text-fill-color"]);if(I){if(x==="solid")I.set({"background-image":"","-webkit-background-clip":"","-webkit-text-fill-color":""});else{const K=St(N,"background-image"),W=kt(N,"background-image"),G=K||W,U=G&&Ra(G)?G:"linear-gradient(90deg, #000000, #ffffff)";I.set({"background-image":U,"-webkit-background-clip":"text","-webkit-text-fill-color":"transparent"})}I.commit({merge:!0})}}r.listen(V,"change",()=>{const x=V.value;ye(x),pe.refresh(),Ae()});function ve(x,N=!1){var X;const I=he[x],K=i;if(I.kind==="font-family"){const U=$i;if(!K||!K.isConnected){I.select.disabled=!0,I.select.value=U[0]??"inherit",I.custom.input.disabled=!0,I.custom.input.value="",I.custom.root.style.display="none";return}if(I.select.disabled=!1,(I.handle!==null||cr(I.select)||cr(I.custom.input))&&!N)return;const fe=St(K,x)||kt(K,x),be=fe.trim().toLowerCase();U.includes(be)?(I.select.value=be,I.custom.root.style.display="none",I.custom.input.disabled=!0):(I.select.value=co,I.custom.root.style.display="",I.custom.input.disabled=!1,I.custom.input.value=fe);return}if(I.kind==="text-align"){const U=I.group;if(!K||!K.isConnected){U.setDisabled(!0),U.setValue(null);return}if(U.setDisabled(!1),I.handle!==null&&!N)return;const re=St(K,x),fe=kt(K,x),be=(re||fe).trim();U.setValue(Xu(be)?be:"left");return}if(I.kind==="vertical-align"){const U=I.group;if(!K||!K.isConnected){U.setDisabled(!0),U.setValue(null);return}if(U.setDisabled(!1),I.handle!==null&&!N)return;const re=St(K,x),fe=kt(K,x),be=(re||fe).trim();U.setValue(Yu(be)?be:"baseline");return}if(I.kind==="color"){const U=I.field;if(!K||!K.isConnected){U.setDisabled(!0),U.setValue(""),U.setPlaceholder("");return}if(U.setDisabled(!1),(I.handle!==null||U.isFocused())&&!N)return;const re=St(K,x),fe=kt(K,x);re?(U.setValue(re),U.setPlaceholder(/\bvar\s*\(/i.test(re)?fe:"")):(U.setValue(fe),U.setPlaceholder(""));return}const W=I.element;if(!K||!K.isConnected){W.disabled=!0,W instanceof HTMLInputElement&&(W.value="",W.placeholder="",I.container&&(x==="font-size"||x==="letter-spacing"?I.container.setSuffix("px"):x==="line-height"&&I.container.setSuffix(null)));return}W.disabled=!1;const G=I.handle!==null||cr(W);if(W instanceof HTMLInputElement){if(G&&!N)return;const le=St(K,x)||kt(K,x);if(I.container)if(x==="font-size"||x==="letter-spacing"){const re=pt(le);W.value=re.value,I.container.setSuffix(re.suffix)}else if(x==="line-height")if(wc(le)){const re=pt(le);W.value=re.value,I.container.setSuffix(re.suffix)}else W.value=le,I.container.setSuffix(null);else W.value=le;else W.value=le;W.placeholder=""}else{const U=St(K,x),le=kt(K,x);if(G&&!N)return;const re=U||le,fe=Array.from(W.options).some(be=>be.value===re);W.value=fe?re:((X=W.options[0])==null?void 0:X.value)??""}}function Ae(){for(const N of Se)ve(N);const x=!!(i&&i.isConnected);V.disabled=!x,ie()}function De(x){const N=he[x];if(N.kind!=="standard")return;const I=N.element,K=()=>{const W=xe(x);W&&W.set(I.value)};r.listen(I,"input",K),r.listen(I,"change",K),r.listen(I,"blur",()=>{ae(x),Ae()}),r.listen(I,"keydown",W=>{W.key==="Enter"?(W.preventDefault(),ae(x),Ae(),I.blur()):W.key==="Escape"&&(W.preventDefault(),ee(x),ve(x,!0))})}function Oe(x,N=I=>I.trim()){const I=he[x];if(I.kind!=="standard")return;const K=I.element;r.listen(K,"input",()=>{var X;const W=xe(x);if(!W)return;const G=((X=I.container)==null?void 0:X.getSuffixText())??null;W.set(N(K.value,G))}),r.listen(K,"blur",()=>{ae(x),Ae()}),r.listen(K,"keydown",W=>{W.key==="Enter"?(W.preventDefault(),ae(x),Ae(),K.blur()):W.key==="Escape"&&(W.preventDefault(),ee(x),ve(x,!0))})}function We(){const x=he["font-family"];if(x.kind!=="font-family")return;const{select:N,custom:I,controlsContainer:K}=x,W=()=>{const X=N.value===co;I.root.style.display=X?"":"none",I.input.disabled=!X,X&&I.input.focus()},G=()=>{if(W(),N.value===co)return;const X=xe("font-family");X&&X.set(N.value)};r.listen(N,"input",G),r.listen(N,"change",G),r.listen(I.input,"input",()=>{const X=xe("font-family");X&&X.set(I.input.value.trim())}),r.listen(K,"focusout",X=>{const U=X.relatedTarget;U instanceof Node&&K.contains(U)||(ae("font-family"),Ae())}),r.listen(N,"keydown",X=>{X.key==="Enter"?(X.preventDefault(),ae("font-family"),Ae(),N.blur()):X.key==="Escape"&&(X.preventDefault(),ee("font-family"),ve("font-family",!0))}),r.listen(I.input,"keydown",X=>{X.key==="Enter"?(X.preventDefault(),ae("font-family"),Ae(),I.input.blur()):X.key==="Escape"&&(X.preventDefault(),ee("font-family"),ve("font-family",!0))})}We(),Oe("font-size",mt),De("font-weight"),Oe("line-height",(x,N)=>{const I=x.trim();return I?/[a-zA-Z%]/.test(I)?I:N?`${I}${N}`:I:""}),Oe("letter-spacing",mt);function Fe(x){r.isDisposed||(x!==i&&O(),i=x,x&&x.isConnected?s=Oi(x):s="solid",V.value=s,ie(),pe.setTarget(x),Ae())}function _e(){if(r.isDisposed)return;const x=i;if(x&&x.isConnected){const N=Oi(x);N!==s&&(s=N,V.value=N)}pe.refresh(),Ae()}function oe(){O(),i=null,r.dispose()}return Ae(),{setTarget:Fe,refresh:_e,dispose:oe}}function Zu(e){const{sliderAriaLabel:t,inputAriaLabel:n,min:o,max:r,step:i,inputMode:s="decimal",inputWidthPx:l=72}=e,a=document.createElement("div");a.className="we-slider-input";const c=document.createElement("input");c.type="range",c.className="we-slider-input__slider",c.min=String(o),c.max=String(r),c.step=String(i),c.value=String(o),c.setAttribute("aria-label",t);function u(){const m=parseFloat(c.value),w=parseFloat(c.min),M=parseFloat(c.max),C=(m-w)/(M-w)*100;c.style.setProperty("--progress",`${C}%`)}u(),c.addEventListener("input",u);const p=qe({ariaLabel:n,inputMode:s,prefix:null,suffix:null,rootClassName:"we-slider-input__number"});p.root.style.width=`${l}px`,p.root.style.flex="0 0 auto",a.append(c,p.root);function f(m){c.disabled=m,p.input.disabled=m}function h(m){c.disabled=m}function d(m){const w=String(m);c.value=w,p.input.value=w,u()}function b(m){c.value=String(m),u()}return{root:a,slider:c,input:p.input,inputContainer:p,setDisabled:f,setSliderDisabled:h,setValue:d,setSliderValue:b}}const Ju=["visible","hidden","scroll","auto"],Qu=["content-box","border-box"];function ur(e){try{const t=e.getRootNode();return t instanceof ShadowRoot?t.activeElement===e:document.activeElement===e}catch{return!1}}function dr(e){return e.trim()}const ed=/^-?(?:(?:\d+\.\d+)|(?:\d+\.)|(?:\d+)|(?:\.\d+))$/;function uo(e){if(!Number.isFinite(e))return 1;const t=Math.min(1,Math.max(0,e));return Object.is(t,-0)?0:t}function fo(e){const t=e.trim();if(!t||!ed.test(t))return null;const n=t.endsWith(".")?t.slice(0,-1):t,o=Number(n);return Number.isFinite(o)?o:null}function Vi(e,t){var n,o;try{const r=e.style;return((o=(n=r==null?void 0:r.getPropertyValue)==null?void 0:n.call(r,t))==null?void 0:o.trim())??""}catch{return""}}function Bi(e,t){try{return window.getComputedStyle(e).getPropertyValue(t).trim()}catch{return""}}function td(e){const{container:t,transactionManager:n}=e,o=new ze;let r=null;const i=document.createElement("div");i.className="we-field-group";function s(F,_,D,H){const v=document.createElement("div");v.className="we-field";const R=document.createElement("span");R.className="we-field-label",R.textContent=F;const V=document.createElement("select");V.className="we-select",V.setAttribute("aria-label",_);for(const B of D){const $=document.createElement("option");$.value=B,$.textContent=(H==null?void 0:H[B])??B,V.appendChild($)}return v.append(R,V),{row:v,select:V}}const{row:l,select:a}=s("æº¢å‡º","æº¢å‡º",Ju,{visible:"å¯è§",hidden:"éšè—",scroll:"æ»šåŠ¨",auto:"è‡ªåŠ¨"}),{row:c,select:u}=s("ç›’æ¨¡å‹","ç›’æ¨¡å‹",Qu,{"content-box":"å†…å®¹ç›’","border-box":"è¾¹æ¡†ç›’"}),p=document.createElement("div");p.className="we-field";const f=document.createElement("span");f.className="we-field-label",f.textContent="ä¸é€æ˜åº¦";const h=document.createElement("div");h.className="we-field-content",p.append(f,h);const d=Zu({sliderAriaLabel:"ä¸é€æ˜åº¦æ»‘å—",inputAriaLabel:"ä¸é€æ˜åº¦",min:0,max:1,step:.01,inputMode:"decimal",inputWidthPx:72});h.append(d.root),Ke(o,d.input,{mode:"number",min:0,max:1,step:.01,shiftStep:.1,altStep:.001}),i.append(l,c,p),t.appendChild(i),o.add(()=>i.remove());const b={overflow:{kind:"select",property:"overflow",element:a,handle:null},"box-sizing":{kind:"select",property:"box-sizing",element:u,handle:null},opacity:{kind:"opacity",property:"opacity",control:d,handle:null}},m=["overflow","box-sizing","opacity"];function w(F){if(o.isDisposed)return null;const _=r;if(!_||!_.isConnected)return null;const D=b[F];if(D.handle)return D.handle;const H=n.beginStyle(_,F);return D.handle=H,H}function M(F){const _=b[F],D=_.handle;_.handle=null,D&&D.commit({merge:!0})}function C(F){const _=b[F],D=_.handle;_.handle=null,D&&D.rollback()}function E(){for(const F of m)M(F)}function y(F,_=!1){var v;const D=b[F],H=r;if(D.kind==="opacity"){const{slider:R,input:V}=D.control;if(!H||!H.isConnected){D.control.setDisabled(!0),R.value="0",V.value="",V.placeholder="";return}if(D.control.setDisabled(!1),(D.handle!==null||ur(R)||ur(V))&&!_)return;const $=Vi(H,F),q=Bi(H,F),ne=$||q;V.value=ne,V.placeholder="";const A=fo(ne),P=fo(q);if($&&A===null){D.control.setSliderDisabled(!0),P!==null&&D.control.setSliderValue(uo(P));return}const Y=A??P??1;D.control.setSliderDisabled(!1),D.control.setSliderValue(uo(Y))}else{const R=D.element;if(!H||!H.isConnected){R.disabled=!0;return}if(R.disabled=!1,(D.handle!==null||ur(R))&&!_)return;const B=Vi(H,F),$=Bi(H,F),q=B||$,ne=Array.from(R.options).some(A=>A.value===q);R.value=ne?q:((v=R.options[0])==null?void 0:v.value)??""}}function k(){for(const F of m)y(F)}function j(){const F=b.opacity;if(F.kind!=="opacity")return;const{slider:_,input:D}=F.control,H=()=>{const v=dr(D.value),R=fo(v);if(R!==null){const V=uo(R),B=String(V);if(v!==B){D.value=B;const $=F.handle;$&&$.set(B)}}M("opacity"),k()};o.listen(_,"input",()=>{if(_.disabled)return;D.value=_.value;const v=w("opacity");v&&v.set(dr(_.value))}),o.listen(_,"change",H),o.listen(_,"blur",H),o.listen(_,"keydown",v=>{v.key==="Enter"?(v.preventDefault(),M("opacity"),k(),_.blur()):v.key==="Escape"&&(v.preventDefault(),C("opacity"),y("opacity",!0))}),o.listen(D,"input",()=>{const v=dr(D.value),R=w("opacity");R&&R.set(v);const V=fo(v);if(V===null){F.control.setSliderDisabled(v.length>0);return}F.control.setSliderDisabled(!1),F.control.setSliderValue(uo(V))}),o.listen(D,"blur",H),o.listen(D,"keydown",v=>{v.key==="Enter"?(v.preventDefault(),M("opacity"),k(),D.blur()):v.key==="Escape"&&(v.preventDefault(),C("opacity"),y("opacity",!0))})}function L(F){const _=b[F];if(_.kind!=="select")return;const D=_.element,H=()=>{const v=w(F);v&&v.set(D.value)};o.listen(D,"input",H),o.listen(D,"change",H),o.listen(D,"blur",()=>{M(F),k()}),o.listen(D,"keydown",v=>{v.key==="Enter"?(v.preventDefault(),M(F),k(),D.blur()):v.key==="Escape"&&(v.preventDefault(),C(F),y(F,!0))})}L("overflow"),L("box-sizing"),j();function S(F){o.isDisposed||(F!==r&&E(),r=F,k())}function g(){o.isDisposed||k()}function T(){E(),r=null,o.dispose()}return k(),{setTarget:S,refresh:g,dispose:T}}const cn="http://www.w3.org/2000/svg",nd=["solid","dashed","dotted","none"],od=["solid","gradient"],rd=["all","top","right","bottom","left"],Kt=["top-left","top-right","bottom-right","bottom-left"],wn={"top-left":"border-top-left-radius","top-right":"border-top-right-radius","bottom-right":"border-bottom-right-radius","bottom-left":"border-bottom-left-radius"},id=["border-radius","border-top-left-radius","border-top-right-radius","border-bottom-right-radius","border-bottom-left-radius"];function po(e){try{const t=e.getRootNode();return t instanceof ShadowRoot?t.activeElement===e:document.activeElement===e}catch{return!1}}function dt(e,t){var n,o;try{const r=e.style;return((o=(n=r==null?void 0:r.getPropertyValue)==null?void 0:n.call(r,t))==null?void 0:o.trim())??""}catch{return""}}function ot(e,t){try{return window.getComputedStyle(e).getPropertyValue(t).trim()}catch{return""}}function zi(e){const t=e.trim().toLowerCase();return!t||t==="none"?"solid":/\b(?:linear|radial|conic)-gradient\s*\(/i.test(t)?"gradient":"solid"}function sd(e){const t=document.createElementNS(cn,"svg");t.setAttribute("viewBox","0 0 15 15"),t.setAttribute("fill","none"),t.setAttribute("aria-hidden","true"),t.setAttribute("focusable","false");const n=document.createElementNS(cn,"rect");n.setAttribute("x","3.5"),n.setAttribute("y","3.5"),n.setAttribute("width","8"),n.setAttribute("height","8"),n.setAttribute("stroke","currentColor"),n.setAttribute("stroke-width","1"),n.setAttribute("opacity","0.4"),t.appendChild(n);const o=document.createElementNS(cn,"path");switch(o.setAttribute("stroke","currentColor"),o.setAttribute("stroke-width","2"),o.setAttribute("stroke-linecap","round"),e){case"all":o.setAttribute("d","M3.5 3.5h8v8h-8z");break;case"top":o.setAttribute("d","M3.5 3.5h8");break;case"right":o.setAttribute("d","M11.5 3.5v8");break;case"bottom":o.setAttribute("d","M3.5 11.5h8");break;case"left":o.setAttribute("d","M3.5 3.5v8");break}return t.appendChild(o),t}function ad(){const e=document.createElementNS(cn,"svg");e.setAttribute("viewBox","0 0 15 15"),e.setAttribute("fill","none"),e.setAttribute("aria-hidden","true"),e.setAttribute("focusable","false");const t=document.createElementNS(cn,"path");return t.setAttribute("stroke","currentColor"),t.setAttribute("stroke-width","1.5"),t.setAttribute("stroke-linecap","round"),t.setAttribute("stroke-linejoin","round"),t.setAttribute("d","M4 6V4H6 M9 4H11V6 M11 9V11H9 M6 11H4V9"),e.appendChild(t),e}function mo(e){const t=document.createElementNS(cn,"svg");t.setAttribute("viewBox","0 0 15 15"),t.setAttribute("fill","none"),t.setAttribute("aria-hidden","true"),t.setAttribute("focusable","false");const n=document.createElementNS(cn,"path");switch(n.setAttribute("stroke","currentColor"),n.setAttribute("stroke-width","1.5"),n.setAttribute("stroke-linecap","round"),n.setAttribute("stroke-linejoin","round"),e){case"top-left":n.setAttribute("d","M11 4H6Q4 4 4 6V11");break;case"top-right":n.setAttribute("d","M4 4H9Q11 4 11 6V11");break;case"bottom-right":n.setAttribute("d","M11 4V9Q11 11 9 11H4");break;case"bottom-left":n.setAttribute("d","M4 4V9Q4 11 6 11H11");break}return t.appendChild(n),t}function ld(e){const{container:t,transactionManager:n,tokensService:o}=e,r=new ze;let i=null,s="all",l="solid";const a=document.createElement("div");a.className="we-field-group";function c(oe,x,N,I){const K=document.createElement("div");K.className="we-field";const W=document.createElement("span");W.className="we-field-label",W.textContent=oe;const G=document.createElement("select");G.className="we-select",G.setAttribute("aria-label",x);for(const X of N){const U=document.createElement("option");U.value=X,U.textContent=I&&I[X]||X,G.appendChild(U)}return K.append(W,G),{row:K,select:G}}function u(oe){const x=document.createElement("div");x.className="we-field";const N=document.createElement("span");N.className="we-field-label",N.textContent=oe;const I=document.createElement("div");return I.style.flex="1",I.style.minWidth="0",x.append(N,I),{row:x,colorFieldContainer:I}}const p=document.createElement("div");p.className="we-field";const f=document.createElement("span");f.className="we-field-label",f.textContent="è¾¹";const h=document.createElement("div");h.style.flex="1",p.append(f,h);const d=document.createElement("div");d.className="we-field";const b=document.createElement("span");b.className="we-field-label",b.textContent="å®½åº¦";const m=qe({ariaLabel:"è¾¹æ¡†å®½åº¦",inputMode:"decimal",prefix:null,suffix:"px"});d.append(b,m.root);const w=m.input,{row:M,select:C}=c("æ ·å¼","è¾¹æ¡†æ ·å¼",nd,{solid:"å®çº¿",dashed:"è™šçº¿",dotted:"ç‚¹çº¿",none:"æ— "}),{row:E,select:y}=c("ç±»å‹","è¾¹æ¡†é¢œè‰²ç±»å‹",od,{solid:"çº¯è‰²",gradient:"æ¸å˜"}),{row:k,colorFieldContainer:j}=u("é¢œè‰²"),L=document.createElement("div"),S=document.createElement("div");S.className="we-field";const g=document.createElement("span");g.className="we-field-label",g.textContent="åœ†è§’";const T=document.createElement("div");T.className="we-radius-control";const F=document.createElement("div");F.className="we-field-row";const _=qe({ariaLabel:"åœ†è§’",inputMode:"decimal",prefix:null,suffix:"px"});_.root.style.flex="1";const D=document.createElement("button");D.type="button",D.className="we-toggle-btn",D.setAttribute("aria-label","ç¼–è¾‘åœ†è§’"),D.setAttribute("aria-pressed","false"),D.dataset.tooltip="ç¼–è¾‘åœ†è§’",D.append(ad()),F.append(_.root,D);const H=document.createElement("div");H.className="we-radius-corners-grid",H.hidden=!0;const v={"top-left":qe({ariaLabel:"å·¦ä¸Šåœ†è§’",inputMode:"decimal",prefix:mo("top-left"),suffix:"px"}),"top-right":qe({ariaLabel:"å³ä¸Šåœ†è§’",inputMode:"decimal",prefix:mo("top-right"),suffix:"px"}),"bottom-left":qe({ariaLabel:"å·¦ä¸‹åœ†è§’",inputMode:"decimal",prefix:mo("bottom-left"),suffix:"px"}),"bottom-right":qe({ariaLabel:"å³ä¸‹åœ†è§’",inputMode:"decimal",prefix:mo("bottom-right"),suffix:"px"})};H.append(v["top-left"].root,v["top-right"].root,v["bottom-left"].root,v["bottom-right"].root),T.append(F),S.append(g,T);const R={kind:"border-radius",property:"border-radius",root:S,unified:_,toggleButton:D,cornersGrid:H,corners:v,handle:null,expanded:!1,mode:null,cornersMaterialized:!1},V=document.createElement("div");V.className="we-field-row",d.style.flex="1",d.style.minWidth="0",S.style.flex="1",S.style.minWidth="0",V.append(d,S),Ke(r,w,{mode:"css-length"}),Ke(r,_.input,{mode:"css-length"});for(const oe of Kt)Ke(r,v[oe].input,{mode:"css-length"});a.append(p,V,H,M,E,k,L),t.appendChild(a),r.add(()=>a.remove());const B=Gt({container:h,ariaLabel:"è¾¹æ¡†è¾¹ç¼˜",columns:5,value:s,items:rd.map(oe=>{const x={all:"å…¨éƒ¨",top:"ä¸Š",right:"å³",bottom:"ä¸‹",left:"å·¦"};return{value:oe,ariaLabel:x[oe],title:x[oe],icon:sd(oe)}}),onChange:oe=>{oe!==s&&(J("border-width"),J("border-style"),J("border-color"),s=oe,ve())}});r.add(()=>B.dispose());const $=Kn({container:j,ariaLabel:"è¾¹æ¡†é¢œè‰²",tokensService:o,getTokenTarget:()=>i,onInput:oe=>{const x=z("border-color");x&&x.set(oe)},onCommit:()=>{J("border-color"),ve()},onCancel:()=>{pe("border-color"),ye("border-color",!0)}});r.add(()=>$.dispose());const q=ei({container:L,transactionManager:n,tokensService:o,property:"border-image-source",allowNone:!0});r.add(()=>q.dispose());const ne={"border-width":{kind:"text",property:"border-width",element:w,handle:null},"border-style":{kind:"select",property:"border-style",element:C,handle:null},"border-color":{kind:"color",property:"border-color",field:$,handle:null},"border-radius":R},A=["border-width","border-style","border-color","border-radius"];function P(oe){return s==="all"?`border-${oe}`:`border-${s}-${oe}`}function Y(oe){return oe==="border-width"?P("width"):oe==="border-style"?P("style"):oe==="border-color"?P("color"):oe}function z(oe){if(r.isDisposed)return null;const x=i;if(!x||!x.isConnected)return null;const N=ne[oe];if(N.kind==="border-radius")return null;if(N.handle)return N.handle;const I=Y(oe),K=n.beginStyle(x,I);return N.handle=K,K}function J(oe){const x=ne[oe];if(x.kind==="border-radius")return;const N=x.handle;x.handle=null,N&&N.commit({merge:!0})}function pe(oe){const x=ne[oe];if(x.kind==="border-radius")return;const N=x.handle;x.handle=null,N&&N.rollback()}function he(){if(r.isDisposed)return null;const oe=ne["border-radius"];if(oe.kind!=="border-radius")return null;const x=i;if(!x||!x.isConnected)return null;if(oe.handle)return oe.handle;const N=n.beginMultiStyle(x,[...id]);return oe.handle=N,oe.mode=null,oe.cornersMaterialized=!1,N}function Se(){const oe=ne["border-radius"];if(oe.kind!=="border-radius")return;const x=oe.handle;oe.handle=null,oe.mode=null,oe.cornersMaterialized=!1,x&&x.commit({merge:!0})}function xe(){const oe=ne["border-radius"];if(oe.kind!=="border-radius")return;const x=oe.handle;oe.handle=null,oe.mode=null,oe.cornersMaterialized=!1,x&&x.rollback()}function ae(){for(const oe of A)J(oe);Se()}function ee(){k.hidden=l!=="solid",L.hidden=l!=="gradient"}function O(){const oe=!!(i&&i.isConnected);l==="gradient"&&(s!=="all"&&(J("border-width"),J("border-style"),J("border-color"),s="all"),B.setValue("all")),B.setDisabled(!oe||l==="gradient")}function ie(oe){const x=i;if(l=oe,y.value=oe,ee(),O(),!x||!x.isConnected)return;const N=n.beginMultiStyle(x,["border-image-source","border-image-slice"]);if(N){if(oe==="solid")N.set({"border-image-source":"none","border-image-slice":""});else{const I=dt(x,"border-image-source"),K=ot(x,"border-image-source"),W=I||K,X=W&&W.trim()&&W.trim().toLowerCase()!=="none"&&/\b(?:linear|radial|conic)-gradient\s*\(/i.test(W)?W:"linear-gradient(90deg, #000000, #ffffff)";N.set({"border-image-source":X,"border-image-slice":"1"})}N.commit({merge:!0})}}r.listen(y,"change",()=>{const oe=y.value;ie(oe),q.refresh(),ve()});function ye(oe,x=!1){var W;const N=ne[oe],I=i,K=Y(oe);if(N.kind==="border-radius"){const G=!!(I&&I.isConnected);N.unified.input.disabled=!G,N.toggleButton.disabled=!G;for(const re of Kt)N.corners[re].input.disabled=!G;if(!G||!I){N.unified.input.value="",N.unified.input.placeholder="",N.unified.setSuffix("px");for(const re of Kt)N.corners[re].input.value="",N.corners[re].input.placeholder="",N.corners[re].setSuffix("px");return}const X=Kt.some(re=>po(N.corners[re].input));if((N.handle!==null||po(N.unified.input)||X)&&!x)return;const le=dt(I,"border-radius");if(le){const re=pt(le);N.unified.input.value=re.value,N.unified.setSuffix(re.suffix)}else{const re=ot(I,wn["top-left"]),fe=ot(I,wn["top-right"]),be=ot(I,wn["bottom-right"]),Me=ot(I,wn["bottom-left"]),Ce=re===fe&&re===be&&re===Me?re:ot(I,"border-radius"),Ie=pt(Ce);N.unified.input.value=Ie.value,N.unified.setSuffix(Ie.suffix)}N.unified.input.placeholder="";for(const re of Kt){const fe=wn[re],be=dt(I,fe),Me=ot(I,fe),Ie=pt(be||Me);N.corners[re].input.value=Ie.value,N.corners[re].input.placeholder="",N.corners[re].setSuffix(Ie.suffix)}return}if(N.kind==="text"){const G=N.element;if(!I||!I.isConnected){G.disabled=!0,G.value="",G.placeholder="",oe==="border-width"&&m.setSuffix("px");return}if(G.disabled=!1,(N.handle!==null||po(G))&&!x)return;const U=dt(I,K),le=ot(I,K);if(oe==="border-width"){const re=pt(U||le);G.value=re.value,m.setSuffix(re.suffix)}else G.value=U||le;G.placeholder=""}else if(N.kind==="select"){const G=N.element;if(!I||!I.isConnected){G.disabled=!0;return}if(G.disabled=!1,(N.handle!==null||po(G))&&!x)return;const U=dt(I,K),le=ot(I,K),re=U||le,fe=Array.from(G.options).some(be=>be.value===re);G.value=fe?re:((W=G.options[0])==null?void 0:W.value)??""}else{const G=N.field;if(!I||!I.isConnected){G.setDisabled(!0),G.setValue(""),G.setPlaceholder("");return}if(G.setDisabled(!1),(N.handle!==null||G.isFocused())&&!x)return;const U=dt(I,K),le=ot(I,K);U?(G.setValue(U),G.setPlaceholder(/\bvar\s*\(/i.test(U)?le:"")):(G.setValue(le),G.setPlaceholder(""))}}function ve(){for(const x of A)ye(x);const oe=!!(i&&i.isConnected);y.disabled=!oe,ee(),O()}function Ae(oe){const x=ne[oe];if(x.kind!=="text")return;const N=x.element,I=()=>mt(N.value,m.getSuffixText());r.listen(N,"input",()=>{const K=z(oe);K&&K.set(I())}),r.listen(N,"blur",()=>{J(oe),ve()}),r.listen(N,"keydown",K=>{K.key==="Enter"?(K.preventDefault(),J(oe),ve(),N.blur()):K.key==="Escape"&&(K.preventDefault(),pe(oe),ye(oe,!0))})}function De(oe){const x=ne[oe];if(x.kind!=="select")return;const N=x.element,I=()=>{const K=z(oe);K&&K.set(N.value)};r.listen(N,"input",I),r.listen(N,"change",I),r.listen(N,"blur",()=>{J(oe),ve()}),r.listen(N,"keydown",K=>{K.key==="Enter"?(K.preventDefault(),J(oe),ve(),N.blur()):K.key==="Escape"&&(K.preventDefault(),pe(oe),ye(oe,!0))})}function Oe(){const oe=ne["border-radius"];if(oe.kind!=="border-radius")return;const x=W=>{oe.expanded=W,oe.cornersGrid.hidden=!W,oe.toggleButton.setAttribute("aria-pressed",W?"true":"false")};x(!1),r.listen(oe.toggleButton,"click",()=>{x(!oe.expanded)});const N=()=>{const W=he();if(!W)return;oe.mode="unified",oe.cornersMaterialized=!1;const G=mt(oe.unified.input.value,oe.unified.getSuffixText());W.set({"border-top-left-radius":"","border-top-right-radius":"","border-bottom-right-radius":"","border-bottom-left-radius":"","border-radius":""}),W.set({"border-radius":G})},I=W=>{const G=i;if(!G||!G.isConnected)return;const X=he();if(!X)return;const U=wn[W],le=oe.corners[W],re=mt(le.input.value,le.getSuffixText());if(oe.mode!=="corners"||!oe.cornersMaterialized){const fe={"border-radius":"","border-top-left-radius":dt(G,"border-top-left-radius")||ot(G,"border-top-left-radius"),"border-top-right-radius":dt(G,"border-top-right-radius")||ot(G,"border-top-right-radius"),"border-bottom-right-radius":dt(G,"border-bottom-right-radius")||ot(G,"border-bottom-right-radius"),"border-bottom-left-radius":dt(G,"border-bottom-left-radius")||ot(G,"border-bottom-left-radius")};fe[U]=re,X.set(fe),oe.mode="corners",oe.cornersMaterialized=!0;return}X.set({"border-radius":"",[U]:re})};r.listen(oe.unified.input,"input",N);for(const W of Kt)r.listen(oe.corners[W].input,"input",()=>I(W));r.listen(oe.root,"focusout",W=>{const G=W.relatedTarget;G instanceof Node&&oe.root.contains(G)||(Se(),ve())});const K=W=>{r.listen(W,"keydown",G=>{G.key==="Enter"?(G.preventDefault(),Se(),ve(),W.blur()):G.key==="Escape"&&(G.preventDefault(),xe(),ye("border-radius",!0))})};K(oe.unified.input);for(const W of Kt)K(oe.corners[W].input)}Ae("border-width"),De("border-style"),Oe();function We(oe){if(!r.isDisposed){if(oe!==i&&ae(),i=oe,oe&&oe.isConnected){const x=dt(oe,"border-image-source")||ot(oe,"border-image-source");l=zi(x)}else l="solid";y.value=l,l==="gradient"&&(s="all",B.setValue("all")),q.setTarget(oe),ve()}}function Fe(){if(r.isDisposed)return;const oe=i;if(oe&&oe.isConnected){const x=dt(oe,"border-image-source")||ot(oe,"border-image-source"),N=zi(x);N!==l&&(l=N,y.value=N,N==="gradient"&&(s="all",B.setValue("all")))}q.refresh(),ve()}function _e(){ae(),i=null,r.dispose()}return ve(),{setTarget:We,refresh:Fe,dispose:_e}}const cd=["solid","gradient","image"];function ud(e){try{const t=e.getRootNode();return t instanceof ShadowRoot?t.activeElement===e:document.activeElement===e}catch{return!1}}function fr(e,t){var n,o;try{const r=e.style;return((o=(n=r==null?void 0:r.getPropertyValue)==null?void 0:n.call(r,t))==null?void 0:o.trim())??""}catch{return""}}function pr(e,t){try{return window.getComputedStyle(e).getPropertyValue(t).trim()}catch{return""}}function dd(e){const t=e.trim().toLowerCase();return!t||t==="none"?"solid":/\b(?:linear|radial|conic)-gradient\s*\(/i.test(t)?"gradient":/\burl\s*\(/i.test(t)?"image":"solid"}function fd(e){var n;const t=e.trim().match(/\burl\(\s*(['"]?)(.*?)\1\s*\)/i);return((n=t==null?void 0:t[2])==null?void 0:n.trim())??""}function pd(e){const t=e.trim();return t?/^none$/i.test(t)?"none":/^url\s*\(/i.test(t)?t:`url("${t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}")`:""}function md(e){const{container:t,transactionManager:n,tokensService:o}=e,r=new ze;let i=null,s="solid";const l=document.createElement("div");l.className="we-field-group";function a(V,B){const $=document.createElement("div");$.className="we-field";const q=document.createElement("span");q.className="we-field-label",q.textContent=V;const ne=document.createElement("input");return ne.type="text",ne.className="we-input",ne.autocomplete="off",ne.setAttribute("aria-label",B),$.append(q,ne),{row:$,input:ne}}function c(V){const B=document.createElement("div");B.className="we-field";const $=document.createElement("span");$.className="we-field-label",$.textContent=V;const q=document.createElement("div");return q.style.flex="1",q.style.minWidth="0",B.append($,q),{row:B,colorFieldContainer:q}}const u=document.createElement("div");u.className="we-field";const p=document.createElement("span");p.className="we-field-label",p.textContent="ç±»å‹";const f=document.createElement("select");f.className="we-select",f.setAttribute("aria-label","èƒŒæ™¯ç±»å‹");for(const V of cd){const B=document.createElement("option");B.value=V,B.textContent={solid:"çº¯è‰²",gradient:"æ¸å˜",image:"å›¾ç‰‡"}[V],f.appendChild(B)}u.append(p,f);const{row:h,colorFieldContainer:d}=c("é¢œè‰²"),b=document.createElement("div"),{row:m,input:w}=a("é“¾æ¥","èƒŒæ™¯å›¾ç‰‡é“¾æ¥");w.placeholder="https://...",w.spellcheck=!1,l.append(u,h,b,m),t.appendChild(l),r.add(()=>l.remove());const M=ei({container:b,transactionManager:n,tokensService:o});r.add(()=>M.dispose());const C=Kn({container:d,ariaLabel:"èƒŒæ™¯é¢œè‰²",tokensService:o,getTokenTarget:()=>i,onInput:V=>{const B=k("background-color");B&&B.set(V)},onCommit:()=>{j("background-color"),_()},onCancel:()=>{L("background-color"),F("background-color",!0)}});r.add(()=>C.dispose());const E={"background-color":{kind:"color",property:"background-color",field:C,handle:null},"background-image":{kind:"text",property:"background-image",element:w,handle:null}},y=["background-color","background-image"];function k(V){if(r.isDisposed)return null;const B=i;if(!B||!B.isConnected)return null;const $=E[V];if($.handle)return $.handle;const q=n.beginStyle(B,V);return $.handle=q,q}function j(V){const B=E[V],$=B.handle;B.handle=null,$&&$.commit({merge:!0})}function L(V){const B=E[V],$=B.handle;B.handle=null,$&&$.rollback()}function S(){for(const V of y)j(V)}function g(){h.hidden=s!=="solid",b.hidden=s!=="gradient",m.hidden=s!=="image"}function T(V){const B=i;if(s=V,f.value=V,g(),!(!B||!B.isConnected)&&V==="solid"){j("background-image");const $=n.beginStyle(B,"background-image");$&&($.set("none"),$.commit({merge:!0}))}}r.listen(f,"change",()=>{const V=f.value;T(V),M.refresh(),_()});function F(V,B=!1){const $=E[V],q=i;if($.kind==="text"){const ne=$.element;if(!q||!q.isConnected){ne.disabled=!0,ne.value="",ne.placeholder="";return}if(ne.disabled=!1,($.handle!==null||ud(ne))&&!B)return;const P=fr(q,V),Y=pr(q,V),z=P||Y;V==="background-image"?ne.value=fd(z):ne.value=z,ne.placeholder=""}else{const ne=$.field;if(!q||!q.isConnected){ne.setDisabled(!0),ne.setValue(""),ne.setPlaceholder("");return}if(ne.setDisabled(!1),($.handle!==null||ne.isFocused())&&!B)return;const P=fr(q,V),Y=pr(q,V);P?(ne.setValue(P),ne.setPlaceholder(/\bvar\s*\(/i.test(P)?Y:"")):(ne.setValue(Y),ne.setPlaceholder(""))}}function _(){for(const B of y)F(B);const V=!!(i&&i.isConnected);f.disabled=!V,g()}function D(V){const B=E[V];if(B.kind!=="text")return;const $=B.element,q=pd;r.listen($,"input",()=>{const ne=k(V);ne&&ne.set(q($.value))}),r.listen($,"blur",()=>{j(V),_()}),r.listen($,"keydown",ne=>{ne.key==="Enter"?(ne.preventDefault(),j(V),_(),$.blur()):ne.key==="Escape"&&(ne.preventDefault(),L(V),F(V,!0))})}D("background-image");function H(V){if(!r.isDisposed){if(V!==i&&S(),i=V,V&&V.isConnected){const B=fr(V,"background-image")||pr(V,"background-image");s=dd(B),f.value=s}else s="solid",f.value="solid";M.setTarget(V),g(),_()}}function v(){r.isDisposed||(M.refresh(),_())}function R(){S(),i=null,r.dispose()}return g(),_(),{setTarget:H,refresh:v,dispose:R}}const hd=/^-?(?:\d+\.?\d*|\.\d+)(?:[a-zA-Z%]+)?$/;function gd(e){return/^[a-zA-Z_-]+\s*\(/.test(e)}function Gn(e){const t=e.trim();return!t||t.toLowerCase()==="none"?"":/^-?(?:\d+|\d*\.\d+)$/.test(t)?`${t}px`:/^-?\d+\.$/.test(t)?`${t.slice(0,-1)}px`:t}function Zt(e,t){var n,o;try{const r=e.style;return((o=(n=r==null?void 0:r.getPropertyValue)==null?void 0:n.call(r,t))==null?void 0:o.trim())??""}catch{return""}}function Ia(e,t){const n=[];let o=0,r=null,i=!1,s=0;for(let l=0;l<e.length;l++){const a=e[l];if(i){i=!1;continue}if(a==="\\"){i=!0;continue}if(r){a===r&&(r=null);continue}if(a==='"'||a==="'"){r=a;continue}if(a==="("){o++;continue}if(a===")"){o=Math.max(0,o-1);continue}o===0&&a===t&&(n.push(e.slice(s,l)),s=l+1)}return n.push(e.slice(s)),n}function bd(e){const t=[];let n=0,o=null,r=!1,i="";const s=()=>{const l=i.trim();l&&t.push(l),i=""};for(let l=0;l<e.length;l++){const a=e[l];if(r){i+=a,r=!1;continue}if(a==="\\"){i+=a,r=!0;continue}if(o){i+=a,a===o&&(o=null);continue}if(a==='"'||a==="'"){i+=a,o=a;continue}if(a==="("){n++,i+=a;continue}if(a===")"){n=Math.max(0,n-1),i+=a;continue}if(n===0&&/\s/.test(a)){s();continue}i+=a}return s(),t}function wd(e){var l;const t=e.trim();if(!t||t.toLowerCase()==="none")return null;const n=((l=Ia(t,",")[0])==null?void 0:l.trim())??"";if(!n||n.toLowerCase()==="none")return null;const o=bd(n);if(o.length===0)return null;let r=!1;const i=[],s=[];for(const a of o){if(/^inset$/i.test(a)){r=!0;continue}hd.test(a)||gd(a)&&i.length<4?i.push(a):s.push(a)}return i.length<2?null:{inset:r,offsetX:i[0]??"",offsetY:i[1]??"",blurRadius:i[2]??"",spreadRadius:i[3]??"",color:s.join(" ").trim()}}function _a(e){const t=Gn(e.offsetX),n=Gn(e.offsetY),o=Gn(e.blurRadius),r=Gn(e.spreadRadius),i=e.color.trim();if(!t&&!n&&!o&&!r&&!i)return"";const s=[];return e.inset&&s.push("inset"),s.push(t||"0px",n||"0px"),(o||r)&&s.push(o||"0px"),r&&s.push(r),i&&s.push(i),s.join(" ")}function Ma(e,t){const n=e,o=n.toLowerCase(),r=t.toLowerCase();let i=0;for(;i<n.length;){const s=o.indexOf(r,i);if(s<0)return null;if(s>0){const f=n[s-1];if(/[a-zA-Z0-9_-]/.test(f)){i=s+r.length;continue}}let l=s+r.length;for(;l<n.length&&/\s/.test(n[l]);)l++;if(n[l]!=="("){i=s+r.length;continue}const a=l;let c=0,u=null,p=!1;for(let f=a;f<n.length;f++){const h=n[f];if(p){p=!1;continue}if(h==="\\"){p=!0;continue}if(u){h===u&&(u=null);continue}if(h==='"'||h==="'"){u=h;continue}if(h==="("){c++;continue}if(h===")"){if(c--,c===0)return{start:s,end:f+1,args:n.slice(a+1,f)};continue}}return null}return null}function xd(e){const t=e.trim();if(!t||t.toLowerCase()==="none")return"";const n=Ma(t,"blur");return n?n.args.trim():""}function ho(e,t){const n=e.trim().toLowerCase()==="none"?"":e.trim(),o=n?Ma(n,"blur"):null,r=Gn(t);if(!r){if(!o)return n;const c=n.slice(0,o.start).trimEnd(),u=n.slice(o.end).trimStart();return c&&u?`${c} ${u}`.trim():(c||u).trim()}const i=`blur(${r})`;if(!o)return n?`${n} ${i}`.trim():i;const s=n.slice(0,o.start).trimEnd(),l=n.slice(o.end).trimStart(),a=[];return s&&a.push(s),a.push(i),l&&a.push(l),a.join(" ")}const Xt="http://www.w3.org/2000/svg",mr="box-shadow",Br=[{value:"drop-shadow",label:"å¤–é˜´å½±",category:"shadow"},{value:"inner-shadow",label:"å†…é˜´å½±",category:"shadow"},{value:"layer-blur",label:"å›¾å±‚æ¨¡ç³Š",category:"blur"},{value:"backdrop-blur",label:"èƒŒæ™¯æ¨¡ç³Š",category:"blur"}];let Hi=0;function qn(){try{if(typeof crypto<"u"&&typeof crypto.randomUUID=="function")return crypto.randomUUID()}catch{}return Hi+=1,`shadow_${Hi}_${Date.now()}`}function Lt(e){return e.type==="drop-shadow"||e.type==="inner-shadow"}function on(e){return e.type==="layer-blur"||e.type==="backdrop-blur"}function Gi(){return{id:qn(),enabled:!0,type:"drop-shadow",kind:"parsed",inset:!1,offsetX:"0px",offsetY:"4px",blurRadius:"12px",spreadRadius:"0px",color:"rgba(0, 0, 0, 0.15)"}}function yd(e){return{id:qn(),enabled:!0,type:e,kind:"parsed",radius:"8px"}}function hr(e){const t=Br.find(n=>n.value===e.type);return t?t.label:e.kind==="raw"?"è‡ªå®šä¹‰æ•ˆæœ":"æœªçŸ¥æ•ˆæœ"}function Wi(e){if(e.kind==="raw")return`raw:${e.property}:${e.rawText.trim()}`;if(Lt(e)){const t=_a({inset:e.inset,offsetX:e.offsetX,offsetY:e.offsetY,blurRadius:e.blurRadius,spreadRadius:e.spreadRadius,color:e.color});return`shadow:${e.type}:${t.toLowerCase()}`}return`blur:${e.type}:${e.radius}`}function vd(e){const t=e.trim();if(!t||t.toLowerCase()==="none")return[];const n=Ia(t,",").map(r=>r.trim()).filter(Boolean),o=[];for(const r of n){const i=wd(r);i?o.push({id:qn(),enabled:!0,type:i.inset?"inner-shadow":"drop-shadow",kind:"parsed",inset:i.inset,offsetX:i.offsetX,offsetY:i.offsetY,blurRadius:i.blurRadius,spreadRadius:i.spreadRadius,color:i.color}):o.push({id:qn(),enabled:!0,type:"raw",kind:"raw",property:"box-shadow",rawText:r})}return o}function ji(e,t){const n=xd(e);return n?{id:qn(),enabled:!0,type:t,kind:"parsed",radius:n}:null}function Ui(e){return e.filter(n=>n.enabled&&(Lt(n)||n.kind==="raw"&&n.property==="box-shadow")).map(n=>n.kind==="raw"?n.rawText.trim():Lt(n)?_a({inset:n.inset,offsetX:n.offsetX,offsetY:n.offsetY,blurRadius:n.blurRadius,spreadRadius:n.spreadRadius,color:n.color}):"").map(n=>n.trim()).filter(Boolean).join(", ")}function go(e,t){const n=e.find(o=>o.type===t&&o.enabled);return n&&on(n)?n:null}function Ed(e,t){const n=new Set,o=new Map;for(const s of e){const l=Wi(s),a=o.get(l)??[];a.push(s),o.set(l,a)}const r=t.map(s=>{const l=Wi(s),a=o.get(l),c=a==null?void 0:a.shift();return c?(n.add(c.id),{...s,id:c.id,enabled:!0}):s}),i=e.filter(s=>!s.enabled&&!n.has(s.id));return[...r,...i]}function ti(e,t="0 0 24 24"){const n=document.createElementNS(Xt,"svg");n.setAttribute("viewBox",t),n.setAttribute("fill","none"),n.setAttribute("aria-hidden","true");const o=document.createElementNS(Xt,"path");return o.setAttribute("d",e),o.setAttribute("stroke","currentColor"),o.setAttribute("stroke-width","2"),o.setAttribute("stroke-linecap","round"),o.setAttribute("stroke-linejoin","round"),n.append(o),n}function Sd(){return ti("M12 5v14M5 12h14")}function kd(){return ti("M9 6h6M10 6l.5-1.5h3L14 6M7 6l1 14h8l1-14")}function Cd(){const e=document.createElementNS(Xt,"svg");e.setAttribute("viewBox","0 0 20 20"),e.setAttribute("fill","none"),e.setAttribute("aria-hidden","true");const t=document.createElementNS(Xt,"path");t.setAttribute("d","M4 5H16 M4 10H16 M4 15H16"),t.setAttribute("stroke","currentColor"),t.setAttribute("stroke-width","2"),t.setAttribute("stroke-linecap","round"),t.setAttribute("stroke-linejoin","round"),e.append(t);const n=[[7,5],[13,10],[9,15]];for(const[o,r]of n){const i=document.createElementNS(Xt,"circle");i.setAttribute("cx",String(o)),i.setAttribute("cy",String(r)),i.setAttribute("r","1.6"),i.setAttribute("fill","none"),i.setAttribute("stroke","currentColor"),i.setAttribute("stroke-width","2"),e.append(i)}return e}function bo(e){if(e){const t=document.createElementNS(Xt,"svg");t.setAttribute("viewBox","0 0 24 24"),t.setAttribute("fill","none"),t.setAttribute("aria-hidden","true");const n=document.createElementNS(Xt,"path");n.setAttribute("d","M2.5 12s3.5-7 9.5-7 9.5 7 9.5 7-3.5 7-9.5 7-9.5-7-9.5-7z"),n.setAttribute("stroke","currentColor"),n.setAttribute("stroke-width","2"),n.setAttribute("stroke-linecap","round"),n.setAttribute("stroke-linejoin","round");const o=document.createElementNS(Xt,"circle");return o.setAttribute("cx","12"),o.setAttribute("cy","12"),o.setAttribute("r","3"),o.setAttribute("stroke","currentColor"),o.setAttribute("stroke-width","2"),t.append(n,o),t}return ti("M3 3l18 18M10.6 10.6A3 3 0 0012 15a3 3 0 002.4-4.4M9.5 5.8A10.7 10.7 0 0112 5c6 0 9.5 7 9.5 7a17.4 17.4 0 01-3.1 4.1M6.2 6.2A17.8 17.8 0 002.5 12s3.5 7 9.5 7c1 0 1.9-.2 2.8-.5")}function gr(e){const t=document.createElement("button");return t.type="button",t.className="we-effects-icon-btn",t.setAttribute("aria-label",e),t}function Ad(e){return e.kind==="raw"?"raw":Lt(e)?"shadow":on(e)?"blur":"raw"}function Td(e){const{container:t,transactionManager:n,tokensService:o,headerActionsContainer:r}=e,i=new ze,s=new WeakMap;let l=null,a=[],c=new Map,u=null,p=null,f=null;const h=document.createElement("div");h.className="we-field-group we-effects",t.append(h),i.add(()=>h.remove());const d=document.createElement("button");if(d.type="button",d.className="we-effects-icon-btn",d.setAttribute("aria-label","Add effect"),d.append(Sd()),r)r.insertBefore(d,r.firstChild),i.add(()=>d.remove());else{const A=document.createElement("div");A.className="we-effects-toolbar",A.append(d),h.append(A)}const b=document.createElement("div");b.className="we-effects-list",h.append(b);const m=new Map;function w(A){a=A,c=new Map(A.map(Y=>[Y.id,Y]));const P=l;P&&s.set(P,A)}function M(A){return c.get(A)??null}function C(A){if(i.isDisposed)return null;const P=l;return!P||!P.isConnected?null:(p&&f===A||(p&&p.commit({merge:!0}),p=n.beginStyle(P,A),f=A),p)}function E(){const A=p;p=null,f=null,A&&A.commit({merge:!0})}function y(){const A=p;p=null,f=null,A&&A.rollback()}function k(){return p!==null||u!==null}function j(){const A=l;if(!A||!A.isConnected)return;const P=C(mr);P&&P.set(Ui(a));const Y=go(a,"layer-blur");if(Y){const J=C("filter");if(J){const pe=Zt(A,"filter");J.set(ho(pe,Y.radius))}}const z=go(a,"backdrop-blur");if(z){const J=C("backdrop-filter");if(J){const pe=Zt(A,"backdrop-filter");J.set(ho(pe,z.radius))}}}function L(){const A=l;if(!A||!A.isConnected)return;E(),n.applyStyle(A,mr,Ui(a),{merge:!1});const P=go(a,"layer-blur"),Y=Zt(A,"filter");n.applyStyle(A,"filter",ho(Y,(P==null?void 0:P.radius)??""),{merge:!1});const z=go(a,"backdrop-blur"),J=Zt(A,"backdrop-filter");n.applyStyle(A,"backdrop-filter",ho(J,(z==null?void 0:z.radius)??""),{merge:!1})}function S(A){const P=(A==null?void 0:A.commit)??!1,Y=(A==null?void 0:A.rollback)??!1;Y?y():P&&E();const z=u!==null;u=null;for(const J of m.values())J.setOpen(!1);z&&!Y&&v(!0)}function g(A){if(A===u){S({commit:!0});return}if(S({commit:!0}),!A)return;const P=m.get(A);if(P){u=A;for(const[Y,z]of m)z.setOpen(Y===A);P.focusFirst()}}function T(A,P){const Y=pt(P);A.input.value=Y.value,A.setSuffix(Y.suffix)}function F(A,P){if(A.kind==="raw")return null;if(P==="layer-blur"||P==="backdrop-blur"){const he=yd(P),Se=on(A)?A.radius:Lt(A)?A.blurRadius:he.radius;return{...he,id:A.id,enabled:A.enabled,radius:Se||he.radius}}const Y=Gi(),z=Lt(A)?A:null,J=on(A)?A:null,pe=(z==null?void 0:z.blurRadius)??(J==null?void 0:J.radius)??Y.blurRadius;return{...Y,id:A.id,enabled:A.enabled,type:P,inset:P==="inner-shadow",offsetX:(z==null?void 0:z.offsetX)??Y.offsetX,offsetY:(z==null?void 0:z.offsetY)??Y.offsetY,blurRadius:pe||Y.blurRadius,spreadRadius:(z==null?void 0:z.spreadRadius)??Y.spreadRadius,color:(z==null?void 0:z.color)??Y.color}}function _(A,P){var pe;const Y=M(A);if(!Y||Y.kind==="raw"||Y.type===P)return;const z=F(Y,P);if(!z)return;let J=a.map(he=>he.id===A?z:he);(z.type==="layer-blur"||z.type==="backdrop-blur")&&(J=J.filter(he=>he.id===A||he.type!==z.type)),w(J),H(),L(),u===A&&((pe=m.get(A))==null||pe.focusFirst())}function D(A){const P=new ze,Y=document.createElement("div");Y.className="we-effects-item-wrap";const z=document.createElement("div");z.className="we-effects-item",z.dataset.enabled=A.enabled?"true":"false",z.dataset.open="false";const J=gr("Adjust effect");J.append(Cd());const pe=document.createElement("button");pe.type="button",pe.className="we-effects-name";const he=gr("Toggle visibility"),Se=gr("Remove effect");Se.append(kd()),z.append(J,pe,he,Se);const xe=document.createElement("div");if(xe.className="we-effects-popover",xe.hidden=!0,Y.append(z,xe),P.listen(J,"click",W=>{W.preventDefault(),W.stopPropagation(),g(A.id)}),P.listen(pe,"click",W=>{W.preventDefault(),W.stopPropagation(),g(A.id)}),P.listen(he,"click",W=>{W.preventDefault(),W.stopPropagation();const G=M(A.id);G&&(G.enabled=!G.enabled,z.dataset.enabled=G.enabled?"true":"false",he.replaceChildren(bo(G.enabled)),L())}),P.listen(Se,"click",W=>{var G;W.preventDefault(),W.stopPropagation(),u===A.id&&S({commit:!0}),w(a.filter(X=>X.id!==A.id)),(G=m.get(A.id))==null||G.dispose(),m.delete(A.id),H(),L()}),A.kind==="raw"){const W=document.createElement("div");W.className="we-effects-popover-content";const G=document.createElement("div");G.className="we-field";const X=document.createElement("span");X.className="we-field-label",X.textContent="æ•°å€¼";const U=document.createElement("input");return U.type="text",U.className="we-input",U.autocomplete="off",U.spellcheck=!1,U.setAttribute("aria-label","Shadow value"),G.append(X,U),W.append(G),xe.append(W),P.listen(U,"input",()=>{const re=M(A.id);!re||re.kind!=="raw"||(re.rawText=U.value,j())}),P.listen(U,"blur",()=>{E()}),P.listen(U,"keydown",re=>{re.key==="Enter"?(re.preventDefault(),E(),U.blur()):re.key==="Escape"&&(re.preventDefault(),S({rollback:!0}),v(!0))}),{id:A.id,viewType:"raw",root:Y,row:z,adjustBtn:J,nameBtn:pe,eyeBtn:he,deleteBtn:Se,popover:xe,rawInput:U,disposer:P,setOpen(re){z.dataset.open=re?"true":"false",xe.hidden=!re},focusFirst(){U.focus(),U.select()},sync(re){z.dataset.enabled=re.enabled?"true":"false",pe.textContent=hr(re),he.replaceChildren(bo(re.enabled)),re.kind==="raw"&&(U.value=re.rawText)},dispose(){P.dispose(),Y.remove()}}}if(on(A)){const W=document.createElement("div");W.className="we-effects-popover-content";const G=document.createElement("div");G.className="we-field";const X=document.createElement("span");X.className="we-field-label",X.textContent="ç±»å‹";const U=document.createElement("select");U.className="we-select",U.setAttribute("aria-label","Effect type");for(const Ce of Br){const Ie=document.createElement("option");Ie.value=Ce.value,Ie.textContent=Ce.label,U.append(Ie)}G.append(X,U);const le=document.createElement("div");le.className="we-field";const re=document.createElement("span");re.className="we-field-label",re.textContent="æ¨¡ç³Š";const fe=qe({ariaLabel:"Blur radius",inputMode:"decimal",suffix:"px"});le.append(re,fe.root),W.append(G,le),xe.append(W),Ke(P,fe.input,{mode:"css-length",min:0,step:1,shiftStep:10,altStep:.1}),P.listen(fe.input,"input",()=>{const Ce=M(A.id);!Ce||!on(Ce)||(Ce.radius=mt(fe.input.value,fe.getSuffixText()),j())}),P.listen(fe.input,"blur",()=>{E(),v(!0)}),P.listen(fe.input,"keydown",Ce=>{Ce.key==="Enter"?(Ce.preventDefault(),E(),v(!0),fe.input.blur()):Ce.key==="Escape"&&(Ce.preventDefault(),S({rollback:!0}),v(!0))});const be=()=>{_(A.id,U.value)};return P.listen(U,"input",be),P.listen(U,"change",be),{id:A.id,viewType:"blur",root:Y,row:z,adjustBtn:J,nameBtn:pe,eyeBtn:he,deleteBtn:Se,popover:xe,disposer:P,typeSelect:U,radiusInput:fe,setOpen(Ce){z.dataset.open=Ce?"true":"false",xe.hidden=!Ce},focusFirst(){fe.input.focus(),fe.input.select()},sync(Ce){z.dataset.enabled=Ce.enabled?"true":"false",pe.textContent=hr(Ce),he.replaceChildren(bo(Ce.enabled)),on(Ce)&&(U.value=Ce.type,T(fe,Ce.radius))},dispose(){P.dispose(),Y.remove()}}}const ae=document.createElement("div");ae.className="we-effects-popover-content";const ee=document.createElement("div");ee.className="we-field";const O=document.createElement("span");O.className="we-field-label",O.textContent="ç±»å‹";const ie=document.createElement("select");ie.className="we-select",ie.setAttribute("aria-label","Effect type");for(const W of Br){const G=document.createElement("option");G.value=W.value,G.textContent=W.label,ie.append(G)}ee.append(O,ie);const ye=document.createElement("div");ye.className="we-field-row";const ve=qe({ariaLabel:"Shadow offset X",inputMode:"decimal",prefix:"X",suffix:"px"}),Ae=qe({ariaLabel:"Shadow offset Y",inputMode:"decimal",prefix:"Y",suffix:"px"});ye.append(ve.root,Ae.root);const De=document.createElement("div");De.className="we-field-row";const Oe=qe({ariaLabel:"Shadow blur radius",inputMode:"decimal",prefix:"B",suffix:"px"}),We=qe({ariaLabel:"Shadow spread radius",inputMode:"decimal",prefix:"S",suffix:"px"});De.append(Oe.root,We.root);const Fe=document.createElement("div");Fe.className="we-field";const _e=document.createElement("span");_e.className="we-field-label",_e.textContent="é¢œè‰²";const oe=document.createElement("div");oe.style.minWidth="0",Fe.append(_e,oe),ae.append(ee,ye,De,Fe),xe.append(ae),Ke(P,ve.input,{mode:"css-length"}),Ke(P,Ae.input,{mode:"css-length"}),Ke(P,Oe.input,{mode:"css-length",min:0,step:1,shiftStep:10,altStep:.1}),Ke(P,We.input,{mode:"css-length",step:1,shiftStep:10,altStep:.1});const x=Kn({container:oe,ariaLabel:"Shadow color",tokensService:o,getTokenTarget:()=>l,onInput:W=>{const G=M(A.id);!G||!Lt(G)||(G.color=W,j())},onCommit:()=>{E()},onCancel:()=>{y(),v(!0)}});P.add(()=>x.dispose());const N=(W,G)=>{P.listen(W.input,"input",()=>{const X=M(A.id);if(!X||!Lt(X))return;const U=mt(W.input.value,W.getSuffixText());X[G]=U,j()}),P.listen(W.input,"blur",()=>{E(),v(!0)}),P.listen(W.input,"keydown",X=>{X.key==="Enter"?(X.preventDefault(),E(),v(!0),W.input.blur()):X.key==="Escape"&&(X.preventDefault(),y(),v(!0))})};N(ve,"offsetX"),N(Ae,"offsetY"),N(Oe,"blurRadius"),N(We,"spreadRadius");const I=()=>{_(A.id,ie.value)};return P.listen(ie,"input",I),P.listen(ie,"change",I),{id:A.id,viewType:"shadow",root:Y,row:z,adjustBtn:J,nameBtn:pe,eyeBtn:he,deleteBtn:Se,popover:xe,disposer:P,typeSelect:ie,offsetX:ve,offsetY:Ae,blur:Oe,spread:We,colorField:x,setOpen(W){z.dataset.open=W?"true":"false",xe.hidden=!W},focusFirst(){ie.focus()},sync(W){z.dataset.enabled=W.enabled?"true":"false",pe.textContent=hr(W),he.replaceChildren(bo(W.enabled)),Lt(W)&&(ie.value=W.type,T(ve,W.offsetX),T(Ae,W.offsetY),T(Oe,W.blurRadius),T(We,W.spreadRadius),x.setValue(W.color))},dispose(){P.dispose(),Y.remove()}}}function H(){const A=new Set(a.map(P=>P.id));for(const[P,Y]of Array.from(m.entries()))A.has(P)||(u===P&&(u=null),Y.dispose(),m.delete(P));for(const P of a){const Y=m.get(P.id),z=Ad(P);(!Y||Y.viewType!==z)&&(Y==null||Y.dispose(),m.set(P.id,D(P)));const J=m.get(P.id);J.sync(P),J.setOpen(u===P.id),b.append(J.root)}}function v(A=!1){const P=l;if(!P||!P.isConnected){d.disabled=!0,w([]),S({commit:!0}),H();return}if(d.disabled=!1,!A&&k())return;const Y=Zt(P,mr),z=vd(Y),J=Zt(P,"filter"),pe=ji(J,"layer-blur"),he=Zt(P,"backdrop-filter"),Se=ji(he,"backdrop-blur"),xe=[...z,...pe?[pe]:[],...Se?[Se]:[]],ae=s.get(P)??[];w(Ed(ae,xe)),H()}i.listen(d,"click",A=>{A.preventDefault(),A.stopPropagation();const P=l;if(!P||!P.isConnected)return;S({commit:!0});const Y=Gi(),z=[...a,Y];w(z),H(),L(),g(Y.id)});const R=A=>{const P=u;if(!P)return;const Y=m.get(P);if(!Y)return;const z=typeof A.composedPath=="function"?A.composedPath():[];(z.length>0?z.includes(Y.root):(()=>{const pe=A.target;return!!(pe&&Y.root.contains(pe))})())||S({commit:!0})},V=h.ownerDocument;V.addEventListener("click",R,!0),i.add(()=>V.removeEventListener("click",R,!0));const B=A=>{A.key==="Escape"&&u&&(A.preventDefault(),A.stopPropagation(),S({rollback:!0}),v(!0))};h.addEventListener("keydown",B,!0),i.add(()=>h.removeEventListener("keydown",B,!0));function $(A){i.isDisposed||(A!==l&&(E(),S({commit:!0})),l=A,A&&A.isConnected?w(s.get(A)??[]):w([]),v(!0))}function q(){i.isDisposed||v(!1)}function ne(){E(),l=null;for(const A of m.values())A.dispose();m.clear(),i.dispose()}return v(!0),{setTarget:$,refresh:q,dispose:ne}}const Nd=10,Rd=20,Id=2,br=20;function wr(e){var s,l;const t=e.tagName.toLowerCase(),n=e;let o=t;const r=(s=n.id)==null?void 0:s.trim();r&&(o+=`#${r}`);const i=Array.from(e.classList??[]).slice(0,Id).filter(Boolean);if(i.length>0&&(o+=`.${i.join(".")}`),!e.children.length){const a=((l=e.textContent)==null?void 0:l.trim())??"";a.length>0&&a.length<=br?o+=` "${a}"`:a.length>br&&(o+=` "${a.slice(0,br-3)}..."`)}return o}function _d(e){const t=[];let n=e.parentElement;for(;n&&t.length<Nd;){if(n===document.body||n===document.documentElement){t.unshift(n);break}if(n.shadowRoot)break;t.unshift(n),n=n.parentElement}return t}function Md(e){return Array.from(e.children).slice(0,Rd)}function Ld(e){if(!e||!e.isConnected)return[];const t=[],n=_d(e);for(let i=0;i<n.length;i++)t.push({element:n[i],label:wr(n[i]),depth:i,isSelected:!1,isAncestor:!0,isChild:!1});const o=n.length;t.push({element:e,label:wr(e),depth:o,isSelected:!0,isAncestor:!1,isChild:!1});const r=Md(e);for(const i of r)t.push({element:i,label:wr(i),depth:o+1,isSelected:!1,isAncestor:!1,isChild:!0});return t}function Dd(e){const{container:t,onSelect:n}=e,o=new ze;let r=null;const i=document.createElement("div");i.className="we-tree";const s=document.createElement("div");s.className="we-tree-empty",s.textContent="è¯·é€‰æ‹©ä¸€ä¸ªå…ƒç´ ä»¥æŸ¥çœ‹ç»“æ„å±‚çº§ã€‚";const l=document.createElement("div");l.className="we-tree-list",l.setAttribute("role","tree"),i.append(s,l),t.append(i),o.add(()=>i.remove());function a(){const f=Ld(r),h=f.length>0;if(s.hidden=h,l.hidden=!h,!h){l.innerHTML="";return}l.innerHTML="";for(const d of f){const b=document.createElement("div");if(b.className="we-tree-item",b.setAttribute("role","treeitem"),b.style.paddingLeft=`${8+d.depth*16}px`,d.isSelected&&(b.classList.add("we-tree-item--selected"),b.setAttribute("aria-selected","true")),d.isAncestor&&b.classList.add("we-tree-item--ancestor"),d.isChild&&b.classList.add("we-tree-item--child"),d.depth>0){const M=document.createElement("span");M.className="we-tree-indent",M.textContent=d.isChild?"â””":"â”œ",b.append(M)}const m=document.createElement("span");m.className="we-tree-icon",m.textContent="â—‡",b.append(m);const w=document.createElement("span");w.className="we-tree-label",w.textContent=d.label,b.append(w),o.listen(b,"click",M=>{M.preventDefault(),M.stopPropagation(),d.element.isConnected&&n&&n(d.element)}),o.listen(b,"mouseenter",()=>{d.element.isConnected&&d.element.classList.add("we-tree-hover-highlight")}),o.listen(b,"mouseleave",()=>{d.element.classList.remove("we-tree-hover-highlight")}),l.append(b)}}function c(f){o.isDisposed||(r=f,a())}function u(){o.isDisposed||a()}function p(){r=null,o.dispose()}return a(),{setTarget:c,refresh:u,dispose:p}}const Pd=8,Fd=400;function Xi(e){const t=[],n=new Set;for(const o of e??[]){const r=String(o??"").trim();r&&(n.has(r)||(n.add(r),t.push(r)))}return t}function $d(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Yi(e){return String(e??"").split(/\s+/).map(t=>t.trim()).filter(Boolean)}function qi(e){try{const t=e.classList;if(t&&typeof t[Symbol.iterator]=="function")return Array.from(t).filter(Boolean)}catch{}try{return(e.getAttribute("class")??"").split(/\s+/).map(n=>n.trim()).filter(Boolean)}catch{return[]}}function Od(e){const{container:t,onClassChange:n,getSuggestions:o}=e,r=new ze;let i=null,s=[],l=!1;const a=document.createElement("div");a.className="we-class-editor",a.setAttribute("role","group"),a.setAttribute("aria-label","ç±»åç¼–è¾‘å™¨");const c=document.createElement("div");c.className="we-class-chips";const u=document.createElement("input");u.type="text",u.className="we-input we-class-input",u.autocomplete="off",u.spellcheck=!1,u.placeholder="æ·»åŠ ç±»å",u.setAttribute("aria-label","æ·»åŠ ç±»å");const p=document.createElement("div");p.className="we-class-suggestions",p.hidden=!0,a.append(c,u,p),t.append(a),r.add(()=>a.remove());function f(){c.innerHTML="";for(const S of s){const g=document.createElement("span");g.className="we-class-chip";const T=document.createElement("span");T.className="we-class-chip-text",T.textContent=S;const F=document.createElement("button");F.type="button",F.className="we-class-chip-remove",F.textContent="Ã—",F.dataset.action="remove",F.dataset.value=S,F.setAttribute("aria-label",`Remove class ${S}`),g.append(T,F),c.append(g)}}function h(){p.hidden=!0,p.innerHTML=""}function d(){if(u.disabled){h();return}const S=u.value.trim();if(!S){h();return}const g=(o==null?void 0:o())??[];if(!Array.isArray(g)||g.length===0){h();return}const T=new Set(s),F=new Set,_=[];for(const D of g){const H=String(D??"").trim();if(H&&!T.has(H)&&H.startsWith(S)&&!F.has(H)&&(F.add(H),_.push(H),_.length>=Pd))break}if(_.length===0){h();return}p.hidden=!1,p.innerHTML="";for(const D of _){const H=document.createElement("button");H.type="button",H.className="we-class-suggestion",H.textContent=D,H.dataset.action="suggestion",H.dataset.value=D,p.append(H)}}function b(S){s=Xi(S),f(),d()}function m(S){if(!i||!i.isConnected)return;const g=Xi(S);if($d(g,s)){d();return}s=g,f(),d(),n(s.slice())}function w(S){if(!S.length)return;const g=s.slice(),T=new Set(g);for(const F of S){const _=String(F??"").trim();_&&(T.has(_)||(T.add(_),g.push(_)))}m(g)}function M(S){const g=String(S??"").trim();if(!g)return;const T=s.filter(F=>F!==g);m(T)}function C(){s.length!==0&&m(s.slice(0,-1))}function E(){const S=Yi(u.value);S.length!==0&&(w(S),u.value="",d())}r.listen(p,"mousedown",S=>{S.preventDefault()}),r.listen(c,"click",S=>{var _,D;const g=S.target,T=(_=g==null?void 0:g.closest)==null?void 0:_.call(g,'button[data-action="remove"]'),F=(D=T==null?void 0:T.dataset)==null?void 0:D.value;!T||!F||(S.preventDefault(),M(F))}),r.listen(p,"click",S=>{var _,D;const g=S.target,T=(_=g==null?void 0:g.closest)==null?void 0:_.call(g,'button[data-action="suggestion"]'),F=(D=T==null?void 0:T.dataset)==null?void 0:D.value;!T||!F||(S.preventDefault(),w([F]),u.value="",d(),u.focus())}),r.listen(u,"compositionstart",()=>{l=!0}),r.listen(u,"compositionend",()=>{l=!1,d()}),r.listen(u,"input",()=>{d()}),r.listen(u,"blur",()=>{h()}),r.listen(u,"paste",()=>{window.setTimeout(()=>{if(r.isDisposed)return;Yi(u.value).length>1?E():d()},0)}),r.listen(u,"keydown",S=>{if(!u.disabled){if(S.key==="Enter"){if(l)return;S.preventDefault(),E();return}if(S.key===" "){if(l)return;u.value.trim()&&(S.preventDefault(),E());return}if(S.key==="Backspace"){!u.value&&s.length>0&&(S.preventDefault(),C());return}S.key==="Escape"&&(p.hidden?u.value&&(S.preventDefault(),u.value="",d()):(S.preventDefault(),h()))}});function y(S){if(!r.isDisposed){if(i=S&&S.isConnected?S:null,u.value="",h(),u.disabled=!i,!i){b([]);return}b(qi(i))}}function k(S){r.isDisposed||b(S)}function j(){if(r.isDisposed)return;const S=i;if(!S||!S.isConnected){y(null);return}b(qi(S))}function L(){i=null,s=[],r.dispose()}return y(null),{setTarget:y,setClasses:k,refresh:j,dispose:L}}function xr(e){return String(e??"").trim().toLowerCase()}function Ki(e){return String(e??"").trim()}function Vd(){let e=!1,t=null;const n=new Map,o=new Map;function r(){var h;if(e||typeof document>"u")return null;if((h=t==null?void 0:t.host)!=null&&h.isConnected)return t;const c=document.documentElement??document.body;if(!c)return null;const u=document.createElement("div");u.setAttribute("aria-hidden","true"),u.style.cssText="all: initial;display: block;position: fixed;left: -100000px;top: 0;width: 100px;height: 100px;overflow: hidden;pointer-events: none;contain: layout style paint;z-index: -1;visibility: hidden;";const p=u.attachShadow({mode:"open"}),f=document.createElement("div");return f.style.cssText="all: initial; display: block;",p.append(f),c.append(u),t={host:u,shadow:p,container:f},t}function i(c){const u=xr(c);if(!u)return null;const p=n.get(u);if(p!=null&&p.isConnected)return p;const f=r();if(!f)return null;let h;try{h=document.createElement(u)}catch{h=document.createElement("div")}return f.container.append(h),n.set(u,h),h}function s(c,u){const p=xr(c);if(!p)return;const f=(u??[]).map(w=>Ki(w)).filter(Boolean);if(f.length===0)return;const h=o.get(p)??new Map;o.has(p)||o.set(p,h);const d=[];for(const w of f)h.has(w)||d.push(w);if(d.length===0)return;const b=i(p);if(!b)return;let m=null;try{m=window.getComputedStyle(b)}catch{m=null}if(!m){for(const w of d)h.set(w,"");return}for(const w of d){let M="";try{M=String(m.getPropertyValue(w)??"").trim()}catch{M=""}h.set(w,M)}}function l(c,u){var h;const p=xr(c),f=Ki(u);return!p||!f?"":(s(p,[f]),((h=o.get(p))==null?void 0:h.get(f))??"")}function a(){var c;e=!0;try{(c=t==null?void 0:t.host)==null||c.remove()}catch{}t=null,n.clear(),o.clear()}return{ensureBaselineValues:s,getBaselineValue:l,dispose:a}}const Bo=[0,0,0,0];function Uo(e,t){for(let n=0;n<4;n++)if(e[n]!==t[n])return e[n]>t[n]?1:-1;return 0}function Po(e){const t=[];let n=0,o=0,r=0,i=null;for(let l=0;l<e.length;l++){const a=e[l];if(i){if(a==="\\"){l+=1;continue}a===i&&(i=null);continue}if(a==='"'||a==="'"){i=a;continue}if(a==="\\"){l+=1;continue}if(a==="["?r+=1:a==="]"&&r>0?r-=1:a==="("?o+=1:a===")"&&o>0&&(o-=1),a===","&&o===0&&r===0){const c=e.slice(n,l).trim();c&&t.push(c),n=l+1}}const s=e.slice(n).trim();return s&&t.push(s),t}function yr(e){let t=Bo;for(const n of e)Uo(n,t)>0&&(t=n);return t}function Fo(e){let t=0,n=0,o=0,r=!0;for(let i=0;i<e.length;i++){const s=e[i];if(s==="\\"){i+=1;continue}if(s==="["){n+=1,i=La(e,i),r=!1;continue}if(Gd(e,i)){i=Wd(e,i),r=!0;continue}if(s==="#"){t+=1,i=Ln(e,i+1)-1,r=!1;continue}if(s==="."){n+=1,i=Ln(e,i+1)-1,r=!1;continue}if(s===":"){if(e[i+1]===":"){o+=1;const p=i+2,f=Ln(e,p),h=e.slice(p,f).toLowerCase();if(i=f-1,e[i+1]==="("&&h==="slotted"){const{content:d,endIndex:b}=Zi(e,i+1),m=yr(Po(d).map(Fo));t+=m[1],n+=m[2],o+=m[3],i=b}r=!1;continue}const a=i+1,c=Ln(e,a),u=e.slice(a,c).toLowerCase();if(zd.has(u)){o+=1,i=c-1,r=!1;continue}if(e[c]==="("){const{content:p,endIndex:f}=Zi(e,c);if(i=f,u==="where"){r=!1;continue}if(u==="is"||u==="not"||u==="has"){const h=yr(Po(p).map(Fo));t+=h[1],n+=h[2],o+=h[3],r=!1;continue}if(u==="nth-child"||u==="nth-last-child"){n+=1;const h=jd(p);if(h){const d=yr(Po(h).map(Fo));t+=d[1],n+=d[2],o+=d[3]}r=!1;continue}n+=1,r=!1;continue}n+=1,i=c-1,r=!1;continue}if(r){if(s==="*"){r=!1;continue}if(Hd(s)){o+=1,i=Ln(e,i+1)-1,r=!1;continue}}}return[0,t,n,o]}function Bd(e,t){const n=Po(t);let o=null,r=Bo;for(const i of n)try{if(!e.matches(i))continue;const s=Fo(i);(!o||Uo(s,r)>0)&&(o=i,r=s)}catch{}return o?{matchedSelector:o,specificity:r}:null}const zd=new Set(["before","after","first-line","first-letter","selection","backdrop","placeholder"]);function Hd(e){return/[a-zA-Z_]/.test(e)||e.charCodeAt(0)>=128}function Ln(e,t){let n=t;for(;n<e.length;n++){const o=e[n];if(o==="\\"){n+=1;continue}if(!(/[a-zA-Z0-9_-]/.test(o)||o.charCodeAt(0)>=128))break}return n}function La(e,t){let n=1,o=null;for(let r=t+1;r<e.length;r++){const i=e[r];if(o){if(i==="\\"){r+=1;continue}i===o&&(o=null);continue}if(i==='"'||i==="'"){o=i;continue}if(i==="\\"){r+=1;continue}if(i==="[")n+=1;else if(i==="]"&&(n-=1,n===0))return r}return e.length-1}function Zi(e,t){let n=1,o=null;for(let r=t+1;r<e.length;r++){const i=e[r];if(o){if(i==="\\"){r+=1;continue}i===o&&(o=null);continue}if(i==='"'||i==="'"){o=i;continue}if(i==="\\"){r+=1;continue}if(i==="[")r=La(e,r);else if(i==="(")n+=1;else if(i===")"&&(n-=1,n===0))return{content:e.slice(t+1,r),endIndex:r}}return{content:e.slice(t+1),endIndex:e.length-1}}function Gd(e,t){const n=e[t];return/\s/.test(n)||n===">"||n==="+"||n==="~"||n==="|"}function Wd(e,t){let n=t;for(;n<e.length&&/\s/.test(e[n]);)n++;return e[n]==="|"&&e[n+1]==="|"?n+1:e[n]===">"||e[n]==="+"||e[n]==="~"||e[n]==="|"?n:n-1}function jd(e){let t=0,n=0,o=null;for(let r=0;r<e.length;r++){const i=e[r];if(o){if(i==="\\"){r+=1;continue}i===o&&(o=null);continue}if(i==='"'||i==="'"){o=i;continue}if(i==="\\"){r+=1;continue}if(i==="["?n+=1:i==="]"&&n>0?n-=1:i==="("?t+=1:i===")"&&t>0&&(t-=1),t===0&&n===0&&Ud(e,r))return e.slice(r+2).trimStart()}return null}function Ud(e,t){if(e[t]!=="o"||e[t+1]!=="f")return!1;const n=e[t-1],o=e[t+2],r=n===void 0||/\s/.test(n),i=o===void 0||/\s/.test(o);return r&&i}const Xd=new Set(["color","color-scheme","caret-color","accent-color","font","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","letter-spacing","line-height","text-rendering","text-size-adjust","text-transform","text-indent","text-align","text-align-last","text-justify","text-shadow","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-underline-position","tab-size","white-space","word-break","overflow-wrap","word-spacing","hyphens","line-break","direction","unicode-bidi","writing-mode","text-orientation","text-combine-upright","list-style","list-style-image","list-style-position","list-style-type","border-collapse","border-spacing","caption-side","empty-cells","cursor","visibility","pointer-events","user-select","quotes","orphans","widows","fill","fill-opacity","fill-rule","stroke","stroke-width","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-dasharray","stroke-dashoffset","stroke-opacity","paint-order","shape-rendering","image-rendering","color-interpolation","color-interpolation-filters","color-rendering","dominant-baseline","alignment-baseline","baseline-shift","text-anchor","stop-color","stop-opacity","flood-color","flood-opacity","lighting-color","marker","marker-start","marker-mid","marker-end"]);function Dn(e){const t=String(e||"").trim();return t?t.startsWith("--")?!0:Xd.has(t.toLowerCase()):!1}const Yd={margin:["margin-top","margin-right","margin-bottom","margin-left"],padding:["padding-top","padding-right","padding-bottom","padding-left"],inset:["top","right","bottom","left"],border:["border-top-width","border-right-width","border-bottom-width","border-left-width","border-top-style","border-right-style","border-bottom-style","border-left-style","border-top-color","border-right-color","border-bottom-color","border-left-color"],"border-width":["border-top-width","border-right-width","border-bottom-width","border-left-width"],"border-style":["border-top-style","border-right-style","border-bottom-style","border-left-style"],"border-color":["border-top-color","border-right-color","border-bottom-color","border-left-color"],"border-top":["border-top-width","border-top-style","border-top-color"],"border-right":["border-right-width","border-right-style","border-right-color"],"border-bottom":["border-bottom-width","border-bottom-style","border-bottom-color"],"border-left":["border-left-width","border-left-style","border-left-color"],"border-radius":["border-top-left-radius","border-top-right-radius","border-bottom-right-radius","border-bottom-left-radius"],outline:["outline-color","outline-style","outline-width"],background:["background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size"],font:["font-style","font-variant","font-weight","font-stretch","font-size","line-height","font-family"],flex:["flex-grow","flex-shrink","flex-basis"],"flex-flow":["flex-direction","flex-wrap"],"place-content":["align-content","justify-content"],"place-items":["align-items","justify-items"],"place-self":["align-self","justify-self"],gap:["row-gap","column-gap"],"grid-gap":["row-gap","column-gap"],overflow:["overflow-x","overflow-y"],"grid-area":["grid-row-start","grid-column-start","grid-row-end","grid-column-end"],"grid-row":["grid-row-start","grid-row-end"],"grid-column":["grid-column-start","grid-column-end"],"grid-template":["grid-template-rows","grid-template-columns","grid-template-areas"],"text-emphasis":["text-emphasis-style","text-emphasis-color"],"text-decoration":["text-decoration-line","text-decoration-style","text-decoration-color","text-decoration-thickness"],transition:["transition-property","transition-duration","transition-timing-function","transition-delay"],animation:["animation-name","animation-duration","animation-timing-function","animation-delay","animation-iteration-count","animation-direction","animation-fill-mode","animation-play-state"],columns:["column-width","column-count"],"column-rule":["column-rule-width","column-rule-style","column-rule-color"],"list-style":["list-style-position","list-style-image","list-style-type"]};function Ji(e){const t=String(e||"").trim();if(!t)return[];if(t.startsWith("--"))return[t];const n=t.toLowerCase();return Yd[n]??[n]}function qd(e){const t=String(e||"").trim();return t?t.startsWith("--")?t:t.toLowerCase():""}function Kd(e,t){return e[0]!==t[0]?e[0]>t[0]?1:-1:e[1]!==t[1]?e[1]>t[1]?1:-1:e[2]!==t[2]?e[2]>t[2]?1:-1:0}function Zd(e,t){if(e.important!==t.important)return e.important?1:-1;const n=Uo(e.specificity,t.specificity);return n!==0?n:Kd(e.sourceOrder,t.sourceOrder)}function Qi(e){const t=new Map;for(const o of e)for(const r of o.affects){const i=t.get(r);(!i||Zd(o,i)>0)&&t.set(r,o)}const n=new Map;for(const o of e)n.set(o.id,"overridden");for(const[,o]of t)n.set(o.id,"active");return{winners:t,declStatus:n}}var Ks;const es=(Ks=globalThis.CSSRule)==null?void 0:Ks.CONTAINER_RULE;var Zs;const ts=(Zs=globalThis.CSSRule)==null?void 0:Zs.SCOPE_RULE;function ns(e){var t,n;if(e.disabled)return!1;try{const o=((n=(t=e.media)==null?void 0:t.mediaText)==null?void 0:n.trim())??"";return!o||o.toLowerCase()==="all"?!0:window.matchMedia(o).matches}catch{return!0}}function vr(e,t){var r;const n=typeof e.href=="string"?e.href:void 0;if(n){const i=((r=n.split("/").pop())==null?void 0:r.split("?")[0])??n;return{url:n,label:i}}const o=e.ownerNode;if(o&&o.nodeType===Node.ELEMENT_NODE){const i=o;if(i.tagName==="STYLE")return{label:`<style #${t}>`};if(i.tagName==="LINK")return{label:`<link #${t}>`}}return{label:`<constructed #${t}>`}}function os(e){try{return e.cssRules}catch{return null}}function Jd(e,t){var n,o;try{const r=((o=(n=e.media)==null?void 0:n.mediaText)==null?void 0:o.trim())??"";return!r||r.toLowerCase()==="all"?!0:window.matchMedia(r).matches}catch(r){return t.push(`Failed to evaluate @media rule: ${String(r)}`),!1}}function Qd(e,t){var n;try{const o=((n=e.conditionText)==null?void 0:n.trim())??"";return!o||typeof(CSS==null?void 0:CSS.supports)!="function"?!0:CSS.supports(o)}catch(o){return t.push(`Failed to evaluate @supports rule: ${String(o)}`),!1}}function ef(e,t){const n=[],o=[];let r=0;const i=e,s=[];try{for(const c of Array.from(i.styleSheets??[]))c&&c instanceof CSSStyleSheet&&s.push(c)}catch{}try{const c=Array.from(i.adoptedStyleSheets??[]);for(const u of c)u&&u instanceof CSSStyleSheet&&s.push(u)}catch{}let l=0;function a(c,u){var p,f;for(const h of Array.from(c)){if(r+=1,es&&h.type===es){n.push("Skipped @container rules (not evaluated in CSSOM collector)");continue}if(ts&&h.type===ts){n.push("Skipped @scope rules (not evaluated in CSSOM collector)");continue}if(h.type===CSSRule.IMPORT_RULE){const b=h;try{const w=((f=(p=b.media)==null?void 0:p.mediaText)==null?void 0:f.trim())??"";if(w&&w.toLowerCase()!=="all"&&!window.matchMedia(w).matches)continue}catch{}const m=b.styleSheet;if(m){if(u.stack.has(m)){const w=vr(m,u.sheetIndex);n.push(`Detected @import cycle, skipping: ${w.url??w.label}`);continue}u.stack.add(m);try{if(!ns(m))continue;const w=os(m),M=vr(m,u.sheetIndex);if(!w){n.push(`Skipped @import stylesheet (cannot access cssRules, likely cross-origin): ${M.url??M.label}`);continue}a(w,{sheetIndex:u.sheetIndex,sourceForRules:M,topSheet:m,stack:u.stack})}finally{u.stack.delete(m)}}continue}if(h.type===CSSRule.MEDIA_RULE){Jd(h,n)&&a(h.cssRules,u);continue}if(h.type===CSSRule.SUPPORTS_RULE){Qd(h,n)&&a(h.cssRules,u);continue}if(h.type===CSSRule.STYLE_RULE){const b=h;o.push({sheetIndex:u.sheetIndex,order:l++,selectorText:b.selectorText??"",style:b.style,source:u.sourceForRules});continue}const d=h;if(d.cssRules&&typeof d.cssRules.length=="number")try{a(d.cssRules,u)}catch{}}}for(let c=0;c<s.length;c++){const u=s[c];if(!ns(u))continue;const p=vr(u,c),f=os(u);if(!f){n.push(`Skipped stylesheet (cannot access cssRules, likely cross-origin): ${p.url??p.label}`);continue}const h=new Set;h.add(u),a(f,{sheetIndex:c,sourceForRules:p,topSheet:u,stack:h})}return{root:e,rootId:t,flatRules:o,warnings:n,stats:{styleSheets:s.length,rulesScanned:r}}}function rs(e){const t=[],n=Number((e==null?void 0:e.length)??0);for(let o=0;o<n;o++){let r="";try{r=e.item(o)}catch{r=""}if(r=qd(r),!r)continue;let i="",s=!1;try{i=e.getPropertyValue(r)??"",s=String(e.getPropertyPriority(r)??"")==="important"}catch{i="",s=!1}t.push({property:r,value:String(i).trim(),important:s,declIndex:o})}return t}function tf(e){const t=e;return!!t.style&&typeof t.style.getPropertyValue=="function"&&typeof t.style.getPropertyPriority=="function"}function Er(e,t=2){var i;const n=e.tagName.toLowerCase(),o=(i=e.id)==null?void 0:i.trim();if(o)return`${n}#${o}`;const r=Array.from(e.classList??[]).slice(0,t).filter(Boolean);return r.length?`${n}.${r.join(".")}`:n}function is(e){var t;try{const n=(t=e.getRootNode)==null?void 0:t.call(e);return n instanceof ShadowRoot?n:e.ownerDocument??document}catch{return e.ownerDocument??document}}function ss(e){var t;if(e.parentElement)return e.parentElement;try{const n=(t=e.getRootNode)==null?void 0:t.call(e);if(n instanceof ShadowRoot)return n.host}catch{}return null}function as(e,t,n,o){const r=[],i=[],s=[],l=t.root instanceof ShadowRoot?"shadow":"document";let a=null;if(o.includeInline&&tf(e)){const c=rs(e.style),u=[];for(const p of c){const f=Ji(p.property);if(!o.declFilter({property:p.property,affects:f}))continue;const h=`inline:${n}:${p.declIndex}`;u.push({id:h,name:p.property,value:p.value,important:p.important,affects:f,status:"overridden"}),s.push({id:h,important:p.important,specificity:[1,0,0,0],sourceOrder:[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,p.declIndex],property:p.property,value:p.value,affects:f,ownerRuleId:`inline:${n}`,ownerElementId:n})}a={id:`inline:${n}`,origin:"inline",selector:"element.style",matchedSelector:"element.style",specificity:[1,0,0,0],source:{label:"element.style"},order:Number.MAX_SAFE_INTEGER,decls:u}}for(const c of t.flatRules){const u=Bd(e,c.selectorText);if(!u)continue;const p=rs(c.style),f=[],h=`rule:${t.rootId}:${c.sheetIndex}:${c.order}`;for(const d of p){const b=Ji(d.property);if(!o.declFilter({property:d.property,affects:b}))continue;const m=`${h}:${d.declIndex}`;f.push({id:m,name:d.property,value:d.value,important:d.important,affects:b,status:"overridden"}),s.push({id:m,important:d.important,specificity:u.specificity,sourceOrder:[c.sheetIndex,c.order,d.declIndex],property:d.property,value:d.value,affects:b,ownerRuleId:h,ownerElementId:n})}f.length!==0&&i.push({id:h,origin:"rule",selector:c.selectorText,matchedSelector:u.matchedSelector,specificity:u.specificity,source:c.source,order:c.order,decls:f})}return i.sort((c,u)=>{const p=c.specificity??Bo,f=u.specificity??Bo,h=Uo(f,p);return h!==0?h:u.order-c.order}),{element:e,elementId:n,root:t.root,rootType:l,inlineRule:a,matchedRules:i,candidates:s,warnings:r,stats:{matchedRules:i.length}}}function nf(e,t={}){const n=[],o=Number.isFinite(t.maxInheritanceDepth)?Math.max(0,t.maxInheritanceDepth):10,r=new WeakMap;let i=1;const s=new WeakMap;let l=1;const a=new WeakMap,c=[];function u(T){const F=r.get(T);if(F)return F;const _=i++;return r.set(T,_),_}function p(T){const F=a.get(T);if(F)return F;const _=s.get(T)??(()=>{const H=l++;return s.set(T,H),H})(),D=ef(T,_);return a.set(T,D),c.push(D),D}if(!e||!e.isConnected)return{target:{label:Er(e),root:"document"},warnings:["Target element is not connected; snapshot may be incomplete."],stats:{roots:0,styleSheets:0,rulesScanned:0,matchedRules:0},sections:[]};const f=is(e),h=p(f);n.push(...h.warnings);const d=as(e,h,u(e),{includeInline:!0,declFilter:()=>!0}),b=Qi(d.candidates),m=b.declStatus;if(d.inlineRule)for(const T of d.inlineRule.decls)T.status=m.get(T.id)??"overridden";for(const T of d.matchedRules)for(const F of T.decls)F.status=m.get(F.id)??"overridden";const w=[];let M=ss(e);for(;M&&w.length<o;)w.push(M),M=ss(M);const C=new Set;for(const T of d.candidates)for(const F of T.affects)Dn(F)&&C.add(F);const E=[];for(const T of w){const F=is(T),_=p(F);n.push(..._.warnings);const D=as(T,_,u(T),{includeInline:!0,declFilter:({affects:R})=>R.some(Dn)}),H=[];for(const R of D.candidates){const V=R.affects.filter(Dn);if(V.length===0)continue;const B={...R,affects:V};H.push(B);for(const $ of V)C.add($)}const v=Qi(H);D.inlineRule&&(D.inlineRule.decls=D.inlineRule.decls.map(R=>({...R,affects:R.affects.filter(Dn)})).filter(R=>R.affects.length>0),D.inlineRule.decls.length===0&&(D.inlineRule=null)),D.matchedRules=D.matchedRules.map(R=>({...R,decls:R.decls.map(V=>({...V,affects:V.affects.filter(Dn)})).filter(V=>V.affects.length>0)})).filter(R=>R.decls.length>0),!(!D.inlineRule&&D.matchedRules.length===0)&&E.push({ancestor:T,label:Er(T),collected:{...D,candidates:H},overrides:v})}const y=new Set;for(const T of C)if(!b.winners.has(T))for(const F of E){const _=F.overrides.winners.get(T);if(_){y.add(_.id);break}}for(const T of E){if(T.collected.inlineRule)for(const F of T.collected.inlineRule.decls)F.status=y.has(F.id)?"active":"overridden";for(const F of T.collected.matchedRules)for(const _ of F.decls)_.status=y.has(_.id)?"active":"overridden"}const k=[];k.push({kind:"inline",title:"element.style",rules:d.inlineRule?[d.inlineRule]:[]}),k.push({kind:"matched",title:"Matched CSS Rules",rules:d.matchedRules});for(const T of E){const F=[];T.collected.inlineRule&&F.push(T.collected.inlineRule),F.push(...T.collected.matchedRules),k.push({kind:"inherited",title:`Inherited from ${T.label}`,inheritedFrom:{label:T.label},rules:F})}let j=0,L=0;const S=new Set;for(const T of c)S.add(T.rootId),j+=T.stats.styleSheets,L+=T.stats.rulesScanned;const g=Array.from(new Set([...n,...d.warnings]));return{target:{label:Er(e),root:f instanceof ShadowRoot?"shadow":"document"},warnings:g,stats:{roots:S.size,styleSheets:j,rulesScanned:L,matchedRules:d.stats.matchedRules},sections:k}}function of(e){return e?`(${e[0]}, ${e[1]}, ${e[2]}, ${e[3]})`:""}function ls(e){try{const t=e.classList;if(t&&typeof t[Symbol.iterator]=="function")return Array.from(t).filter(Boolean)}catch{}try{return(e.getAttribute("class")??"").split(/\s+/).map(n=>n.trim()).filter(Boolean)}catch{return[]}}function rf(e,t){const n=new Set,o=[];for(const i of t??[]){const s=String(i??"").trim();s&&(n.has(s)||(n.add(s),o.push(s)))}const r=o.join(" ").trim();try{r?e.setAttribute("class",r):e.removeAttribute("class")}catch{}}function sf(e){const t=String(e??"");let n="";for(let o=0;o<t.length;o++){const r=t[o];if(r!=="\\"){n+=r;continue}if(o>=t.length-1)break;let i=o+1,s="";for(;i<t.length&&s.length<6&&/[0-9a-fA-F]/.test(t[i]);)s+=t[i],i+=1;if(s.length>0){const l=Number.parseInt(s,16);if(Number.isFinite(l)&&l>=0&&l<=1114111){n+=String.fromCodePoint(l),i<t.length&&/\s/.test(t[i])&&(i+=1),o=i-1;continue}}n+=t[i]??"",o=i}return n}function af(e,t){for(let n=t;n<e.length;n++){const o=e[n];if(o==="\\"){const r=n+1;if(r>=e.length)return e.length;if(/[0-9a-fA-F]/.test(e[r])){let i=r,s=0;for(;i<e.length&&s<6&&/[0-9a-fA-F]/.test(e[i]);)i+=1,s+=1;i<e.length&&/\s/.test(e[i])&&(i+=1),n=i-1}else n=r;continue}if(/\s/.test(o)||o==="."||o==="#"||o===":"||o==="["||o==="]"||o==="("||o===")"||o===","||o===">"||o==="+"||o==="~"||o==="|")return n}return e.length}function lf(e){const t=[],n=String(e??"");let o=0,r=null;for(let i=0;i<n.length;i++){const s=n[i];if(r){if(s==="\\"){i+=1;continue}s===r&&(r=null);continue}if(s==='"'||s==="'"){r=s;continue}if(s==="["){o+=1;continue}if(s==="]"){o=Math.max(0,o-1);continue}if(o>0||s!==".")continue;const l=i+1;if(l>=n.length)continue;const a=af(n,l),c=n.slice(l,a),u=sf(c).trim();u&&t.push(u),i=a-1}return t}function cf(e){const t=[],n=new Set;for(const o of e.sections)for(const r of o.rules){const i=r.matchedSelector??r.selector;for(const s of lf(i))if(s&&!n.has(s)&&(n.add(s),t.push(s),t.length>=Fd))return t}return t}function Da(e){return e.trim().startsWith("--")}const cs=new Set(["*","html","body",":root",":where(*)",":is(*)"]);function uf(e){const t=e.trim().toLowerCase();return cs.has(t)?!0:t.split(/\s*,\s*/).every(o=>o.split(/\s+/).filter(Boolean).every(i=>cs.has(i)||i===">"||i==="+"||i==="~"))}function Pa(e){if(Array.isArray(e.affects)){const t=e.affects;if(t&&t.length>0)return t}return[e.name]}function df(e){const t=new Set;for(const n of e.sections)for(const o of n.rules)for(const r of o.decls)if(r.status==="active"&&!Da(r.name))for(const i of Pa(r)){const s=String(i??"").trim();s&&t.add(s)}return Array.from(t)}function ff(e,t){if(e.status!=="active"||!t.computedStyle)return!1;const n=Pa(e);let o=!1;for(const r of n){const i=String(r??"").trim();if(!i)continue;let s="";try{s=String(t.computedStyle.getPropertyValue(i)??"").trim()}catch{s=""}const l=t.defaults.getBaselineValue(t.tagName,i);if((s||l)&&(o=!0),s!==l)return!1}return o}function Fa(e,t){return!(Da(e.name)||ff(e,t))}function $a(e,t){if(!uf(e))return!1;const n=t.toLowerCase();return!(n==="html"||n==="body")}function pf(e,t,n){const o=e.matchedSelector??e.selector;if(e.origin==="rule"&&$a(o,n.tagName))return null;const r=e.decls.filter(c=>Fa(c,n));if(r.length===0)return null;const i=document.createElement("div");i.className="we-css-rule",i.dataset.ruleId=e.id,i.dataset.origin=e.origin;const s=document.createElement("div");s.className="we-css-rule-header";const l=document.createElement("span");if(l.className="we-css-rule-selector",l.textContent=e.matchedSelector??e.selector,l.title=e.selector,s.append(l),e.source){const c=document.createElement("span");c.className="we-css-rule-source",c.textContent=e.source.label,e.source.url&&(c.title=e.source.url),s.append(c)}if(e.origin==="rule"&&e.specificity){const c=document.createElement("span");c.className="we-css-rule-spec",c.textContent=of(e.specificity),c.title="ä¼˜å…ˆçº§ (å†…è”, ID, ç±», ç±»å‹)",s.append(c)}i.append(s);const a=document.createElement("div");a.className="we-css-decls";for(const c of r){const u=mf(c);a.append(u)}return i.append(a),i}function mf(e){const t=document.createElement("div");t.className="we-css-decl",t.dataset.status=e.status;const n=document.createElement("span");n.className="we-css-decl-name",n.textContent=e.name;const o=document.createElement("span");o.className="we-css-decl-colon",o.textContent=": ";const r=document.createElement("span");r.className="we-css-decl-value-container";const i=document.createElement("span");if(i.className="we-css-decl-value",i.textContent=e.value,r.append(i),e.important){const l=document.createElement("span");l.className="we-css-decl-important",l.textContent="!important",r.append(l)}const s=document.createElement("span");return s.className="we-css-decl-semi",s.textContent=";",t.append(n,o,r,s),t}function hf(e,t){const n=e.matchedSelector??e.selector;return e.origin==="rule"&&$a(n,t.tagName)?!1:e.decls.some(o=>Fa(o,t))}function Oa(e,t){return e.rules.some(n=>hf(n,t))}function gf(e,t,n){if(!Oa(e,n))return null;const o=document.createElement("div");if(o.className="we-css-section",o.dataset.kind=e.kind,e.kind==="inherited"){const i=document.createElement("div");i.className="we-css-section-header";const s=document.createElement("span");s.className="we-css-section-title",s.textContent=e.title,i.append(s),o.append(i)}const r=document.createElement("div");r.className="we-css-section-rules";for(const i of e.rules){const s=pf(i,t,n);s&&r.append(s)}return r.childElementCount===0?null:(o.append(r),o)}function bf(e){const{container:t,transactionManager:n,onClassChange:o}=e,r=new ze,i=Vd();r.add(()=>i.dispose());let s=null,l=null,a=[],c=null,u=!1,p=!1;const f=document.createElement("div");f.className="we-css-panel";const h=document.createElement("div");h.className="we-css-class-editor-mount";const d=document.createElement("div");d.className="we-css-info",d.hidden=!0;const b=document.createElement("div");b.className="we-css-empty",b.textContent="æš‚æ— æ ·å¼";const m=document.createElement("div");m.className="we-css-warnings",m.hidden=!0;const w=document.createElement("div");w.className="we-css-sections",c=Od({container:h,onClassChange:L=>{const S=s;if(!S||!S.isConnected)return;const g=ls(S);n?n.recordClass(S,g,L):rf(S,L),c==null||c.setClasses(ls(S)),o==null||o(),C()},getSuggestions:()=>a}),f.append(h,d,m,b,w),t.append(f),r.add(()=>f.remove());function M(){if(w.innerHTML="",m.innerHTML="",!l){b.hidden=!1,b.textContent="è¯·é€‰æ‹©å…ƒç´ ä»¥æŸ¥çœ‹æ ·å¼",d.hidden=!0,m.hidden=!0;return}const L=s?s.tagName.toLowerCase():"";let S=null;try{s!=null&&s.isConnected&&(S=window.getComputedStyle(s))}catch{S=null}const g={defaults:i,tagName:L,computedStyle:S};if(S&&L&&i.ensureBaselineValues(L,df(l)),!l.sections.some(F=>Oa(F,g)))b.hidden=!1,b.textContent="æœªåŒ¹é…åˆ° CSS è§„åˆ™",d.hidden=!0;else{b.hidden=!0;const{stats:F}=l;d.textContent=`åŒ¹é…åˆ° ${F.matchedRules} æ¡è§„åˆ™ï¼ˆ${F.styleSheets} ä¸ªæ ·å¼è¡¨ï¼Œå…±æ‰«æ ${F.rulesScanned} æ¡è§„åˆ™ï¼‰`,d.hidden=!1}if(l.warnings.length>0){m.hidden=!1;for(const F of l.warnings.slice(0,5)){const _=document.createElement("div");_.className="we-css-warning",_.textContent=F,m.append(_)}if(l.warnings.length>5){const F=document.createElement("div");F.className="we-css-warning-more",F.textContent=`...ä»¥åŠå¦å¤– ${l.warnings.length-5} ä¸ªè­¦å‘Š`,m.append(F)}}else m.hidden=!0;for(const F of l.sections){const _=gf(F,r,g);_&&w.append(_)}}function C(){if(!u){p=!0;return}if(!s||!s.isConnected){l=null,a=[],c==null||c.setTarget(null),M();return}l=nf(s,{maxInheritanceDepth:0}),a=l?cf(l):[],M(),p=!1}function E(L){r.isDisposed||(s=L,c==null||c.setTarget(L),C())}function y(){r.isDisposed||(c==null||c.refresh(),C())}function k(L){r.isDisposed||(u=L,L&&p&&C())}function j(){s=null,l=null,c==null||c.dispose(),c=null,a=[],u=!1,p=!1,r.dispose()}return M(),{setTarget:E,refresh:y,setVisible:k,dispose:j}}const zo=15,wf=40;function Dt(e){return e&&typeof e=="object"?e:null}function Pt(e){if(typeof e=="string")return e.trim()||void 0}function wo(e){if(typeof e=="number"&&Number.isFinite(e))return e;const t=Number.parseInt(String(e),10);return Number.isFinite(t)?t:void 0}function xo(e){if(!e)return;if(typeof e=="function"){const n=e;return Pt(n.displayName)??Pt(n.name)}const t=Dt(e);if(t)return Pt(t.displayName)??Pt(t.name)}function xf(e){let t=e;for(let n=0;n<wf&&t;n++){const o=Dt(t);if(!o)break;const r=Dt(o._debugSource),i=Pt(r==null?void 0:r.fileName);if(i){const c=xo(o.elementType)??xo(o.type);return{file:i,line:wo(r==null?void 0:r.lineNumber),column:wo(r==null?void 0:r.columnNumber),componentName:c}}const s=Dt(o._debugOwner),l=Dt(s==null?void 0:s._debugSource),a=Pt(l==null?void 0:l.fileName);if(a){const c=xo(s==null?void 0:s.elementType)??xo(s==null?void 0:s.type);return{file:a,line:wo(l==null?void 0:l.lineNumber),column:wo(l==null?void 0:l.columnNumber),componentName:c}}t=o.return}return null}function yf(e){try{let t=e;for(let n=0;n<zo&&t;n++){const o=t;for(const r of Object.keys(o))if(r.startsWith("__reactFiber$")||r.startsWith("__reactInternalInstance$")){const i=xf(o[r]);if(i)return i}t=t.parentElement}}catch{}return null}function vf(e){if(typeof e!="string")return null;const t=e.trim();if(!t)return null;const n=t.match(/:(\d+)(?::(\d+))?$/);if(!n)return{file:t};const o=t.slice(0,n.index).trim();if(!o)return null;const r=Number.parseInt(n[1],10),i=n[2]?Number.parseInt(n[2],10):void 0;return{file:o,line:Number.isFinite(r)&&r>0?r:void 0,column:i!==void 0&&Number.isFinite(i)&&i>0?i:void 0}}function Ef(e){try{let t=e;for(let n=0;n<zo&&t;n++){if(typeof t.getAttribute=="function"){const o=t.getAttribute("data-v-inspector");if(o){const r=vf(o);if(r!=null&&r.file)return r}}t=t.parentElement}}catch{}return null}function Sf(e){try{const t=Ef(e);if(t!=null&&t.file){let o,r=e;for(let i=0;i<zo&&r;i++){const l=Dt(r.__vueParentComponent),a=Dt(l==null?void 0:l.type);if(o=Pt(a==null?void 0:a.name),o)break;r=r.parentElement}return{...t,componentName:o}}let n=e;for(let o=0;o<zo&&n;o++){const i=Dt(n.__vueParentComponent),s=Dt(i==null?void 0:i.type),l=Pt(s==null?void 0:s.__file);if(l)return{file:l,componentName:Pt(s==null?void 0:s.name)};n=n.parentElement}}catch{}return null}function kf(e){const t=yf(e);if(t)return t;const n=Sf(e);return n||null}const zr=5,Cf=32,Af=8,Tf=["data-testid","data-test-id","data-test","data-qa","data-cy","name","title","alt","aria-label"],Nf=3,Rf=["data-testid","data-test-id","data-test","data-qa","data-cy"],If=24,Va=20;function Ct(e){if(typeof CSS<"u"&&typeof CSS.escape=="function")return CSS.escape(e);const t=String(e),n=t.length;if(n===0)return"";let o="";const r=t.charCodeAt(0);for(let i=0;i<n;i++){const s=t.charCodeAt(i);if(s===0){o+="ï¿½";continue}if(s>=1&&s<=31||s===127||i===0&&s>=48&&s<=57||i===1&&s>=48&&s<=57&&r===45){o+=`\\${s.toString(16)} `;continue}if(i===0&&n===1&&s===45){o+=`\\${t.charAt(i)}`;continue}s>=48&&s<=57||s>=65&&s<=90||s>=97&&s<=122||s===45||s===95?o+=t.charAt(i):o+=`\\${t.charAt(i)}`}return o}function ni(e){var n;const t=(n=e.getRootNode)==null?void 0:n.call(e);return t instanceof ShadowRoot?t:document}function $o(e,t){try{return e.querySelector(t)}catch{return null}}function ft(e,t){try{return e.querySelectorAll(t).length===1}catch{return!1}}function Ba(e,t){var r;const n=(r=e.id)==null?void 0:r.trim();if(!n)return null;const o=`#${Ct(n)}`;return ft(t,o)?o:null}function _f(e,t,n){var i;const o=[];if(n<=0)return o;const r=e.tagName.toLowerCase();for(const s of Tf){if(o.length>=n)break;const l=(i=e.getAttribute(s))==null?void 0:i.trim();if(!l)continue;const a=`[${s}="${Ct(l)}"]`;if(ft(t,a)){o.push(a);continue}const c=`${r}${a}`;ft(t,c)&&o.push(c)}return o}function Mf(e,t,n){const o=[];if(n<=0)return o;const r=e.tagName.toLowerCase(),i=Array.from(e.classList).filter(a=>a&&/^[a-zA-Z_][a-zA-Z0-9_-]*$/.test(a)).slice(0,If);if(i.length===0)return o;const s=new Map;for(const a of i){if(o.length>=n)return o;const c=`.${Ct(a)}`,u=ft(t,c);s.set(a,u),u&&o.push(c)}for(const a of i){if(o.length>=n)return o;if(s.get(a)===!0)continue;const c=`${r}.${Ct(a)}`;ft(t,c)&&o.push(c)}const l=Math.min(i.length,Nf);for(let a=0;a<l;a++)for(let c=a+1;c<l;c++){if(o.length>=n)return o;const u=i[a],p=i[c],f=`.${Ct(u)}.${Ct(p)}`;if(ft(t,f)){o.push(f);continue}const h=`${r}${f}`;ft(t,h)&&o.push(h)}if(l>=3&&o.length<n){const a=`.${Ct(i[0])}.${Ct(i[1])}.${Ct(i[2])}`;if(ft(t,a))o.push(a);else{const c=`${r}${a}`;o.length<n&&ft(t,c)&&o.push(c)}}return o}function Lf(e,t){const n=[];let o=e;const r=t instanceof Document;for(;o&&o.nodeType===Node.ELEMENT_NODE;){const s=o.tagName.toLowerCase();if(r&&s==="body")break;let l=s;const a=o.parentElement,c=o.parentNode;let u;a?u=Array.from(a.children):c instanceof ShadowRoot||c instanceof Document?u=Array.from(c.children):u=[];const p=u.filter(f=>f.tagName===o.tagName);if(p.length>1){const f=p.indexOf(o)+1;l+=`:nth-of-type(${f})`}if(n.unshift(l),o=a,!a&&c===t)break}const i=n.join(" > ");return r?`body > ${i}`:i||"*"}function Df(e,t,n){const o=[];let r=t;for(let i=0;r&&r!==e&&i<Va;i++){let l=r.tagName.toLowerCase();const a=r.parentElement,c=r.parentNode;let u;a?u=Array.from(a.children):c instanceof ShadowRoot||c instanceof Document?u=Array.from(c.children):u=[];const p=u.filter(f=>f.tagName===r.tagName);if(p.length>1){const f=p.indexOf(r)+1;l+=`:nth-of-type(${f})`}if(o.unshift(l),!a){if(c===n)break;break}r=a}return r!==e?null:o.join(" > ")||null}function Pf(e,t){var r;const n=Ba(e,t);if(n)return n;const o=e.tagName.toLowerCase();for(const i of Rf){const s=(r=e.getAttribute(i))==null?void 0:r.trim();if(!s)continue;const l=`[${i}="${Ct(s)}"]`;if(ft(t,l))return l;const a=`${o}${l}`;if(ft(t,a))return a}return null}function Ff(e,t){let n=e.parentElement;for(let o=0;n&&o<Va;o++){const r=n.tagName.toUpperCase();if(r==="HTML"||r==="BODY")break;const i=Pf(n,t);if(i){const s=Df(n,e,t);if(!s){n=n.parentElement;continue}const l=`${i} ${s}`;if(!ft(t,l)){n=n.parentElement;continue}if($o(t,l)===e)return l}n=n.parentElement}return null}function $f(e){var o;const t=[];let n=e;for(;;){const r=(o=n.getRootNode)==null?void 0:o.call(n);if(!(r instanceof ShadowRoot))break;const i=r.host;if(!(i instanceof Element))break;const s=ni(i),l=Bf(i,{root:s});if(!l)break;t.unshift(l),n=i}return t.length>0?t:void 0}function Of(e,t){return e.replace(/\s+/g," ").trim().slice(0,t)}function za(e){var s,l;const t=[],n=((s=e.tagName)==null?void 0:s.toLowerCase())??"unknown";t.push(n);const o=(l=e.id)==null?void 0:l.trim();o&&t.push(`id=${o}`);const r=Array.from(e.classList).slice(0,Af);r.length>0&&t.push(`class=${r.join(".")}`);const i=Of(e.textContent??"",Cf);return i&&t.push(`text=${i}`),t.join("|")}function Vf(e){const t=[];let n=e;for(;n;){const o=n.parentElement;if(o){const s=Array.from(o.children).indexOf(n);s>=0&&t.unshift(s),n=o;continue}const r=n.parentNode;if(r instanceof ShadowRoot||r instanceof Document){const s=Array.from(r.children).indexOf(n);s>=0&&t.unshift(s)}break}return t}function Ha(e,t={}){const n=t.root??ni(e),o=Math.max(1,t.maxCandidates??zr),r=[],i=(c,u=o)=>{if(!c||r.length>=u)return;const p=c.trim();!p||r.includes(p)||r.push(p)},s=o>=zr?Ff(e,n):null,l=1+(s?1:0),a=Math.max(1,o-l);i(Ba(e,n),a);for(const c of _f(e,n,a-r.length))i(c,a);for(const c of Mf(e,n,a-r.length))i(c,a);return i(Lf(e,n)),i(s),r.slice(0,o)}function Bf(e,t={}){return Ha(e,t)[0]??""}function Ye(e){const t=ni(e),n=kf(e)??void 0;return{selectors:Ha(e,{root:t,maxCandidates:zr}),fingerprint:za(e),path:Vf(e),shadowHostChain:$f(e),debugSource:n}}function us(e,t){try{return e.querySelectorAll(t).length===1}catch{return!1}}function zf(e,t){const n=za(e),o=t.split("|"),r=n.split("|");if(o[0]!==r[0])return!1;const i=o.find(l=>l.startsWith("id=")),s=r.find(l=>l.startsWith("id="));return!(i&&i!==s)}function Ge(e,t=document){var r,i;let n=t;if((r=e.frameChain)!=null&&r.length)for(const s of e.frameChain){const l=$o(n,s);if(!(l instanceof HTMLIFrameElement))return null;const a=l.contentDocument;if(!a)return null;n=a}let o=n;if((i=e.shadowHostChain)!=null&&i.length)for(const s of e.shadowHostChain){if(!us(o,s))return null;const l=$o(o,s);if(!l)return null;const a=l.shadowRoot;if(!a)return null;o=a}for(const s of e.selectors){if(!us(o,s))continue;const l=$o(o,s);if(l&&!(e.fingerprint&&!zf(l,e.fingerprint)))return l}return null}function Ft(e){var r,i;const t=e.selectors.join("|"),n=((r=e.shadowHostChain)==null?void 0:r.join(">"))??"";return`frame:${((i=e.frameChain)==null?void 0:i.join(">"))??""}|shadow:${n}|sel:${t}`}const Hf=250,Gf=new Set(["__proto__","constructor","prototype","__defineGetter__","__defineSetter__","__lookupGetter__","__lookupSetter__"]);function Pn(e){return Gf.has(String(e??"").trim())}function Wf(e,t){if(e==="react"){const n=t==null?void 0:t.trim();return n?`React ${n}`:"React"}if(e==="vue"){const n=t==null?void 0:t.trim();return n?`Vue ${n}`:"Vue"}return"æœªçŸ¥"}function jf(e){return e?String(e):""}function ds(e){switch(e.kind){case"null":return"null";case"undefined":return"undefined";case"boolean":return e.value?"true":"false";case"number":return e.special?e.special:typeof e.value=="number"?String(e.value):"NaN";case"string":return e.truncated?`"${e.value}â€¦"`:JSON.stringify(e.value);case"bigint":return`${e.value}n`;case"symbol":return`Symbol(${e.description})`;case"function":return`Æ’ ${e.name??"(åŒ¿å)"}`;case"react_element":return e.display;case"dom_element":{const t=String(e.tagName??"").toLowerCase()||"å…ƒç´ ",n=e.id?`#${e.id}`:"",o=e.className?`.${String(e.className).split(/\s+/).filter(Boolean).slice(0,2).join(".")}`:"";return`<${t}${n}${o}>`}case"date":return e.value;case"regexp":return`/${e.source}/${e.flags}`;case"error":return`${e.name}: ${e.message}`;case"circular":return`[Circular #${e.refId}]`;case"max_depth":return e.preview;case"array":return`Array(${e.length})`;case"object":return`${e.name??"Object"} {â€¦}`;case"map":return`Map(${e.size})`;case"set":return`Set(${e.size})`;case"unknown":return e.preview;default:return String(e.kind??"æœªçŸ¥")}}function Uf(e){return e.special||typeof e.value!="number"?!1:Number.isFinite(e.value)}function fs(e){const t=e.trim();if(!t)return{ok:!1};if(/^-?\d+\.$/.test(t)){const n=Number(t.slice(0,-1));return Number.isFinite(n)?{ok:!0,value:n}:{ok:!1}}if(/^-?(?:\d+|\d*\.\d+)$/.test(t)){const n=Number(t);return Number.isFinite(n)?{ok:!0,value:n}:{ok:!1}}return{ok:!1}}function yo(e,t){return t?e?{...e,...t,capabilities:t.capabilities??e.capabilities,props:t.props??e.props,meta:{...e.meta??{},...t.meta??{}}}:t:e}function Xf(e,t,n){if(e)return"åŠ è½½ä¸­â€¦";if(!t)return n?`é”™è¯¯ â€¢ ${n}`:"ç­‰å¾…é€‰æ‹©å…ƒç´ â€¦";const o=[],r=t.capabilities;r?(o.push(`è¯»å–: ${r.canRead?"æ˜¯":"å¦"}`),o.push(`å†™å…¥: ${r.canWrite?"æ˜¯":"å¦"}`)):(o.push("è¯»å–: æœªçŸ¥"),o.push("å†™å…¥: æœªçŸ¥"));const i=jf(t.hookStatus);return i&&o.push(`hook: ${i}`),t.needsRefresh&&o.push("éœ€è¦åˆ·æ–°"),n&&o.push("é”™è¯¯"),o.join(" â€¢ ")}function Sr(e){var t;return!!((t=e==null?void 0:e.capabilities)!=null&&t.canWrite)&&!(e!=null&&e.needsRefresh)}function Yf(e){var t;return!!((t=e==null?void 0:e.capabilities)!=null&&t.canRead)}function ps(e,t){const n=e==null?void 0:e.props;return!n||!Array.isArray(n.entries)?null:n.entries.find(o=>o.key===t)??null}function ms(e,t){if(t.classList.remove("we-props-input--invalid"),e.value.kind==="string"){t.value=e.value.value??"";return}if(e.value.kind==="number"){typeof e.value.value=="number"&&Number.isFinite(e.value.value)?t.value=String(e.value.value):e.value.special?t.value=e.value.special:t.value="";return}e.value.kind==="boolean"&&(t.checked=!!e.value.value)}function qf(e,t,n){var r;if(!((r=e==null?void 0:e.props)!=null&&r.entries))return;const o=e.props.entries.find(i=>i.key===t);if(o){if(typeof n=="string"){o.value={kind:"string",value:n},o.editable=!0;return}if(typeof n=="number"){o.value={kind:"number",value:n},o.editable=!0;return}o.value={kind:"boolean",value:n},o.editable=!0}}function Kf(e){const{container:t,propsBridge:n}=e,o=new ze,r=document.createElement("div");r.className="we-tooltip",r.hidden=!0;const i=t.getRootNode();i instanceof ShadowRoot?i.appendChild(r):document.body.appendChild(r),o.add(()=>r.remove());function s(ae){const ee=ae.getAttribute("data-tip");if(!ee){r.hidden=!0;return}const O=ae.getBoundingClientRect();r.textContent=ee,r.style.left=`${O.left+O.width/2}px`,r.style.top=`${O.bottom+4}px`,r.hidden=!1}function l(){r.hidden=!0}let a=null,c=null,u=!1,p=!1,f=!1,h=0,d=null,b=null;const m=new Map,w=document.createElement("div");w.className="we-props-panel";const M=document.createElement("div");M.className="we-props-meta";const C=document.createElement("div");C.className="we-props-meta-title";const E=document.createElement("div");E.className="we-props-title-left";const y=document.createElement("div");y.className="we-props-component",y.textContent="å±æ€§";const k=document.createElement("span");k.className="we-props-badge",k.textContent="æœªçŸ¥",E.append(y,k);const j=document.createElement("div");j.className="we-props-title-actions";const L=document.createElement("button");L.type="button",L.className="we-props-action-btn",L.dataset.tip="åˆ·æ–°",L.setAttribute("aria-label","åˆ·æ–°å±æ€§"),L.innerHTML=`<svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M11.5 7C11.5 9.48528 9.48528 11.5 7 11.5C4.51472 11.5 2.5 9.48528 2.5 7C2.5 4.51472 4.51472 2.5 7 2.5C8.5 2.5 9.83 3.25 10.6 4.4M10.6 2V4.4H8.2" stroke="currentColor" stroke-width="1.3" stroke-linecap="round" stroke-linejoin="round"/>
  </svg>`;const S=document.createElement("button");S.type="button",S.className="we-props-action-btn",S.dataset.tip="é‡ç½®",S.setAttribute("aria-label","é‡ç½®å±æ€§ä¿®æ”¹"),S.innerHTML=`<svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M3 5.5H8.5C10.1569 5.5 11.5 6.84315 11.5 8.5C11.5 10.1569 10.1569 11.5 8.5 11.5H7M3 5.5L5.5 3M3 5.5L5.5 8" stroke="currentColor" stroke-width="1.3" stroke-linecap="round" stroke-linejoin="round"/>
  </svg>`,j.append(L,S),C.append(E,j);const g=document.createElement("div");g.className="we-props-status";const T=document.createElement("div");T.className="we-props-warning",T.hidden=!0;const F=document.createElement("div");F.className="we-props-error",F.hidden=!0,M.append(C,g,T,F);const _=document.createElement("div");_.className="we-props-list";const D=document.createElement("div");D.className="we-props-empty",D.textContent="è¯·é€‰æ‹©å…ƒç´ ä»¥æŸ¥çœ‹å±æ€§ã€‚";const H=document.createElement("div");H.className="we-props-rows",_.append(D,H),w.append(M,_),t.append(w),o.add(()=>w.remove());function v(){for(const[,ae]of m)clearTimeout(ae.timeoutId);m.clear()}function R(){if(m.size===0)return;const ae=[...m.keys()];for(const ee of ae){const O=m.get(ee);O&&(clearTimeout(O.timeoutId),m.delete(ee),Y(ee,O.value))}}o.add(v);function V(ae){const ee=m.get(ae);ee&&(clearTimeout(ee.timeoutId),m.delete(ae))}function B(ae){const ee=m.get(ae);ee&&(clearTimeout(ee.timeoutId),m.delete(ae),Y(ae,ee.value))}function $(ae,ee){V(ae);const O=window.setTimeout(()=>{m.delete(ae),Y(ae,ee)},Hf);m.set(ae,{timeoutId:O,value:ee})}function q(){var De;const ae=!!(a&&a.isConnected),ee=d==null?void 0:d.framework,O=d==null?void 0:d.frameworkVersion,ie=d==null?void 0:d.componentName;y.textContent=ie||"å±æ€§",k.textContent=Wf(ee,O),g.textContent=ae?Xf(f,d,b):"è¯·é€‰æ‹©å…ƒç´ ä»¥æŸ¥çœ‹å±æ€§ã€‚",T.hidden=!0,T.textContent="",ae&&(d!=null&&d.needsRefresh?(T.hidden=!1,T.textContent="éœ€è¦åˆ·æ–°é¡µé¢ä»¥å¯ç”¨å®Œæ•´çš„å±æ€§æŸ¥çœ‹ä¸ç¼–è¾‘ã€‚"):(d==null?void 0:d.hookStatus)==="RENDERERS_NO_EDITING"?(T.hidden=!1,T.textContent="ç¼–è¾‘ä¸å¯ç”¨ï¼ˆå¯èƒ½æ˜¯æœªå¯ç”¨ overrideProps çš„ç”Ÿäº§æ„å»ºï¼‰ã€‚"):(De=d==null?void 0:d.props)!=null&&De.truncated&&(T.hidden=!1,T.textContent="å±æ€§åˆ—è¡¨å·²è¢«æˆªæ–­ã€‚")),F.hidden=!b,F.textContent=b??"";const ye=d==null?void 0:d.hookStatus,ve=ye==="HOOK_MISSING"||ye==="HOOK_PRESENT_NO_RENDERERS",Ae=(d==null?void 0:d.needsRefresh)&&ve;L.dataset.tip=Ae?"å¯ç”¨å¹¶é‡æ–°åŠ è½½":"åˆ·æ–°",L.disabled=!ae||f,S.disabled=!ae||f||!Sr(d)}function ne(){H.innerHTML="";const ae=!!(a&&a.isConnected),ee=d;if(!ae){D.hidden=!1,D.classList.remove("we-loading"),D.textContent="è¯·é€‰æ‹©å…ƒç´ ä»¥æŸ¥çœ‹å±æ€§ã€‚";return}if(f){D.hidden=!1,D.classList.add("we-loading"),D.innerHTML=`<svg width="14" height="14" viewBox="0 0 14 14" fill="none" style="animation: we-spin 0.8s linear infinite;">
        <circle cx="7" cy="7" r="5.5" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-dasharray="20 14" />
      </svg><span>æ­£åœ¨åŠ è½½å±æ€§â€¦</span>`;return}if(D.classList.remove("we-loading"),!Yf(ee)){D.hidden=!1;const Fe=ee==null?void 0:ee.hookStatus;ee!=null&&ee.needsRefresh||Fe==="HOOK_MISSING"||Fe==="HOOK_PRESENT_NO_RENDERERS"?D.textContent="å±æ€§æŸ¥çœ‹æœªå°±ç»ªã€‚è¯·åœ¨å¼€å‘æ¨¡å¼ä¸‹åˆ·æ–°é¡µé¢ã€‚":Fe==="RENDERERS_NO_EDITING"?D.textContent="å½“å‰æ„å»ºä¸æ”¯æŒå±æ€§æŸ¥çœ‹/ç¼–è¾‘ã€‚":D.textContent="æ­¤å…ƒç´ ä¸æ”¯æŒå±æ€§æŸ¥çœ‹ã€‚";return}const ie=ee==null?void 0:ee.props;if(!ie||!Array.isArray(ie.entries)||ie.entries.length===0){D.hidden=!1,D.textContent=(ee==null?void 0:ee.framework)==="vue"?"æœªå‘ç° Props æˆ– Attrsã€‚":"æœªå‘ç° Propsã€‚";return}D.hidden=!0;const ve=!Sr(ee)||f,Ae=(ee==null?void 0:ee.framework)==="vue",De=ie.entries,We=Ae&&De.some(Fe=>Fe.source==="attrs")?[{title:"å±æ€§ (Props)",entries:De.filter(Fe=>Fe.source!=="attrs")},{title:"å±æ€§ (Attrs)",entries:De.filter(Fe=>Fe.source==="attrs")}].filter(Fe=>Fe.entries.length>0):[{title:"",entries:De}];for(const Fe of We){if(Fe.title){const _e=document.createElement("div");_e.className="we-props-group",_e.textContent=Fe.title,H.append(_e)}for(const _e of Fe.entries){const oe=document.createElement("div");oe.className="we-props-row";const x=document.createElement("div");x.className="we-props-key",x.textContent=_e.key;const N=document.createElement("div");N.className="we-props-value";const I=Pn(_e.key),K=!!_e.editable&&!I,G=(Array.isArray(_e.enumValues)?_e.enumValues:[]).filter(U=>typeof U=="string"&&U.trim().length>0);if(K&&_e.value.kind==="string"&&G.length>0){const U=document.createElement("select");U.className="we-select we-props-input",U.disabled=ve,U.dataset.propKey=_e.key,U.dataset.propKind="enum",U.setAttribute("aria-label",`é€‰æ‹©å±æ€§ ${_e.key}`);const le=_e.value.kind==="string"?_e.value.value??"":"",re=new Set;if(le&&!G.includes(le)){const fe=document.createElement("option");fe.value=le,fe.textContent=`${le} (å½“å‰å€¼)`,U.append(fe),re.add(le)}for(const fe of G){if(re.has(fe))continue;re.add(fe);const be=document.createElement("option");be.value=fe,be.textContent=fe,U.append(be)}le&&re.has(le)&&(U.value=le),N.append(U)}else if(K&&_e.value.kind==="boolean"){const U=document.createElement("label");U.className="we-props-bool";const le=document.createElement("input");le.type="checkbox",le.className="we-props-checkbox",le.checked=!!_e.value.value,le.disabled=ve,le.dataset.propKey=_e.key,le.dataset.propKind="boolean",le.setAttribute("aria-label",`åˆ‡æ¢å±æ€§ ${_e.key}`);const re=document.createElement("span");re.textContent=le.checked?"true":"false",re.dataset.weBoolText="1",U.append(le,re),N.append(U)}else if(K&&_e.value.kind==="string"){const U=document.createElement("input");U.type="text",U.className="we-input we-props-input",U.autocomplete="off",U.spellcheck=!1,U.value=_e.value.value??"",U.disabled=ve,U.dataset.propKey=_e.key,U.dataset.propKind="string",U.setAttribute("aria-label",`ç¼–è¾‘å±æ€§ ${_e.key}`),N.append(U)}else if(K&&_e.value.kind==="number"&&Uf(_e.value)){const U=document.createElement("input");U.type="text",U.inputMode="decimal",U.className="we-input we-props-input",U.autocomplete="off",U.spellcheck=!1,U.value=String(_e.value.value),U.disabled=ve,U.dataset.propKey=_e.key,U.dataset.propKind="number",U.setAttribute("aria-label",`ç¼–è¾‘å±æ€§ ${_e.key}`),N.append(U)}else N.classList.add("we-props-value--readonly"),N.textContent=I?`${ds(_e.value)} (å·²é˜»æ­¢)`:ds(_e.value);oe.append(x,N),H.append(oe)}}}function A(){q(),ne()}async function P(){var ie,ye;if(o.isDisposed)return;if(!u){p=!0;return}const ae=a,ee=c;if(!ae||!ae.isConnected||!ee){d=null,b=null,f=!1,p=!1,A();return}const O=h;f=!0,b=null,A();try{const ve=await n.probe(ee);if(o.isDisposed||O!==h)return;if(d=yo(d,ve.data),ve.ok||(b=ve.error??"å±æ€§æ¢æµ‹å¤±è´¥"),!!((ye=(ie=ve.data)==null?void 0:ie.capabilities)!=null&&ye.canRead)){const De=await n.read(ee);if(o.isDisposed||O!==h)return;d=yo(d,De.data),De.ok||(b=De.error??"å±æ€§è¯»å–å¤±è´¥")}}catch(ve){if(o.isDisposed||O!==h)return;b=ve instanceof Error?ve.message:String(ve)}finally{!o.isDisposed&&O===h&&(f=!1,p=!1,A())}}async function Y(ae,ee){if(o.isDisposed)return;const O=a,ie=c;if(!O||!O.isConnected||!ie)return;if(Pn(ae)){b="å·²é˜»æ­¢çš„å±æ€§é”®ï¼ˆå®‰å…¨åŸå› ï¼‰",q();return}const ye=h;if(!Sr(d)){b="æ­¤å…ƒç´ ä¸æ”¯æŒå±æ€§ç¼–è¾‘ã€‚",q();return}try{const Ae=await n.write(ie,[ae],ee);if(o.isDisposed||ye!==h)return;if(d=yo(d,Ae.data),!Ae.ok){b=Ae.error??"å±æ€§å†™å…¥å¤±è´¥",q();return}b=null,qf(d,ae,ee),q()}catch(Ae){if(o.isDisposed||ye!==h)return;b=Ae instanceof Error?Ae.message:String(Ae),q()}}async function z(){if(o.isDisposed)return;const ae=a,ee=c;if(!ae||!ae.isConnected||!ee)return;const O=h;v(),f=!0,b=null,A();try{const ie=await n.reset(ee);if(o.isDisposed||O!==h)return;d=yo(d,ie.data),ie.ok||(b=ie.error??"å±æ€§é‡ç½®å¤±è´¥")}catch(ie){if(o.isDisposed||O!==h)return;b=ie instanceof Error?ie.message:String(ie)}finally{!o.isDisposed&&O===h&&(f=!1,q(),P())}}const J=ae=>{o.listen(ae,"mouseenter",()=>s(ae)),o.listen(ae,"mouseleave",l)};J(L),J(S),o.listen(L,"click",ae=>{ae.preventDefault(),v(),P()}),o.listen(S,"click",ae=>{ae.preventDefault(),z()}),o.listen(H,"input",ae=>{const ee=ae.target;if(!(ee instanceof HTMLInputElement)||ee.disabled||ee.type==="checkbox")return;const O=ee.dataset.propKey??"",ie=ee.dataset.propKind??"";if(!(!O||!ie||Pn(O)||ae.isComposing)){if(ie==="string"){$(O,ee.value);return}if(ie==="number"){const ve=fs(ee.value);if(!ee.value.trim()){V(O),ee.classList.remove("we-props-input--invalid");return}if(!ve.ok){V(O),ee.classList.add("we-props-input--invalid");return}ee.classList.remove("we-props-input--invalid"),$(O,ve.value)}}}),o.listen(H,"change",ae=>{var Ae;const ee=ae.target;if(!ee)return;if(ee instanceof HTMLSelectElement){if(ee.disabled)return;const De=ee.dataset.propKey??"",Oe=ee.dataset.propKind??"";if(!De||Oe!=="enum"||Pn(De))return;Y(De,ee.value);return}if(!(ee instanceof HTMLInputElement)||ee.disabled||ee.type!=="checkbox")return;const O=ee.dataset.propKey??"",ie=ee.dataset.propKind??"";if(!O||ie!=="boolean"||Pn(O))return;const ye=ee.closest(".we-props-bool"),ve=(Ae=ye==null?void 0:ye.querySelector)==null?void 0:Ae.call(ye,'span[data-we-bool-text="1"]');ve&&(ve.textContent=ee.checked?"true":"false"),Y(O,ee.checked)}),o.listen(H,"keydown",ae=>{const ee=ae.target;if(!(ee instanceof HTMLInputElement)||ee.disabled)return;const O=ee.dataset.propKey??"",ie=ee.dataset.propKind??"";if(!(!O||!ie)){if(ae.key==="Enter"){if(ae.isComposing)return;ae.preventDefault(),B(O);try{ee.blur()}catch{}return}if(ae.key==="Escape"){ae.preventDefault(),V(O);const ye=ps(d,O);if(!ye)return;ms(ye,ee)}}}),o.listen(H,"focusout",ae=>{const ee=ae.target;if(!(ee instanceof HTMLInputElement)||ee.disabled)return;const O=ee.dataset.propKey??"",ie=ee.dataset.propKind??"";if(O){if(ie==="number"){const ye=fs(ee.value);if(!ee.value.trim()||!ye.ok){V(O),ee.classList.remove("we-props-input--invalid");const ve=ps(d,O);ve&&ms(ve,ee);return}}B(O)}});function pe(ae){o.isDisposed||(R(),h+=1,a=ae&&ae.isConnected?ae:null,c=a?Ye(a):null,d=null,b=null,f=!1,p=!1,A(),u?P():p=!0)}function he(){o.isDisposed||(v(),P())}function Se(ae){o.isDisposed||(u=ae,ae&&p&&P())}function xe(){a=null,c=null,d=null,b=null,f=!1,p=!1,o.dispose()}return A(),{setTarget:pe,refresh:he,setVisible:Se,dispose:xe}}const Zf=[{id:"spacing",label:"é—´è·",collapsible:!0},{id:"layout",label:"å¸ƒå±€",collapsible:!0},{id:"background",label:"èƒŒæ™¯",collapsible:!0},{id:"typography",label:"æ–‡å­—",collapsible:!0},{id:"border",label:"è¾¹æ¡†",collapsible:!0},{id:"position",label:"å®šä½",collapsible:!0},{id:"size",label:"å°ºå¯¸",collapsible:!0},{id:"appearance",label:"å¤–è§‚",collapsible:!0},{id:"effects",label:"æ•ˆæœ",collapsible:!1}],Jf=[{provider:"claude",label:"ClaudeCode"},{provider:"cursor",label:"Cursor"},{provider:"codex",label:"Codex"}];let Qf=0;function kr(e){var i;const t=e.tagName.toLowerCase(),o=(i=e.id)==null?void 0:i.trim();if(o)return`${t}#${o}`;const r=Array.from(e.classList??[]).slice(0,2);return r.length>0?`${t}.${r.join(".")}`:t}function ep(e,t,n,o){const r=`we_group_${e}_${++Qf}`,i=(o==null?void 0:o.collapsible)??!0;let s=!1;const l=document.createElement("section");l.className="we-group",l.dataset.group=e,l.dataset.collapsed="false";const a=document.createElement("div");a.className="we-group-header";const c=document.createElement("span");c.textContent=t;let u;if(i){const m=document.createElement("button");m.type="button",m.className="we-group-toggle",m.setAttribute("aria-expanded","true"),m.setAttribute("aria-controls",r),m.append(c,Xl()),n.listen(m,"click",w=>{w.preventDefault(),b()}),u=m}else{const m=document.createElement("div");m.className="we-group-toggle we-group-toggle--static",m.append(c),u=m}const p=document.createElement("div");p.className="we-group-header-actions",a.append(u,p);const f=document.createElement("div");f.className="we-group-body",f.id=r,l.append(a,f);function h(m){i&&(s=m,l.dataset.collapsed=s?"true":"false",u.setAttribute("aria-expanded",s?"false":"true"))}function d(){return s}function b(){i&&h(!s)}return{root:l,body:f,headerActions:p,setCollapsed:h,isCollapsed:d,toggle:b}}function tp(e){const t=new ze;let n=null,o=e.defaultTab??"design";const r=e.showPropsTab??!1,i=e.showDomTab??!1;o==="props"&&!r&&(o="design"),o==="dom"&&!i&&(o="design");let s=!1,l=e.initialPosition??null;const a=new Map,c=[];let u=null,p=null,f=null,h=0,d=0,b=!1,m=!1,w=!1,M=!1,C=null,E=null,y=null,k=null,j=null,L=null;const S=document.createElement("aside");S.className="we-panel we-prop-panel",S.setAttribute("role","complementary"),S.setAttribute("aria-label","å±æ€§é¢æ¿"),S.dataset.tab=o,S.dataset.empty="true",S.dataset.minimized="false",S.dataset.dragged=l?"true":"false",S.dataset.menuOpen="false";const g=document.createElement("header");g.className="we-header";const T=document.createElement("div");T.className="we-prop-header-left";const F=document.createElement("div");F.className="we-prop-header-right";const _=document.createElement("button");_.type="button",_.className="we-drag-handle",_.setAttribute("aria-label","æ‹–æ‹½å±æ€§é¢æ¿"),_.dataset.tooltip="æ‹–æ‹½",_.append(aa());const D=document.createElement("button");D.type="button",D.className="we-prop-action-btn",D.setAttribute("aria-label","æ’¤é”€"),D.dataset.tooltip="æ’¤é”€";const H=document.createElement("span");H.className="we-prop-count",H.hidden=!0,D.append(la(),H);const v=document.createElement("button");v.type="button",v.className="we-prop-action-btn",v.setAttribute("aria-label","é‡åš"),v.dataset.tooltip="é‡åš";const R=document.createElement("span");R.className="we-prop-count",R.hidden=!0,v.append(ca(),R);const V=document.createElement("div");V.className="we-prop-undo-redo",V.append(D,v);const B=document.createElement("button");B.type="button",B.className="we-icon-btn we-prop-selection-btn",B.setAttribute("aria-label","é€‰æ‹©æ¨¡å¼"),B.dataset.tooltip="ç¦ç”¨é€‰æ‹© (è¿›å…¥äº¤äº’æ¨¡å¼)",B.style.marginRight="8px",B.append(Zl());let $=!0;function q(){$?(B.dataset.active="true",B.style.color="#008F5D",B.style.backgroundColor="rgba(0, 143, 93, 0.1)",B.dataset.tooltip="å·²å¯ç”¨é€‰æ‹©"):(B.dataset.active="false",B.style.color="var(--ant-text-color-secondary, rgba(0, 0, 0, 0.45))",B.style.backgroundColor="transparent",B.dataset.tooltip="å·²ç¦ç”¨é€‰æ‹©")}t.listen(B,"click",te=>{var de;te.preventDefault(),$=!$,q(),(de=e.onToggleSelectionMode)==null||de.call(e,$)}),q(),T.append(B,V);const ne=document.createElement("div");ne.className="we-prop-target",ne.hidden=!0;const A=document.createElement("div");A.className="we-prop-tabs",A.setAttribute("role","tablist"),A.setAttribute("aria-label","å±æ€§æ ‡ç­¾"),A.hidden=!0;const P=document.createElement("button");P.type="button",P.className="we-tab",P.setAttribute("role","tab"),P.dataset.tab="design",P.textContent="è®¾è®¡";const Y=document.createElement("button");Y.type="button",Y.className="we-tab",Y.setAttribute("role","tab"),Y.dataset.tab="css",Y.textContent="æ ·å¼";const z=document.createElement("button");z.type="button",z.className="we-tab",z.setAttribute("role","tab"),z.dataset.tab="props",z.textContent="å±æ€§";const J=document.createElement("button");J.type="button",J.className="we-tab",J.setAttribute("role","tab"),J.dataset.tab="dom",J.textContent="ç»“æ„",A.append(P,Y),r&&A.append(z),i&&A.append(J);const pe=document.createElement("div");pe.className="we-prop-menu-wrap",pe.dataset.open="false";const he=document.createElement("button");he.type="button",he.className="we-icon-btn we-prop-menu-btn",he.setAttribute("aria-label","ä¿å­˜"),he.dataset.tooltip="ä¿å­˜",he.append(ql());const Se=document.createElement("div");Se.className="we-prop-menu",Se.setAttribute("role","menu");const xe=document.createElement("button");xe.type="button",xe.className="we-prop-menu-item",xe.setAttribute("role","menuitem"),xe.dataset.action="save-style",xe.textContent="å¼ºåˆ¶ä¿å­˜æ ·å¼";const ae=document.createElement("button");ae.type="button",ae.className="we-prop-menu-item",ae.setAttribute("role","menuitem"),ae.dataset.action="save-text",ae.textContent="å¼ºåˆ¶ä¿å­˜æ–‡æœ¬";const ee=document.createElement("button");ee.type="button",ee.className="we-prop-menu-item",ee.setAttribute("role","menuitem"),ee.dataset.action="copy-prompt",ee.textContent="å¤åˆ¶ prompt";const O=document.createElement("div");O.className="we-prop-submenu-wrap",O.dataset.open="false";const ie=document.createElement("button");ie.type="button",ie.className="we-prop-menu-item we-prop-submenu-trigger",ie.setAttribute("role","menuitem"),ie.dataset.action="run-with-genie",ie.textContent="ç”± Genie æ‰§è¡Œ";const ye=document.createElement("span");ye.className="we-prop-submenu-arrow",ye.setAttribute("aria-hidden","true"),ye.textContent="â€º",ie.append(ye);const ve=document.createElement("div");ve.className="we-prop-submenu",ve.setAttribute("role","menu");const Ae=Jf.map(({provider:te,label:de})=>{const ke=document.createElement("button");return ke.type="button",ke.className="we-prop-menu-item",ke.setAttribute("role","menuitem"),ke.dataset.action="run-with-genie-provider",ke.dataset.provider=te,ke.textContent=de,ke});ve.append(...Ae),O.append(ie,ve),Se.append(xe,ae,ee,O),pe.append(he,Se);const De=document.createElement("div");De.className="we-prop-menu-wrap",De.dataset.open="false";const Oe=document.createElement("button");Oe.type="button",Oe.className="we-icon-btn we-prop-more-btn",Oe.setAttribute("aria-label","æ›´å¤š"),Oe.dataset.tooltip="æ›´å¤š",Oe.append(Kl());const We=document.createElement("div");We.className="we-prop-menu",We.setAttribute("role","menu");const Fe=document.createElement("button");Fe.type="button",Fe.className="we-prop-menu-item",Fe.setAttribute("role","menuitem"),Fe.dataset.action="clear-edits",Fe.textContent="æ¸…ç©ºç¼–è¾‘";const _e=document.createElement("button");_e.type="button",_e.className="we-prop-menu-item",_e.setAttribute("role","menuitem"),_e.dataset.action="clear-forced-styles",_e.textContent="æ¸…ç©ºå¼ºåˆ¶æ ·å¼",We.append(Fe,_e),De.append(Oe,We);const oe=document.createElement("button");oe.type="button",oe.className="we-icon-btn we-minimize-btn",oe.setAttribute("aria-label","æ”¶èµ·å±æ€§é¢æ¿"),oe.dataset.tooltip="æ”¶èµ·",oe.append(Yl()),F.append(pe,De,oe,ne),g.append(_,T,F);const x=document.createElement("div");x.className="we-prop-body";const N=document.createElement("div");N.className="we-prop-empty",N.textContent="è¯·é€‰æ‹©ä¸€ä¸ªå…ƒç´ ä»¥æŸ¥çœ‹å’Œç¼–è¾‘å±æ€§ã€‚";const I=document.createElement("div");I.className="we-prop-tab-content",I.dataset.tabContent="design";for(const{id:te,label:de,collapsible:ke}of Zf){const $e=ep(te,de,t,{collapsible:ke});a.set(te,$e),I.append($e.root)}const K=document.createElement("div");K.className="we-prop-tab-content",K.dataset.tabContent="css";const W=document.createElement("div");W.className="we-prop-tab-content",W.dataset.tabContent="props";const G=document.createElement("div");G.className="we-prop-tab-content",G.dataset.tabContent="dom",x.append(N,I,K),r&&x.append(W),i&&x.append(G),S.append(g,x),e.container.append(S),t.add(()=>S.remove());const X=16;function U(te){const de=S.getBoundingClientRect(),ke=window.innerWidth,$e=window.innerHeight,je=X,Be=Math.max(je,ke-je-de.width),Ue=Math.max(je,$e-je-de.height),nt=Number.isFinite(te.left)?te.left:0,at=Number.isFinite(te.top)?te.top:0;return{left:Math.round(Math.min(Be,Math.max(je,nt))),top:Math.round(Math.min(Ue,Math.max(je,at)))}}function le(){if(S.dataset.dragged=l?"true":"false",!l){S.style.left="",S.style.top="",S.style.right="",S.style.bottom="";return}S.style.left=`${l.left}px`,S.style.top=`${l.top}px`,S.style.right="auto",S.style.bottom="auto"}function re(te){var de;l=te?U(te):null,le(),(de=e.onPositionChange)==null||de.call(e,l)}function fe(){return l}t.add(sa({handleEl:_,targetEl:S,clampMargin:X,onPositionChange:te=>re(te)})),l!==null?re(l):le();function be(){const te=a.get("size");te&&(C=Pc({container:te.body,transactionManager:e.transactionManager}),c.push(C));const de=a.get("spacing");de&&(y=Hc({container:de.body,transactionManager:e.transactionManager}),c.push(y));const ke=a.get("position");ke&&(E=su({container:ke.body,transactionManager:e.transactionManager}),c.push(E));const $e=a.get("layout");if($e){const tt=gu({container:$e.body,transactionManager:e.transactionManager});c.push(tt)}const je=a.get("typography");if(je){const tt=Ku({container:je.body,transactionManager:e.transactionManager,tokensService:e.tokensService});c.push(tt)}const Be=a.get("appearance");if(Be){const tt=td({container:Be.body,transactionManager:e.transactionManager});c.push(tt)}const Ue=a.get("border");if(Ue){const tt=ld({container:Ue.body,transactionManager:e.transactionManager,tokensService:e.tokensService});c.push(tt)}const nt=a.get("background");if(nt){const tt=md({container:nt.body,transactionManager:e.transactionManager,tokensService:e.tokensService});c.push(tt)}const at=a.get("effects");if(at){const tt=Td({container:at.body,transactionManager:e.transactionManager,tokensService:e.tokensService,headerActionsContainer:at.headerActions});c.push(tt)}}be(),i&&(u=Dd({container:G,onSelect:te=>{e.onSelectElement(te)}})),p=bf({container:K,transactionManager:e.transactionManager,onClassChange:()=>{n&&(ne.textContent=kr(n))}}),r&&e.propsBridge&&(f=Kf({container:W,propsBridge:e.propsBridge}));function Me(te,de){if(de){console.log(`[WebEditorV2][Menu] ${te}`,de);return}console.log(`[WebEditorV2][Menu] ${te}`)}function Ce(){S.dataset.menuOpen=m||w||M?"true":"false"}function Ie(te){w=te&&m,O.dataset.open=w?"true":"false",Ce()}function Q(te){m=te,pe.dataset.open=m?"true":"false",m||Ie(!1),m&&(M=!1,De.dataset.open="false"),Ce()}function ce(te){M=te,De.dataset.open=M?"true":"false",M&&(m=!1,pe.dataset.open="false",Ie(!1)),Ce()}async function ue(te){if(te){b=!0,Ne();try{await te()}finally{b=!1,Ne()}}}function Ne(){var fn,bt,pn,mn;H.textContent=String(h),R.textContent=String(d),H.hidden=h<=0,R.hidden=d<=0;const te=h>0&&!!e.onUndo,de=d>0&&!!e.onRedo;D.disabled=b||!te,v.disabled=b||!de,D.dataset.tooltip=te?`æ’¤é”€ (${h})`:"æ’¤é”€",v.dataset.tooltip=de?`é‡åš (${d})`:"é‡åš";const ke=(fn=e.getCopyPromptBlockReason)==null?void 0:fn.call(e),$e=(bt=e.getSaveTextBlockReason)==null?void 0:bt.call(e),je=(pn=e.getSaveStyleBlockReason)==null?void 0:pn.call(e),Be=(mn=e.getRunWithGenieBlockReason)==null?void 0:mn.call(e),Ue=h===0||!!ke||!e.onCopyPrompt,nt=!!$e||!e.onSaveText,at=!!je||!e.onSaveStyle,tt=!!Be||!e.onRunWithGenie;ee.disabled=b||Ue,ae.disabled=b||nt,xe.disabled=b||at,ie.disabled=b||tt;for(const Rn of Ae)Rn.disabled=b||tt;ee.title=ke??"",ae.title=$e??"",xe.title=je??"",ie.title=Be??"",Fe.disabled=b||!e.onClearEdits,_e.disabled=b||!e.onClearForcedStyles,ie.disabled&&Ie(!1)}Ne(),t.listen(D,"click",te=>{var de;te.preventDefault(),!D.disabled&&((de=e.onUndo)==null||de.call(e))}),t.listen(v,"click",te=>{var de;te.preventDefault(),!v.disabled&&((de=e.onRedo)==null||de.call(e))}),t.listen(ee,"click",te=>{te.preventDefault(),!ee.disabled&&(Me("click copy"),Q(!1),ue(e.onCopyPrompt))}),t.listen(ae,"click",te=>{te.preventDefault(),!ae.disabled&&(Me("click save-text"),Q(!1),ue(e.onSaveText))}),t.listen(xe,"click",te=>{te.preventDefault(),!xe.disabled&&(Me("click save-style"),Q(!1),ue(e.onSaveStyle))}),t.listen(ie,"click",te=>{te.preventDefault(),!ie.disabled&&(Me(`toggle genie menu -> ${!w}`),Ie(!w))});for(const te of Ae)t.listen(te,"click",de=>{if(de.preventDefault(),te.disabled)return;const ke=(te.dataset.provider??"").trim();ke&&(Me("click run-with-genie",{provider:ke}),Q(!1),Ie(!1),ue(()=>{var $e;return($e=e.onRunWithGenie)==null?void 0:$e.call(e,ke)}))});t.listen(he,"click",te=>{te.preventDefault(),!b&&(Me(`toggle menu -> ${!m}`),Q(!m))}),t.listen(Fe,"click",te=>{te.preventDefault(),!Fe.disabled&&(Me("click clear-edits"),ce(!1),ue(e.onClearEdits))}),t.listen(_e,"click",te=>{te.preventDefault(),!_e.disabled&&(Me("click clear-forced-styles"),ce(!1),ue(e.onClearForcedStyles))}),t.listen(Oe,"click",te=>{te.preventDefault(),!b&&(Me(`toggle more menu -> ${!M}`),ce(!M))});function me(te){try{const ke=typeof te.composedPath=="function"?te.composedPath():null;if(ke&&ke.length>0)return ke.includes(pe)||ke.includes(he)||ke.includes(Se)||ke.includes(O)||ke.includes(ie)||ke.includes(ve)||ke.includes(De)||ke.includes(Oe)||ke.includes(We)}catch{}const de=te.target;return de instanceof Node&&(pe.contains(de)||he.contains(de)||Se.contains(de)||O.contains(de)||ie.contains(de)||ve.contains(de)||De.contains(de)||Oe.contains(de)||We.contains(de))}t.listen(window,"pointerdown",te=>{if(!m&&!w&&!M)return;const de=me(te);Me("window pointerdown",{inside:de}),!de&&(Q(!1),Ie(!1),ce(!1))},{capture:!0}),t.listen(P,"click",te=>{te.preventDefault(),se("design")}),t.listen(Y,"click",te=>{te.preventDefault(),se("css")}),r&&t.listen(z,"click",te=>{te.preventDefault(),se("props")}),i&&t.listen(J,"click",te=>{te.preventDefault(),se("dom")}),t.listen(oe,"click",te=>{te.preventDefault(),we(!s)});function we(te){s=te,S.dataset.minimized=s?"true":"false",x.hidden=s,A.hidden=s,T.hidden=s,pe.hidden=s,De.hidden=s,s&&(Q(!1),Ie(!1),ce(!1)),oe.setAttribute("aria-label",s?"å±•å¼€å±æ€§é¢æ¿":"æ”¶èµ·å±æ€§é¢æ¿"),oe.dataset.tooltip=s?"å±•å¼€":"æ”¶èµ·",!s&&l?re(l):le()}function Re(){S.dataset.tab=o,P.setAttribute("aria-selected",o==="design"?"true":"false"),Y.setAttribute("aria-selected",o==="css"?"true":"false"),r&&z.setAttribute("aria-selected",o==="props"?"true":"false"),i&&J.setAttribute("aria-selected",o==="dom"?"true":"false");const te=n!==null;I.hidden=!te||o!=="design",K.hidden=!te||o!=="css",r?W.hidden=!te||o!=="props":W.hidden=!0,i?G.hidden=!te||o!=="dom":G.hidden=!0,p==null||p.setVisible(te&&o==="css"),r&&(f==null||f.setVisible(te&&o==="props"))}function Le(){const te=n!==null;S.dataset.empty=te?"false":"true",N.hidden=te,te||(ne.textContent=""),Re()}function Ve(){for(const te of c)te.setTarget(n);u==null||u.setTarget(n),p==null||p.setTarget(n),f==null||f.setTarget(n)}function Je(){L!==null&&(cancelAnimationFrame(L),L=null)}function ht(){t.isDisposed||L===null&&(L=requestAnimationFrame(()=>{L=null,!t.isDisposed&&(!n||!n.isConnected||(C==null||C.refresh(),E==null||E.refresh(),y==null||y.refresh()))}))}function gt(){if(Je(),k)try{k.disconnect()}catch{}k=null,j=null}function dn(te){if(gt(),!(!te||!te.isConnected)&&!(typeof MutationObserver>"u")){j=te,k=new MutationObserver(()=>{t.isDisposed||j===n&&ht()});try{k.observe(te,{attributes:!0,attributeFilter:["style"]})}catch{gt()}}}t.add(gt);function Z(te){t.isDisposed||(n=te,te&&(ne.textContent=kr(te)),Le(),Ve(),dn(n))}function se(te){t.isDisposed||(te==="props"&&!r||te==="dom"&&!i?o="design":o=te,Re())}function ge(){return o}function Ee(){if(!t.isDisposed){n&&(ne.textContent=kr(n));for(const te of c)te.refresh();u==null||u.refresh(),p==null||p.refresh(),f==null||f.refresh()}}function Te(te,de){h=Math.max(0,Math.floor(te)),d=Math.max(0,Math.floor(de)),Ne()}function Pe(){u==null||u.dispose(),u=null,p==null||p.dispose(),p=null,f==null||f.dispose(),f=null;for(const te of c)te.dispose();c.length=0,a.clear(),n=null,t.dispose()}return Le(),{setTarget:Z,setTab:se,getTab:ge,refresh:Ee,setHistory:Te,getPosition:fe,setPosition:re,dispose:Pe}}class np extends Error{constructor(n,o){super(n);Jn(this,"data");this.name="PropsError",this.data=o}}const vo={REQUEST:"web-editor-props:request",RESPONSE:"web-editor-props:response",CLEANUP:"web-editor-props:cleanup"},xn=1,op=2500,yn=200;function Fn(){try{if(typeof crypto<"u"&&typeof crypto.randomUUID=="function")return crypto.randomUUID()}catch{}return`req-${Date.now()}-${Math.random().toString(16).slice(2)}`}function rp(e){return e===void 0?{$we:"undefined"}:e}function ip(e){return e!==null&&typeof e=="object"}function sp(e){return e instanceof Error&&e.message||String(e)}function ap(e){if(e==null)return!0;const t=typeof e;return t==="string"||t==="boolean"?!0:t==="number"?Number.isFinite(e):!1}const lp=new Set(["__proto__","constructor","prototype","__defineGetter__","__defineSetter__","__lookupGetter__","__lookupSetter__"]);function cp(e){return e.some(t=>typeof t=="string"&&lp.has(t))}function up(e={}){const t=Math.max(yn,e.defaultTimeoutMs??op),n=new Map;let o=!1;function r(){if(o)throw new np("PropsBridge is disposed")}function i(b){for(const[m,w]of n)clearTimeout(w.timeoutId),w.resolve({ok:!1,error:b}),n.delete(m)}function s(b){if(o)return;const m=b.detail;if(!ip(m)||m.v!==xn)return;const w=typeof m.requestId=="string"?m.requestId:"";if(!w)return;const M=n.get(w);if(!M)return;n.delete(w),clearTimeout(M.timeoutId);const C=!!m.success,E=m.data??void 0,y=typeof m.error=="string"?m.error:void 0;M.resolve({ok:C,data:E,error:C?void 0:y||"Props agent error"})}window.addEventListener(vo.RESPONSE,s);function l(b,m){r();const{requestId:w}=b;return w?n.has(w)?Promise.resolve({ok:!1,error:`Duplicate requestId: ${w}`}):new Promise(M=>{const C=window.setTimeout(()=>{n.delete(w),M({ok:!1,error:`Props agent timeout after ${m}ms (op=${b.op})`})},m);n.set(w,{resolve:M,timeoutId:C});try{window.dispatchEvent(new CustomEvent(vo.REQUEST,{detail:b}))}catch(E){clearTimeout(C),n.delete(w),M({ok:!1,error:`Failed to dispatch props request: ${sp(E)}`})}}):Promise.resolve({ok:!1,error:"requestId is required"})}async function a(b,m){const w={v:xn,requestId:Fn(),op:"probe",locator:b};return l(w,Math.max(yn,m??t))}async function c(b,m){const w={v:xn,requestId:Fn(),op:"read",locator:b};return l(w,Math.max(yn,m??t))}async function u(b,m,w,M){if(!Array.isArray(m)||m.length===0)return{ok:!1,error:"prop path is required"};if(cp(m))return{ok:!1,error:"Invalid prop path: contains dangerous key"};if(!ap(w))return{ok:!1,error:"Only primitive prop values are supported"};const C={v:xn,requestId:Fn(),op:"write",locator:b,payload:{propPath:m,propValue:rp(w)}};return l(C,Math.max(yn,M??t))}async function p(b,m){const w={v:xn,requestId:Fn(),op:"reset",locator:b};return l(w,Math.max(yn,m??t))}async function f(b){if(o)return;const m=Math.max(yn,b??800);try{const w={v:xn,requestId:Fn(),op:"cleanup"};await l(w,m)}catch{}finally{try{window.dispatchEvent(new CustomEvent(vo.CLEANUP))}catch{}h()}}function h(){if(!o){o=!0;try{window.removeEventListener(vo.RESPONSE,s)}catch{}i("PropsBridge disposed")}}function d(){return o}return{probe:a,read:c,write:u,reset:p,cleanup:f,dispose:h,isDisposed:d}}const hs="data-mcp-canvas",gs="overlay",dp=100,Cr={hover:{strokeColor:ct.hover,fillColor:`${ct.hover}15`,lineWidth:2,dashPattern:[6,4]},selection:{strokeColor:ct.selected,fillColor:"transparent",lineWidth:2,dashPattern:[]},dragGhost:{strokeColor:ct.selectionBorder,fillColor:ct.dragGhost,lineWidth:2,dashPattern:[8,6]}};function bs(e){return Number.isFinite(e)&&e>0}function Ar(e){return e?Number.isFinite(e.left)&&Number.isFinite(e.top)&&bs(e.width)&&bs(e.height):!1}function Eo(e){return e?Number.isFinite(e.x1)&&Number.isFinite(e.y1)&&Number.isFinite(e.x2)&&Number.isFinite(e.y2):!1}function So(e,t,n){return Number.isFinite(e)?Math.min(n,Math.max(t,e)):t}function ws(e){return 1-Math.pow(1-e,3)}function ko(e,t,n){return e+(t-e)*n}function xs(e,t,n){return{left:ko(e.left,t.left,n),top:ko(e.top,t.top,n),width:ko(e.width,t.width,n),height:ko(e.height,t.height,n)}}function fp(e,t,n,o,r,i){const s=Math.max(0,Math.min(i,Math.min(o,r)/2));e.moveTo(t+s,n),e.arcTo(t+o,n,t+o,n+r,s),e.arcTo(t+o,n+r,t,n+r,s),e.arcTo(t,n+r,t,n,s),e.arcTo(t,n,t+o,n,s),e.closePath()}function pp(e){const{container:t}=e,n=new ze,o=t.querySelector(`canvas[${hs}="${gs}"]`);o&&o.remove();const r=document.createElement("canvas");r.setAttribute(hs,gs),r.setAttribute("aria-hidden","true"),Object.assign(r.style,{position:"absolute",inset:"0",width:"100%",height:"100%",pointerEvents:"none",display:"block"}),t.append(r),n.add(()=>r.remove());const i=r.getContext("2d",{alpha:!0,desynchronized:!0});if(!i)throw n.dispose(),new Error(`${Xe} Failed to get canvas 2D context`);const s=i;let l=null,a=null,c=null,u=null,p=null,f=null,h=null,d=1,b=1,m=1,w=!0,M=null;function C(){M!==null&&(cancelAnimationFrame(M),M=null)}n.add(C);function E(){M!==null||n.isDisposed||(M=requestAnimationFrame(()=>{M=null,F()}))}function y(){const $=Math.max(1,window.devicePixelRatio||1),q=Math.max(1,d),ne=Math.max(1,b),A=Math.round(q*$),P=Math.round(ne*$);return r.width!==A||r.height!==P||Math.abs(m-$)>.001?(m=$,r.width=A,r.height=P,s.setTransform(m,0,0,m,0,0),s.lineJoin="round",s.lineCap="round",!0):!1}function k(){y(),s.clearRect(0,0,d,b)}function j($,q){if(!Ar($))return;const ne=Math.round($.width),A=Math.round($.height);if(ne<=0||A<=0)return;const P=Math.round($.left)+.5,Y=Math.round($.top)+.5;s.save(),s.lineWidth=q.lineWidth,s.strokeStyle=q.strokeColor,s.fillStyle=q.fillColor,s.setLineDash(q.dashPattern),s.beginPath(),s.rect(P,Y,ne,A),s.fill(),s.stroke(),s.restore()}function L($){if(!Eo($))return;s.save(),s.lineWidth=Il,s.strokeStyle=ct.insertionLine,s.setLineDash([]),s.lineCap="round";const q=Math.round($.x1)+.5,ne=Math.round($.y1)+.5,A=Math.round($.x2)+.5,P=Math.round($.y2)+.5;s.beginPath(),s.moveTo(q,ne),s.lineTo(A,P),s.stroke(),s.restore()}function S($){if(!(!$||$.length===0)){s.save(),s.lineWidth=Dl,s.strokeStyle=ct.guideLine,s.setLineDash([]),s.lineCap="round",s.beginPath();for(const q of $){if(!Eo(q))continue;const ne=Math.round(q.x1)+.5,A=Math.round(q.y1)+.5,P=Math.round(q.x2)+.5,Y=Math.round(q.y2)+.5;s.moveTo(ne,A),s.lineTo(P,Y)}s.stroke(),s.restore()}}function g($){if(!$||$.length===0)return;s.save(),s.lineWidth=Fl,s.strokeStyle=ct.guideLine,s.setLineDash([]),s.lineCap="round";const q=$l;s.beginPath();for(const ne of $){const A=ne.line;if(!Eo(A))continue;const P=Math.round(A.x1)+.5,Y=Math.round(A.y1)+.5,z=Math.round(A.x2)+.5,J=Math.round(A.y2)+.5;s.moveTo(P,Y),s.lineTo(z,J),ne.axis==="x"?(s.moveTo(P,Y-q),s.lineTo(P,Y+q),s.moveTo(z,J-q),s.lineTo(z,J+q)):(s.moveTo(P-q,Y),s.lineTo(P+q,Y),s.moveTo(z-q,J),s.lineTo(z+q,J))}s.stroke(),s.font=Ol,s.textAlign="center",s.textBaseline="middle";for(const ne of $){const A=ne.line;if(!Eo(A))continue;const P=s.measureText(ne.text),Y=P.width,z=Number.isFinite(P.actualBoundingBoxAscent)?P.actualBoundingBoxAscent:8,J=Number.isFinite(P.actualBoundingBoxDescent)?P.actualBoundingBoxDescent:3,pe=z+J,he=Math.ceil(Y+Vl*2),Se=Math.ceil(pe+Bl*2),xe=(A.x1+A.x2)/2,ae=(A.y1+A.y2)/2,ee=Hl;let O=xe-he/2,ie=ae-Se/2;ne.axis==="x"?(ie=ae-Se/2-ee,ie<0&&(ie=ae+ee-Se/2)):(O=xe+ee-he/2,O+he>d&&(O=xe-ee-he/2));const ye=Math.max(2,d-he-2),ve=Math.max(2,b-Se-2);O=So(O,2,ye),ie=So(ie,2,ve),s.save(),s.fillStyle=ct.distanceLabelBg,s.strokeStyle=ct.distanceLabelBorder,s.lineWidth=1,s.beginPath(),fp(s,O,ie,he,Se,zl),s.fill(),s.stroke(),s.fillStyle=ct.distanceLabelText,s.fillText(ne.text,O+he/2,ie+Se/2),s.restore()}s.restore()}function T(){n.isDisposed||(w=!0,E())}function F(){if(n.isDisposed||!w)return;C(),w=!1;const $=performance.now();let q=l;if(a){const ne=$-a.startTime,A=So(ne/a.durationMs,0,1),P=ws(A);q=xs(a.start,a.end,P),A>=1?a=null:w=!0}k(),j(q,Cr.hover),j(c,Cr.selection),j(u,Cr.dragGhost),L(p),S(f),g(h),w&&E()}function _($,q){if(!((q==null?void 0:q.animate)===!0)){a=null,l=$,T();return}const A=performance.now();let P=l;if(a){const Y=A-a.startTime,z=So(Y/a.durationMs,0,1),J=ws(z);P=xs(a.start,a.end,J)}if(!Ar(P)||!Ar($)){a=null,l=$,T();return}a={start:{...P},end:{...$},startTime:A,durationMs:dp},l=$,T()}function D($){c=$,T()}function H($){u=$,T()}function v($){p=$,T()}function R($){f=$&&$.length>0?$:null,T()}function V($){h=$&&$.length>0?$:null,T()}function B(){l=null,a=null,c=null,u=null,p=null,f=null,h=null,T()}try{const $=t.getBoundingClientRect();d=Math.max(1,$.width),b=Math.max(1,$.height)}catch($){console.warn(`${Xe} Initial size measurement failed:`,$)}return n.observeResize(t,$=>{const q=$[0],ne=q==null?void 0:q.contentRect;if(!ne)return;const A=Math.max(1,ne.width),P=Math.max(1,ne.height);Math.abs(A-d)<.5&&Math.abs(P-b)<.5||(d=A,b=P,T())}),T(),{canvas:r,markDirty:T,render:F,clear:B,setHoverRect:_,setSelectionRect:D,setDragGhostRect:H,setInsertionLine:v,setGuideLines:R,setDistanceLabels:V,dispose:()=>n.dispose()}}function st(e){return typeof e=="number"&&Number.isFinite(e)}function oi(e){return e?st(e.left)&&st(e.top)&&st(e.width)&&st(e.height)&&e.width>.5&&e.height>.5:!1}function Tr(e){try{const t=e.getBoundingClientRect(),n={left:t.left,top:t.top,width:t.width,height:t.height};return oi(n)?n:null}catch{return null}}function wt(e){return e.left+e.width}function xt(e){return e.top+e.height}function vn(e){return e.left+e.width/2}function En(e){return e.top+e.height/2}function Ga(e,t){switch(t){case"left":return e.left;case"center":return vn(e);case"right":return wt(e)}}function Wa(e,t){switch(t){case"top":return e.top;case"middle":return En(e);case"bottom":return xt(e)}}function ys(){return{x:[],y:[]}}function mp(e){const t=e.parentElement;if(!t)return ys();const n=Tr(e),o=n?vn(n):0,r=n?En(n):0,i=t.children,s=i.length;let l=-1;for(let b=0;b<s;b++)if(i[b]===e){l=b;break}if(l===-1)return ys();const a=[];let c=0,u=1,p=1;for(;c<mi;){const b=l-u,m=l+p,w=b>=0,M=m<s;if(!w&&!M)break;if(w){const C=i[b],E=Tr(C);if(E){const y=vn(E)-o,k=En(E)-r;a.push({rect:E,distanceSquared:y*y+k*k})}c++,u++}if(M&&c<mi){const C=i[m],E=Tr(C);if(E){const y=vn(E)-o,k=En(E)-r;a.push({rect:E,distanceSquared:y*y+k*k})}c++,p++}}a.sort((b,m)=>b.distanceSquared-m.distanceSquared);const f=a.slice(0,Ll),h=[],d=[];for(const{rect:b}of f)h.push({type:"left",value:b.left,source:"sibling",sourceRect:b}),h.push({type:"center",value:vn(b),source:"sibling",sourceRect:b}),h.push({type:"right",value:wt(b),source:"sibling",sourceRect:b}),d.push({type:"top",value:b.top,source:"sibling",sourceRect:b}),d.push({type:"middle",value:En(b),source:"sibling",sourceRect:b}),d.push({type:"bottom",value:xt(b),source:"sibling",sourceRect:b});return{x:h,y:d}}function hp(){const e=Math.max(1,window.innerWidth||1),t=Math.max(1,window.innerHeight||1);return{x:[{type:"left",value:0,source:"viewport"},{type:"center",value:e/2,source:"viewport"},{type:"right",value:e,source:"viewport"}],y:[{type:"top",value:0,source:"viewport"},{type:"middle",value:t/2,source:"viewport"},{type:"bottom",value:t,source:"viewport"}]}}function gp(...e){const t=[],n=[];for(const o of e)t.push(...o.x),n.push(...o.y);return{x:t,y:n}}function Hr(e,t,n,o,r){const i=e.left,s=wt(e);if(t==="left"){if(n==="right"){const l=o-i;return!st(l)||l<r?null:{left:i,top:e.top,width:l,height:e.height}}if(n==="center"){const l=(o-i)*2;return!st(l)||l<r?null:{left:i,top:e.top,width:l,height:e.height}}return e}if(t==="right"){if(n==="left"){const l=s-o;return!st(l)||l<r?null:{left:o,top:e.top,width:l,height:e.height}}if(n==="center"){const l=2*o-s,a=s-l;return!st(a)||a<r?null:{left:l,top:e.top,width:a,height:e.height}}return e}return e}function Gr(e,t,n,o,r){const i=e.top,s=xt(e);if(t==="top"){if(n==="bottom"){const l=o-i;return!st(l)||l<r?null:{left:e.left,top:i,width:e.width,height:l}}if(n==="middle"){const l=(o-i)*2;return!st(l)||l<r?null:{left:e.left,top:i,width:e.width,height:l}}return e}if(t==="bottom"){if(n==="top"){const l=s-o;return!st(l)||l<r?null:{left:e.left,top:o,width:e.width,height:l}}if(n==="middle"){const l=2*o-s,a=s-l;return!st(a)||a<r?null:{left:e.left,top:l,width:e.width,height:a}}return e}return e}function bp(e,t,n,o,r,i){let s=null;for(const l of n){if(!o.includes(l.type))continue;const a=Ga(e,l.type),c=Math.abs(l.value-a);if(c>r)continue;const u=Hr(e,t,l.type,l.value,i);if(!u)continue;(!s||c<s.distance||c===s.distance&&l.source==="sibling"&&s.anchor.source!=="sibling")&&(s={distance:c,anchor:l,snappedRect:u})}return s}function wp(e,t,n,o,r,i){let s=null;for(const l of n){if(!o.includes(l.type))continue;const a=Wa(e,l.type),c=Math.abs(l.value-a);if(c>r)continue;const u=Gr(e,t,l.type,l.value,i);if(!u)continue;(!s||c<s.distance||c===s.distance&&l.source==="sibling"&&s.anchor.source!=="sibling")&&(s={distance:c,anchor:l,snappedRect:u})}return s}function xp(e,t,n,o){const r=[],i=Math.max(1,o.width),s=Math.max(1,o.height);if(t){const l=t.value;if(t.source==="viewport"||!t.sourceRect)r.push({x1:l,y1:0,x2:l,y2:s});else{const a=t.sourceRect,c=Math.min(a.top,e.top),u=Math.max(xt(a),xt(e));r.push({x1:l,y1:c,x2:l,y2:u})}}if(n){const l=n.value;if(n.source==="viewport"||!n.sourceRect)r.push({x1:0,y1:l,x2:i,y2:l});else{const a=n.sourceRect,c=Math.min(a.left,e.left),u=Math.max(wt(a),wt(e));r.push({x1:c,y1:l,x2:u,y2:l})}}return r}function yp(e){const{rect:t,resize:n,anchors:o,thresholdPx:r,hysteresisPx:i,minSizePx:s,viewport:l}=e;if(!oi(t))return{snappedRect:t,guideLines:[],lockX:null,lockY:null};const a=n.hasWest?"right":n.hasEast?"left":null,c=n.hasNorth?"bottom":n.hasSouth?"top":null,u=a==="left"?["right","center"]:a==="right"?["left","center"]:[],p=c==="top"?["bottom","middle"]:c==="bottom"?["top","middle"]:[];let f={...t},h=e.lockX,d=e.lockY;if(a){if(h)if(!u.includes(h.type))h=null;else{const m=Ga(f,h.type),w=Math.abs(h.value-m),M=Hr(f,a,h.type,h.value,s);(w>r+i||!M)&&(h=null)}if(h){const m=Hr(f,a,h.type,h.value,s);m&&(f=m)}else{const m=bp(f,a,o.x,u,r,s);m&&(h={type:m.anchor.type,value:m.anchor.value,source:m.anchor.source,sourceRect:m.anchor.sourceRect??null},f=m.snappedRect)}}else h=null;if(c){if(d)if(!p.includes(d.type))d=null;else{const m=Wa(f,d.type),w=Math.abs(d.value-m),M=Gr(f,c,d.type,d.value,s);(w>r+i||!M)&&(d=null)}if(d){const m=Gr(f,c,d.type,d.value,s);m&&(f=m)}else{const m=wp(f,c,o.y,p,r,s);m&&(d={type:m.anchor.type,value:m.anchor.value,source:m.anchor.source,sourceRect:m.anchor.sourceRect??null},f=m.snappedRect)}}else d=null;const b=xp(f,h,d,l);return{snappedRect:f,guideLines:b,lockX:h,lockY:d}}function $t(e,t){return st(e)&&e>0&&e>=t}function Ot(e){const t=Math.round(e);return`${Object.is(t,-0)?0:t}px`}function vs(e,t,n){return st(e)?Math.min(n,Math.max(t,e)):t}function vp(e){const{rect:t,lockX:n,lockY:o,viewport:r,minGapPx:i}=e;if(!oi(t))return[];const s=st(r.width)?Math.max(1,r.width):1,l=st(r.height)?Math.max(1,r.height):1,a=Math.max(0,i),c=[];if(n&&n.source==="sibling"&&n.sourceRect){const u=n.sourceRect,p=t.top-xt(u),f=u.top-xt(t);$t(p,a)?c.push({kind:"sibling",axis:"y",value:Math.round(p),text:Ot(p),line:{x1:n.value,y1:xt(u),x2:n.value,y2:t.top}}):$t(f,a)&&c.push({kind:"sibling",axis:"y",value:Math.round(f),text:Ot(f),line:{x1:n.value,y1:xt(t),x2:n.value,y2:u.top}})}if(o&&o.source==="sibling"&&o.sourceRect){const u=o.sourceRect,p=t.left-wt(u),f=u.left-wt(t);$t(p,a)?c.push({kind:"sibling",axis:"x",value:Math.round(p),text:Ot(p),line:{x1:wt(u),y1:o.value,x2:t.left,y2:o.value}}):$t(f,a)&&c.push({kind:"sibling",axis:"x",value:Math.round(f),text:Ot(f),line:{x1:wt(t),y1:o.value,x2:u.left,y2:o.value}})}if(n&&n.source==="viewport"){const u=vs(En(t),0,l),p=t.left,f=s-wt(t),h=()=>$t(p,a)?(c.push({kind:"viewport",axis:"x",value:Math.round(p),text:Ot(p),line:{x1:0,y1:u,x2:t.left,y2:u}}),!0):!1,d=()=>$t(f,a)?(c.push({kind:"viewport",axis:"x",value:Math.round(f),text:Ot(f),line:{x1:wt(t),y1:u,x2:s,y2:u}}),!0):!1;n.type==="center"?(h(),d()):n.type==="left"?h()||d():d()||h()}if(o&&o.source==="viewport"){const u=vs(vn(t),0,s),p=t.top,f=l-xt(t),h=()=>$t(p,a)?(c.push({kind:"viewport",axis:"y",value:Math.round(p),text:Ot(p),line:{x1:u,y1:0,x2:u,y2:t.top}}),!0):!1,d=()=>$t(f,a)?(c.push({kind:"viewport",axis:"y",value:Math.round(f),text:Ot(f),line:{x1:u,y1:xt(t),x2:u,y2:l}}),!0):!1;o.type==="middle"?(h(),d()):o.type==="top"?h()||d():d()||h()}return c}const $n=1,Ep=3,Sp=["nw","n","ne","e","se","s","sw","w"],kp={n:"ns-resize",s:"ns-resize",e:"ew-resize",w:"ew-resize",ne:"nesw-resize",sw:"nesw-resize",nw:"nwse-resize",se:"nwse-resize"};function Co(e){return typeof e=="number"&&Number.isFinite(e)}function Ao(e){return e?Co(e.left)&&Co(e.top)&&Co(e.width)&&Co(e.height)&&e.width>.5&&e.height>.5:!1}function To(e,t){return Number.isFinite(e)?e<t?t:e:t}function Wt(e){const t=e.trim();if(!t||t==="auto"||t==="none")return null;const n=t.match(/^(-?\d+(?:\.\d+)?)px$/);if(n){const r=Number(n[1]);return Number.isFinite(r)?r:null}const o=Number(t);return Number.isFinite(o)?o:null}function Vt(e){if(!Number.isFinite(e))return"0px";const t=Math.round(e*100)/100;return`${Object.is(t,-0)?0:t}px`}function Cp(e){const t=e.trim().toLowerCase();return t==="fixed"?"fixed":t==="absolute"?"absolute":t==="relative"||t==="sticky"?"relative":"static"}function Es(e){return e==="w"||e==="nw"||e==="sw"}function Nr(e){return e==="e"||e==="ne"||e==="se"}function Ss(e){return e==="n"||e==="nw"||e==="ne"}function Rr(e){return e==="s"||e==="sw"||e==="se"}function Ap(e){try{const t=e.getBoundingClientRect();return!Number.isFinite(t.left)||!Number.isFinite(t.top)||!Number.isFinite(t.width)||!Number.isFinite(t.height)?null:{left:t.left,top:t.top,width:Math.max(0,t.width),height:Math.max(0,t.height)}}catch{return null}}function ja(e){try{return window.getComputedStyle(e)}catch{return null}}function No(e,t,n){const o=Wt(e.getPropertyValue(t))??0,r=Wt(e.getPropertyValue(n))??0;return o+r}function Tp(e){const n=e.getPropertyValue("box-sizing").trim()==="border-box"?"border-box":"content-box",o=No(e,"padding-left","padding-right"),r=No(e,"padding-top","padding-bottom"),i=No(e,"border-left-width","border-right-width"),s=No(e,"border-top-width","border-bottom-width");return{boxSizing:n,horizontalExtras:o+i,verticalExtras:r+s}}function ks(e,t,n){return n==="border-box"?e:Math.max(0,e-t)}function Np(e){try{const t=e.offsetParent;if(t instanceof HTMLElement){const n=t.getBoundingClientRect(),o=ja(t),r=o?Wt(o.getPropertyValue("border-left-width"))??0:0,i=o?Wt(o.getPropertyValue("border-top-width"))??0:0;return{originX:n.left+r,originY:n.top+i,scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}}catch{}return{originX:0,originY:0,scrollLeft:0,scrollTop:0}}function Ro(e){e.cancelable&&e.preventDefault(),e.stopPropagation()}function Rp(e){const t=new ze,{container:n,canvasOverlay:o,transactionManager:r,positionTracker:i}=e,s=document.createElement("div");s.className="we-handles-layer",s.setAttribute("aria-hidden","true"),n.append(s),t.add(()=>s.remove());const l=document.createElement("div");l.className="we-selection-frame",l.hidden=!0,s.append(l);const a=document.createElement("div");a.className="we-size-hud",a.hidden=!0,l.append(a);const c=new Map;for(const v of Sp){const R=document.createElement("div");R.className="we-resize-handle",R.dataset.dir=v,R.tabIndex=-1,l.append(R),c.set(v,R)}let u=null,p=null,f=null,h=null;function d(){h!==null&&(cancelAnimationFrame(h),h=null)}t.add(d);function b(v){if(!(!!u&&Ao(v))){l.hidden=!0;return}l.hidden=!1,l.style.transform=`translate3d(${v.left}px, ${v.top}px, 0)`,l.style.width=`${v.width}px`,l.style.height=`${v.height}px`}function m(v){if(!v){a.hidden=!0,a.textContent="";return}a.hidden=!1,a.textContent=v}function w(v){document.body.style.cursor=v.prevBodyCursor,document.body.style.userSelect=v.prevBodyUserSelect}function M(v){const R=f;if(R){if(d(),f=null,R.tx)try{R.tx.rollback()}catch(V){console.warn(`${Xe} Resize rollback failed:`,V)}try{w(R)}catch{}try{o.setGuideLines(null),o.setDistanceLabels(null),o.render()}catch{}m(null),b(p);try{i.forceUpdate()}catch{}v&&console.log(`${Xe} Resize cancelled (${v})`)}}function C(){const v=f;if(v){if(d(),f=null,v.tx)try{v.tx.commit({merge:!1})}catch(R){console.warn(`${Xe} Resize commit failed:`,R);try{v.tx.rollback()}catch{}}try{w(v)}catch{}try{o.setGuideLines(null),o.setDistanceLabels(null),o.render()}catch{}m(null);try{i.forceUpdate()}catch{}}}function E(){h!==null||t.isDisposed||(h=requestAnimationFrame(()=>{h=null,y()}))}function y(){const v=f;if(!v)return;if(!v.target.isConnected){M("target_disconnected");return}const R=v.lastClientX-v.startClientX,V=v.lastClientY-v.startClientY;if(!v.hasPassedThreshold){if(Math.hypot(R,V)<Ep)return;v.hasPassedThreshold=!0;const he=r.beginMultiStyle(v.target,Array.from(v.properties));if(!he){M("tx_unavailable");return}v.tx=he;try{const Se=mp(v.target),xe=hp();v.anchors=gp(Se,xe)}catch{v.anchors=null}}const B=v.tx;if(!B){M("tx_missing");return}let $=v.startRect.width,q=v.startRect.height;v.affectsWidth&&(Nr(v.dir)&&($=To(v.startRect.width+R,$n)),Es(v.dir)&&($=To(v.startRect.width-R,$n))),v.affectsHeight&&(Rr(v.dir)&&(q=To(v.startRect.height+V,$n)),Ss(v.dir)&&(q=To(v.startRect.height-V,$n)));const ne=v.hasWest?v.startRect.width-$:0,A=v.hasNorth?v.startRect.height-q:0,P={left:v.startRect.left+ne,top:v.startRect.top+A,width:$,height:q};let Y=P;if(v.anchors){const he=Nr(v.dir),Se=Rr(v.dir),xe=yp({rect:P,resize:{hasWest:v.hasWest,hasEast:he,hasNorth:v.hasNorth,hasSouth:Se},anchors:v.anchors,thresholdPx:_l,hysteresisPx:Ml,minSizePx:$n,lockX:v.lockX,lockY:v.lockY,viewport:{width:window.innerWidth||1,height:window.innerHeight||1}});v.lockX=xe.lockX,v.lockY=xe.lockY,Y=xe.snappedRect;const ae=vp({rect:Y,lockX:v.lockX,lockY:v.lockY,minGapPx:Pl,viewport:{width:window.innerWidth||1,height:window.innerHeight||1}}),ee=xe.guideLines.length>0,O=ae.length>0;if(ee||v.hadGuidesLastFrame||O||v.hadDistanceLabelsLastFrame){try{o.setGuideLines(ee?xe.guideLines:null),o.setDistanceLabels(O?ae:null),o.render()}catch{}v.hadGuidesLastFrame=ee,v.hadDistanceLabelsLastFrame=O}$=Y.width,q=Y.height}const z=Y.left-v.startRect.left,J=Y.top-v.startRect.top;b(Y),m(`${Math.round(Y.width)} Ã— ${Math.round(Y.height)}`);const pe={};if(v.affectsWidth){const he=ks($,v.extras.horizontalExtras,v.extras.boxSizing);pe.width=Vt(he)}if(v.affectsHeight){const he=ks(q,v.extras.verticalExtras,v.extras.boxSizing);pe.height=Vt(he)}v.mode==="absolute"||v.mode==="fixed"?(v.affectsWidth&&(pe.left=Vt(v.startPosX+z),pe.right=""),v.affectsHeight&&(pe.top=Vt(v.startPosY+J),pe.bottom="")):v.mode==="relative"?(v.affectsWidth&&v.hasWest&&(pe.left=Vt(v.startPosX+z)),v.affectsHeight&&v.hasNorth&&(pe.top=Vt(v.startPosY+J))):(v.affectsWidth&&v.hasWest&&(pe["margin-left"]=Vt(v.startPosX+z)),v.affectsHeight&&v.hasNorth&&(pe["margin-top"]=Vt(v.startPosY+J)));try{B.set(pe)}catch(he){console.warn(`${Xe} Resize preview apply failed:`,he),M("apply_failed")}}function k(v,R,V){if(t.isDisposed||V.button!==0)return;const B=u;if(!B||!B.isConnected)return;f&&M("restart");const $=ja(B);if(!$)return;const q=$.getPropertyValue("transform").trim();if(q&&q!=="none"){console.warn(`${Xe} Resize handles do not support transformed elements yet`);return}const ne=$.getPropertyValue("position"),A=Cp(ne),P=Es(v),Y=Ss(v),z=P||Nr(v),J=Y||Rr(v),pe=$.getPropertyValue("margin-left").trim().toLowerCase(),he=$.getPropertyValue("margin-top").trim().toLowerCase(),Se=Wt(pe)??0,xe=Wt(he)??0;if(A==="static"){if(P&&pe==="auto"){console.warn(`${Xe} Resize from west is disabled when margin-left is auto`);return}if(Y&&he==="auto"){console.warn(`${Xe} Resize from north is disabled when margin-top is auto`);return}}const ae=Ao(p)?p:Ap(B);if(!ae||!Ao(ae))return;const ee=[];z&&(ee.push("width"),A==="absolute"||A==="fixed"?ee.push("left","right"):A==="relative"?P&&ee.push("left"):P&&ee.push("margin-left")),J&&(ee.push("height"),A==="absolute"||A==="fixed"?ee.push("top","bottom"):A==="relative"?Y&&ee.push("top"):Y&&ee.push("margin-top"));let O=null,ie=0,ye=0;A==="absolute"?(O=Np(B),ie=z?ae.left-Se-O.originX+O.scrollLeft:0,ye=J?ae.top-xe-O.originY+O.scrollTop:0):A==="fixed"?(O={originX:0,originY:0,scrollLeft:0,scrollTop:0},ie=z?ae.left-Se:0,ye=J?ae.top-xe:0):A==="relative"?(ie=z&&P?Wt($.getPropertyValue("left"))??0:0,ye=J&&Y?Wt($.getPropertyValue("top"))??0:0):(ie=z&&P?Se:0,ye=J&&Y?xe:0);const ve=Tp($),Ae=document.body.style.cursor,De=document.body.style.userSelect;f={pointerId:V.pointerId,dir:v,handleEl:R,target:B,mode:A,properties:ee,tx:null,hasPassedThreshold:!1,affectsWidth:z,affectsHeight:J,hasWest:P,hasNorth:Y,anchors:null,lockX:null,lockY:null,hadGuidesLastFrame:!1,hadDistanceLabelsLastFrame:!1,startClientX:V.clientX,startClientY:V.clientY,lastClientX:V.clientX,lastClientY:V.clientY,startRect:ae,startPosX:ie,startPosY:ye,absOrigin:O,extras:ve,prevBodyCursor:Ae,prevBodyUserSelect:De};try{R.setPointerCapture(V.pointerId)}catch{}document.body.style.cursor=kp[v],document.body.style.userSelect="none",Ro(V),b(ae),E()}function j(v){const R=f;R&&v.pointerId===R.pointerId&&(Ro(v),R.lastClientX=v.clientX,R.lastClientY=v.clientY,E())}function L(v){const R=f;R&&v.pointerId===R.pointerId&&(Ro(v),R.lastClientX=v.clientX,R.lastClientY=v.clientY,C())}function S(v){const R=f;R&&v.pointerId===R.pointerId&&(Ro(v),M(v.type))}function g(v){f&&v.key==="Escape"&&(v.preventDefault(),v.stopImmediatePropagation(),v.stopPropagation(),M("escape"))}function T(){f&&M("blur")}function F(){f&&document.visibilityState!=="visible"&&M("visibilitychange")}for(const[v,R]of c)t.listen(R,"pointerdown",V=>k(v,R,V)),t.listen(R,"pointermove",j),t.listen(R,"pointerup",L),t.listen(R,"pointercancel",S),t.listen(R,"lostpointercapture",S);t.listen(document,"keydown",g,{capture:!0}),t.listen(window,"blur",T),t.listen(document,"visibilitychange",F);function _(v){t.isDisposed||(f&&M("target_change"),v instanceof HTMLElement&&v.isConnected?u=v:u=null,b(p))}function D(v){if(!t.isDisposed){if(p=Ao(v)?v:null,!u||!u.isConnected){l.hidden=!0;return}if(f&&!p){M("rect_lost");return}f||b(p)}}function H(){M("dispose"),u=null,p=null,t.dispose()}return b(null),{setTarget:_,setSelectionRect:D,dispose:H}}function Oo(e){return e instanceof Document||e instanceof ShadowRoot}function Ua(e){var n;const t=(n=e.tagName)==null?void 0:n.toUpperCase();return t==="HTML"||t==="BODY"||t==="HEAD"}function Ip(e){const{left:t,top:n,width:o,height:r}=e;return!Number.isFinite(t)||!Number.isFinite(n)||!Number.isFinite(o)||!Number.isFinite(r)?null:{left:t,top:n,width:Math.max(0,o),height:Math.max(0,r)}}function _p(e,t,n){if(!Number.isFinite(t)||!Number.isFinite(n))return[];try{if(typeof e.elementsFromPoint=="function")return e.elementsFromPoint(t,n)}catch{}try{const o=e.elementFromPoint(t,n);return o?[o]:[]}catch{return[]}}function Mp(e){try{const t=window.getComputedStyle(e),n=t.display;if(n==="grid"||n==="inline-grid")return null;if(n==="flex"||n==="inline-flex"){const o=t.flexWrap;if(o==="wrap"||o==="wrap-reverse")return null;switch(t.flexDirection){case"row":return{axis:"x",reverse:!1};case"row-reverse":return{axis:"x",reverse:!0};case"column":return{axis:"y",reverse:!1};case"column-reverse":return{axis:"y",reverse:!0};default:return{axis:"y",reverse:!1}}}return{axis:"y",reverse:!1}}catch{return null}}function Lp(e,t,n,o,r){const i=o==="x"?t.left+t.width/2:t.top+t.height/2,s=r?-e:e,l=r?-i:i;return n?n==="before"?s>l+pi?"after":"before":s<l-pi?"before":"after":s<l?"before":"after"}function Cs(e,t,n){return e.parentNode!==t?!1:n===e||n===e.nextSibling||n===null&&e.nextSibling===null}function Dp(e,t,n,o){var i;if(!e.isConnected||o(e)||e===t||Ua(e)||t.contains(e)||!e.parentElement)return!1;const r=(i=e.getRootNode)==null?void 0:i.call(e);return!(!Oo(r)||r!==n)}function Pp(e){const t=new ze,{canvasOverlay:n,isOverlayElement:o,positionTracker:r,transactionManager:i,uiRoot:s}=e;let l=null,a=null;function c(){a!==null&&(cancelAnimationFrame(a),a=null)}t.add(c);function u(y,k){s.style.pointerEvents=y?k.uiPointerEventsBefore:"none"}function p(){n.setDragGhostRect(null),n.setInsertionLine(null),n.render()}function f(){const y=l;y&&(c(),u(!0,y),p(),l=null)}function h(y){const j=_p(y.draggedRoot,y.lastClientX,y.lastClientY).slice(0,Rl).find(R=>Dp(R,y.draggedElement,y.draggedRoot,o));if(!j)return null;const L=j.parentElement;if(!L)return null;const S=Mp(L);if(!S)return null;let g;try{g=j.getBoundingClientRect()}catch{return null}if(!Number.isFinite(g.left)||!Number.isFinite(g.top)||g.width<=.5||g.height<=.5)return null;const T=y.preview&&y.preview.target===j?y.preview.side:null,F=S.axis==="x"?y.lastClientX:y.lastClientY,_=Lp(F,g,T,S.axis,S.reverse),D=_==="before"?j:j.nextSibling,H=Cs(y.draggedElement,L,D);let v;if(S.axis==="x"){const R=S.reverse?g.left+g.width:g.left,V=S.reverse?g.left:g.left+g.width,B=_==="before"?R:V;v={x1:B,y1:g.top,x2:B,y2:g.top+g.height}}else{const R=S.reverse?g.top+g.height:g.top,V=S.reverse?g.top:g.top+g.height,B=_==="before"?R:V;v={x1:g.left,y1:B,x2:g.left+g.width,y2:B}}return{target:j,parent:L,side:_,referenceNode:D,isNoop:H,indicatorLine:v}}function d(){var j;a=null;const y=l;if(!y)return;if(!y.draggedElement.isConnected){y.moveHandle.cancel(),f();return}const k={left:y.lastClientX-y.pointerOffsetX,top:y.lastClientY-y.pointerOffsetY,width:y.startRect.width,height:y.startRect.height};y.preview=h(y),n.setDragGhostRect(k),n.setInsertionLine(((j=y.preview)==null?void 0:j.indicatorLine)??null),n.render()}function b(){t.isDisposed||a===null&&(a=requestAnimationFrame(d))}function m(y,k){var T,F;const j=k.parent;if(!j.isConnected||y===j||y.contains(j))return!1;const L=(T=y.getRootNode)==null?void 0:T.call(y),S=(F=j.getRootNode)==null?void 0:F.call(j);if(!Oo(L)||!Oo(S)||L!==S||!k.target.isConnected||k.target.parentElement!==j)return!1;const g=k.side==="before"?k.target:k.target.nextSibling;if(Cs(y,j,g))return!0;try{return j.insertBefore(y,g),!0}catch(_){return console.warn(`${Xe} DOM move failed:`,_),!1}}function w(y){var _;if(t.isDisposed)return!1;l&&(l.moveHandle.cancel(),f());const k=y.draggedElement;if(!k||!(k instanceof Element)||!k.isConnected||Ua(k))return!1;const j=(_=k.getRootNode)==null?void 0:_.call(k),L=Oo(j)?j:document;let S;try{S=k.getBoundingClientRect()}catch{return!1}const g=Ip(S);if(!g||g.width<=.5||g.height<=.5)return!1;const T=i.beginMove(k);if(!T)return!1;const F=s.style.pointerEvents;return l={pointerId:y.pointerId,draggedElement:k,draggedRoot:L,startRect:g,pointerOffsetX:y.startClientX-g.left,pointerOffsetY:y.startClientY-g.top,lastClientX:y.clientX,lastClientY:y.clientY,preview:null,uiPointerEventsBefore:F,moveHandle:T},u(!1,l),b(),console.log(`${Xe} Drag started`),!0}function M(y){const k=l;k&&y.pointerId===k.pointerId&&(k.lastClientX=y.clientX,k.lastClientY=y.clientY,b())}function C(y){const k=l;if(!k||y.pointerId!==k.pointerId)return;k.lastClientX=y.clientX,k.lastClientY=y.clientY,c();const j=h(k);if(!j||j.isNoop){k.moveHandle.cancel(),f(),console.log(`${Xe} Drag cancelled (no-op or no target)`);return}if(!m(k.draggedElement,j)){k.moveHandle.cancel(),f(),console.log(`${Xe} Drag failed (DOM move error)`);return}k.moveHandle.commit(k.draggedElement),r.forceUpdate(),f(),console.log(`${Xe} Drag completed`)}function E(y){const k=l;k&&(k.moveHandle.cancel(),f(),console.log(`${Xe} Drag cancelled`))}return t.add(()=>{const y=l;y&&(y.moveHandle.cancel(),f())}),{onDragStart:w,onDragMove:M,onDragEnd:C,onDragCancel:E,dispose:()=>t.dispose()}}const _t={capture:!0,passive:!1},Fp=["pointerup","pointercancel","pointerover","pointerout","pointerenter","pointerleave"],$p=["mouseup","click","dblclick","contextmenu","auxclick","mouseover","mouseout","mouseenter","mouseleave"],Op=["keyup","keypress"],Vp=["touchstart","touchmove","touchend","touchcancel"];function Bp(e){const{isOverlayElement:t,onHover:n,onSelect:o,onDeselect:r,onStartEdit:i,findTargetForSelect:s,getSelectedElement:l,onStartDrag:a,onDragMove:c,onDragEnd:u,onDragCancel:p}=e,f=new ze,h=typeof PointerEvent<"u";let d="hover",b=null,m=null,w=null,M=null,C=!1,E=!1,y=!1,k=0,j=0,L=null;function S(O){try{if(typeof O.composedPath=="function")return O.composedPath().some(ie=>t(ie))}catch{}return t(O.target)}function g(O){const ie=m;if(!ie)return!1;try{if(typeof O.composedPath=="function")return O.composedPath().some(ve=>ve===ie)}catch{}const ye=O.target;return ye instanceof Node&&ie.contains(ye)}function T(O){d!=="interaction"&&(O.cancelable&&O.preventDefault(),O.stopImmediatePropagation(),O.stopPropagation())}function F(O){return{alt:O.altKey,shift:O.shiftKey,ctrl:O.ctrlKey,meta:O.metaKey}}function _(O){return O instanceof PointerEvent?O.pointerId:0}function D(O){return!(h&&!(O instanceof PointerEvent))}function H(O,ie){try{if(typeof O.composedPath=="function")return O.composedPath().some(ve=>ve===ie)}catch{}const ye=O.target;return ye instanceof Node&&ie.contains(ye)}function v(){w=null,M=null,C=!1}function R(O){if(d==="dragging"){v();try{p==null||p({reason:O})}catch{}E=!0,P("selecting")}}function V(O,ie,ye){if(d==="dragging"&&!(M===null||M!==O)){v();try{u==null||u({pointerId:O,clientX:ie,clientY:ye})}catch{}E=!0,P("selecting")}}function B(O,ie){if(!Number.isFinite(O)||!Number.isFinite(ie))return null;const ye=document.elementFromPoint(O,ie);return!ye||t(ye)?null:ye}function $(O,ie,ye,ve){if(!Number.isFinite(ie)||!Number.isFinite(ye))return null;if(s){const Ae=s(ie,ye,ve,O);return Ae&&t(Ae)?null:Ae}return B(ie,ye)}function q(){L!==null&&(cancelAnimationFrame(L),L=null)}f.add(q);function ne(O=!1){if(L=null,f.isDisposed||d!=="hover"&&d!=="selecting"||!y)return;const ie=B(k,j);!O&&ie===b||(b=ie,n(ie))}function A(O=!1){L===null&&(f.isDisposed||(L=requestAnimationFrame(()=>{ne(O)})))}function P(O){if(f.isDisposed||d===O)return;const ie=d;if(d=O,ie==="editing"&&O!=="editing"&&(m=null),ie==="selecting"&&O!=="selecting"&&(w=null),O==="interaction"&&ie!=="interaction"&&(r(),q(),b&&(b=null,n(null))),ie==="dragging"&&O!=="dragging"){const ye=!E;if(E=!1,v(),ye)try{p==null||p({reason:"mode_change"})}catch{}}else E=!1;ie==="hover"&&O!=="hover"&&(q(),b?(b=null,n(null)):b=null),O==="hover"&&ie!=="hover"&&(b=null,v(),r(),y&&A(!0))}function Y(O){if(!(d==="editing"&&g(O))){if(S(O)){d==="hover"&&b!==null&&(b=null,n(null));return}if(T(O),k=O.clientX,j=O.clientY,y=!0,d==="dragging"&&D(O)){const ie=_(O),ye=O instanceof PointerEvent;if(C!==ye)return;M!==null&&ie===M&&(c==null||c({pointerId:ie,clientX:O.clientX,clientY:O.clientY}));return}if(d==="selecting"&&w&&D(O)){const ie=_(O);if(ie!==w.pointerId)return;const ye=O instanceof PointerEvent;if(w.isPointerEventOrigin!==ye)return;const ve=O.clientX-w.startClientX,Ae=O.clientY-w.startClientY;if(Math.hypot(ve,Ae)<Nl)return;const De={pointerId:ie,draggedElement:w.selectedElement,startClientX:w.startClientX,startClientY:w.startClientY,clientX:O.clientX,clientY:O.clientY,modifiers:w.modifiers},Oe=w.isPointerEventOrigin;if(w=null,!((a==null?void 0:a(De))??!1))return;M=ie,C=Oe,P("dragging"),c==null||c({pointerId:ie,clientX:O.clientX,clientY:O.clientY});return}d!=="hover"&&d!=="selecting"||A()}}function z(O){if(d==="editing"&&g(O)||S(O)||(T(O),k=O.clientX,j=O.clientY,y=!0,O.button!==0))return;const ie=F(O);if(d==="selecting"){if(!D(O))return;const ve=(l==null?void 0:l())??null,Ae=$(O,O.clientX,O.clientY,ie);if(Ae&&Ae!==ve){w=null,o(Ae,ie);return}if(a&&ve&&ve.isConnected&&H(O,ve)){const De=O instanceof PointerEvent;w={pointerId:_(O),startClientX:O.clientX,startClientY:O.clientY,modifiers:ie,selectedElement:ve,isPointerEventOrigin:De}}return}if(d==="dragging")return;if(d==="editing"){try{m==null||m.blur()}catch{}P("selecting");return}if(d!=="hover")return;const ye=$(O,O.clientX,O.clientY,ie);ye&&(P("selecting"),o(ye,ie))}function J(O){if(d==="editing"&&g(O)||S(O)||(T(O),O.button!==0)||!i)return;const ie=F(O),ye=$(O,O.clientX,O.clientY,ie);!ye||!i(ye,ie)||(m=ye,P("editing"))}function pe(O){if(!(d==="editing"&&g(O))&&!S(O)&&(T(O),O.key==="Escape")){if(d==="dragging"){R("escape");return}d==="selecting"&&(w=null,P("hover"))}}function he(O){if(d==="editing"&&g(O)||S(O)||(T(O),!D(O)))return;const ie=_(O),ye=O instanceof PointerEvent;d==="selecting"&&w&&w.pointerId===ie&&w.isPointerEventOrigin===ye&&(w=null),d==="dragging"&&C===ye&&V(ie,O.clientX,O.clientY)}function Se(O){if(d==="editing"&&g(O)||S(O))return;T(O);const ie=O.pointerId;w&&w.pointerId===ie&&w.isPointerEventOrigin&&(w=null),d==="dragging"&&C&&(M===null||M!==ie||R("pointercancel"))}function xe(O){if(d!=="interaction"&&!S(O)&&!(d==="editing"&&g(O))){if(O.type==="dblclick"){J(O);return}if(O.type==="pointerup"||O.type==="mouseup"){he(O);return}if(O.type==="pointercancel"){Se(O);return}T(O)}}if(h){f.listen(document,"pointermove",Y,_t),f.listen(document,"pointerdown",z,_t);for(const O of Fp)f.listen(document,O,xe,_t)}f.listen(document,"mousemove",Y,_t),f.listen(document,"mousedown",z,_t);for(const O of $p)f.listen(document,O,xe,_t);f.listen(document,"keydown",pe,_t);for(const O of Op)f.listen(document,O,xe,_t);for(const O of Vp)f.listen(document,O,xe,_t);function ae(){d==="selecting"&&w&&(w=null),d==="dragging"&&R("blur")}function ee(){document.visibilityState!=="visible"&&(d==="selecting"&&w&&(w=null),d==="dragging"&&R("visibilitychange"))}return f.listen(window,"blur",ae),f.listen(document,"visibilitychange",ee),f.add(()=>{if(d==="dragging")try{p==null||p({reason:"dispose"})}catch{}v()}),{getMode:()=>d,setMode:P,dispose:()=>f.dispose()}}const Ir={passive:!0},zp=.5,As={childList:!0,subtree:!0};function Hp(e){const{left:t,top:n,width:o,height:r}=e;return!Number.isFinite(t)||!Number.isFinite(n)||!Number.isFinite(o)||!Number.isFinite(r)?null:{left:t,top:n,width:Math.max(0,o),height:Math.max(0,r)}}function Io(e,t){return Math.abs(e-t)<zp}function Ts(e,t){return e===t?!0:!e||!t?!1:Io(e.left,t.left)&&Io(e.top,t.top)&&Io(e.width,t.width)&&Io(e.height,t.height)}function Gp(e,t){return Ts(e.hover,t.hover)&&Ts(e.selection,t.selection)}function Wp(e){const{onPositionUpdate:t}=e,n=new ze;let o=null,r=null,i={hover:null,selection:null},s=null;function l(){s!==null&&(cancelAnimationFrame(s),s=null)}n.add(l);function a(){n.isDisposed||s===null&&(s=requestAnimationFrame(()=>{s=null,d()}))}let c=new ze;n.add(()=>c.dispose());function u(){var j;c.dispose(),c=new ze;const C=r;if(!C)return;c.observeResize(C,()=>{n.isDisposed||r===C&&a()});const E=()=>{n.isDisposed||r===C&&a()},y=(j=C.getRootNode)==null?void 0:j.call(C);y instanceof ShadowRoot&&c.observeMutation(y,E,As);const k=document.body??document.documentElement;k&&c.observeMutation(k,E,As)}function p(C){return C&&C.isConnected?C:null}function f(C){if(!C)return null;try{return Hp(C.getBoundingClientRect())}catch{return null}}function h(){const C=p(o),E=p(r);if(o&&!C&&(o=null),r&&!E&&(r=null,u()),C&&E&&C===E){const y=f(C);return{hover:y,selection:y}}return{hover:f(C),selection:f(E)}}function d(){if(n.isDisposed)return;const C=h();Gp(C,i)||(i=C,t(C))}function b(){!o&&!r&&!i.hover&&!i.selection||a()}n.listen(window,"scroll",b,Ir),n.listen(document,"scroll",b,{...Ir,capture:!0}),n.listen(window,"resize",b,Ir);function m(C){n.isDisposed||o!==C&&(o=C,a())}function w(C){n.isDisposed||r!==C&&(r=C,u(),a())}function M(C){if(!n.isDisposed){if(l(),C){const E=h();i=E,t(E);return}d()}}return{setHoverElement:m,setSelectionElement:w,forceUpdate:M,dispose:()=>n.dispose()}}const jp=8,Up=6,Xp=60,jt=.5,Yp=new Set(["A","BUTTON","INPUT","SELECT","TEXTAREA","LABEL","SUMMARY","DETAILS"]),qp=new Set(["button","link","checkbox","radio","switch","tab","menuitem","option","combobox","textbox"]),Kp=new Set(["DIV","SPAN","SECTION","ARTICLE","MAIN","HEADER","FOOTER","NAV","ASIDE"]);function Tt(e){const t=Number.parseFloat(e);return Number.isFinite(t)?t:0}function Zp(e){const t=e.trim().toLowerCase();if(t==="transparent")return!0;const n=t.match(/^rgba?\((.+)\)$/);if(n){const r=n[1].split(",").map(i=>i.trim());if(r.length>=4){const i=Number.parseFloat(r[3]);return Number.isFinite(i)&&i<=.01}return!1}const o=t.match(/^hsla?\((.+)\)$/);if(o){const r=o[1].split(",").map(i=>i.trim());if(r.length>=4){const i=Number.parseFloat(r[3]);return Number.isFinite(i)&&i<=.01}return!1}return!1}function Jp(e){var t;for(const n of Array.from(e.childNodes))if(n.nodeType===Node.TEXT_NODE&&((t=n.textContent)!=null&&t.trim()))return!0;return!1}function On(e){var t;if(e.parentElement)return e.parentElement;try{const n=(t=e.getRootNode)==null?void 0:t.call(e);if(n instanceof ShadowRoot)return n.host}catch{}return null}function Ns(e,t){if(!Number.isFinite(e)||!Number.isFinite(t))return[];try{if(typeof document.elementsFromPoint=="function")return document.elementsFromPoint(e,t)}catch{}const n=document.elementFromPoint(e,t);return n?[n]:[]}function _r(){const e=Math.max(1,window.innerWidth||1),t=Math.max(1,window.innerHeight||1);return e*t}function Rs(e){try{const t=e.getBoundingClientRect();return!Number.isFinite(t.left)||!Number.isFinite(t.top)||!Number.isFinite(t.width)||!Number.isFinite(t.height)?null:t}catch{return null}}function Is(e,t){return e.display==="none"||e.visibility==="hidden"||e.visibility==="collapse"||Tt(e.opacity)<=.01||e.contentVisibility==="hidden"||t.width<=jt||t.height<=jt}function _s(e,t){let n=0;const o=[];(!Zp(t.backgroundColor)||t.backgroundImage!=="none")&&(n+=2,o.push("visual:background:+2")),[Tt(t.borderTopWidth),Tt(t.borderRightWidth),Tt(t.borderBottomWidth),Tt(t.borderLeftWidth)].some(l=>l>jt)&&(t.borderTopStyle!=="none"||t.borderRightStyle!=="none"||t.borderBottomStyle!=="none"||t.borderLeftStyle!=="none")&&(n+=3,o.push("visual:border:+3")),t.boxShadow&&t.boxShadow!=="none"&&(n+=2,o.push("visual:shadow:+2")),t.outlineStyle!=="none"&&Tt(t.outlineWidth)>jt&&(n+=1,o.push("visual:outline:+1"));const s=e.tagName.toUpperCase();return(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SVG")&&(n+=2,o.push("visual:media:+2")),e instanceof SVGElement&&s!=="SVG"&&(n-=1,o.push("visual:svg-sub:-1")),{points:n,reasons:o}}function Ms(e,t){var s;let n=0;const o=[],r=e.tagName.toUpperCase();Yp.has(r)&&(n+=6,o.push(`type:${r.toLowerCase()}:+6`));const i=((s=e.getAttribute("role"))==null?void 0:s.toLowerCase())??"";return i&&qp.has(i)&&(n+=4,o.push(`role:${i}:+4`)),e instanceof HTMLAnchorElement&&e.href&&(n+=2,o.push("attr:href:+2")),e instanceof HTMLElement&&(e.isContentEditable&&(n+=5,o.push("attr:contenteditable:+5")),e.tabIndex>=0&&(n+=2,o.push("focusable:+2"))),t.cursor==="pointer"&&(n+=2,o.push("cursor:pointer:+2")),{points:n,reasons:o}}function Qp(e,t){let n=0;const o=[],r=e.width*e.height;if(!Number.isFinite(r)||r<=0)return n-=6,o.push("size:invalid:-6"),{points:n,reasons:o};e.width<4||e.height<4?(n-=6,o.push("size:tiny:-6")):r<16*16?(n-=4,o.push("size:small:-4")):r<44*44&&(n-=1,o.push("size:below-tap-target:-1"));const i=t>0?r/t:0;return i>.85?(n-=8,o.push("size:huge:-8")):i>.6&&(n-=4,o.push("size:very-large:-4")),{points:n,reasons:o}}function em(e){return Tt(e.paddingTop)>jt||Tt(e.paddingRight)>jt||Tt(e.paddingBottom)>jt||Tt(e.paddingLeft)>jt}function Ls(e,t,n,o){if(t.display==="contents")return!0;if(o>0)return!1;const r=e.tagName.toUpperCase();return!(!Kp.has(r)||e.children.length!==1||Jp(e)||n>0||em(t))}function Ds(e,t){return e.hitOrder!==t.hitOrder?e.hitOrder-t.hitOrder:e.depthFromHit-t.depthFromHit}function tm(e){const t=new ze,{isOverlayElement:n}=e;function o(f,h,d){if(!f.isConnected||n(f))return null;const b=f.tagName.toUpperCase();if(b==="HTML"||b==="BODY")return null;const m=Rs(f);if(!m)return null;let w=h.get(f);if(w||(w=window.getComputedStyle(f),h.set(f,w)),Is(w,m))return null;const M=[];let C=0;const E=Ms(f,w);C+=E.points,M.push(...E.reasons);const y=_s(f,w);C+=y.points,M.push(...y.reasons);const k=Qp(m,d);C+=k.points,M.push(...k.reasons);const j=Ls(f,w,y.points,E.points);j&&(C-=8,M.push("wrapperOnly:-8")),b==="SPAN"&&E.points===0&&y.points===0&&(C-=2,M.push("inline:span:-2"));const L=m.width*m.height,S=d>0?L/d:0;return w.position==="fixed"&&S>.3&&(C-=2,M.push("position:fixed-large:-2")),{element:f,score:C,reasons:M,wrapperOnly:j}}function r(f,h){const d=Ns(f,h);if(d.length===0)return[];const b=new Map;function m(y,k){if(n(y)||b.size>=Xp&&!b.has(y))return;const j=b.get(y);(!j||Ds(k,j)<0)&&b.set(y,k)}const w=Math.min(d.length,jp);for(let y=0;y<w;y++){const k=d[y];m(k,{hitOrder:y,depthFromHit:0});let j=k;for(let L=1;L<=Up&&(j=j?On(j):null,!!j);L++)m(j,{hitOrder:y,depthFromHit:L})}const M=_r(),C=new Map,E=[];for(const[y,k]of b){const j=o(y,C,M);j&&E.push({...j,...k})}return E.sort((y,k)=>k.score!==y.score?k.score-y.score:Ds(y,k)),E.map(({hitOrder:y,depthFromHit:k,...j})=>j)}function i(f){let h=On(f);if(!h)return null;const d=new Map;for(;h;){if(n(h))return null;const b=h.tagName.toUpperCase();if(b==="HTML"||b==="BODY")return null;const m=Rs(h);if(!m){h=On(h);continue}let w=d.get(h);if(w||(w=window.getComputedStyle(h),d.set(h,w)),Is(w,m)){h=On(h);continue}const M=Ms(h,w),C=_s(h,w);if(!Ls(h,w,C.points,M.points))return h;h=On(h)}return null}function s(f,h,d){var w;const m=((w=r(f,h)[0])==null?void 0:w.element)??null;return m?d.alt?i(m)??m:m:null}function l(f){try{const h=typeof f.composedPath=="function"?f.composedPath():null;if(!Array.isArray(h)||h.length===0)return[];const d=[];for(const b of h){if(!(b instanceof Element)||n(b))continue;const m=b.tagName.toUpperCase();m==="HTML"||m==="BODY"||d.push(b)}return d}catch{return[]}}function a(f){const h=f,d=typeof h.clientX=="number"?h.clientX:Number.NaN,b=typeof h.clientY=="number"?h.clientY:Number.NaN;return!Number.isFinite(d)||!Number.isFinite(b)?null:{x:d,y:b}}const c=32;function u(f){const h=_r(),d=new Map,b=Math.min(f.length,c);for(let m=0;m<b;m++){const w=f[m],M=o(w,d,h);if(M)return M.element}return null}function p(f,h){const d=l(f),b=a(f);if(h.ctrl||h.meta){const y=u(d);return y||(b?s(b.x,b.y,h):null)}const m=d[0]??(b?Ns(b.x,b.y)[0]:null);if(!m)return b?s(b.x,b.y,h):null;const w=_r(),C=o(m,new Map,w);let E;return C&&!C.wrapperOnly?E=m:E=i(m)??m,h.alt?i(E)??E:E}return{findBestTarget:s,findBestTargetFromEvent:p,getCandidatesAtPoint:r,getParentCandidate:i,dispose:()=>t.dispose()}}const Ps=new WeakMap,Fs=new WeakMap;let nm=0,om=0,Mr;const rm=["data-testid","data-test-id","data-test","data-qa","data-cy","name","aria-label","title","alt"],rn=48,im=64;function Xo(e){return(e!=null&&e.tagName?String(e.tagName):"").toLowerCase().trim()||"unknown"}function yt(e){return typeof e=="string"?e.trim():""}function sm(e){return String(e??"").replace(/\s+/g," ").trim()}function zt(e,t){const n=String(e??"");return n.length<=t?n:n.slice(0,Math.max(0,t-1)).trimEnd()+"â€¦"}function am(){if(Mr!==void 0)return Mr;let e="";try{const t=window.frameElement;if(t instanceof HTMLIFrameElement){const n=Xo(t),o=yt(t.id||t.getAttribute("id"));if(o)e=`${n}#${o}`;else{const r=yt(t.name||t.getAttribute("name"));if(r)e=`${n}[name="${zt(r,rn)}"]`;else{const i=yt(t.getAttribute("src")||t.src);e=i?`${n}[src="${zt(i,rn)}"]`:n}}}}catch{e=""}return Mr=e,e}function lm(e){const t=Fs.get(e);if(t)return t;const n=Xo(e),o=yt(e.id||e.getAttribute("id")),r=o?`${n}#${o}`:`${n}_h${++om}`;return Fs.set(e,r),r}function Xa(e,t){var r;const n=[];let o=e;for(;;){let i;try{i=(r=o.getRootNode)==null?void 0:r.call(o)}catch{i=null}if(!(i instanceof ShadowRoot))break;const s=i.host;if(!(s instanceof Element))break;n.unshift(lm(s)),o=s}return n.length>0?n.join(">"):""}function cm(e){for(const t of rm){const n=yt(e.getAttribute(t));if(n)return{attr:t,value:n}}return null}function Mt(e,t){const n=Ps.get(e);if(n)return n;const o=Xo(e),r=yt(e.id||e.getAttribute("id")),i=r?`${o}#${r}`:`${o}_${++nm}`,s=[],l=am();l&&s.push(`frame:${l}`);const a=Xa(e);a&&s.push(`shadow:${a}`),s.push(i);const c=s.join("|");return Ps.set(e,c),c}function Ya(e){const t=Xo(e),n=yt(e.id||e.getAttribute("id"));if(n)return`${t}#${n}`;const o=cm(e);if(o)return`${t}[${o.attr}="${zt(o.value,rn)}"]`;const r=yt(e.getAttribute("role"));if(r)return`${t}[role="${zt(r,rn)}"]`;if(e instanceof HTMLInputElement){const s=yt(e.getAttribute("type")||e.type);if(s&&s!=="text")return`${t}[type="${zt(s,rn)}"]`;const l=yt(e.getAttribute("placeholder")||e.placeholder);if(l)return`${t}[placeholder="${zt(l,rn)}"]`}if(e instanceof HTMLIFrameElement){const s=yt(e.getAttribute("src")||e.src);if(s)return`${t}[src="${zt(s,rn)}"]`}const i=sm(e.textContent??"");return i?`${t}("${zt(i,im)}")`:t}function qa(e,t){const n=Ya(e),o=Xa(e);return o?`${o} >> ${n}`:n}const um=100,dm=800,fm={capture:!0,passive:!1};function Ut(e){const t=e.trim();return t?t.startsWith("--")?t:t.includes("-")?t.toLowerCase():t.replace(/[A-Z]/g,n=>`-${n.toLowerCase()}`).toLowerCase():""}function Ho(e){const n=e.style;return!n||typeof n.getPropertyValue!="function"||typeof n.setProperty!="function"||typeof n.removeProperty!="function"?null:n}function _o(e,t){const n=Ut(t);return n?e.getPropertyValue(n).trim():""}function $s(e,t){if(typeof window>"u"||typeof window.getComputedStyle!="function")return"";const n=Ut(t);if(!n)return"";try{return window.getComputedStyle(e).getPropertyValue(n).trim()}catch{return""}}function Wn(e,t,n){const o=Ut(t);if(!o)return;const r=n.trim();r?e.setProperty(o,r):e.removeProperty(o)}function Ka(e,t){if(!t)return;const n=Ho(e);if(n)for(const[o,r]of Object.entries(t))Wn(n,o,r)}function Vo(e){const t=[],n=new Set;for(const o of e??[]){const r=String(o??"").trim();r&&(n.has(r)||(n.add(r),t.push(r)))}return t}function Os(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function pm(e){try{const t=e.classList;if(t&&typeof t[Symbol.iterator]=="function")return Array.from(t).filter(Boolean)}catch{}try{return(e.getAttribute("class")??"").split(/\s+/).map(n=>n.trim()).filter(Boolean)}catch{return[]}}function Za(e,t){const o=Vo(t).join(" ").trim();try{o?e.setAttribute("class",o):e.removeAttribute("class")}catch{}}function mm(e){const t=Ho(e);if(!t)return;const n={};for(let o=0;o<t.length;o++){const r=t.item(o);if(!r)continue;const i=t.getPropertyValue(r).trim();i&&(n[r]=i)}return Object.keys(n).length>0?n:void 0}function Vs(e){const t=String(e??"").trim();if(!t)return null;try{const n=document.createElement("template");n.innerHTML=t;const o=n.content.firstElementChild;return!o||n.content.childElementCount!==1?null:o}catch{return null}}function hm(e){try{e.removeAttribute("id");const t=e.querySelectorAll("[id]");for(const n of Array.from(t))n.removeAttribute("id")}catch{}}function Bs(e,t,n){if(!e.isConnected)return!1;let o=null;if(n.anchorLocator){const r=Ge(n.anchorLocator);r&&r.parentElement===e&&(o=n.anchorPosition==="before"?r:r.nextSibling)}if(!o){const r=Array.from(e.children),i=Math.max(0,Math.min(n.insertIndex,r.length));o=r[i]??null}try{return e.insertBefore(t,o),!0}catch{return!1}}function Wr(e,t,n){const o=e.parentElement;if(!o)return null;const r=String(t||"div").toLowerCase(),i=document.createElement(r);n&&Ka(i,n);try{return o.insertBefore(i,e),i.appendChild(e),i}catch{return null}}function jr(e){const t=e.parentElement;if(!t||e.childElementCount!==1)return null;const n=e.firstElementChild;if(!n)return null;try{return t.insertBefore(n,e),e.remove(),n}catch{return null}}function gm(e){const t=e.parentElement;if(!t)return null;const o=Array.from(t.children).indexOf(e);return o<0?null:{parentLocator:Ye(t),insertIndex:o+1,anchorLocator:Ye(e),anchorPosition:"after"}}let zs=0;function Jt(e){return zs+=1,`tx_${e.toString(36)}_${zs.toString(36)}`}function Ja(e,t,n,o,r,i,s){const l={locator:t,styles:n};return s&&Object.keys(s).length>0&&(l.computedStyles=s),{id:e,type:"style",targetLocator:t,elementKey:i,before:l,after:{locator:t,styles:o},timestamp:r,merged:!1}}function Hs(e,t,n,o,r,i,s,l){const a=Ut(n),c=l&&l.trim()?{[a]:l}:void 0;return Ja(e,t,{[a]:o},{[a]:r},i,s,c)}function bm(e,t,n,o,r,i){return{id:e,type:"text",targetLocator:t,elementKey:i,before:{locator:t,text:n},after:{locator:t,text:o},timestamp:r,merged:!1}}function wm(e,t,n,o,r,i,s){return{id:e,type:"class",targetLocator:n,elementKey:s,before:{locator:t,classes:o},after:{locator:n,classes:r},timestamp:i,merged:!1}}function xm(e,t,n,o,r,i){return{id:e,type:"move",targetLocator:n,elementKey:i,before:{locator:t},after:{locator:n},moveData:o,timestamp:r,merged:!1}}function Mo(e,t,n,o,r,i,s){return{id:e,type:"structure",targetLocator:t,elementKey:s,before:{locator:n},after:{locator:o},structureData:r,timestamp:i,merged:!1}}function en(e){var n;const t=(n=e.tagName)==null?void 0:n.toUpperCase();return t==="HTML"||t==="BODY"||t==="HEAD"}function an(e){var n;const t=(n=e.tagName)==null?void 0:n.toUpperCase();return t==="HTML"||t==="HEAD"}function Ur(e){var n;const t=(n=e.tagName)==null?void 0:n.toUpperCase();return t==="HTML"||t==="BODY"||t==="HEAD"}function Lr(e){const t=e.parentElement;if(!t)return null;const o=Array.from(t.children).indexOf(e);if(o<0)return null;const r=Ye(t),i=e.nextElementSibling;if(i)return{parentLocator:r,insertIndex:o,anchorLocator:Ye(i),anchorPosition:"before"};const s=e.previousElementSibling;return s?{parentLocator:r,insertIndex:o,anchorLocator:Ye(s),anchorPosition:"after"}:{parentLocator:r,insertIndex:o,anchorPosition:"before"}}function ym(e,t){var s,l;if(!e.isConnected||Ur(e))return!1;const n=Ge(t.parentLocator);if(!n||!n.isConnected)return!1;const o=(s=e.getRootNode)==null?void 0:s.call(e),r=(l=n.getRootNode)==null?void 0:l.call(n);if(o&&r&&o!==r||e===n||e.contains(n))return!1;let i=null;if(t.anchorLocator){const a=Ge(t.anchorLocator);a&&a!==e&&a.parentElement===n&&(i=t.anchorPosition==="before"?a:a.nextSibling,i===e&&(i=e.nextSibling))}if(!i){const a=Array.from(n.children),c=a.indexOf(e);c!==-1&&a.splice(c,1);const u=Math.max(0,Math.min(t.insertIndex,a.length));i=a[u]??null}try{return n.insertBefore(e,i),!0}catch{return!1}}function Xr(e){const t=new Set;if(e.before.styles)for(const n of Object.keys(e.before.styles))t.add(n);if(e.after.styles)for(const n of Object.keys(e.after.styles))t.add(n);return t.size===1?Array.from(t)[0]:null}function vm(e,t,n){if(e.type!=="style"||t.type!=="style"||Math.abs(t.timestamp-e.timestamp)>n||Ft(e.targetLocator)!==Ft(t.targetLocator))return!1;const o=Xr(e),r=Xr(t);return!(!o||!r||o!==r)}function Em(e,t){var r;const n=Xr(e);if(!n)return!1;const o=(r=t.after.styles)==null?void 0:r[n];return o===void 0?!1:(e.after.styles||(e.after.styles={}),e.after.styles[n]=o,e.timestamp=t.timestamp,e.merged=!0,!0)}function Sm(e,t){var r,i;const n=e.structureData;if(!n)return!1;const o=t==="redo";switch(n.action){case"wrap":{if(o){const a=Ge(e.before.locator)??Ge(e.targetLocator)??Ge(e.after.locator);if(!a||!a.isConnected||en(a))return!1;const c=a.parentElement;if(!c||!c.isConnected||an(c))return!1;const u=Wr(a,n.wrapperTag??"div",n.wrapperStyles);if(!u||!u.isConnected)return!1;const p=Ye(u);return e.after.locator=p,e.targetLocator=p,!0}const s=Ge(e.after.locator)??Ge(e.targetLocator);if(!s||!s.isConnected||en(s))return!1;const l=jr(s);return!l||!l.isConnected?!1:(e.before.locator=Ye(l),!0)}case"unwrap":{if(o){const c=Ge(e.before.locator)??((r=Ge(e.after.locator))==null?void 0:r.parentElement)??((i=Ge(e.targetLocator))==null?void 0:i.parentElement);if(!c||!c.isConnected||en(c))return!1;const u=jr(c);if(!u||!u.isConnected)return!1;const p=Ye(u);return e.after.locator=p,e.targetLocator=p,!0}const s=Ge(e.after.locator)??Ge(e.targetLocator);if(!s||!s.isConnected||en(s))return!1;const l=s.parentElement;if(!l||!l.isConnected||an(l))return!1;const a=Wr(s,n.wrapperTag??"div",n.wrapperStyles);return!a||!a.isConnected?!1:(e.before.locator=Ye(a),!0)}case"delete":{if(o){const c=Ge(e.before.locator)??Ge(e.targetLocator);return!c||!c.isConnected||en(c)?!1:(c.remove(),!0)}if(!n.position||!n.html)return!1;const s=Ge(n.position.parentLocator);if(!s||!s.isConnected||an(s))return!1;const l=Vs(n.html);if(!l||!Bs(s,l,n.position))return!1;const a=Ye(l);return e.before.locator=a,e.targetLocator=a,!0}case"duplicate":{if(o){if(!n.position||!n.html)return!1;const l=Ge(n.position.parentLocator);if(!l||!l.isConnected||an(l))return!1;const a=Vs(n.html);if(!a||!Bs(l,a,n.position))return!1;const c=Ye(a);return e.after.locator=c,e.targetLocator=c,!0}const s=Ge(e.after.locator)??Ge(e.targetLocator);return!s||!s.isConnected||en(s)?!1:(s.remove(),!0)}default:return!1}}function Gs(e,t){if(e.type==="move"){const r=e.moveData;if(!r)return!1;const i=t==="undo"?e.after.locator:e.before.locator,s=t==="undo"?e.before.locator:e.after.locator,l=Ge(i)??Ge(s)??Ge(e.targetLocator);if(!l)return!1;const a=t==="undo"?r.from:r.to;return ym(l,a)}if(e.type==="class"){const r=t==="undo"?e.after.locator:e.before.locator,i=t==="undo"?e.before.locator:e.after.locator,s=Ge(r)??Ge(i)??Ge(e.targetLocator);if(!s)return!1;const l=t==="undo"?e.before:e.after,a=Array.isArray(l.classes)?l.classes:[];return Za(s,a),!0}if(e.type==="structure")return Sm(e,t);if(e.type!=="style"&&e.type!=="text")return!0;const n=Ge(e.targetLocator);if(!n)return!1;const o=t==="undo"?e.before:e.after;return e.type==="style"?(Ka(n,o.styles),!0):(e.type==="text"&&(n.textContent=o.text??""),!0)}function km(e={}){const t=new ze,n=Math.max(1,e.maxHistory??um),o=Math.max(0,e.mergeWindowMs??dm),r=e.now??(()=>Date.now()),i=[],s=[];function l(g,T){var F;(F=e.onChange)==null||F.call(e,{action:g,transaction:T,undoCount:i.length,redoCount:s.length})}function a(){i.length>n&&i.splice(0,i.length-n)}function c(g,T){const F=s.length>0;if(F&&(s.length=0),!F&&T&&i.length>0){const _=i[i.length-1];if(vm(_,g,o)&&Em(_,g)){l("merge",_);return}}i.push(g),a(),l("push",g)}function u(g,T,F,_,D){if(t.isDisposed)return null;const H=Ut(T);if(!H)return null;const v=F.trim(),R=_.trim();if(v===R)return null;const V=Jt(r()),B=Hs(V,g,H,v,R,r());return c(B,(D==null?void 0:D.merge)!==!1),B}function p(g,T,F){if(t.isDisposed)return null;const _=String(T??""),D=String(F??"");if(_===D)return null;const H=Ye(g),v=r(),R=Jt(v),V=Mt(g,H.shadowHostChain),B=bm(R,H,_,D,v,V);return c(B,!1),B}function f(g,T,F){if(t.isDisposed||!g.isConnected)return null;const _=Vo(pm(g)),D=Vo(T),H=Vo(F),v=Os(D,_)?D:_;if(Os(v,H))return null;const R=r(),V=Jt(R),B=Ye(g),$=Mt(g,B.shadowHostChain);Za(g,H);const q=Ye(g),ne=wm(V,B,q,v,H,R,$);return c(ne,!1),ne}function h(g,T){if(t.isDisposed||!g.isConnected||en(g))return null;const F=T==null?void 0:T.action,_=r(),D=Jt(_);if(F==="wrap"){const H=g.parentElement;if(!H||!H.isConnected||an(H))return null;const v=Ye(g),R=Wr(g,T.wrapperTag??"div",T.wrapperStyles);if(!R||!R.isConnected)return null;const V=Ye(R),B=Mt(R,V.shadowHostChain),$={action:"wrap",wrapperTag:T.wrapperTag??"div",wrapperStyles:T.wrapperStyles},q=Mo(D,V,v,V,$,_,B);return c(q,!1),q}if(F==="unwrap"){const H=g,v=H.parentElement;if(!v||!v.isConnected||an(v)||H.childElementCount!==1)return null;const R=Ye(H),V=H.tagName.toLowerCase(),B=mm(H),$=jr(H);if(!$||!$.isConnected)return null;const q=Ye($),ne=Mt($,q.shadowHostChain),P=Mo(D,q,R,q,{action:"unwrap",wrapperTag:V,wrapperStyles:B},_,ne);return c(P,!1),P}if(F==="delete"){const H=Lr(g);if(!H)return null;const v=String(g.outerHTML??"").trim();if(!v)return null;const R=Ye(g),V=Mt(g,R.shadowHostChain),B=H.parentLocator;try{g.remove()}catch{return null}const q=Mo(D,R,R,B,{action:"delete",position:H,html:v},_,V);return c(q,!1),q}if(F==="duplicate"){const H=g.parentElement;if(!H||!H.isConnected||an(H))return null;const v=gm(g);if(!v)return null;const R=Ye(g),V=g.cloneNode(!0);hm(V);try{H.insertBefore(V,g.nextSibling)}catch{return null}const B=String(V.outerHTML??"").trim();if(!B)return null;const $=Ye(V),q=Mt(V,$.shadowHostChain),A=Mo(D,$,R,$,{action:"duplicate",position:v,html:B},_,q);return c(A,!1),A}return null}function d(g){if(t.isDisposed||!g.isConnected||Ur(g))return null;const T=Lr(g);if(!T)return null;const F=r(),_=Jt(F),D=Ye(g);let H=!1;function v(V){if(H||t.isDisposed||(H=!0,!V.isConnected)||Ur(V))return null;const B=Lr(V);if(!B)return null;const $=Ft(T.parentLocator)===Ft(B.parentLocator),q=T.insertIndex===B.insertIndex,ne=T.anchorPosition===B.anchorPosition,A=!T.anchorLocator&&!B.anchorLocator||T.anchorLocator&&B.anchorLocator&&Ft(T.anchorLocator)===Ft(B.anchorLocator);if($&&q&&A&&ne)return null;const P=Ye(V),Y=Mt(V,P.shadowHostChain),J=xm(_,D,P,{from:T,to:B},r(),Y);return c(J,!1),J}function R(){H||t.isDisposed||(H=!0)}return{id:_,beforeLocator:D,from:T,commit:v,cancel:R}}function b(g,T){if(t.isDisposed)return null;const F=Ho(g);if(!F)return null;const _=F,D=Ut(T);if(!D)return null;const H=Ye(g),v=_o(_,D),R=$s(g,D),V=Jt(r()),B=Mt(g,H.shadowHostChain);let $=!1;function q(P){$||t.isDisposed||Wn(_,D,P)}function ne(P){if($||t.isDisposed)return null;$=!0;const Y=_o(_,D);if(Y===v)return null;const z=Hs(V,H,D,v,Y,r(),B,R);return c(z,(P==null?void 0:P.merge)!==!1),z}function A(){$||t.isDisposed||($=!0,Wn(_,D,v),l("rollback",null))}return{id:V,property:D,targetLocator:H,set:q,commit:ne,rollback:A}}function m(g,T){if(t.isDisposed)return null;const F=Ho(g);if(!F)return null;const _=F,D=Array.from(new Set(T.map(z=>Ut(String(z))).filter(z=>!!z)));if(D.length===0)return null;const H=new Set(D),v=Ye(g),R=r(),V=Jt(R),B=Mt(g,v.shadowHostChain),$={},q={};for(const z of D)$[z]=_o(_,z),q[z]=$s(g,z);let ne=!1;function A(z){if(!(ne||t.isDisposed))for(const[J,pe]of Object.entries(z)){const he=Ut(J);!he||!H.has(he)||Wn(_,he,String(pe??""))}}function P(z){if(ne||t.isDisposed)return null;ne=!0;const J={},pe={},he={};for(const xe of D){const ae=$[xe]??"",ee=_o(_,xe);if(ee===ae)continue;J[xe]=ae,pe[xe]=ee;const O=q[xe]??"";O.trim()&&(he[xe]=O)}if(Object.keys(J).length===0)return null;const Se=Ja(V,v,J,pe,r(),B,he);return c(Se,(z==null?void 0:z.merge)===!0),Se}function Y(){if(!(ne||t.isDisposed)){ne=!0;for(const z of D)Wn(_,z,$[z]??"");l("rollback",null)}}return{id:V,properties:D,targetLocator:v,set:A,commit:P,rollback:Y}}function w(g,T,F,_){const D=b(g,T);return D?(D.set(F),D.commit(_)):null}function M(){var F;if(t.isDisposed)return null;const g=i.pop();return g?Gs(g,"undo")?(s.push(g),l("undo",g),g):(i.push(g),(F=e.onApplyError)==null||F.call(e,new Error(`Failed to locate element for undo: ${g.id}`)),null):null}function C(){var F;if(t.isDisposed)return null;const g=s.pop();return g?Gs(g,"redo")?(i.push(g),a(),l("redo",g),g):(s.push(g),(F=e.onApplyError)==null||F.call(e,new Error(`Failed to locate element for redo: ${g.id}`)),null):null}function E(){return i.length>0}function y(){return s.length>0}function k(){return i.slice()}function j(){return s.slice()}function L(){i.length=0,s.length=0,l("clear",null)}e.enableKeyBindings&&t.listen(window,"keydown",g=>{var _;if((_=e.isEventFromEditorUi)!=null&&_.call(e,g)||!(g.metaKey||g.ctrlKey)||g.altKey)return;const F=g.key.toLowerCase();F==="z"?(g.shiftKey?C():M(),g.preventDefault(),g.stopPropagation(),g.stopImmediatePropagation()):F==="y"&&(C(),g.preventDefault(),g.stopPropagation(),g.stopImmediatePropagation())},fm);function S(){i.length=0,s.length=0,t.dispose()}return{beginStyle:b,beginMultiStyle:m,beginMove:d,applyStyle:w,recordStyle:u,recordText:p,recordClass:f,applyStructure:h,undo:M,redo:C,canUndo:E,canRedo:y,getUndoStack:k,getRedoStack:j,clear:L,dispose:S}}const Ws=96,js=64,Cm=new Set(["style","text","class"]);function Yr(e){return String(e??"").trim()}function Vn(e){return String(e??"").trim()}function Us(e){return String(e??"").replace(/\s+/g," ").trim()}function Go(e,t){const n=String(e??"");return n.length<=t?n:n.slice(0,Math.max(0,t-1)).trimEnd()+"â€¦"}function Xs(e){const t=[],n=new Set;for(const o of e??[]){const r=String(o??"").trim();r&&(n.has(r)||(n.add(r),t.push(r)))}return t}function Am(e){if(typeof document>"u")return null;try{return Ge(e)}catch{return null}}function Tm(e,t){let n="";const o=Yr(e.fingerprint);if(o){const a=o.split("|").map(f=>f.trim()).filter(Boolean),c=a[0]??"element",u=a.find(f=>f.startsWith("id=")),p=u?u.slice(3).trim():"";n=p?`${c}#${p}`:c}else Array.isArray(e.selectors)&&e.selectors.length>0?n=Go(Yr(e.selectors[0]),js)||"element":n=Go(t,js)||"element";const r=[],i=(e.frameChain??[]).join(">").trim(),s=(e.shadowHostChain??[]).join(">").trim();i&&r.push(i),s&&r.push(s);const l=r.length?`${r.join(">")} >> ${n}`:n;return{label:n,fullLabel:l}}function Nm(e,t){const n=Am(e);return n?{label:Ya(n),fullLabel:qa(n,e.shadowHostChain)}:Tm(e,t)}function Rm(e,t,n){return Number(e)+Number(t)+Number(n)>1?"mixed":e?"style":t?"text":n?"class":"mixed"}function Im(e){const t=new Map,n=new Map,o=new Map;for(const p of e){if(p.type!=="style")continue;const f=p.before.styles??{},h=p.before.computedStyles??{},d=p.after.styles??{},b=new Set([...Object.keys(f),...Object.keys(d)]);for(const m of b){const w=String(m??"").trim();if(!w)continue;const M=Vn(f[w]),C=Vn(h[w]),E=M||C,y=Vn(d[w]);t.has(w)||(t.set(w,M),n.set(w,E)),o.set(w,y)}}if(t.size===0&&o.size===0)return null;const r={},i={},s=new Set([...t.keys(),...o.keys()]);for(const p of s){const f=t.get(p)??"",h=o.get(p)??"";if(f===h)continue;const d=n.get(p)??f;r[p]=d,i[p]=h}const l=Array.from(new Set([...Object.keys(r),...Object.keys(i)])).sort();if(l.length===0)return null;let a=0,c=0,u=0;for(const p of l){const f=Vn(r[p]),h=Vn(i[p]);!f&&h?a+=1:f&&!h?c+=1:u+=1}return{before:r,after:i,added:a,removed:c,modified:u,details:l}}function _m(e){let t,n;for(const i of e)i.type==="text"&&(t===void 0&&(t=String(i.before.text??"")),n=String(i.after.text??""));if(t===void 0||n===void 0||t===n)return null;const o=Go(Us(t),Ws),r=Go(Us(n),Ws);return{before:t,after:n,beforePreview:o,afterPreview:r}}function Mm(e){let t,n;for(const c of e)c.type==="class"&&(t||(t=Xs(c.before.classes)),n=Xs(c.after.classes));if(!t||!n)return null;const o=new Set(t),r=new Set(n),i=Array.from(r).filter(c=>!o.has(c)).sort(),s=Array.from(o).filter(c=>!r.has(c)).sort();if(i.length===0&&s.length===0)return null;const l=Array.from(o).sort(),a=Array.from(r).sort();return{before:l,after:a,added:i,removed:s}}function Bn(e){var r;const t=e.map((i,s)=>({tx:i,index:s}));t.sort((i,s)=>{const l=Number(i.tx.timestamp??0),a=Number(s.tx.timestamp??0);return l!==a?l-a:i.index-s.index});const n=new Map;for(const{tx:i}of t){if(!Cm.has(i.type))continue;const s=Yr(i.elementKey);let l;if(s)l=s;else try{l=Ft(i.targetLocator)}catch{l=`unknown:${i.id}`}const a=n.get(l);a?a.push(i):n.set(l,[i])}const o=[];for(const[i,s]of n.entries()){if(s.length===0)continue;const l=s[s.length-1],a=((r=l.after)==null?void 0:r.locator)??l.targetLocator,c=Im(s),u=_m(s),p=Mm(s),f=c!==null,h=u!==null,d=p!==null;if(!f&&!h&&!d)continue;const{label:b,fullLabel:m}=Nm(a,i),w={elementKey:i,locator:a};c&&(w.styleChanges={before:c.before,after:c.after}),u&&(w.textChange={before:u.before,after:u.after}),p&&(w.classChanges={before:p.before,after:p.after});const M={};c&&(M.style={added:c.added,removed:c.removed,modified:c.modified,details:c.details}),u&&(M.text={beforePreview:u.beforePreview,afterPreview:u.afterPreview}),p&&(M.class={added:p.added,removed:p.removed});const C=s.reduce((y,k)=>{const j=Number(k.timestamp??0);return Number.isFinite(j)?Math.max(y,j):y},0),E=Rm(f,h,d);o.push({elementKey:i,label:b,fullLabel:m,locator:a,type:E,changes:M,transactionIds:s.map(y=>y.id),netEffect:w,updatedAt:C,debugSource:a.debugSource})}return o.sort((i,s)=>s.updatedAt-i.updatedAt||i.label.localeCompare(s.label)),o}function Dr(e){return typeof e=="number"&&Number.isFinite(e)}function Lm(e){return e/(1024*1024)}function Ys(e,t){const n=Lm(e);return Number.isFinite(n)?n.toFixed(t):"N/A"}function Dm(){try{const t=performance.memory;if(!t)return null;const n=t.usedJSHeapSize,o=t.jsHeapSizeLimit,r=t.totalJSHeapSize;return!Dr(n)||!Dr(o)||!Dr(r)?null:{usedJSHeapSize:n,totalJSHeapSize:r,jsHeapSizeLimit:o}}catch{return null}}function Pm(e){const t=new ze,n=e.container,o=Math.max(100,Math.floor(e.fpsUiIntervalMs)),r=Math.max(250,Math.floor(e.memorySampleIntervalMs)),i=document.createElement("div");i.className="we-perf-hud",i.hidden=!0,i.setAttribute("aria-hidden","true");const s=document.createElement("div");s.className="we-perf-hud-line",s.textContent="FPS: --";const l=document.createElement("div");l.className="we-perf-hud-line",l.textContent="Heap: --",i.append(s,l),n.append(i),t.add(()=>i.remove());let a=!1,c=null,u=0,p=0,f=0,h=s.textContent??"",d=l.textContent??"";function b(){c!==null&&(cancelAnimationFrame(c),c=null)}t.add(b);function m(L,S,g){if(g==="fps"){if(S===h)return;h=S}else{if(S===d)return;d=S}L.textContent=S}function w(){const L=Dm();if(!L){m(l,"Heap: N/A","heap");return}const S=Ys(L.usedJSHeapSize,1),g=Ys(L.jsHeapSizeLimit,0);m(l,`Heap: ${S} / ${g} MB`,"heap")}function M(L){u=0,p=L,f=L-r,m(s,"FPS: --","fps"),w()}function C(){t.isDisposed||a&&c===null&&document.visibilityState==="visible"&&(c=requestAnimationFrame(E))}function E(L){if(c=null,t.isDisposed||!a||document.visibilityState!=="visible")return;u+=1;const S=L-p;if(S>=o){const g=S>0?u*1e3/S:0,T=Math.max(0,Math.round(g));m(s,`FPS: ${T}`,"fps"),u=0,p=L}L-f>=r&&(f=L,w()),C()}function y(){if(a){if(document.visibilityState!=="visible"){b();return}M(performance.now()),C()}}t.listen(document,"visibilitychange",y);function k(L){if(a!==L){if(a=L,!a){i.hidden=!0,b();return}i.hidden=!1,document.visibilityState==="visible"&&(M(performance.now()),C())}}function j(){return k(!a),a}return{isEnabled:()=>a,setEnabled:k,toggle:j,dispose:()=>{a=!1,i.hidden=!0,t.dispose()}}}const Fm=50,$m=8;function Om(e={}){const t=Math.max(1,Math.floor(e.maxDeclarationsPerToken??Fm)),n=Math.max(0,Math.floor(e.maxInlineDepth??$m));function o(f){try{return f.cssRules}catch{return null}}function r(f){var h,d;if(f.disabled)return!1;try{const b=((d=(h=f.media)==null?void 0:h.mediaText)==null?void 0:d.trim())??"";return!b||b.toLowerCase()==="all"?!0:window.matchMedia(b).matches}catch{return!0}}function i(f,h){var m;const d=typeof f.href=="string"?f.href:void 0;if(d){const w=((m=d.split("/").pop())==null?void 0:m.split("?")[0])??d;return{url:d,label:w}}const b=f.ownerNode;return(b==null?void 0:b.nodeType)===Node.ELEMENT_NODE?{label:`<${b.tagName.toLowerCase()} #${h}>`}:{label:`<constructed #${h}>`}}function s(f,h){var d,b;try{const m=((b=(d=f.media)==null?void 0:d.mediaText)==null?void 0:b.trim())??"";return!m||m.toLowerCase()==="all"?!0:window.matchMedia(m).matches}catch(m){return h.push(`Failed to evaluate @media: ${String(m)}`),!1}}function l(f,h){var d;try{const b=((d=f.conditionText)==null?void 0:d.trim())??"";return!b||typeof(CSS==null?void 0:CSS.supports)!="function"?!0:CSS.supports(b)}catch(b){return h.push(`Failed to evaluate @supports: ${String(b)}`),!1}}function a(f){const h=[],d=Number((f==null?void 0:f.length)??0);for(let b=0;b<d;b++){let m="";try{m=String(f.item(b)??"").trim()}catch{continue}if(!m.startsWith("--"))continue;let w="",M=!1;try{w=String(f.getPropertyValue(m)??"").trim(),M=f.getPropertyPriority(m)==="important"}catch{}h.push({name:m,value:w,important:M})}return h}function c(f){const h=f instanceof ShadowRoot?"shadow":"document",d=[],b=new Map;let m=0,w=0,M=0;function C(L){const S=b.get(L.name)??[];S.length>=t||(S.push({...L,order:M++}),b.set(L.name,S),w++)}function E(L,S){var g,T,F;for(const _ of Array.from(L)){if(m++,_.type===CSSRule.IMPORT_RULE){const H=_,v=H.styleSheet;if(v&&!S.visited.has(v)){try{const B=((T=(g=H.media)==null?void 0:g.mediaText)==null?void 0:T.trim())??"";if(B&&B.toLowerCase()!=="all"&&!window.matchMedia(B).matches)continue}catch{}if(!r(v))continue;const R=o(v),V=i(v,S.sheetIndex);if(!R){d.push(`Skipped @import (cross-origin): ${V.url??V.label}`);continue}S.visited.add(v);try{E(R,{...S,source:V})}finally{S.visited.delete(v)}}continue}if(_.type===CSSRule.MEDIA_RULE){s(_,d)&&E(_.cssRules,S);continue}if(_.type===CSSRule.SUPPORTS_RULE){l(_,d)&&E(_.cssRules,S);continue}if(_.type===CSSRule.STYLE_RULE){const H=_,v=String(H.selectorText??"").trim()||void 0,R=a(H.style);for(const V of R)C({name:V.name,value:V.value,important:V.important,origin:"rule",rootType:h,styleSheet:S.source,selectorText:v});continue}const D=_;if((F=D.cssRules)!=null&&F.length)try{E(D.cssRules,S)}catch{}}}const y=f,k=[];try{for(const L of Array.from(y.styleSheets??[]))L instanceof CSSStyleSheet&&k.push(L)}catch{}try{const L=Array.from(y.adoptedStyleSheets??[]);for(const S of L)S instanceof CSSStyleSheet&&k.push(S)}catch{}for(let L=0;L<k.length;L++){const S=k[L];if(!r(S))continue;const g=i(S,L),T=o(S);if(!T){d.push(`Skipped stylesheet (cross-origin): ${g.url??g.label}`);continue}E(T,{sheetIndex:L,source:g,visited:new Set([S])})}const j={styleSheets:k.length,rulesScanned:m,tokens:b.size,declarations:w};return{rootType:h,tokens:b,warnings:[...new Set(d)],stats:j}}function u(f){var h;if(f.parentElement)return f.parentElement;try{const d=(h=f.getRootNode)==null?void 0:h.call(f);if(d instanceof ShadowRoot)return d.host}catch{}return null}function p(f,h){const d=Math.max(0,Math.floor((h==null?void 0:h.maxDepth)??n)),b=new Set;let m=f,w=0;for(;m&&w<=d;){w++;try{const M=m.style;if(M){const C=Number(M.length??0);for(let E=0;E<C;E++){const y=String(M.item(E)??"").trim();y.startsWith("--")&&b.add(y)}}}catch{}m=u(m)}return b}return{collectRootIndex:c,collectInlineTokenNames:p}}function Vm(e={}){const t=!!e.enableProbe;function n(a,c){const u=typeof c=="string"?c.trim():"";return u?`var(${a}, ${u})`:`var(${a})`}function o(a){const c=String(a??"").trim();if(!c.toLowerCase().startsWith("var("))return null;let u=0,p=-1;for(let w=0;w<c.length;w++){const M=c[w];if(M==="(")u++;else if(M===")"&&(u--,u===0)){p=w;break}}if(p<0||p!==c.length-1)return null;const f=c.slice(4,p).trim();if(!f)return null;let h=-1;u=0;for(let w=0;w<f.length;w++){const M=f[w];if(M==="(")u++;else if(M===")")u=Math.max(0,u-1);else if(M===","&&u===0){h=w;break}}const d=(h>=0?f.slice(0,h):f).trim(),b=h>=0?f.slice(h+1).trim():"";if(!d.startsWith("--"))return null;const m=d;return b?{name:m,fallback:b}:{name:m}}function r(a){var h;const c=[],u=String(a??""),p=/var\(\s*(--[\w-]+)/g;let f;for(;f=p.exec(u);){const d=(h=f[1])==null?void 0:h.trim();d!=null&&d.startsWith("--")&&c.push(d)}return c}function i(a,c){try{return window.getComputedStyle(a).getPropertyValue(c).trim()}catch{return""}}function s(a,c){const u=i(a,c);return{token:c,computedValue:u,availability:u?"available":"unset"}}function l(a,c,u,p={}){const f=n(c,p.fallback),h=t&&p.preview?"probe":"computed";let d;return h==="computed"&&p.preview&&(d=i(a,c)||void 0),{token:c,cssProperty:u,cssValue:f,resolvedValue:d,method:h}}return{formatCssVar:n,parseCssVar:o,extractCssVarNames:r,readComputedValue:i,resolveToken:s,resolveTokenForProperty:l}}function Bm(e={}){const t=new ze,n=e.now??(()=>performance.now()),o=Math.max(0,Math.floor(e.cacheMaxAgeMs??0)),r=e.observeHead!==!1,i=!!e.observeShadowRoots,s=Math.max(0,Math.floor(e.maxInlineDepth??8)),l=e.detector??Om(e.detectorOptions),a=e.resolver??Vm(e.resolverOptions),c=new WeakMap,u=new WeakSet,p=new Set;function f(_){return _ instanceof ShadowRoot?"shadow":"document"}function h(_,D){const H={root:_,rootType:f(_),reason:D,timestamp:n()};for(const v of p)try{v(H)}catch{}}function d(_){var D;try{const H=(D=_.getRootNode)==null?void 0:D.call(_);return H instanceof ShadowRoot?H:_.ownerDocument??document}catch{return _.ownerDocument??document}}function b(_){if(u.has(_))return;if(u.add(_),_ instanceof ShadowRoot){if(!i)return;t.observeMutation(_,()=>w(_,"shadow_mutation"),{childList:!0,subtree:!0,characterData:!0,attributes:!0});return}if(!r)return;const D=_.head;D&&t.observeMutation(D,()=>w(_,"head_mutation"),{childList:!0,subtree:!0,characterData:!0,attributes:!0})}function m(_){const D=c.get(_);if(D)if(o>0)if(n()-D.collectedAt>=o)w(_,"ttl");else return D.index;else return D.index;const H=l.collectRootIndex(_);return c.set(_,{index:H,collectedAt:n()}),H}function w(_,D="manual"){c.delete(_),h(_,D)}function M(_,D){const H=[...D].sort((v,R)=>v.order-R.order);return{name:_,kind:"unknown",declarations:H}}function C(_,D={}){b(_);const H=m(_),v=[];for(const[R,V]of H.tokens)v.push(M(R,V));return D.sortByName!==!1&&v.sort((R,V)=>R.name.localeCompare(V.name)),{tokens:v,warnings:H.warnings,stats:H.stats}}function E(_,D={}){const H=d(_);b(H);const v=m(H),R=new Set;for(const q of v.tokens.keys())R.add(q);if(D.includeInlineAncestors!==!1){const q=D.inlineMaxDepth??s,ne=l.collectInlineTokenNames(_,{maxDepth:q});for(const A of ne)R.add(A)}const B=[];let $=null;try{$=window.getComputedStyle(_)}catch{}if($)for(const q of R){let ne="";try{ne=$.getPropertyValue(q).trim()}catch{}if(!ne)continue;const A=v.tokens.get(q)??[];B.push({token:M(q,A),computedValue:ne})}return D.sortByName!==!1&&B.sort((q,ne)=>q.token.name.localeCompare(ne.token.name)),{tokens:B,warnings:v.warnings,stats:v.stats}}function y(_,D){return a.resolveToken(_,D)}function k(_,D,H,v){return a.resolveTokenForProperty(_,D,H,v)}function j(_,D){return a.formatCssVar(_,D)}function L(_){return a.parseCssVar(_)}function S(_){return a.extractCssVarNames(_)}function g(_,D,H,v,R){const V=j(v,R==null?void 0:R.fallback);return _.applyStyle(D,H,V,{merge:R==null?void 0:R.merge})}function T(_){return p.add(_),()=>p.delete(_)}function F(){p.clear(),t.dispose()}return{getRootTokens:C,getContextTokens:E,resolveToken:y,resolveTokenForProperty:k,formatCssVar:j,parseCssVar:L,extractCssVarNames:S,invalidateRoot:w,onInvalidation:T,applyTokenToStyle:g,dispose:F}}function zm(e={}){const t={toolbar:!0,breadcrumbs:!0,propertyPanel:!0,...e.ui??{}},n={active:!1,shadowHost:null,canvasOverlay:null,handlesController:null,eventController:null,positionTracker:null,selectionEngine:null,dragReorderController:null,transactionManager:null,executionTracker:null,hmrConsistencyVerifier:null,toolbar:null,breadcrumbs:null,propertyPanel:null,propsBridge:null,tokensService:null,perfMonitor:null,perfHotkeyCleanup:null,hoveredElement:null,pendingHoverTransition:!1,selectedElement:null,applyingSnapshot:null,toolbarPosition:null,propertyPanelPosition:null,uiResizeCleanup:null},o={alt:!1,shift:!1,ctrl:!1,meta:!1};let r=null;function i(x){return!(!(x instanceof HTMLElement)||x instanceof HTMLInputElement||x instanceof HTMLTextAreaElement||x.childElementCount>0)}function s(x){const{element:N,beforeContentEditable:I,beforeSpellcheck:K}=x;I===null?N.removeAttribute("contenteditable"):N.setAttribute("contenteditable",I),N.spellcheck=K,N.style.outline=x.beforeOutline,N.style.outlineOffset=x.beforeOutlineOffset,N.style.boxShadow=x.beforeBoxShadow,N.removeEventListener("keydown",x.keydownHandler,!0),N.removeEventListener("blur",x.blurHandler,!0)}function l(){var K,W,G;const x=r;if(!x)return;r=null;const N=x.element,I=N.textContent??"";N.textContent=I,s(x),x.beforeText!==I&&((K=n.transactionManager)==null||K.recordText(N,x.beforeText,I)),(W=n.positionTracker)==null||W.forceUpdate(!0),n.selectedElement===N&&((G=n.breadcrumbs)==null||G.setTarget(N)),console.log(`${Xe} Text edit committed`)}function a(){var N,I;const x=r;x&&(r=null,x.element.textContent=x.beforeText,s(x),(N=n.positionTracker)==null||N.forceUpdate(!0),n.selectedElement===x.element&&((I=n.breadcrumbs)==null||I.setTarget(x.element)),console.log(`${Xe} Text edit cancelled`))}function c(x,N){var Me,Ce;if(!i(x)||!x.isConnected)return!1;if(n.selectedElement!==x&&p(x,N),(r==null?void 0:r.element)===x)return!0;r&&l();const I=x.textContent??"",K=x.getAttribute("contenteditable"),W=x.spellcheck,G=x.style.outline,X=x.style.outlineOffset,U=x.style.boxShadow,le=Ie=>{var Q;Ie.key==="Escape"&&(Ie.preventDefault(),Ie.stopPropagation(),Ie.stopImmediatePropagation(),a(),(Q=n.eventController)==null||Q.setMode("selecting"))},re=()=>{var Q;const Ie=r;Ie&&((Q=n.eventController)==null||Q.setMode("selecting"),queueMicrotask(()=>{r===Ie&&l()}))};x.addEventListener("keydown",le,!0),x.addEventListener("blur",re,!0),x.setAttribute("contenteditable","true"),x.spellcheck=!1,x.style.outline="none",x.style.outlineOffset="0px",x.style.boxShadow="none";const fe=()=>{if(document.activeElement!==x)try{x.focus({preventScroll:!0})}catch{try{x.focus()}catch{}}},be=()=>{const Ie=window.getSelection();if(Ie)try{const Q=document.createRange();Q.selectNodeContents(x),Q.collapse(!1),Ie.removeAllRanges(),Ie.addRange(Q)}catch{}};return fe(),queueMicrotask(()=>{fe(),be()}),r={element:x,beforeText:I,beforeContentEditable:K,beforeSpellcheck:W,beforeOutline:G,beforeOutlineOffset:X,beforeBoxShadow:U,keydownHandler:le,blurHandler:re},(Me=n.positionTracker)==null||Me.forceUpdate(!0),(Ce=n.breadcrumbs)==null||Ce.setTarget(null),console.log(`${Xe} Text edit started`),!0}function u(x){const N=n.hoveredElement;n.hoveredElement=x;const I=N!==null&&x!==null&&N!==x;n.pendingHoverTransition=I,n.positionTracker&&(n.positionTracker.setHoverElement(x),n.positionTracker.forceUpdate())}function p(x,N){var K,W,G,X;if(r&&r.element!==x)return;n.selectedElement=x,n.hoveredElement=null,n.positionTracker&&(n.positionTracker.setHoverElement(null),n.positionTracker.setSelectionElement(x),n.positionTracker.forceUpdate()),(K=n.breadcrumbs)==null||K.setTarget(x),(W=n.propertyPanel)==null||W.setTarget(x),(G=n.handlesController)==null||G.setTarget(x),(X=n.hmrConsistencyVerifier)==null||X.onSelectionChange(x);const I=N.alt?" (Alt: drill-up)":"";console.log(`${Xe} Selected${I}:`,x.tagName,x)}function f(){var x,N,I,K;n.selectedElement=null,n.positionTracker&&(n.positionTracker.setSelectionElement(null),n.positionTracker.forceUpdate()),(x=n.breadcrumbs)==null||x.setTarget(null),(N=n.propertyPanel)==null||N.setTarget(null),(I=n.handlesController)==null||I.setTarget(null),(K=n.hmrConsistencyVerifier)==null||K.onSelectionChange(null),console.log(`${Xe} Deselected`)}function h(x){var X,U;(X=n.breadcrumbs)==null||X.setAnchorRect(x.selection);const N=n.pendingHoverTransition;if(n.pendingHoverTransition=!1,!n.canvasOverlay)return;const I=!!r,K=!!n.selectedElement&&n.hoveredElement===n.selectedElement,W=I||K?null:x.hover,G=I?null:x.selection;n.canvasOverlay.setHoverRect(W,{animate:N}),n.canvasOverlay.setSelectionRect(G),(U=n.handlesController)==null||U.setSelectionRect(G),n.canvasOverlay.render()}function d(x){var W,G,X,U;const{action:N,undoCount:I,redoCount:K}=x;console.log(`${Xe} Transaction: ${N} (undo: ${I}, redo: ${K})`),(W=n.toolbar)==null||W.setHistory(I,K),(G=n.propertyPanel)==null||G.setHistory(I,K),(N==="undo"||N==="redo")&&((X=n.propertyPanel)==null||X.refresh()),(U=n.hmrConsistencyVerifier)==null||U.onTransactionChange(x),T()}async function b(){throw new Error("å½“å‰æ¨¡å¼ä¸æ”¯æŒåº”ç”¨ä¿®æ”¹")}const m=1,w="web-editor-v2-cache:";let M=null,C=!1;function E(){if(typeof window>"u")return null;const x=window.location.pathname.match(/\/(elements|pages)\/([^/]+)/);return x?`${x[1]}/${x[2]}`:null}function y(){const x=E();return x?`src/${x}/index.tsx`:""}function k(){if(typeof window>"u")return null;const x=E()??window.location.pathname??"",N=String(x??"").trim();return N?`${w}${N}`:null}function j(){if(typeof window>"u")return null;const x=k();if(!x)return null;try{const N=window.localStorage.getItem(x);if(!N)return null;const I=JSON.parse(N);return!I||I.version!==m||!Array.isArray(I.entries)?null:I}catch{return null}}function L(x){if(typeof window>"u")return;const N=k();if(N)try{if(!x||x.length===0){window.localStorage.removeItem(N);return}const I={version:m,path:E()??window.location.pathname??"",updatedAt:Date.now(),entries:x};window.localStorage.setItem(N,JSON.stringify(I))}catch{}}function S(){var G;const x=n.transactionManager;if(!x)return[];const I=x.getUndoStack().slice().map((X,U)=>({tx:X,index:U}));I.sort((X,U)=>{const le=Number(X.tx.timestamp??0),re=Number(U.tx.timestamp??0);return le!==re?le-re:X.index-U.index});const K=new Map;for(const{tx:X}of I){if(X.type!=="style"&&X.type!=="text")continue;const U=X.elementKey?String(X.elementKey):Ft(X.targetLocator),le=K.get(U),re=((G=X.after)==null?void 0:G.locator)??X.targetLocator,fe=le??{locator:re,styleBefore:{},styleAfter:{},textBefore:void 0,textAfter:void 0};if(fe.locator=re,X.type==="style"){const be=X.before.styles??{},Me=X.after.styles??{},Ce=new Set([...Object.keys(be),...Object.keys(Me)]);for(const Ie of Ce){const Q=String(Ie??"").trim();Q&&(Q in fe.styleBefore||(fe.styleBefore[Q]=String(be[Q]??"").trim()),fe.styleAfter[Q]=String(Me[Q]??"").trim())}}X.type==="text"&&(fe.textBefore===void 0&&(fe.textBefore=String(X.before.text??"")),fe.textAfter=String(X.after.text??"")),le||K.set(U,fe)}const W=[];for(const X of K.values()){const U={locator:X.locator},le={},re={},fe=new Set([...Object.keys(X.styleBefore),...Object.keys(X.styleAfter)]);for(const be of fe){const Me=String(X.styleBefore[be]??"").trim(),Ce=String(X.styleAfter[be]??"").trim();Me!==Ce&&(le[be]=Me,re[be]=Ce)}(Object.keys(le).length>0||Object.keys(re).length>0)&&(U.styleChanges={before:le,after:re}),X.textBefore!==void 0&&X.textAfter!==void 0&&X.textBefore!==X.textAfter&&(U.textChange={before:X.textBefore,after:X.textAfter}),!(!U.textChange&&!U.styleChanges)&&W.push(U)}return W}function g(){if(C)return;const x=S();L(x)}function T(){C||(M!==null&&window.clearTimeout(M),M=window.setTimeout(()=>{M=null,g()},120))}function F(x){const N=n.transactionManager;if(N)for(const I of x){const K=Ge(I.locator);if(!(!K||!K.isConnected)){if(I.styleChanges){const W=I.styleChanges.after??{},G=I.styleChanges.before??{};for(const X of Object.keys(W)){const U=String(W[X]??""),le=String(G[X]??""),fe=K.style;fe&&(U.trim()?fe.setProperty(X,U.trim()):fe.removeProperty(X)),N.recordStyle(I.locator,X,le,U,{merge:!1})}}if(I.textChange){const W=String(I.textChange.before??""),G=String(I.textChange.after??"");W!==G&&K instanceof HTMLElement&&(K.textContent=G,N.recordText(K,W,G))}}}}function _(){if(typeof window>"u")return;const x=j();if(!(!x||x.entries.length===0)){C=!0;try{F(x.entries)}finally{C=!1}g()}}function D(x){var K;const N=S();if(N.length===0){L([]);return}const I=[];for(const W of N){const G={locator:W.locator};x==="text"?W.styleChanges&&(G.styleChanges=W.styleChanges):W.textChange&&(G.textChange=W.textChange),!(!G.textChange&&!G.styleChanges)&&I.push(G)}C=!0;try{(K=n.transactionManager)==null||K.clear(),F(I)}finally{C=!1}L(I)}function H(){const x=n.transactionManager;if(!x)return[];const N=Bn(x.getUndoStack()),I=[],K=new Set;for(const W of N){const G=W.netEffect.textChange;if(!G)continue;const X=String(G.before??"").trim(),U=String(G.after??"").trim();if(!X||!U||X===U)continue;const le=`${X}=>${U}`;K.has(le)||(K.add(le),I.push({before:X,after:U}))}return I}function v(){var K,W;const x=n.transactionManager;if(!x)return"";const N=Bn(x.getUndoStack()),I=[];for(const G of N){const X=G.netEffect.styleChanges;if(!X)continue;const U=((W=(K=G.netEffect.locator.selectors)==null?void 0:K.find(re=>String(re??"").trim()))==null?void 0:W.trim())??"";if(!U)continue;const le=Object.entries(X.after??{}).filter(([,re])=>String(re??"").trim()!=="").map(([re,fe])=>`  ${re}: ${String(fe)};`);le.length!==0&&I.push(`${U} {
${le.join(`
`)}
}`)}return I.join(`

`)}function R(x){var I;const N=(I=n.shadowHost)==null?void 0:I.getElements().uiRoot;return N?new Promise(K=>{const W=document.createElement("div");W.className="we-dialog-overlay";const G=document.createElement("div");G.className="we-dialog";const X=document.createElement("div");X.className="we-dialog-header";const U=document.createElement("div");U.textContent=x.title;const le=document.createElement("button");le.type="button",le.className="we-dialog-close",le.setAttribute("aria-label","å…³é—­"),le.textContent="Ã—",X.append(U,le);const re=document.createElement("div");re.className="we-dialog-content",re.textContent=x.content??"";const fe=document.createElement("div");fe.className="we-dialog-actions";const be=document.createElement("button");be.type="button",be.className="we-dialog-action",x.confirmTone==="primary"&&be.classList.add("we-dialog-action--primary"),be.textContent=x.confirmText;const Me=document.createElement("button");Me.type="button",Me.className="we-dialog-action",Me.textContent=x.cancelText??"",fe.append(be),x.cancelText&&fe.append(Me),x.content?G.append(X,re,fe):G.append(X,fe),W.append(G),N.append(W);const Ce=Q=>{W.remove(),window.removeEventListener("keydown",Ie,!0),K(Q)},Ie=Q=>{Q.key==="Escape"&&(Q.preventDefault(),Ce(!1))};window.addEventListener("keydown",Ie,!0),le.addEventListener("click",Q=>{Q.preventDefault(),Ce(!1)}),x.cancelText&&Me.addEventListener("click",Q=>{Q.preventDefault(),Ce(!1)}),be.addEventListener("click",Q=>{Q.preventDefault(),Ce(!0)}),W.addEventListener("click",Q=>{Q.target===W&&Ce(!1)})}):x.cancelText?Promise.resolve(window.confirm(x.content??x.title)):(window.alert(x.content??x.title),Promise.resolve(!0))}function V(x,N){if(!(typeof window>"u"))try{Bt[x](N)}catch{}}async function B(){const x=H();if(x.length===0){await R({title:"ä¿å­˜æ–‡æœ¬",content:"æ²¡æœ‰æ–‡æœ¬æ›´æ”¹ã€‚",confirmText:"çŸ¥é“äº†"});return}const N=E();if(!N){await R({title:"ä¿å­˜æ–‡æœ¬",content:"æ— æ³•è¯†åˆ«å½“å‰é¡µé¢è·¯å¾„ã€‚",confirmText:"çŸ¥é“äº†"});return}const K=(await Promise.all(x.map(async G=>{try{const U=await(await fetch("/api/text-replace/count",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:N,searchText:G.before})})).json();return Number((U==null?void 0:U.count)??0)}catch{return 0}}))).reduce((G,X)=>G+X,0);if(await R({title:"ä¿å­˜æ–‡æœ¬",confirmText:`æ›¿æ¢æ–‡æœ¬ï¼ˆå…± ${K} å¤„ï¼‰`,cancelText:"æš‚ä¸æ›¿æ¢",confirmTone:"primary"}))try{const G=await Promise.all(x.map(async le=>{const re=await fetch("/api/text-replace/replace",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:N,searchText:le.before,replaceText:le.after})}),fe=await re.json().catch(()=>({}));return{ok:re.ok,json:fe}})),X=G.filter(le=>le.ok&&le.json.success!==!1).length,U=G.reduce((le,re)=>{const fe=Number(re.json.changedFiles??0);return le+(Number.isFinite(fe)?fe:0)},0);X===G.length?(await R({title:"ä¿å­˜æ–‡æœ¬",content:`æ›¿æ¢æˆåŠŸï¼å…±ä¿®æ”¹äº† ${U} ä¸ªæ–‡ä»¶ã€‚`,confirmText:"çŸ¥é“äº†"}),D("text")):await R({title:"ä¿å­˜æ–‡æœ¬",content:`éƒ¨åˆ†æ›¿æ¢å¤±è´¥ï¼ŒæˆåŠŸ ${X}/${G.length}ã€‚`,confirmText:"çŸ¥é“äº†"})}catch(G){const X=G instanceof Error?G.message:String(G);await R({title:"ä¿å­˜æ–‡æœ¬",content:`è¯·æ±‚å¤±è´¥ï¼š${X}`,confirmText:"çŸ¥é“äº†"})}}async function $(){const x=v();if(!x){await R({title:"ä¿å­˜æ ·å¼",content:"æ²¡æœ‰æ ·å¼æ›´æ”¹ã€‚",confirmText:"çŸ¥é“äº†"});return}const N=E();if(!N){await R({title:"ä¿å­˜æ ·å¼",content:"æ— æ³•è¯†åˆ«å½“å‰é¡µé¢è·¯å¾„ã€‚",confirmText:"çŸ¥é“äº†"});return}if(await R({title:"æ›´æ–°å¼ºåˆ¶æ ·å¼",content:`ç¡®å®šè¦æ›´æ–°å¼ºåˆ¶æ ·å¼å—ï¼Ÿ

æ­¤æ“ä½œä¼šå°†å½“å‰çš„ CSS ä¿®æ”¹ä¿å­˜åˆ° hack.css æ–‡ä»¶ï¼Œ
é¡µé¢å°†è‡ªåŠ¨çƒ­æ›´æ–°åˆ·æ–°ä»¥åº”ç”¨æ›´æ”¹ã€‚`,confirmText:"æ›´æ–°",cancelText:"å–æ¶ˆ",confirmTone:"primary"}))try{const K=await fetch("/api/hack-css/save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:N,content:x})}),W=await K.json().catch(()=>({}));if(K.ok)await R({title:"ä¿å­˜æ ·å¼",content:"å·²æ›´æ–°å¼ºåˆ¶æ ·å¼ã€‚",confirmText:"çŸ¥é“äº†"}),D("style");else{const G=W.error;await R({title:"ä¿å­˜æ ·å¼",content:`ä¿å­˜å¤±è´¥ï¼š${String(G??K.statusText)}`,confirmText:"çŸ¥é“äº†"})}}catch(K){const W=K instanceof Error?K.message:String(K);await R({title:"ä¿å­˜æ ·å¼",content:`è¯·æ±‚å¤±è´¥ï¼š${W}`,confirmText:"çŸ¥é“äº†"})}}async function q(){var I;const x=n.transactionManager;if(!(!x||!await R({title:"æ¸…ç©ºç¼–è¾‘",content:`ç¡®å®šè¦æ¸…ç©ºå½“å‰ç¼–è¾‘å†…å®¹å—ï¼Ÿ

æ­¤æ“ä½œä¼šæ’¤é”€æœªä¿å­˜çš„æ–‡æœ¬å’Œæ ·å¼æ›´æ”¹ï¼Œå¹¶æ¸…ç©ºç¼“å­˜ã€‚`,confirmText:"æ¸…ç©º",cancelText:"å–æ¶ˆ",confirmTone:"primary"}))){r&&a(),C=!0;try{for(;x.canUndo();)x.undo();x.clear()}finally{C=!1}L([]),(I=n.propertyPanel)==null||I.refresh()}}async function ne(){const x=E();if(!x){await R({title:"æ¸…ç©ºå¼ºåˆ¶æ ·å¼",content:"æ— æ³•è¯†åˆ«å½“å‰é¡µé¢è·¯å¾„ã€‚",confirmText:"çŸ¥é“äº†"});return}if(await R({title:"æ¸…ç©ºå¼ºåˆ¶æ ·å¼",content:`ç¡®å®šè¦æ¸…ç©ºå¼ºåˆ¶æ ·å¼å—ï¼Ÿ

æ­¤æ“ä½œä¼šåˆ é™¤ hack.css æ–‡ä»¶å¹¶æ¸…ç©ºæ‰€æœ‰å¼ºåˆ¶æ ·å¼ï¼Œ
é¡µé¢å°†è‡ªåŠ¨çƒ­æ›´æ–°åˆ·æ–°ä»¥åº”ç”¨æ›´æ”¹ã€‚`,confirmText:"æ¸…ç©º",cancelText:"å–æ¶ˆ",confirmTone:"primary"}))try{const I=await fetch("/api/hack-css/clear",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:x})}),K=await I.json().catch(()=>({}));if(I.ok)await R({title:"æ¸…ç©ºå¼ºåˆ¶æ ·å¼",content:"å·²æ¸…ç©ºå¼ºåˆ¶æ ·å¼ã€‚",confirmText:"çŸ¥é“äº†"}),D("style");else{const W=K.error;await R({title:"æ¸…ç©ºå¼ºåˆ¶æ ·å¼",content:`æ¸…ç©ºå¤±è´¥ï¼š${String(W??I.statusText)}`,confirmText:"çŸ¥é“äº†"})}}catch(I){const K=I instanceof Error?I.message:String(I);await R({title:"æ¸…ç©ºå¼ºåˆ¶æ ·å¼",content:`è¯·æ±‚å¤±è´¥ï¼š${K}`,confirmText:"çŸ¥é“äº†"})}}function A(x){var I;if(!x)return"";const N=(x.selectors??[]).map(K=>String(K??"").trim()).filter(Boolean);return N.length>0?N.join(" | "):(I=x.path)!=null&&I.length?x.path.join(">"):""}function P(x){const N=Ge(x);if(N)return qa(N,x.shadowHostChain);const I=A(x);return I||"element"}function Y(x){const N=A(x.parentLocator)||"unknown-parent",I=x.anchorLocator?A(x.anchorLocator):"",K=x.anchorLocator&&I?`, anchor: ${I} (${x.anchorPosition??"after"})`:"";return`${N} @index ${x.insertIndex}${K}`}function z(x){var W;const N=x.map((G,X)=>({tx:G,index:X}));N.sort((G,X)=>{const U=Number(G.tx.timestamp??0),le=Number(X.tx.timestamp??0);return U!==le?U-le:G.index-X.index});const I=new Map;for(const{tx:G}of N){if(G.type!=="move"||!G.moveData)continue;const X=G.elementKey?String(G.elementKey):Ft(G.targetLocator),U=((W=G.after)==null?void 0:W.locator)??G.targetLocator,le=I.get(X);le?(le.locator=U,le.to=G.moveData.to,le.updatedAt=Number(G.timestamp??0)):I.set(X,{locator:U,from:G.moveData.from,to:G.moveData.to,updatedAt:Number(G.timestamp??0)})}const K=Array.from(I.values()).map(G=>({label:P(G.locator),selectorPath:A(G.locator),from:G.from,to:G.to,updatedAt:G.updatedAt}));return K.sort((G,X)=>X.updatedAt-G.updatedAt||G.label.localeCompare(X.label)),K}function J(){const x=n.transactionManager;if(!x)return"";const N=x.getUndoStack(),I=Bn(N),K=z(N);if(I.length===0&&K.length===0)return"";const W=E()??"",G=y(),X=[];X.push("è¯·æ ¹æ®ä»¥ä¸‹å¯è§†åŒ–ç¼–è¾‘æ›´æ”¹ï¼Œç›´æ¥åœ¨ä»£ç ä¸­è½åœ°ã€‚"),W&&X.push(`é¡µé¢è·¯å¾„: ${W}`),G&&X.push(`ç›®æ ‡æ–‡ä»¶: ${G}`),X.push(""),X.push("æ›´æ”¹æ‘˜è¦:");for(const U of I){X.push(`- ${U.fullLabel||U.label}`);const le=A(U.netEffect.locator);le&&X.push(`  - selector path: ${le}`);const re=U.netEffect.textChange;re&&X.push(`  - æ–‡æœ¬: "${re.before}" -> "${re.after}"`);const fe=U.netEffect.classChanges;fe&&X.push(`  - class: "${(fe.before??[]).join(" ")}" -> "${(fe.after??[]).join(" ")}"`);const be=U.netEffect.styleChanges;if(be){const Me=new Set([...Object.keys(be.before??{}),...Object.keys(be.after??{})]);for(const Ce of Array.from(Me).sort()){const Ie=String((be.before??{})[Ce]??"").trim(),Q=String((be.after??{})[Ce]??"").trim();Ie!==Q&&X.push(`  - ${Ce}: "${Ie}" -> "${Q||"(unset)"}"`)}}}if(K.length>0){X.push(""),X.push("ç»“æ„ç§»åŠ¨:");for(const U of K)X.push(`- ${U.label}`),U.selectorPath&&X.push(`  - selector path: ${U.selectorPath}`),X.push(`  - ä»: ${Y(U.from)}`),X.push(`  - åˆ°: ${Y(U.to)}`)}return X.push(""),X.push("è¾“å‡ºè¦æ±‚:"),X.push("- ç®€è¦è¯´æ˜æ”¹åŠ¨ç‚¹ã€‚"),X.push("- ç»™å‡ºéœ€è¦ä¿®æ”¹çš„æ–‡ä»¶ä¸å…·ä½“ä»£ç ã€‚"),X.join(`
`)}function pe(x){const N=(()=>{if(!x)return[];const I=Ye(x);return[{tag:x.tagName.toLowerCase(),selector:A(I),label:P(I)}]})();return{version:"1",systemContext:"",currentFile:y(),selectedElements:N,extensions:{source:"web-editor-v2",pageUrl:typeof window<"u"?window.location.href:"",targetPath:E(),updatedAt:new Date().toISOString()}}}async function he(x){if(typeof window>"u")return;if(window.parent&&window.parent!==window)try{const K=ll(x);window.parent.postMessage(K,"*");return}catch{}if(x.mode==="selection_context")return;const N=String(x.prompt??"").trim();if(!N)throw new Error("ç¼ºå°‘å‘é€å†…å®¹");const I=await cl({scene:`web-editor-${x.mode}`,client:x.provider??"claude",prompt:N});window.open(I.url,"_blank","noopener,noreferrer")}async function Se(x){try{await he({mode:"selection_context",targetPath:y(),preferCurrentSession:!1,context:pe(x)}),V("success","å·²æ·»åŠ åˆ°å¯¹è¯ä¸Šä¸‹æ–‡ã€‚")}catch(N){const I=N instanceof Error?N.message:String(N);V("error",`æ·»åŠ ä¸Šä¸‹æ–‡å¤±è´¥ï¼š${I}`)}}async function xe(x){const N=J();if(!N){V("warning","æ²¡æœ‰å¯å‘é€çš„æ›´æ”¹ã€‚");return}try{await he({mode:"save",provider:x,prompt:N,targetPath:y(),preferCurrentSession:!1,context:pe(n.selectedElement)}),V("success","å·²æ–°å»ºå¯¹è¯å¹¶å‘é€ç»™ Genieã€‚")}catch(I){const K=I instanceof Error?I.message:String(I);V("error",`å‘é€å¤±è´¥ï¼š${K}`)}}function ae(){const x=n.transactionManager;if(!x)return"";const N=x.getUndoStack(),I=Bn(N),K=z(N);if(I.length===0&&K.length===0)return"";const W=[];if(W.push("è¯·æ ¹æ®ä»¥ä¸‹æ‰€è§å³æ‰€å¾—ä¿®æ”¹ï¼Œåœ¨ä»£ç ä¸­å®ç°åŒæ ·çš„æ”¹åŠ¨ã€‚"),W.push(`é¡µé¢: ${window.location.href}`),W.push(""),I.length>0){W.push("ä¿®æ”¹åˆ—è¡¨:");for(const G of I){W.push(`- ${G.fullLabel||G.label}`);const X=G.debugSource;if(X!=null&&X.file){const be=[X.file,X.line,X.column].filter(Boolean).join(":"),Me=X.componentName?` (${X.componentName})`:"";W.push(`  - å¯èƒ½ç›¸å…³æ–‡ä»¶: ${be}${Me}`)}const U=A(G.netEffect.locator);U&&W.push(`  - selector path: ${U}`);const le=G.netEffect.textChange;le&&W.push(`  - æ–‡æœ¬: "${le.before}" -> "${le.after}"`);const re=G.netEffect.classChanges;if(re){const be=(re.before??[]).join(" "),Me=(re.after??[]).join(" ");W.push(`  - class: "${be}" -> "${Me}"`)}const fe=G.netEffect.styleChanges;if(fe){const be=new Set([...Object.keys(fe.before??{}),...Object.keys(fe.after??{})]),Me=Array.from(be).sort();for(const Ce of Me){const Ie=String((fe.before??{})[Ce]??"").trim(),Q=String((fe.after??{})[Ce]??"").trim();if(Ie===Q)continue;const ce=Q||"(unset)";W.push(`  - ${Ce}: "${Ie}" -> "${ce}"`)}}}}if(K.length>0){W.push(""),W.push("ç§»åŠ¨åˆ—è¡¨:");for(const G of K)W.push(`- ${G.label}`),G.selectorPath&&W.push(`  - selector path: ${G.selectorPath}`),W.push(`  - ä»: ${Y(G.from)}`),W.push(`  - åˆ°: ${Y(G.to)}`)}return W.push(""),W.push("è¾“å‡ºè¦æ±‚:"),W.push("- ç»™å‡ºéœ€è¦ä¿®æ”¹çš„æ–‡ä»¶åˆ—è¡¨ä¸å…·ä½“ä»£ç æ”¹åŠ¨ã€‚"),W.push("- å¦‚æœæ— æ³•å®šä½æ–‡ä»¶ï¼Œè¯·è¯´æ˜éœ€è¦æˆ‘æä¾›ä»€ä¹ˆä¿¡æ¯ã€‚"),W.join(`
`)}async function ee(){var N;const x=ae();if(!x){V("info","æ²¡æœ‰å¯ç”Ÿæˆ prompt çš„æ›´æ”¹ã€‚");return}try{(N=navigator.clipboard)!=null&&N.writeText?await navigator.clipboard.writeText(x):window.prompt("è¯·æ‰‹åŠ¨å¤åˆ¶ä»¥ä¸‹å†…å®¹:",x),V("success","å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ã€‚")}catch{window.prompt("è¯·æ‰‹åŠ¨å¤åˆ¶ä»¥ä¸‹å†…å®¹:",x),V("error","è‡ªåŠ¨å¤åˆ¶å¤±è´¥ï¼ˆå·²æä¾›æ‰‹åŠ¨å¤åˆ¶ï¼‰ã€‚")}}function O(){const x=n.transactionManager;if(!x)return;const N=x.getUndoStack();if(N.length!==0)for(const I of N){if(I.type==="structure")return"æš‚ä¸æ”¯æŒåº”ç”¨ç»“æ„æ“ä½œ";if(I.type!=="style"&&I.type!=="text"&&I.type!=="class"&&I.type!=="move")return`æš‚ä¸æ”¯æŒåº”ç”¨ "${I.type}" äº‹åŠ¡`}}function ie(){if(!E())return"æ— æ³•è¯†åˆ«é¡µé¢è·¯å¾„";if(H().length===0)return"æ²¡æœ‰æ–‡æœ¬æ›´æ”¹"}function ye(){if(!E())return"æ— æ³•è¯†åˆ«é¡µé¢è·¯å¾„";if(!v())return"æ²¡æœ‰æ ·å¼æ›´æ”¹"}async function ve(x){var K;const N=String(x??"").trim();if(!N)return{success:!1,error:"elementKey is required"};const I=n.transactionManager;if(!I)return{success:!1,error:"Transaction manager not ready"};if(n.applyingSnapshot)return{success:!1,error:"åº”ç”¨è¿›è¡Œä¸­ï¼Œæ— æ³•å›é€€"};try{const W=I.getUndoStack(),X=Bn(W).find(Ce=>Ce.elementKey===N);if(!X)return{success:!1,error:"Element not found in current changes"};const U=Ge(X.locator);if(!U||!U.isConnected)return{success:!1,error:"Failed to locate element for revert"};const le={};let re=!1;const fe=X.netEffect.classChanges;if(fe){const Ce=Array.isArray(fe.before)?fe.before:[],Ie=(()=>{try{const ue=U.classList;if(ue&&typeof ue[Symbol.iterator]=="function")return Array.from(ue).filter(Boolean)}catch{}return(U.getAttribute("class")??"").split(/\s+/).map(ue=>ue.trim()).filter(Boolean)})();I.recordClass(U,Ie,Ce)&&(le.class=!0,re=!0)}const be=X.netEffect.textChange;if(be){const Ce=String(be.before??""),Ie=U.textContent??"";Ie!==Ce&&(U.textContent=Ce,I.recordText(U,Ie,Ce)&&(le.text=!0,re=!0))}const Me=X.netEffect.styleChanges;if(Me){const Ce=Me.before??{},Ie=Me.after??{},Q=Array.from(new Set([...Object.keys(Ce),...Object.keys(Ie)])).map(ce=>String(ce??"").trim()).filter(Boolean);if(Q.length>0){const ce=I.beginMultiStyle(U,Q);ce&&(ce.set(Ce),ce.commit({merge:!1})&&(le.style=!0,re=!0))}}return re?((K=n.propertyPanel)==null||K.refresh(),{success:!0,reverted:le}):{success:!1,error:"No changes were reverted"}}catch(W){return console.error(`${Xe} Revert element failed:`,W),{success:!1,error:W instanceof Error?W.message:String(W)}}}function Ae(){n.selectedElement&&(n.eventController?(n.eventController.setMode("hover"),n.selectedElement&&f()):f(),console.log(`${Xe} Selection cleared (from sidepanel)`))}function De(x){console.error(`${Xe} Transaction apply error:`,x)}function Oe(){var x,N,I,K,W,G,X,U,le,re,fe,be,Me,Ce,Ie,Q;if(n.active){console.log(`${Xe} Already active`);return}try{n.shadowHost=Wl({});const ce=n.shadowHost.getElements();if(!(ce!=null&&ce.overlayRoot))throw new Error("Shadow host overlayRoot not available");n.canvasOverlay=pp({container:ce.overlayRoot}),n.perfMonitor=Pm({container:ce.overlayRoot,fpsUiIntervalMs:500,memorySampleIntervalMs:1e3});const ue=me=>{if(me.repeat||!(me.metaKey||me.ctrlKey)||!me.shiftKey||me.altKey||(me.key||"").toLowerCase()!=="p")return;const Le=n.perfMonitor;Le&&(Le.toggle(),me.preventDefault(),me.stopPropagation(),me.stopImmediatePropagation())},Ne={capture:!0,passive:!1};if(window.addEventListener("keydown",ue,Ne),n.perfHotkeyCleanup=()=>{window.removeEventListener("keydown",ue,Ne)},n.selectionEngine=tm({isOverlayElement:n.shadowHost.isOverlayElement}),n.positionTracker=Wp({onPositionUpdate:h}),n.transactionManager=km({enableKeyBindings:!0,isEventFromEditorUi:me=>{var Re;if((Re=n.shadowHost)!=null&&Re.isEventFromUi(me))return!0;const we=r;if(we!=null&&we.element)try{const Le=typeof me.composedPath=="function"?me.composedPath():null;if(Le!=null&&Le.some(Ve=>Ve===we.element))return!0}catch{const Le=me.target;if(Le instanceof Node&&we.element.contains(Le))return!0}return!1},onChange:d,onApplyError:De}),_(),n.handlesController=Rp({container:ce.overlayRoot,canvasOverlay:n.canvasOverlay,transactionManager:n.transactionManager,positionTracker:n.positionTracker}),n.dragReorderController=Pp({isOverlayElement:n.shadowHost.isOverlayElement,uiRoot:ce.uiRoot,canvasOverlay:n.canvasOverlay,positionTracker:n.positionTracker,transactionManager:n.transactionManager}),n.eventController=Bp({isOverlayElement:n.shadowHost.isOverlayElement,onHover:u,onSelect:p,onDeselect:f,onStartEdit:c,findTargetForSelect:(me,we,Re,Le)=>{var Ve;return((Ve=n.selectionEngine)==null?void 0:Ve.findBestTargetFromEvent(Le,Re))??null},getSelectedElement:()=>n.selectedElement,onStartDrag:me=>{var we;return((we=n.dragReorderController)==null?void 0:we.onDragStart(me))??!1},onDragMove:me=>{var we;return(we=n.dragReorderController)==null?void 0:we.onDragMove(me)},onDragEnd:me=>{var we;return(we=n.dragReorderController)==null?void 0:we.onDragEnd(me)},onDragCancel:me=>{var we;return(we=n.dragReorderController)==null?void 0:we.onDragCancel(me)}}),n.executionTracker=null,n.hmrConsistencyVerifier=null,t.toolbar?(n.toolbar=sc({container:ce.uiRoot,dock:"top",initialPosition:n.toolbarPosition,onPositionChange:me=>{n.toolbarPosition=me},getApplyBlockReason:O,getSelectedElement:()=>n.selectedElement,onStructure:me=>{const we=n.selectedElement;if(!we)return;const Re=n.transactionManager;if(!Re)return;const Le=Re.applyStructure(we,me);if(Le)if(me.action==="delete")f();else{const Ve=Ge(Le.targetLocator);Ve&&Ve.isConnected&&p(Ve,o)}},onApply:b,onSaveText:B,onSaveStyle:$,onUndo:()=>{var me;return(me=n.transactionManager)==null?void 0:me.undo()},onRedo:()=>{var me;return(me=n.transactionManager)==null?void 0:me.redo()},getSaveTextBlockReason:ie,getSaveStyleBlockReason:ye,onRequestClose:()=>We()}),n.toolbar.setHistory(n.transactionManager.getUndoStack().length,n.transactionManager.getRedoStack().length)):n.toolbar=null,t.breadcrumbs?n.breadcrumbs=gc({container:ce.uiRoot,dock:"top",onSelect:me=>{me.isConnected&&p(me,o)},onSendToGenie:me=>{me.isConnected&&Se(me)}}):n.breadcrumbs=null,t.propertyPanel?(n.propsBridge=up({}),n.tokensService=Bm(),n.propertyPanel=tp({container:ce.uiRoot,transactionManager:n.transactionManager,propsBridge:n.propsBridge,tokensService:n.tokensService,initialPosition:n.propertyPanelPosition,onPositionChange:me=>{n.propertyPanelPosition=me},defaultTab:"design",showPropsTab:!1,showDomTab:!1,onUndo:()=>{var me;return(me=n.transactionManager)==null?void 0:me.undo()},onRedo:()=>{var me;return(me=n.transactionManager)==null?void 0:me.redo()},onCopyPrompt:ee,onSaveText:B,onSaveStyle:$,onRunWithGenie:me=>xe(me),onClearEdits:q,onClearForcedStyles:ne,onToggleSelectionMode:me=>{var we,Re;me?(we=n.eventController)==null||we.setMode("hover"):(r&&l(),f(),(Re=n.eventController)==null||Re.setMode("interaction"))},getCopyPromptBlockReason:O,getSaveTextBlockReason:ie,getSaveStyleBlockReason:ye,getRunWithGenieBlockReason:O,onSelectElement:me=>{me.isConnected&&p(me,o)},onRequestClose:()=>We()}),n.propertyPanel.setHistory(n.transactionManager.getUndoStack().length,n.transactionManager.getRedoStack().length)):(n.propsBridge=null,n.tokensService=null,n.propertyPanel=null),n.toolbar||n.propertyPanel){let me=null;const we=()=>{const Le=n.toolbarPosition,Ve=n.propertyPanelPosition;n.toolbar&&Le&&n.toolbar.setPosition(Le),n.propertyPanel&&Ve&&n.propertyPanel.setPosition(Ve)},Re=()=>{n.active&&me===null&&(me=window.requestAnimationFrame(()=>{me=null,we()}))};window.addEventListener("resize",Re,{passive:!0}),n.uiResizeCleanup=()=>{window.removeEventListener("resize",Re),me!==null&&(window.cancelAnimationFrame(me),me=null)},we()}else n.uiResizeCleanup=null;n.active=!0,console.log(`${Xe} Started`)}catch(ce){(x=n.uiResizeCleanup)==null||x.call(n),n.uiResizeCleanup=null,(N=n.propertyPanel)==null||N.dispose(),n.propertyPanel=null,(I=n.tokensService)==null||I.dispose(),n.tokensService=null,(K=n.propsBridge)==null||K.dispose(),n.propsBridge=null,(W=n.breadcrumbs)==null||W.dispose(),n.breadcrumbs=null,(G=n.toolbar)==null||G.dispose(),n.toolbar=null,(X=n.eventController)==null||X.dispose(),n.eventController=null,(U=n.dragReorderController)==null||U.dispose(),n.dragReorderController=null,(le=n.handlesController)==null||le.dispose(),n.handlesController=null,(re=n.transactionManager)==null||re.dispose(),n.transactionManager=null,(fe=n.positionTracker)==null||fe.dispose(),n.positionTracker=null,(be=n.selectionEngine)==null||be.dispose(),n.selectionEngine=null,(Me=n.perfHotkeyCleanup)==null||Me.call(n),n.perfHotkeyCleanup=null,(Ce=n.perfMonitor)==null||Ce.dispose(),n.perfMonitor=null,(Ie=n.canvasOverlay)==null||Ie.dispose(),n.canvasOverlay=null,(Q=n.shadowHost)==null||Q.dispose(),n.shadowHost=null,n.hoveredElement=null,n.selectedElement=null,n.applyingSnapshot=null,n.active=!1,console.error(`${Xe} Failed to start:`,ce)}}function We(){var x,N,I,K,W,G,X,U,le,re,fe,be,Me,Ce,Ie,Q,ce,ue;if(n.active){n.active=!1;try{M!==null&&(window.clearTimeout(M),M=null),r&&l(),(x=n.uiResizeCleanup)==null||x.call(n),n.uiResizeCleanup=null,(N=n.propertyPanel)==null||N.dispose(),n.propertyPanel=null,(I=n.tokensService)==null||I.dispose(),n.tokensService=null,(K=n.propsBridge)==null||K.cleanup(),n.propsBridge=null,(W=n.breadcrumbs)==null||W.dispose(),n.breadcrumbs=null,(G=n.toolbar)==null||G.dispose(),n.toolbar=null,(X=n.eventController)==null||X.dispose(),n.eventController=null,(U=n.dragReorderController)==null||U.dispose(),n.dragReorderController=null,(le=n.handlesController)==null||le.dispose(),n.handlesController=null,(re=n.executionTracker)==null||re.dispose(),n.executionTracker=null,(fe=n.hmrConsistencyVerifier)==null||fe.dispose(),n.hmrConsistencyVerifier=null,(be=n.transactionManager)==null||be.dispose(),n.transactionManager=null,(Me=n.positionTracker)==null||Me.dispose(),n.positionTracker=null,(Ce=n.selectionEngine)==null||Ce.dispose(),n.selectionEngine=null,(Ie=n.perfHotkeyCleanup)==null||Ie.call(n),n.perfHotkeyCleanup=null,(Q=n.perfMonitor)==null||Q.dispose(),n.perfMonitor=null,(ce=n.canvasOverlay)==null||ce.dispose(),n.canvasOverlay=null,(ue=n.shadowHost)==null||ue.dispose(),n.shadowHost=null,n.hoveredElement=null,n.selectedElement=null,n.applyingSnapshot=null,console.log(`${Xe} Stopped`)}catch(Ne){console.error(`${Xe} Error during cleanup:`,Ne),n.propertyPanel=null,n.propsBridge=null,n.breadcrumbs=null,n.toolbar=null,n.eventController=null,n.dragReorderController=null,n.handlesController=null,n.transactionManager=null,n.positionTracker=null,n.selectionEngine=null,n.perfHotkeyCleanup=null,n.perfMonitor=null,n.canvasOverlay=null,n.shadowHost=null,n.hoveredElement=null,n.selectedElement=null,n.applyingSnapshot=null}finally{}}}function Fe(){return n.active?We():Oe(),n.active}function _e(){return{active:n.active,version:Al}}function oe(){const x=n.transactionManager;return{undoCount:(x==null?void 0:x.getUndoStack().length)??0,redoCount:(x==null?void 0:x.getRedoStack().length)??0}}return{start:Oe,stop:We,toggle:Fe,getState:_e,getHistoryCounts:oe,revertElement:ve,clearSelection:Ae}}const Hm=(e={})=>{let t=null;const n=()=>{if(!t){const r={toolbar:!1,breadcrumbs:!0,propertyPanel:!0,...e.ui??{}};t=zm({...e,ui:r})}return t},o=()=>{var i;const r=(i=t==null?void 0:t.getHistoryCounts)==null?void 0:i.call(t);return{undoCount:(r==null?void 0:r.undoCount)??0,redoCount:(r==null?void 0:r.redoCount)??0}};return{enable:()=>{typeof window>"u"||n().start()},disable:()=>{t==null||t.stop()},isEnabled:()=>(t==null?void 0:t.getState().active)??!1,getStatus:()=>({active:(t==null?void 0:t.getState().active)??!1,...o()})}},Gm=e=>{if(!e)return"none";const t=new URLSearchParams(e),n=t.get("editor");return n==="inspecta"||n==="textEdit"||n==="webEditorV2"||n==="none"?n:t.get("inspecta")==="true"?"inspecta":"none"},Wm=e=>{const t=e??(typeof window<"u"?Gm(window.location.search):"none"),n=pl(),o=Cl(),r=Hm(),i={inspecta:n,textEdit:o,webEditorV2:r};let s="none",l=!1;const a=()=>{if(typeof window>"u")return;const f=window.DevTemplateBootstrap;f&&(f.inspectaMode=s==="inspecta")},c=async f=>{if(f===s)return;const h=s;s="none",h!=="none"&&await Promise.resolve(i[h].disable()),f!=="none"&&(await Promise.resolve(i[f].enable()),s=f),a()};return{api:{getMode:()=>s,enable:f=>c(f),disable:()=>c("none"),toggle:f=>c(s===f?"none":f),getStatus:()=>({mode:s,webEditor:r.getStatus(),textEdit:o.getStatus(),inspecta:n.getStatus()})},applyInitialMode:()=>{l||(l=!0,s==="none"&&t!=="none"&&c(t))},getMode:()=>s,getInitialMode:()=>t}},{Text:zn,Paragraph:Lo}=nl;let Qt=null;function jm(){const{message:e}=qr.useApp(),[t,n]=Ko.useState(!1),[o,r]=Ko.useState([]);Ko.useEffect(()=>{if(Qt={addError:c=>{const u={...c,timestamp:Date.now()};r(p=>[...p,u]),n(!0)}},window.showErrorDialog=(c,u)=>{Qt==null||Qt.addError({message:c,stack:u})},window.__ERROR_SYSTEM__){window.__ERROR_SYSTEM__.markReactReady();const c=window.__ERROR_SYSTEM__.getErrorQueue();c&&c.length>0&&(console.log(`[Error Dialog] åŠ è½½å¯åŠ¨é˜¶æ®µçš„ ${c.length} ä¸ªé”™è¯¯`),c.forEach(u=>{Qt==null||Qt.addError({message:u.message,stack:u.stack})}))}},[]);const i=()=>{n(!1)},s=()=>{r([]),n(!1)},l=()=>{if(o.length===0)return;const c=o.map((u,p)=>{const f=new Date(u.timestamp).toLocaleTimeString();return`[${p+1}] ${f}
é”™è¯¯ä¿¡æ¯ï¼š${u.message}
å †æ ˆä¿¡æ¯ï¼š
${u.stack||"æ— å †æ ˆä¿¡æ¯"}`}).join(`

`+"=".repeat(80)+`

`);navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(c).then(()=>{e.success("æ‰€æœ‰é”™è¯¯ä¿¡æ¯å·²å¤åˆ¶åˆ°å‰ªè´´æ¿")}).catch(()=>{a(c)}):a(c)},a=c=>{const u=document.createElement("textarea");u.value=c,u.style.position="fixed",u.style.opacity="0",document.body.appendChild(u),u.select();try{document.execCommand("copy"),e.success("é”™è¯¯ä¿¡æ¯å·²å¤åˆ¶åˆ°å‰ªè´´æ¿")}catch{e.error("å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶é”™è¯¯ä¿¡æ¯")}document.body.removeChild(u)};return Ze.jsx(Js,{title:Ze.jsxs(Zo,{children:[Ze.jsx(il,{style:{color:"#ff4d4f"}}),Ze.jsxs("span",{children:["è¿è¡Œæ—¶é”™è¯¯ (",o.length,")"]})]}),open:t,onCancel:i,footer:Ze.jsxs(Zo,{children:[Ze.jsx(Jo,{onClick:s,children:"æ¸…ç©ºå¹¶å…³é—­"}),Ze.jsx(Jo,{onClick:i,children:"å…³é—­"}),Ze.jsx(Jo,{type:"primary",icon:Ze.jsx(rl,{}),onClick:l,children:"å¤åˆ¶æ‰€æœ‰é”™è¯¯"})]}),width:700,style:{top:50},children:o.length>0&&Ze.jsx("div",{style:{maxHeight:"60vh",overflow:"auto"},children:Ze.jsx(ol,{defaultActiveKey:[o.length-1],accordion:!0,items:o.map((c,u)=>({key:u,label:Ze.jsxs(Zo,{children:[Ze.jsx(zn,{type:"secondary",children:new Date(c.timestamp).toLocaleTimeString()}),Ze.jsx(zn,{ellipsis:!0,style:{maxWidth:500},children:c.message})]}),children:Ze.jsxs("div",{children:[Ze.jsx(Lo,{children:Ze.jsx(zn,{strong:!0,children:"é”™è¯¯ä¿¡æ¯ï¼š"})}),Ze.jsx(Lo,{style:{marginBottom:16},children:Ze.jsx(zn,{children:c.message})}),c.stack&&Ze.jsxs(Ze.Fragment,{children:[Ze.jsx(Lo,{children:Ze.jsx(zn,{strong:!0,children:"å †æ ˆä¿¡æ¯ï¼š"})}),Ze.jsx(Lo,{children:Ze.jsx("pre",{style:{background:"#f5f5f5",border:"1px solid #e0e0e0",borderRadius:4,padding:12,fontSize:12,fontFamily:"Monaco, Menlo, Consolas, monospace",color:"#666",overflow:"auto",maxHeight:300,whiteSpace:"pre-wrap",wordBreak:"break-all",margin:0},children:c.stack})})]})]})}))})})})}function qs(e){let t=2166136261;for(let n=0;n<e.length;n++)t^=e.charCodeAt(n),t=Math.imul(t,16777619);return Math.abs(t).toString(36)}function Um(){if(typeof window.__PAGE_FULL_PATH__<"u"){const e=window.__PAGE_FULL_PATH__,t=qs(e);return`${e.split("/").slice(-2).join("-").replace(/\.(tsx|jsx|ts|js)$/,"").replace(/[^a-zA-Z0-9-]/g,"-").slice(0,32)}-${t}`}if(typeof window.__PAGE_ID__<"u")return window.__PAGE_ID__;if(typeof window<"u"){const e=window.location.pathname+window.location.search,t=qs(e);return`${e.replace(/[^a-zA-Z0-9]/g,"-").replace(/^-+|-+$/g,"").slice(0,32)}-${t}`}return null}function Xm(e,t){e&&t&&e.setAttribute("data-page-id",t)}function Ym(){if(typeof window<"u"){const e=document.getElementById("root");if(e){const t=Um();t&&(Xm(e,t),console.log("[Stable ID] Root å…ƒç´ å·²æ³¨å…¥ ID:",t))}}}let Cn=null;function qm(e,t){const n=document.getElementById("root");if(!n){console.error("[Dev Template] æ‰¾ä¸åˆ° #root å…ƒç´ ");return}const r=t||{container:n,config:{},data:{},events:{}};try{Pr(n).render(Ht.createElement(e,r)),console.log("[Dev Template] ç»„ä»¶å·²æ¸²æŸ“");const s=document.createElement("div");s.id="error-dialog-container",document.body.appendChild(s),Pr(s).render(Ht.createElement(qr,null,Ht.createElement(jm))),setTimeout(()=>{Ym(),Cn==null||Cn.applyInitialMode()},0)}catch(i){console.error("[Dev Template] æ¸²æŸ“å¤±è´¥:",i)}}const Km={...al,...sl};if(typeof window<"u"){const e=new URLSearchParams(window.location.search),t=e.get("scale"),n=e.get("width"),o=e.get("height"),r=document.getElementById("root");let i=null;const s=(c,u)=>{r&&(i||(i={width:r.style.width,height:r.style.height}),c&&Number.isFinite(c)?r.style.width=`${Math.round(c)}px`:i&&(r.style.width=i.width),u&&Number.isFinite(u)?r.style.height=`${Math.round(u)}px`:i&&(r.style.height=i.height))},l=()=>{!r||!i||(r.style.width=i.width,r.style.height=i.height,i=null)};if(r){if(t){const c=parseFloat(t);!isNaN(c)&&c>0&&(r.style.transform=`scale(${c})`,r.style.transformOrigin="top left",console.log(`[Dev Template] åº”ç”¨ç¼©æ”¾æ¯”ä¾‹: ${c}`))}if(n||o){if(n){const c=parseInt(n);!isNaN(c)&&c>0&&(r.style.width=`${c}px`,console.log(`[Dev Template] è®¾ç½®å®½åº¦: ${c}px`))}if(o){const c=parseInt(o);!isNaN(c)&&c>0&&(r.style.height=`${c}px`,console.log(`[Dev Template] è®¾ç½®é«˜åº¦: ${c}px`))}}}Cn=Wm();const a=Cn.getInitialMode();window.DevTemplateBootstrap={renderComponent:qm,React:Ht,ReactDOM:Km,inspectaMode:a==="inspecta",editors:Cn.api},console.log("[Dev Template Bootstrap] å·²æŒ‚è½½åˆ°å…¨å±€"),window.addEventListener("message",async c=>{var u,p,f,h;if(c.data&&c.data.type==="CAPTURE_SCREENSHOT"){console.log("[Dev Template] æ”¶åˆ°æˆªå›¾è¯·æ±‚",c.data);const d=window.__ERROR_SYSTEM__,b=((u=d==null?void 0:d.isErrorCaptureEnabled)==null?void 0:u.call(d))??!0;d!=null&&d.setErrorCaptureEnabled&&d.setErrorCaptureEnabled(!1);try{const m=await li(()=>import("./chunks/vendor.js").then(M=>M.a$),__vite__mapDeps([0,1])),w=document.getElementById("root");if(w){const M=w.style.marginLeft,C=w.style.marginRight,E=w.style.width,y=w.style.height;w.style.marginLeft="0",w.style.marginRight="0",c.data.targetWidth&&c.data.targetHeight&&(w.style.width=`${c.data.targetWidth}px`,w.style.height=`${c.data.targetHeight}px`,await new Promise(S=>setTimeout(S,100)));const k=w.scrollWidth,j=w.scrollHeight,L=await m.toPng(w,{width:k,height:j,pixelRatio:2,skipAutoScale:!0,backgroundColor:"#fff",skipFonts:!1,cacheBust:!0});w.style.marginLeft=M,w.style.marginRight=C,w.style.width=E,w.style.height=y,window.parent.postMessage({type:"SCREENSHOT_CAPTURED",dataUrl:L,width:k,height:j},"*"),console.log("[Dev Template] æˆªå›¾æˆåŠŸå¹¶å‘é€")}}catch(m){console.error("[Dev Template] æˆªå›¾å¤±è´¥:",m),window.parent.postMessage({type:"SCREENSHOT_FAILED",error:String(m)},"*")}finally{d!=null&&d.setErrorCaptureEnabled&&b&&d.setErrorCaptureEnabled(!0)}}if(c.data&&c.data.type==="RESET_SCREENSHOT_STYLES"){console.log("[Dev Template] æ”¶åˆ°è¿˜åŸæ ·å¼è¯·æ±‚");const d=document.getElementById("root");d&&(d.style.width="",d.style.height="",d.style.marginLeft="",d.style.marginRight="",console.log("[Dev Template] æ ·å¼å·²è¿˜åŸ"))}if(c.data&&c.data.type==="WEB_EDITOR_SET_ROOT_SIZE"){const d=Number(c.data.width),b=c.data.height?Number(c.data.height):void 0;Number.isFinite(d)&&(s(d,b),console.log("[Dev Template] WebEditor è®¾ç½® root å°ºå¯¸",{width:d,height:b}))}if(c.data&&c.data.type==="WEB_EDITOR_RESET_ROOT_SIZE"&&(l(),console.log("[Dev Template] WebEditor æ¢å¤ root å°ºå¯¸")),c.data&&c.data.type==="EXPORT_FIGMA_JSON"){console.log("[Dev Template] æ”¶åˆ° Figma å¯¼å‡ºè¯·æ±‚",c.data);try{const d=await li(()=>import("./chunks/index2.js"),__vite__mapDeps([2,0,1])),{htmlToFigma:b}=d,m=document.getElementById("root"),w=m==null?void 0:m.getAttribute("data-page-id"),M=m==null?void 0:m.getAttribute("data-component-id"),C=w||M||((p=c.data)==null?void 0:p.widgetId),E=((f=c.data)==null?void 0:f.enableAutoLayout)!==!1,y=await b("#root",{rootName:((h=c.data)==null?void 0:h.rootName)||document.title||"FRAME",widgetId:C,enableAutoLayout:E});window.parent.postMessage({type:"FIGMA_JSON_READY",success:!0,json:y,...w?{pageId:w}:{},...M?{widgetId:M}:C?{widgetId:C}:{}},"*")}catch(d){console.error("[Dev Template] Figma å¯¼å‡ºå¤±è´¥:",d),window.parent.postMessage({type:"FIGMA_JSON_READY",success:!1,error:String(d)},"*")}}})}
